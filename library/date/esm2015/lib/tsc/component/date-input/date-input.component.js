import { Component, EventEmitter, Input, Output } from '@angular/core';
import { FormControl } from '@angular/forms';
import * as moment from 'moment-timezone';
import { DateInputTypeEnum, DateTypeEnum } from '../../enum/date.enum';
// tsc-library
import { FormErrorEnum, MaterialFormFieldAppearance } from '@library/tsc-common';
import * as i0 from "@angular/core";
import * as i1 from "../../service/date.service";
import * as i2 from "@angular/material/form-field";
import * as i3 from "@angular/material/datepicker";
import * as i4 from "../../directive/date-month-year-format.directive";
import * as i5 from "@angular/common";
import * as i6 from "@angular/material/input";
import * as i7 from "@angular/forms";
import * as i8 from "ngx-daterangepicker-material";
// /tsc-library/
export class DateInputComponent {
    constructor(dateService) {
        this.dateService = dateService;
        this.dateInputTypeEnum = DateInputTypeEnum;
        this.dateTypeEnum = DateTypeEnum;
        this.formErrorEnum = FormErrorEnum;
        this.materialFormFieldAppearance = MaterialFormFieldAppearance;
        this.emitFilter = new EventEmitter();
        this.dateType = this.dateTypeEnum.INCLUSIVE;
        this.formFieldAppearance = '';
        this.label = '';
        this.cDRformat = 'YYYY-MM-DD';
        this.timezone = 'UTC';
        this.range = null;
        this.materialFieldWidth = false;
        this.isMandatoryField = false;
        this.showCdrRangeLabel = false;
        this.showRange = false;
        this.showDefaultDuration = false;
        this.showTimeInCDR = false;
        this.daterange = new FormControl();
        this.durationFC = new FormControl();
        this.startDateFC = new FormControl();
        this.endDateFC = new FormControl();
    }
    ngOnInit() {
        this.date = moment().tz(this.timezone).format();
    }
    ngOnChanges(changes) {
        if (changes.materialFormFieldAppearanceInp && this.materialFormFieldAppearanceInp) {
            this.formFieldAppearance = this.materialFormFieldAppearanceInp;
        }
        if (changes.materialFieldWidthInp && this.materialFieldWidthInp) {
            this.materialFieldWidth = this.materialFieldWidthInp;
        }
        if (changes.isMandatoryFieldInp && this.isMandatoryFieldInp) {
            this.isMandatoryField = this.isMandatoryFieldInp;
        }
        if (changes.labelInp && this.labelInp) {
            this.label = this.labelInp;
        }
        if (changes.cdrFormatInp && this.cdrFormatInp) {
            this.cDRformat = this.cdrFormatInp;
        }
        if (changes.showCdrRangeLabelInp && this.showCdrRangeLabelInp) {
            this.showCdrRangeLabel = this.showCdrRangeLabelInp;
        }
        if (changes.showRangeInp && this.showRangeInp) {
            this.showRange = this.showRangeInp;
        }
        if (changes.rangeInp && this.rangeInp) {
            this.range = this.rangeInp;
        }
        if (changes.showTimeInCDRInp && this.showTimeInCDRInp) {
            this.showTimeInCDR = this.showTimeInCDRInp;
        }
        if (changes.dateTypeInp && this.dateTypeInp) {
            this.dateType = this.dateTypeInp;
        }
        if (changes.timezoneInp && this.timezoneInp) {
            this.timezone = this.timezoneInp;
        }
        if (changes.dateInputTypeInp && this.dateInputTypeInp) {
            this.dateInputType = this.dateInputTypeInp;
        }
        if (changes.showDefaultDurationInp && this.showDefaultDurationInp) {
            this.showDefaultDuration = this.showDefaultDurationInp;
            this.patchDefaultConfig();
        }
        if (changes.frequencyInp && this.frequencyInp) {
            this.patchDefaultConfig();
        }
    }
    patchDefaultConfig() {
        if (this.dateInputType == this.dateInputTypeEnum.DAY_INPUT) {
            if (this.showDefaultDuration) {
                this.durationFC.patchValue(moment(this.date).format('YYYY-MM-DD'));
                this.startDateFC.patchValue(moment().startOf('day').tz(this.timezone).format());
                const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
                    ? moment().tz(this.timezone).format()
                    : moment().add(1, 'days').startOf('day').tz(this.timezone).format();
                this.endDateFC.patchValue(endDateValue);
            }
        }
        else if (this.dateInputType == this.dateInputTypeEnum.MONTH_INPUT) {
            if (this.showDefaultDuration) {
                this.durationFC.patchValue(moment(this.date).format('YYYY-MM'));
                this.startDateFC.patchValue(moment().startOf('month').tz(this.timezone).format());
                const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
                    ? moment().endOf('month').tz(this.timezone).format()
                    : moment().add(1, 'months').startOf('month').tz(this.timezone).format();
                this.endDateFC.patchValue(endDateValue);
            }
        }
        else if (this.dateInputType == this.dateInputTypeEnum.YEAR_INPUT) {
            if (this.showDefaultDuration) {
                this.durationFC.patchValue(moment(this.date).format('YYYY'));
                this.startDateFC.patchValue(moment().startOf('year').tz(this.timezone).format());
                const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
                    ? moment().endOf('year').tz(this.timezone).format()
                    : moment().add(1, 'year').startOf('year').tz(this.timezone).format();
                this.endDateFC.patchValue(endDateValue);
            }
        }
        else if (this.dateInputType == this.dateInputTypeEnum.CUSTOM_INPUT) {
            if (this.showDefaultDuration) {
                if (this.showTimeInCDR) {
                    this.daterange.patchValue({ startDate: moment().set({ hour: 0, minute: 0, second: 0, millisecond: 0 }).startOf('day'), endDate: moment() });
                }
                else {
                    this.daterange.patchValue({ startDate: moment().startOf('day'), endDate: moment() });
                }
                this.startDateFC.patchValue(moment(this.daterange.value.startDate).tz(this.timezone).format());
                this.endDateFC.patchValue(moment(this.daterange.value.endDate).tz(this.timezone).format());
            }
        }
    }
    ngAfterViewInit() {
        this.emitFilter.emit();
    }
    dayDateInput(selectedDate) {
        let duration = this.dateService.dailySelectedHandler(selectedDate);
        this.durationFC.patchValue(duration);
        this.startDateFC.patchValue(moment(selectedDate).startOf('day').tz(this.timezone).format());
        const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
            ? moment(selectedDate).endOf('day').tz(this.timezone).format()
            : moment(selectedDate).add(1, 'days').startOf('day').tz(this.timezone).format();
        this.endDateFC.patchValue(endDateValue);
        this.emitFilter.emit();
    }
    monthDateInput(selectedDate, datepicker) {
        let duration = this.dateService.handleDateInput(selectedDate, datepicker, "YYYY-MM");
        this.durationFC.patchValue(duration);
        this.startDateFC.patchValue(moment(selectedDate).startOf('month').tz(this.timezone).format());
        const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
            ? moment(selectedDate).endOf('month').tz(this.timezone).format()
            : moment(selectedDate).add(1, 'months').startOf('month').tz(this.timezone).format();
        this.endDateFC.patchValue(endDateValue);
        this.emitFilter.emit();
    }
    yearDateInput(selectedDate, datepicker) {
        let duration = this.dateService.handleDateInput(selectedDate, datepicker, "YYYY");
        this.durationFC.patchValue(duration);
        this.startDateFC.patchValue(moment(selectedDate).startOf('year').tz(this.timezone).format());
        const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
            ? moment(selectedDate).endOf('year').tz(this.timezone).format()
            : moment(selectedDate).add(1, 'year').startOf('year').tz(this.timezone).format();
        this.endDateFC.patchValue(endDateValue);
        this.emitFilter.emit();
    }
    customDateInput(selectedDate) {
        this.startDateFC.patchValue(moment(selectedDate.startDate).tz(this.timezone).format());
        this.endDateFC.patchValue(moment(selectedDate.endDate).tz(this.timezone).format());
        this.emitFilter.emit();
    }
}
DateInputComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: DateInputComponent, deps: [{ token: i1.DateService }], target: i0.ɵɵFactoryTarget.Component });
DateInputComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: DateInputComponent, selector: "lib-date-input", inputs: { materialFormFieldAppearanceInp: "materialFormFieldAppearanceInp", materialFieldWidthInp: "materialFieldWidthInp", frequencyInp: "frequencyInp", dateInputTypeInp: "dateInputTypeInp", dateTypeInp: "dateTypeInp", timezoneInp: "timezoneInp", labelInp: "labelInp", rangeInp: "rangeInp", cdrFormatInp: "cdrFormatInp", isMandatoryFieldInp: "isMandatoryFieldInp", showRangeInp: "showRangeInp", showCdrRangeLabelInp: "showCdrRangeLabelInp", showDefaultDurationInp: "showDefaultDurationInp", showTimeInCDRInp: "showTimeInCDRInp" }, outputs: { emitFilter: "emitFilter" }, usesOnChanges: true, ngImport: i0, template: "<mat-form-field [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.DAY_INPUT, 'matFieldWidth100': materialFieldWidth}\" [appearance]=\"formFieldAppearance\"\n    id=\"dailyField\" appDateMonthYearFormat (click)=\"dateService.openDatepickerOnClick(daily)\"\n    (keydown.arrowdown)=\"dateService.openDatepickerOnClick(daily)\"\n    (keydown.enter)=\"dateService.openDatepickerOnClick(daily)\">\n    <mat-label> {{ label }} </mat-label>\n    <input matInput class=\"noFocus\" [matDatepicker]=\"daily\" [formControl]=\"durationFC\" [max]=\"date\"\n        (dateInput)=\"dayDateInput($event.value)\" [required]=\"isMandatoryField\" readOnly/>\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"daily\"></mat-datepicker-toggle>\n    <mat-datepicker #daily (closed)=\"dateService.takeFocusAway('dailyField')\"></mat-datepicker>\n    <mat-error *ngIf=\"durationFC.touched && durationFC.hasError('required')\">\n        {{ formErrorEnum.REQUIRED }}\n    </mat-error>\n</mat-form-field>\n\n\n<mat-form-field class=\"cursorPointer\"\n    [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.MONTH_INPUT, 'matFieldWidth100': materialFieldWidth}\"\n    [appearance]=\"formFieldAppearance\" id=\"monthlyField\" appMonthYearFormat\n    (click)=\"dateService.openDatepickerOnClick(monthly)\"\n    (keydown.arrowdown)=\"dateService.openDatepickerOnClick(monthly)\"\n    (keydown.enter)=\"dateService.openDatepickerOnClick(monthly)\">\n    <mat-label> {{ label }} </mat-label>\n    <input matInput [matDatepicker]=\"monthly\" [formControl]=\"durationFC\" [max]=\"date\" [required]=\"isMandatoryField\" readOnly/>\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"monthly\"></mat-datepicker-toggle>\n    <mat-datepicker #monthly panelClass=\"monthPicker\" startView=\"year\" (monthSelected)=\"monthDateInput($event, monthly)\"\n        (closed)=\"dateService.takeFocusAway('monthlyField')\"></mat-datepicker>\n    <mat-error *ngIf=\"durationFC.touched && durationFC.hasError('required')\">\n        {{ formErrorEnum.REQUIRED }}\n    </mat-error>\n</mat-form-field>\n\n<mat-form-field class=\"cursorPointer\"\n    [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.YEAR_INPUT, 'matFieldWidth100': materialFieldWidth}\"\n    [appearance]=\"formFieldAppearance\" id=\"yearlyField\" appYearFormat\n    (click)=\"dateService.openDatepickerOnClick(yearly)\" (keydown.arrowdown)=\"dateService.openDatepickerOnClick(yearly)\"\n    (keydown.enter)=\"dateService.openDatepickerOnClick(yearly)\">\n    <mat-label> {{ label }} </mat-label>\n    <input matInput [matDatepicker]=\"yearly\" [formControl]=\"durationFC\" [max]=\"date\" [required]=\"isMandatoryField\" readOnly/>\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"yearly\"></mat-datepicker-toggle>\n    <mat-datepicker #yearly startView=\"multi-year\" panelClass=\"yearPicker\"\n        (yearSelected)=\"yearDateInput($event, yearly)\"\n        (closed)=\"dateService.takeFocusAway('yearlyField')\"></mat-datepicker>\n    <mat-error *ngIf=\"durationFC.touched && durationFC.hasError('required')\">\n        {{ formErrorEnum.REQUIRED }}\n    </mat-error>\n</mat-form-field>\n\n<mat-form-field class=\"cursorPointer\"\n    [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.CUSTOM_INPUT, 'matFieldWidth100': materialFieldWidth}\"\n    [appearance]=\"formFieldAppearance\">\n    <mat-label> {{ label }} </mat-label>\n    <input type=\"text\" matInput ngxDaterangepickerMd\n        [locale]=\"{direction: 'ltr', applyLabel: 'Apply', format: cDRformat, customRangeLabel: 'Custom Range'}\"\n        [showCustomRangeLabel]=\"showCdrRangeLabel\" [timePicker]=\"showTimeInCDR\" [ranges]=\"showRange ? range : null\"\n        [drops]=\"'down'\" [opens]=\"'right'\" [alwaysShowCalendars]=\"true\" [keepCalendarOpeningWithRange]=\"true\"\n        [showDropdowns]=\"true\" [showCancel]=\"true\" autocomplete=\"off\" name=\"daterange\" [formControl]=\"daterange\"\n        (ngModelChange)=\"customDateInput(daterange.value)\" [required]=\"isMandatoryField\" readOnly/>\n    <mat-error *ngIf=\"daterange.touched && daterange.hasError('required')\">\n        {{ formErrorEnum.REQUIRED }}\n    </mat-error>\n</mat-form-field>", components: [{ type: i2.MatFormField, selector: "mat-form-field", inputs: ["color", "floatLabel", "appearance", "hideRequiredMarker", "hintLabel"], exportAs: ["matFormField"] }, { type: i3.MatDatepickerToggle, selector: "mat-datepicker-toggle", inputs: ["tabIndex", "disabled", "for", "aria-label", "disableRipple"], exportAs: ["matDatepickerToggle"] }, { type: i3.MatDatepicker, selector: "mat-datepicker", exportAs: ["matDatepicker"] }], directives: [{ type: i4.DateMonthYearFormatDirective, selector: "[appDateMonthYearFormat]" }, { type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i2.MatLabel, selector: "mat-label" }, { type: i6.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["id", "disabled", "required", "type", "value", "readonly", "placeholder", "errorStateMatcher", "aria-describedby"], exportAs: ["matInput"] }, { type: i3.MatDatepickerInput, selector: "input[matDatepicker]", inputs: ["matDatepicker", "min", "max", "matDatepickerFilter"], exportAs: ["matDatepickerInput"] }, { type: i7.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i7.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i7.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i2.MatSuffix, selector: "[matSuffix]" }, { type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i2.MatError, selector: "mat-error", inputs: ["id"] }, { type: i4.MonthYearFormatDirective, selector: "[appMonthYearFormat]" }, { type: i4.YearFormatDirective, selector: "[appYearFormat]" }, { type: i8.DaterangepickerDirective, selector: "input[ngxDaterangepickerMd]", inputs: ["dateLimit", "showCancel", "lockStartDate", "timePicker", "timePicker24Hour", "timePickerIncrement", "timePickerSeconds", "closeOnAutoApply", "_endKey", "drops", "opens", "locale", "startKey", "endKey", "minDate", "maxDate", "autoApply", "alwaysShowCalendars", "showCustomRangeLabel", "linkedCalendars", "singleDatePicker", "showWeekNumbers", "showISOWeekNumbers", "showDropdowns", "isInvalidDate", "isCustomDate", "isTooltipDate", "showClearButton", "customRangeDirection", "ranges", "lastMonthDayClass", "emptyWeekRowClass", "emptyWeekColumnClass", "firstDayOfNextMonthClass", "lastDayOfPreviousMonthClass", "keepCalendarOpeningWithRange", "showRangeLabelOnInput"], outputs: ["change", "rangeClicked", "datesUpdated", "startDateChanged", "endDateChanged"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: DateInputComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-date-input',
                    templateUrl: './date-input.component.html',
                    styleUrls: []
                }]
        }], ctorParameters: function () { return [{ type: i1.DateService }]; }, propDecorators: { materialFormFieldAppearanceInp: [{
                type: Input
            }], materialFieldWidthInp: [{
                type: Input
            }], frequencyInp: [{
                type: Input
            }], dateInputTypeInp: [{
                type: Input
            }], dateTypeInp: [{
                type: Input
            }], timezoneInp: [{
                type: Input
            }], labelInp: [{
                type: Input
            }], rangeInp: [{
                type: Input
            }], cdrFormatInp: [{
                type: Input
            }], isMandatoryFieldInp: [{
                type: Input
            }], showRangeInp: [{
                type: Input
            }], showCdrRangeLabelInp: [{
                type: Input
            }], showDefaultDurationInp: [{
                type: Input
            }], showTimeInCDRInp: [{
                type: Input
            }], emitFilter: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1pbnB1dC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L2RhdGUvc3JjL2xpYi90c2MvY29tcG9uZW50L2RhdGUtaW5wdXQvZGF0ZS1pbnB1dC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L2RhdGUvc3JjL2xpYi90c2MvY29tcG9uZW50L2RhdGUtaW5wdXQvZGF0ZS1pbnB1dC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUU5RixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFLN0MsT0FBTyxLQUFLLE1BQU0sTUFBTSxpQkFBaUIsQ0FBQztBQUUxQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFJdkUsY0FBYztBQUNkLE9BQU8sRUFBRSxhQUFhLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQzs7Ozs7Ozs7OztBQUNqRixnQkFBZ0I7QUFRaEIsTUFBTSxPQUFPLGtCQUFrQjtJQXdFM0IsWUFDVyxXQUF3QjtRQUF4QixnQkFBVyxHQUFYLFdBQVcsQ0FBYTtRQXZFbkMsc0JBQWlCLEdBQUcsaUJBQWlCLENBQUM7UUFDdEMsaUJBQVksR0FBRyxZQUFZLENBQUM7UUFDNUIsa0JBQWEsR0FBRyxhQUFhLENBQUM7UUFDOUIsZ0NBQTJCLEdBQUcsMkJBQTJCLENBQUM7UUE0QzFELGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBR2hDLGFBQVEsR0FBaUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUM7UUFDckQsd0JBQW1CLEdBQUcsRUFBRSxDQUFDO1FBR3pCLFVB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RXZlbnRFbWl0dGVyLCBJbnB1dCwgT25Jbml0LCBPdXRwdXQsIFNpbXBsZUNoYW5nZXMgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgRm9ybUNvbnRyb2wgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IE1hdERhdGVwaWNrZXIgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kYXRlcGlja2VyJztcblxuaW1wb3J0IHsgTW9tZW50IH0gZnJvbSAnbW9tZW50JztcbmltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQtdGltZXpvbmUnO1xuXG5pbXBvcnQgeyBEYXRlSW5wdXRUeXBlRW51bSwgRGF0ZVR5cGVFbnVtIH0gZnJvbSAnLi4vLi4vZW51bS9kYXRlLmVudW0nO1xuXG5pbXBvcnQgeyBEYXRlU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvZGF0ZS5zZXJ2aWNlJztcblxuLy8gdHNjLWxpYnJhcnlcbmltcG9ydCB7IEZvcm1FcnJvckVudW0sIE1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZSB9IGZyb20gJ0BsaWJyYXJ5L3RzYy1jb21tb24nO1xuLy8gL3RzYy1saWJyYXJ5L1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2xpYi1kYXRlLWlucHV0JyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vZGF0ZS1pbnB1dC5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbXVxufSlcblxuZXhwb3J0IGNsYXNzIERhdGVJbnB1dENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICBkYXRlSW5wdXRUeXBlRW51bSA9IERhdGVJbnB1dFR5cGVFbnVtO1xuICAgIGRhdGVUeXBlRW51bSA9IERhdGVUeXBlRW51bTtcbiAgICBmb3JtRXJyb3JFbnVtID0gRm9ybUVycm9yRW51bTtcbiAgICBtYXRlcmlhbEZvcm1GaWVsZEFwcGVhcmFuY2UgPSBNYXRlcmlhbEZvcm1GaWVsZEFwcGVhcmFuY2U7XG5cbiAgICBASW5wdXQoKVxuICAgIG1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZUlucDogTWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlO1xuXG4gICAgQElucHV0KClcbiAgICBtYXRlcmlhbEZpZWxkV2lkdGhJbnA6IGJvb2xlYW47XG5cbiAgICBASW5wdXQoKSBmcmVxdWVuY3lJbnA6IGFueVxuXG4gICAgQElucHV0KClcbiAgICBkYXRlSW5wdXRUeXBlSW5wOiBEYXRlSW5wdXRUeXBlRW51bTtcblxuICAgIEBJbnB1dCgpXG4gICAgZGF0ZVR5cGVJbnA6IERhdGVUeXBlRW51bTtcblxuICAgIEBJbnB1dCgpXG4gICAgdGltZXpvbmVJbnA6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgbGFiZWxJbnA6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgcmFuZ2VJbnA6IGFueTtcblxuICAgIEBJbnB1dCgpXG4gICAgY2RyRm9ybWF0SW5wOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIGlzTWFuZGF0b3J5RmllbGRJbnA6IGJvb2xlYW47XG5cbiAgICBASW5wdXQoKVxuICAgIHNob3dSYW5nZUlucDogYm9vbGVhbjtcblxuICAgIEBJbnB1dCgpXG4gICAgc2hvd0NkclJhbmdlTGFiZWxJbnA6IGJvb2xlYW47XG5cbiAgICBASW5wdXQoKVxuICAgIHNob3dEZWZhdWx0RHVyYXRpb25JbnA6IGJvb2xlYW47XG5cbiAgICBASW5wdXQoKVxuICAgIHNob3dUaW1lSW5DRFJJbnA6IGJvb2xlYW47XG5cbiAgICBAT3V0cHV0KClcbiAgICBlbWl0RmlsdGVyID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuXG4gICAgZGF0ZUlucHV0VHlwZTogRGF0ZUlucHV0VHlwZUVudW07XG4gICAgZGF0ZVR5cGU6IERhdGVUeXBlRW51bSA9IHRoaXMuZGF0ZVR5cGVFbnVtLklOQ0xVU0lWRTtcbiAgICBmb3JtRmllbGRBcHBlYXJhbmNlID0gJyc7XG5cbiAgICBkYXRlOiBhbnk7XG4gICAgbGFiZWw6IHN0cmluZyA9ICcnO1xuICAgIGNEUmZvcm1hdDogc3RyaW5nID0gJ1lZWVktTU0tREQnXG4gICAgdGltZXpvbmU6IHN0cmluZyA9ICdVVEMnO1xuICAgIHJhbmdlOiBhbnkgPSBudWxsO1xuICAgIG1hdGVyaWFsRmllbGRXaWR0aDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGlzTWFuZGF0b3J5RmllbGQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzaG93Q2RyUmFuZ2VMYWJlbDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHNob3dSYW5nZTogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHNob3dEZWZhdWx0RHVyYXRpb246IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzaG93VGltZUluQ0RSOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBkYXRlcmFuZ2UgPSBuZXcgRm9ybUNvbnRyb2woKTtcbiAgICBkdXJhdGlvbkZDID0gbmV3IEZvcm1Db250cm9sKCk7XG4gICAgc3RhcnREYXRlRkMgPSBuZXcgRm9ybUNvbnRyb2woKTtcbiAgICBlbmREYXRlRkMgPSBuZXcgRm9ybUNvbnRyb2woKTtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwdWJsaWMgZGF0ZVNlcnZpY2U6IERhdGVTZXJ2aWNlLFxuICAgICkgeyB9XG5cbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5kYXRlID0gbW9tZW50KCkudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCk7XG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgICAgICBpZiAoY2hhbmdlcy5tYXRlcmlhbEZvcm1GaWVsZEFwcGVhcmFuY2VJbnAgJiYgdGhpcy5tYXRlcmlhbEZvcm1GaWVsZEFwcGVhcmFuY2VJbnApIHtcbiAgICAgICAgICAgIHRoaXMuZm9ybUZpZWxkQXBwZWFyYW5jZSA9IHRoaXMubWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlSW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMubWF0ZXJpYWxGaWVsZFdpZHRoSW5wICYmIHRoaXMubWF0ZXJpYWxGaWVsZFdpZHRoSW5wKSB7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsRmllbGRXaWR0aCA9IHRoaXMubWF0ZXJpYWxGaWVsZFdpZHRoSW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuaXNNYW5kYXRvcnlGaWVsZElucCAmJiB0aGlzLmlzTWFuZGF0b3J5RmllbGRJbnApIHtcbiAgICAgICAgICAgIHRoaXMuaXNNYW5kYXRvcnlGaWVsZCA9IHRoaXMuaXNNYW5kYXRvcnlGaWVsZElucDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLmxhYmVsSW5wICYmIHRoaXMubGFiZWxJbnApIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWwgPSB0aGlzLmxhYmVsSW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuY2RyRm9ybWF0SW5wICYmIHRoaXMuY2RyRm9ybWF0SW5wKSB7XG4gICAgICAgICAgICB0aGlzLmNEUmZvcm1hdCA9IHRoaXMuY2RyRm9ybWF0SW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0NkclJhbmdlTGFiZWxJbnAgJiYgdGhpcy5zaG93Q2RyUmFuZ2VMYWJlbElucCkge1xuICAgICAgICAgICAgdGhpcy5zaG93Q2RyUmFuZ2VMYWJlbCA9IHRoaXMuc2hvd0NkclJhbmdlTGFiZWxJbnA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy5zaG93UmFuZ2VJbnAgJiYgdGhpcy5zaG93UmFuZ2VJbnApIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1JhbmdlID0gdGhpcy5zaG93UmFuZ2VJbnA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy5yYW5nZUlucCAmJiB0aGlzLnJhbmdlSW5wKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZUlucDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dUaW1lSW5DRFJJbnAgJiYgdGhpcy5zaG93VGltZUluQ0RSSW5wKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dUaW1lSW5DRFIgPSB0aGlzLnNob3dUaW1lSW5DRFJJbnA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy5kYXRlVHlwZUlucCAmJiB0aGlzLmRhdGVUeXBlSW5wKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGVUeXBlID0gdGhpcy5kYXRlVHlwZUlucDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLnRpbWV6b25lSW5wICYmIHRoaXMudGltZXpvbmVJbnApIHtcbiAgICAgICAgICAgIHRoaXMudGltZXpvbmUgPSB0aGlzLnRpbWV6b25lSW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0ZUlucHV0VHlwZUlucCAmJiB0aGlzLmRhdGVJbnB1dFR5cGVJbnApIHtcbiAgICAgICAgICAgIHRoaXMuZGF0ZUlucHV0VHlwZSA9IHRoaXMuZGF0ZUlucHV0VHlwZUlucDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dEZWZhdWx0RHVyYXRpb25JbnAgJiYgdGhpcy5zaG93RGVmYXVsdER1cmF0aW9uSW5wKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dEZWZhdWx0RHVyYXRpb24gPSB0aGlzLnNob3dEZWZhdWx0RHVyYXRpb25JbnA7XG4gICAgICAgICAgICB0aGlzLnBhdGNoRGVmYXVsdENvbmZpZygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuZnJlcXVlbmN5SW5wICYmIHRoaXMuZnJlcXVlbmN5SW5wKSB7XG4gICAgICAgICAgICB0aGlzLnBhdGNoRGVmYXVsdENvbmZpZygpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBwYXRjaERlZmF1bHRDb25maWcoKSB7XG5cbiAgICAgICAgaWYgKHRoaXMuZGF0ZUlucHV0VHlwZSA9PSB0aGlzLmRhdGVJbnB1dFR5cGVFbnVtLkRBWV9JTlBVVCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93RGVmYXVsdER1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kdXJhdGlvbkZDLnBhdGNoVmFsdWUobW9tZW50KHRoaXMuZGF0ZSkuZm9ybWF0KCdZWVlZLU1NLUREJykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQoKS5zdGFydE9mKCdkYXknKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBlbmREYXRlVmFsdWUgPSB0aGlzLmRhdGVUeXBlID09IHRoaXMuZGF0ZVR5cGVFbnVtLklOQ0xVU0lWRVxuICAgICAgICAgICAgICAgICAgICA/IG1vbWVudCgpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpXG4gICAgICAgICAgICAgICAgICAgIDogbW9tZW50KCkuYWRkKDEsICdkYXlzJykuc3RhcnRPZignZGF5JykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGVGQy5wYXRjaFZhbHVlKGVuZERhdGVWYWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGVJbnB1dFR5cGUgPT0gdGhpcy5kYXRlSW5wdXRUeXBlRW51bS5NT05USF9JTlBVVCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93RGVmYXVsdER1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kdXJhdGlvbkZDLnBhdGNoVmFsdWUobW9tZW50KHRoaXMuZGF0ZSkuZm9ybWF0KCdZWVlZLU1NJykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQoKS5zdGFydE9mKCdtb250aCcpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpKTtcblxuICAgICAgICAgICAgICAgIGNvbnN0IGVuZERhdGVWYWx1ZSA9IHRoaXMuZGF0ZVR5cGUgPT0gdGhpcy5kYXRlVHlwZUVudW0uSU5DTFVTSVZFXG4gICAgICAgICAgICAgICAgICAgID8gbW9tZW50KCkuZW5kT2YoJ21vbnRoJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KClcbiAgICAgICAgICAgICAgICAgICAgOiBtb21lbnQoKS5hZGQoMSwgJ21vbnRocycpLnN0YXJ0T2YoJ21vbnRoJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGVGQy5wYXRjaFZhbHVlKGVuZERhdGVWYWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGVJbnB1dFR5cGUgPT0gdGhpcy5kYXRlSW5wdXRUeXBlRW51bS5ZRUFSX0lOUFVUKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dEZWZhdWx0RHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmR1cmF0aW9uRkMucGF0Y2hWYWx1ZShtb21lbnQodGhpcy5kYXRlKS5mb3JtYXQoJ1lZWVknKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydERhdGVGQy5wYXRjaFZhbHVlKG1vbWVudCgpLnN0YXJ0T2YoJ3llYXInKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBlbmREYXRlVmFsdWUgPSB0aGlzLmRhdGVUeXBlID09IHRoaXMuZGF0ZVR5cGVFbnVtLklOQ0xVU0lWRVxuICAgICAgICAgICAgICAgICAgICA/IG1vbWVudCgpLmVuZE9mKCd5ZWFyJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KClcbiAgICAgICAgICAgICAgICAgICAgOiBtb21lbnQoKS5hZGQoMSwgJ3llYXInKS5zdGFydE9mKCd5ZWFyJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmVuZERhdGVGQy5wYXRjaFZhbHVlKGVuZERhdGVWYWx1ZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRhdGVJbnB1dFR5cGUgPT0gdGhpcy5kYXRlSW5wdXRUeXBlRW51bS5DVVNUT01fSU5QVVQpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0RlZmF1bHREdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnNob3dUaW1lSW5DRFIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlcmFuZ2UucGF0Y2hWYWx1ZSh7IHN0YXJ0RGF0ZTogbW9tZW50KCkuc2V0KHsgaG91cjogMCwgbWludXRlOiAwLCBzZWNvbmQ6IDAsIG1pbGxpc2Vjb25kOiAwIH0pLnN0YXJ0T2YoJ2RheScpLCBlbmREYXRlOiBtb21lbnQoKSB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGVyYW5nZS5wYXRjaFZhbHVlKHsgc3RhcnREYXRlOiBtb21lbnQoKS5zdGFydE9mKCdkYXknKSwgZW5kRGF0ZTogbW9tZW50KCkgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQodGhpcy5kYXRlcmFuZ2UudmFsdWUuc3RhcnREYXRlKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQodGhpcy5kYXRlcmFuZ2UudmFsdWUuZW5kRGF0ZSkudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIHRoaXMuZW1pdEZpbHRlci5lbWl0KCk7XG4gICAgfVxuXG4gICAgZGF5RGF0ZUlucHV0KHNlbGVjdGVkRGF0ZTogTW9tZW50KSB7XG4gICAgICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuZGF0ZVNlcnZpY2UuZGFpbHlTZWxlY3RlZEhhbmRsZXIoc2VsZWN0ZWREYXRlKTtcblxuICAgICAgICB0aGlzLmR1cmF0aW9uRkMucGF0Y2hWYWx1ZShkdXJhdGlvbik7XG4gICAgICAgIHRoaXMuc3RhcnREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQoc2VsZWN0ZWREYXRlKS5zdGFydE9mKCdkYXknKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG5cbiAgICAgICAgY29uc3QgZW5kRGF0ZVZhbHVlID0gdGhpcy5kYXRlVHlwZSA9PSB0aGlzLmRhdGVUeXBlRW51bS5JTkNMVVNJVkVcbiAgICAgICAgICAgID8gbW9tZW50KHNlbGVjdGVkRGF0ZSkuZW5kT2YoJ2RheScpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpXG4gICAgICAgICAgICA6IG1vbWVudChzZWxlY3RlZERhdGUpLmFkZCgxLCAnZGF5cycpLnN0YXJ0T2YoJ2RheScpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpO1xuXG4gICAgICAgIHRoaXMuZW5kRGF0ZUZDLnBhdGNoVmFsdWUoZW5kRGF0ZVZhbHVlKTtcblxuICAgICAgICB0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuICAgIH1cblxuICAgIG1vbnRoRGF0ZUlucHV0KHNlbGVjdGVkRGF0ZTogTW9tZW50LCBkYXRlcGlja2VyOiBNYXREYXRlcGlja2VyPE1vbWVudD4pIHtcbiAgICAgICAgbGV0IGR1cmF0aW9uID0gdGhpcy5kYXRlU2VydmljZS5oYW5kbGVEYXRlSW5wdXQoc2VsZWN0ZWREYXRlLCBkYXRlcGlja2VyLCBcIllZWVktTU1cIik7XG5cbiAgICAgICAgdGhpcy5kdXJhdGlvbkZDLnBhdGNoVmFsdWUoZHVyYXRpb24pO1xuICAgICAgICB0aGlzLnN0YXJ0RGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KHNlbGVjdGVkRGF0ZSkuc3RhcnRPZignbW9udGgnKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG5cbiAgICAgICAgY29uc3QgZW5kRGF0ZVZhbHVlID0gdGhpcy5kYXRlVHlwZSA9PSB0aGlzLmRhdGVUeXBlRW51bS5JTkNMVVNJVkVcbiAgICAgICAgICAgID8gbW9tZW50KHNlbGVjdGVkRGF0ZSkuZW5kT2YoJ21vbnRoJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KClcbiAgICAgICAgICAgIDogbW9tZW50KHNlbGVjdGVkRGF0ZSkuYWRkKDEsICdtb250aHMnKS5zdGFydE9mKCdtb250aCcpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpO1xuXG4gICAgICAgIHRoaXMuZW5kRGF0ZUZDLnBhdGNoVmFsdWUoZW5kRGF0ZVZhbHVlKTtcblxuICAgICAgICB0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuICAgIH1cblxuICAgIHllYXJEYXRlSW5wdXQoc2VsZWN0ZWREYXRlOiBNb21lbnQsIGRhdGVwaWNrZXI6IE1hdERhdGVwaWNrZXI8TW9tZW50Pikge1xuICAgICAgICBsZXQgZHVyYXRpb24gPSB0aGlzLmRhdGVTZXJ2aWNlLmhhbmRsZURhdGVJbnB1dChzZWxlY3RlZERhdGUsIGRhdGVwaWNrZXIsIFwiWVlZWVwiKTtcblxuICAgICAgICB0aGlzLmR1cmF0aW9uRkMucGF0Y2hWYWx1ZShkdXJhdGlvbik7XG4gICAgICAgIHRoaXMuc3RhcnREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQoc2VsZWN0ZWREYXRlKS5zdGFydE9mKCd5ZWFyJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuXG4gICAgICAgIGNvbnN0IGVuZERhdGVWYWx1ZSA9IHRoaXMuZGF0ZVR5cGUgPT0gdGhpcy5kYXRlVHlwZUVudW0uSU5DTFVTSVZFXG4gICAgICAgICAgICA/IG1vbWVudChzZWxlY3RlZERhdGUpLmVuZE9mKCd5ZWFyJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KClcbiAgICAgICAgICAgIDogbW9tZW50KHNlbGVjdGVkRGF0ZSkuYWRkKDEsICd5ZWFyJykuc3RhcnRPZigneWVhcicpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpO1xuXG4gICAgICAgIHRoaXMuZW5kRGF0ZUZDLnBhdGNoVmFsdWUoZW5kRGF0ZVZhbHVlKTtcblxuICAgICAgICB0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuICAgIH1cblxuICAgIGN1c3RvbURhdGVJbnB1dChzZWxlY3RlZERhdGU6IGFueSkge1xuICAgICAgICB0aGlzLnN0YXJ0RGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KHNlbGVjdGVkRGF0ZS5zdGFydERhdGUpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpKTtcbiAgICAgICAgdGhpcy5lbmREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQoc2VsZWN0ZWREYXRlLmVuZERhdGUpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpKTtcblxuICAgICAgICB0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuICAgIH1cblxufSIsIjxtYXQtZm9ybS1maWVsZCBbbmdDbGFzc109XCJ7J2Qtbm9uZSc6IGRhdGVJbnB1dFR5cGUgIT0gZGF0ZUlucHV0VHlwZUVudW0uREFZX0lOUFVULCAnbWF0RmllbGRXaWR0aDEwMCc6IG1hdGVyaWFsRmllbGRXaWR0aH1cIiBbYXBwZWFyYW5jZV09XCJmb3JtRmllbGRBcHBlYXJhbmNlXCJcbiAgICBpZD1cImRhaWx5RmllbGRcIiBhcHBEYXRlTW9udGhZZWFyRm9ybWF0IChjbGljayk9XCJkYXRlU2VydmljZS5vcGVuRGF0ZXBpY2tlck9uQ2xpY2soZGFpbHkpXCJcbiAgICAoa2V5ZG93bi5hcnJvd2Rvd24pPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKGRhaWx5KVwiXG4gICAgKGtleWRvd24uZW50ZXIpPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKGRhaWx5KVwiPlxuICAgIDxtYXQtbGFiZWw+IHt7IGxhYmVsIH19IDwvbWF0LWxhYmVsPlxuICAgIDxpbnB1dCBtYXRJbnB1dCBjbGFzcz1cIm5vRm9jdXNcIiBbbWF0RGF0ZXBpY2tlcl09XCJkYWlseVwiIFtmb3JtQ29udHJvbF09XCJkdXJhdGlvbkZDXCIgW21heF09XCJkYXRlXCJcbiAgICAgICAgKGRhdGVJbnB1dCk9XCJkYXlEYXRlSW5wdXQoJGV2ZW50LnZhbHVlKVwiIFtyZXF1aXJlZF09XCJpc01hbmRhdG9yeUZpZWxkXCIgcmVhZE9ubHkvPlxuICAgIDxtYXQtZGF0ZXBpY2tlci10b2dnbGUgbWF0U3VmZml4IGNsYXNzPVwiZnMtNVwiIFtmb3JdPVwiZGFpbHlcIj48L21hdC1kYXRlcGlja2VyLXRvZ2dsZT5cbiAgICA8bWF0LWRhdGVwaWNrZXIgI2RhaWx5IChjbG9zZWQpPVwiZGF0ZVNlcnZpY2UudGFrZUZvY3VzQXdheSgnZGFpbHlGaWVsZCcpXCI+PC9tYXQtZGF0ZXBpY2tlcj5cbiAgICA8bWF0LWVycm9yICpuZ0lmPVwiZHVyYXRpb25GQy50b3VjaGVkICYmIGR1cmF0aW9uRkMuaGFzRXJyb3IoJ3JlcXVpcmVkJylcIj5cbiAgICAgICAge3sgZm9ybUVycm9yRW51bS5SRVFVSVJFRCB9fVxuICAgIDwvbWF0LWVycm9yPlxuPC9tYXQtZm9ybS1maWVsZD5cblxuXG48bWF0LWZvcm0tZmllbGQgY2xhc3M9XCJjdXJzb3JQb2ludGVyXCJcbiAgICBbbmdDbGFzc109XCJ7J2Qtbm9uZSc6IGRhdGVJbnB1dFR5cGUgIT0gZGF0ZUlucHV0VHlwZUVudW0uTU9OVEhfSU5QVVQsICdtYXRGaWVsZFdpZHRoMTAwJzogbWF0ZXJpYWxGaWVsZFdpZHRofVwiXG4gICAgW2FwcGVhcmFuY2VdPVwiZm9ybUZpZWxkQXBwZWFyYW5jZVwiIGlkPVwibW9udGhseUZpZWxkXCIgYXBwTW9udGhZZWFyRm9ybWF0XG4gICAgKGNsaWNrKT1cImRhdGVTZXJ2aWNlLm9wZW5EYXRlcGlja2VyT25DbGljayhtb250aGx5KVwiXG4gICAgKGtleWRvd24uYXJyb3dkb3duKT1cImRhdGVTZXJ2aWNlLm9wZW5EYXRlcGlja2VyT25DbGljayhtb250aGx5KVwiXG4gICAgKGtleWRvd24uZW50ZXIpPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKG1vbnRobHkpXCI+XG4gICAgPG1hdC1sYWJlbD4ge3sgbGFiZWwgfX0gPC9tYXQtbGFiZWw+XG4gICAgPGlucHV0IG1hdElucHV0IFttYXREYXRlcGlja2VyXT1cIm1vbnRobHlcIiBbZm9ybUNvbnRyb2xdPVwiZHVyYXRpb25GQ1wiIFttYXhdPVwiZGF0ZVwiIFtyZXF1aXJlZF09XCJpc01hbmRhdG9yeUZpZWxkXCIgcmVhZE9ubHkvPlxuICAgIDxtYXQtZGF0ZXBpY2tlci10b2dnbGUgbWF0U3VmZml4IGNsYXNzPVwiZnMtNVwiIFtmb3JdPVwibW9udGhseVwiPjwvbWF0LWRhdGVwaWNrZXItdG9nZ2xlPlxuICAgIDxtYXQtZGF0ZXBpY2tlciAjbW9udGhseSBwYW5lbENsYXNzPVwibW9udGhQaWNrZXJcIiBzdGFydFZpZXc9XCJ5ZWFyXCIgKG1vbnRoU2VsZWN0ZWQpPVwibW9udGhEYXRlSW5wdXQoJGV2ZW50LCBtb250aGx5KVwiXG4gICAgICAgIChjbG9zZWQpPVwiZGF0ZVNlcnZpY2UudGFrZUZvY3VzQXdheSgnbW9udGhseUZpZWxkJylcIj48L21hdC1kYXRlcGlja2VyPlxuICAgIDxtYXQtZXJyb3IgKm5nSWY9XCJkdXJhdGlvbkZDLnRvdWNoZWQgJiYgZHVyYXRpb25GQy5oYXNFcnJvcigncmVxdWlyZWQnKVwiPlxuICAgICAgICB7eyBmb3JtRXJyb3JFbnVtLlJFUVVJUkVEIH19XG4gICAgPC9tYXQtZXJyb3I+XG48L21hdC1mb3JtLWZpZWxkPlxuXG48bWF0LWZvcm0tZmllbGQgY2xhc3M9XCJjdXJzb3JQb2ludGVyXCJcbiAgICBbbmdDbGFzc109XCJ7J2Qtbm9uZSc6IGRhdGVJbnB1dFR5cGUgIT0gZGF0ZUlucHV0VHlwZUVudW0uWUVBUl9JTlBVVCwgJ21hdEZpZWxkV2lkdGgxMDAnOiBtYXRlcmlhbEZpZWxkV2lkdGh9XCJcbiAgICBbYXBwZWFyYW5jZV09XCJmb3JtRmllbGRBcHBlYXJhbmNlXCIgaWQ9XCJ5ZWFybHlGaWVsZFwiIGFwcFllYXJGb3JtYXRcbiAgICAoY2xpY2spPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKHllYXJseSlcIiAoa2V5ZG93bi5hcnJvd2Rvd24pPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKHllYXJseSlcIlxuICAgIChrZXlkb3duLmVudGVyKT1cImRhdGVTZXJ2aWNlLm9wZW5EYXRlcGlja2VyT25DbGljayh5ZWFybHkpXCI+XG4gICAgPG1hdC1sYWJlbD4ge3sgbGFiZWwgfX0gPC9tYXQtbGFiZWw+XG4gICAgPGlucHV0IG1hdElucHV0IFttYXREYXRlcGlja2VyXT1cInllYXJseVwiIFtmb3JtQ29udHJvbF09XCJkdXJhdGlvbkZDXCIgW21heF09XCJkYXRlXCIgW3JlcXVpcmVkXT1cImlzTWFuZGF0b3J5RmllbGRcIiByZWFkT25seS8+XG4gICAgPG1hdC1kYXRlcGlja2VyLXRvZ2dsZSBtYXRTdWZmaXggY2xhc3M9XCJmcy01XCIgW2Zvcl09XCJ5ZWFybHlcIj48L21hdC1kYXRlcGlja2VyLXRvZ2dsZT5cbiAgICA8bWF0LWRhdGVwaWNrZXIgI3llYXJseSBzdGFydFZpZXc9XCJtdWx0aS15ZWFyXCIgcGFuZWxDbGFzcz1cInllYXJQaWNrZXJcIlxuICAgICAgICAoeWVhclNlbGVjdGVkKT1cInllYXJEYXRlSW5wdXQoJGV2ZW50LCB5ZWFybHkpXCJcbiAgICAgICAgKGNsb3NlZCk9XCJkYXRlU2VydmljZS50YWtlRm9jdXNBd2F5KCd5ZWFybHlGaWVsZCcpXCI+PC9tYXQtZGF0ZXBpY2tlcj5cbiAgICA8bWF0LWVycm9yICpuZ0lmPVwiZHVyYXRpb25GQy50b3VjaGVkICYmIGR1cmF0aW9uRkMuaGFzRXJyb3IoJ3JlcXVpcmVkJylcIj5cbiAgICAgICAge3sgZm9ybUVycm9yRW51bS5SRVFVSVJFRCB9fVxuICAgIDwvbWF0LWVycm9yPlxuPC9tYXQtZm9ybS1maWVsZD5cblxuPG1hdC1mb3JtLWZpZWxkIGNsYXNzPVwiY3Vyc29yUG9pbnRlclwiXG4gICAgW25nQ2xhc3NdPVwieydkLW5vbmUnOiBkYXRlSW5wdXRUeXBlICE9IGRhdGVJbnB1dFR5cGVFbnVtLkNVU1RPTV9JTlBVVCwgJ21hdEZpZWxkV2lkdGgxMDAnOiBtYXRlcmlhbEZpZWxkV2lkdGh9XCJcbiAgICBbYXBwZWFyYW5jZV09XCJmb3JtRmllbGRBcHBlYXJhbmNlXCI+XG4gICAgPG1hdC1sYWJlbD4ge3sgbGFiZWwgfX0gPC9tYXQtbGFiZWw+XG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbWF0SW5wdXQgbmd4RGF0ZXJhbmdlcGlja2VyTWRcbiAgICAgICAgW2xvY2FsZV09XCJ7ZGlyZWN0aW9uOiAnbHRyJywgYXBwbHlMYWJlbDogJ0FwcGx5JywgZm9ybWF0OiBjRFJmb3JtYXQsIGN1c3RvbVJhbmdlTGFiZWw6ICdDdXN0b20gUmFuZ2UnfVwiXG4gICAgICAgIFtzaG93Q3VzdG9tUmFuZ2VMYWJlbF09XCJzaG93Q2RyUmFuZ2VMYWJlbFwiIFt0aW1lUGlja2VyXT1cInNob3dUaW1lSW5DRFJcIiBbcmFuZ2VzXT1cInNob3dSYW5nZSA/IHJhbmdlIDogbnVsbFwiXG4gICAgICAgIFtkcm9wc109XCInZG93bidcIiBbb3BlbnNdPVwiJ3JpZ2h0J1wiIFthbHdheXNTaG93Q2FsZW5kYXJzXT1cInRydWVcIiBba2VlcENhbGVuZGFyT3BlbmluZ1dpdGhSYW5nZV09XCJ0cnVlXCJcbiAgICAgICAgW3Nob3dEcm9wZG93bnNdPVwidHJ1ZVwiIFtzaG93Q2FuY2VsXT1cInRydWVcIiBhdXRvY29tcGxldGU9XCJvZmZcIiBuYW1lPVwiZGF0ZXJhbmdlXCIgW2Zvcm1Db250cm9sXT1cImRhdGVyYW5nZVwiXG4gICAgICAgIChuZ01vZGVsQ2hhbmdlKT1cImN1c3RvbURhdGVJbnB1dChkYXRlcmFuZ2UudmFsdWUpXCIgW3JlcXVpcmVkXT1cImlzTWFuZGF0b3J5RmllbGRcIiByZWFkT25seS8+XG4gICAgPG1hdC1lcnJvciAqbmdJZj1cImRhdGVyYW5nZS50b3VjaGVkICYmIGRhdGVyYW5nZS5oYXNFcnJvcigncmVxdWlyZWQnKVwiPlxuICAgICAgICB7eyBmb3JtRXJyb3JFbnVtLlJFUVVJUkVEIH19XG4gICAgPC9tYXQtZXJyb3I+XG48L21hdC1mb3JtLWZpZWxkPiJdfQ==
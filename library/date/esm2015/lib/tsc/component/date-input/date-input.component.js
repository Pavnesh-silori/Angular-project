import { Component, EventEmitter, Input, Output } from '@angular/core';
import { FormControl } from '@angular/forms';
import * as moment from 'moment-timezone';
import { DateInputTypeEnum, DateTypeEnum } from '../../enum/date.enum';
// tsc-library
import { MaterialFormFieldAppearance } from '@library/tsc-common';
import * as i0 from "@angular/core";
import * as i1 from "../../service/date.service";
import * as i2 from "@angular/material/form-field";
import * as i3 from "@angular/material/datepicker";
import * as i4 from "../../directive/date-month-year-format.directive";
import * as i5 from "@angular/common";
import * as i6 from "@angular/material/input";
import * as i7 from "@angular/forms";
import * as i8 from "ngx-daterangepicker-material";
// /tsc-library/
export class DateInputComponent {
    constructor(dateService) {
        this.dateService = dateService;
        this.dateInputTypeEnum = DateInputTypeEnum;
        this.dateTypeEnum = DateTypeEnum;
        this.materialFormFieldAppearance = MaterialFormFieldAppearance;
        this.emitFilter = new EventEmitter();
        this.formFieldAppearance = this.materialFormFieldAppearance.FORM_FIELD_APPEARANCE;
        this.dateType = this.dateTypeEnum.INCLUSIVE;
        this.label = '';
        this.cDRformat = 'YYYY-MM-DD';
        this.timezone = 'UTC';
        this.range = null;
        this.materialFieldWidth = false;
        this.isMandatoryField = false;
        this.showCdrRangeLabel = false;
        this.showRange = false;
        this.showDefaultDuration = false;
        this.showTimeInCDR = false;
        this.daterange = new FormControl();
        this.durationFC = new FormControl();
        this.startDateFC = new FormControl();
        this.endDateFC = new FormControl();
    }
    ngOnInit() {
        this.date = moment().tz(this.timezone).format();
    }
    ngOnChanges(changes) {
        if (changes.materialFormFieldAppearanceInp && this.materialFormFieldAppearanceInp) {
            this.formFieldAppearance = this.materialFormFieldAppearanceInp;
        }
        if (changes.materialFieldWidthInp && this.materialFieldWidthInp) {
            this.materialFieldWidth = this.materialFieldWidthInp;
        }
        if (changes.isMandatoryFieldInp && this.isMandatoryFieldInp) {
            this.isMandatoryField = this.isMandatoryFieldInp;
        }
        if (changes.labelInp && this.labelInp) {
            this.label = this.labelInp;
        }
        if (changes.cdrFormatInp && this.cdrFormatInp) {
            this.cDRformat = this.cdrFormatInp;
        }
        if (changes.showCdrRangeLabelInp && this.showCdrRangeLabelInp) {
            this.showCdrRangeLabel = this.showCdrRangeLabelInp;
        }
        if (changes.showRangeInp && this.showRangeInp) {
            this.showRange = this.showRangeInp;
        }
        if (changes.rangeInp && this.rangeInp) {
            this.range = this.rangeInp;
        }
        if (changes.showDefaultDurationInp && this.showDefaultDurationInp) {
            this.showDefaultDuration = this.showDefaultDurationInp;
        }
        if (changes.showTimeInCDRInp && this.showTimeInCDRInp) {
            this.showTimeInCDR = this.showTimeInCDRInp;
        }
        if (changes.dateTypeInp && this.dateTypeInp) {
            this.dateType = this.dateTypeInp;
        }
        if (changes.timezoneInp && this.timezoneInp) {
            this.timezone = this.timezoneInp;
        }
        if (changes.dateInputTypeInp && this.dateInputTypeInp) {
            this.dateInputType = this.dateInputTypeInp;
        }
        this.patchDefaultConfig();
    }
    patchDefaultConfig() {
        if (this.dateInputType == this.dateInputTypeEnum.DAY_INPUT) {
            if (this.showDefaultDuration) {
                this.durationFC.patchValue(moment(this.date).format('YYYY-MM-DD'));
                this.startDateFC.patchValue(moment().startOf('day').tz(this.timezone).format());
                this.endDateFC.patchValue(moment().tz(this.timezone).format());
            }
        }
        else if (this.dateInputType == this.dateInputTypeEnum.MONTH_INPUT) {
            if (this.showDefaultDuration) {
                this.durationFC.patchValue(moment(this.date).format('YYYY-MM'));
                this.startDateFC.patchValue(moment().startOf('month').tz(this.timezone).format());
                const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
                    ? moment().endOf('month').tz(this.timezone).format()
                    : moment().add(1, 'months').startOf('month').tz(this.timezone).format();
                this.endDateFC.patchValue(endDateValue);
            }
        }
        else if (this.dateInputType == this.dateInputTypeEnum.YEAR_INPUT) {
            if (this.showDefaultDuration) {
                this.durationFC.patchValue(moment(this.date).format('YYYY'));
                this.startDateFC.patchValue(moment().startOf('year').tz(this.timezone).format());
                const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
                    ? moment().endOf('year').tz(this.timezone).format()
                    : moment().add(1, 'year').startOf('year').tz(this.timezone).format();
                this.endDateFC.patchValue(endDateValue);
            }
        }
        else if (this.dateInputType == this.dateInputTypeEnum.CUSTOM_INPUT) {
            if (this.showDefaultDuration) {
                if (this.showTimeInCDR) {
                    this.daterange.patchValue({ startDate: moment().set({ hour: 0, minute: 0, second: 0, millisecond: 0 }).startOf('day'), endDate: moment() });
                }
                else {
                    this.daterange.patchValue({ startDate: moment().startOf('day'), endDate: moment() });
                }
                this.startDateFC.patchValue(moment(this.daterange.value.startDate).tz(this.timezone).format());
                this.endDateFC.patchValue(moment(this.daterange.value.endDate).tz(this.timezone).format());
            }
        }
    }
    ngAfterViewInit() {
        this.emitFilter.emit();
    }
    dayDateInput(selectedDate) {
        let duration = this.dateService.dailySelectedHandler(selectedDate);
        this.durationFC.patchValue(duration);
        this.startDateFC.patchValue(moment(selectedDate).startOf('day').tz(this.timezone).format());
        const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
            ? moment(selectedDate).endOf('day').tz(this.timezone).format()
            : moment(selectedDate).add(1, 'days').startOf('day').tz(this.timezone).format();
        this.endDateFC.patchValue(endDateValue);
        this.emitFilter.emit();
    }
    monthDateInput(selectedDate, datepicker) {
        let duration = this.dateService.handleDateInput(selectedDate, datepicker, "YYYY-MM");
        this.durationFC.patchValue(duration);
        this.startDateFC.patchValue(moment(selectedDate).startOf('month').tz(this.timezone).format());
        const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
            ? moment(selectedDate).endOf('month').tz(this.timezone).format()
            : moment(selectedDate).add(1, 'months').startOf('month').tz(this.timezone).format();
        this.endDateFC.patchValue(endDateValue);
        this.emitFilter.emit();
    }
    yearDateInput(selectedDate, datepicker) {
        let duration = this.dateService.handleDateInput(selectedDate, datepicker, "YYYY");
        this.durationFC.patchValue(duration);
        this.startDateFC.patchValue(moment(selectedDate).startOf('year').tz(this.timezone).format());
        const endDateValue = this.dateType == this.dateTypeEnum.INCLUSIVE
            ? moment(selectedDate).endOf('year').tz(this.timezone).format()
            : moment(selectedDate).add(1, 'year').startOf('year').tz(this.timezone).format();
        this.endDateFC.patchValue(endDateValue);
        this.emitFilter.emit();
    }
    customDateInput(selectedDate) {
        this.startDateFC.patchValue(moment(selectedDate.startDate).tz(this.timezone).format());
        this.endDateFC.patchValue(moment(selectedDate.endDate).tz(this.timezone).format());
        this.emitFilter.emit();
    }
}
DateInputComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: DateInputComponent, deps: [{ token: i1.DateService }], target: i0.ɵɵFactoryTarget.Component });
DateInputComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: DateInputComponent, selector: "lib-date-input", inputs: { materialFormFieldAppearanceInp: "materialFormFieldAppearanceInp", materialFieldWidthInp: "materialFieldWidthInp", dateInputTypeInp: "dateInputTypeInp", dateTypeInp: "dateTypeInp", timezoneInp: "timezoneInp", labelInp: "labelInp", rangeInp: "rangeInp", cdrFormatInp: "cdrFormatInp", isMandatoryFieldInp: "isMandatoryFieldInp", showRangeInp: "showRangeInp", showCdrRangeLabelInp: "showCdrRangeLabelInp", showDefaultDurationInp: "showDefaultDurationInp", showTimeInCDRInp: "showTimeInCDRInp" }, outputs: { emitFilter: "emitFilter" }, usesOnChanges: true, ngImport: i0, template: "<mat-form-field [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.DAY_INPUT, 'matFieldWidth100': materialFieldWidth}\" [appearance]=\"formFieldAppearance\"\n    id=\"dailyField\" appDateMonthYearFormat (click)=\"dateService.openDatepickerOnClick(daily)\"\n    (keydown.arrowdown)=\"dateService.openDatepickerOnClick(daily)\"\n    (keydown.enter)=\"dateService.openDatepickerOnClick(daily)\">\n    <!-- <mat-label> {{ label }} </mat-label> -->\n    <input matInput class=\"noFocus\" [matDatepicker]=\"daily\" [formControl]=\"durationFC\" [max]=\"date\"\n        (dateInput)=\"dayDateInput($event.value)\" readonly [required]=\"isMandatoryField\"/>\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"daily\"></mat-datepicker-toggle>\n    <mat-datepicker #daily (closed)=\"dateService.takeFocusAway('dailyField')\"></mat-datepicker>\n    <mat-error *ngIf=\"durationFC.touched && durationFC.hasError('required')\">\n        {{ label }}\n    </mat-error>\n</mat-form-field>\n\n<mat-form-field\n    [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.MONTH_INPUT, 'matFieldWidth100': materialFieldWidth}\"\n    [appearance]=\"formFieldAppearance\" id=\"monthlyField\" appMonthYearFormat\n    (click)=\"dateService.openDatepickerOnClick(monthly)\"\n    (keydown.arrowdown)=\"dateService.openDatepickerOnClick(monthly)\"\n    (keydown.enter)=\"dateService.openDatepickerOnClick(monthly)\">\n    <mat-label> {{ label }} </mat-label>\n    <input matInput class=\"noFocus\" [matDatepicker]=\"monthly\" [formControl]=\"durationFC\" [max]=\"date\" readonly\n        [required]=\"isMandatoryField\" />\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"monthly\"></mat-datepicker-toggle>\n    <mat-datepicker #monthly panelClass=\"monthPicker\" startView=\"year\" (monthSelected)=\"monthDateInput($event, monthly)\"\n        (closed)=\"dateService.takeFocusAway('monthlyField')\"></mat-datepicker>\n    <mat-error *ngIf=\"durationFC.touched && durationFC.hasError('required')\">\n        {{ label }}\n    </mat-error>\n</mat-form-field>\n\n<mat-form-field [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.YEAR_INPUT, 'matFieldWidth100': materialFieldWidth}\" [appearance]=\"formFieldAppearance\"\n    id=\"yearlyField\" appYearFormat (click)=\"dateService.openDatepickerOnClick(yearly)\"\n    (keydown.arrowdown)=\"dateService.openDatepickerOnClick(yearly)\"\n    (keydown.enter)=\"dateService.openDatepickerOnClick(yearly)\">\n    <mat-label> {{ label }} </mat-label>\n    <input matInput class=\"noFocus\" [matDatepicker]=\"yearly\" [formControl]=\"durationFC\" [max]=\"date\" readonly [required]=\"isMandatoryField\"/>\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"yearly\"></mat-datepicker-toggle>\n    <mat-datepicker #yearly startView=\"multi-year\" panelClass=\"yearPicker\"\n        (yearSelected)=\"yearDateInput($event, yearly)\"\n        (closed)=\"dateService.takeFocusAway('yearlyField')\"></mat-datepicker>\n    <mat-error *ngIf=\"durationFC.touched && durationFC.hasError('required')\">\n        {{ label }}\n    </mat-error>\n</mat-form-field>\n\n<mat-form-field [ngClass]=\"{'d-none': dateInputType != dateInputTypeEnum.CUSTOM_INPUT, 'matFieldWidth100': materialFieldWidth}\"\n    [appearance]=\"formFieldAppearance\">\n    <mat-label> {{ label }} </mat-label>\n    <input type=\"text\" matInput ngxDaterangepickerMd\n        [locale]=\"{direction: 'ltr', applyLabel: 'Apply', format: cDRformat, customRangeLabel: 'Custom Range'}\"\n        [showCustomRangeLabel]=\"showCdrRangeLabel\" [timePicker]=\"showTimeInCDR\" [ranges]=\"showRange ? range : null\"\n        [drops]=\"'down'\" [opens]=\"'right'\" [alwaysShowCalendars]=\"true\" [keepCalendarOpeningWithRange]=\"true\"\n        [showDropdowns]=\"true\" [showCancel]=\"true\" autocomplete=\"off\" name=\"daterange\" [formControl]=\"daterange\"\n        (ngModelChange)=\"customDateInput(daterange.value)\" [readonly]=\"true\" [required]=\"isMandatoryField\"/>\n    <mat-error *ngIf=\"daterange.touched && daterange.hasError('required')\">\n        {{ label }}\n    </mat-error>\n</mat-form-field>", components: [{ type: i2.MatFormField, selector: "mat-form-field", inputs: ["color", "floatLabel", "appearance", "hideRequiredMarker", "hintLabel"], exportAs: ["matFormField"] }, { type: i3.MatDatepickerToggle, selector: "mat-datepicker-toggle", inputs: ["tabIndex", "disabled", "for", "aria-label", "disableRipple"], exportAs: ["matDatepickerToggle"] }, { type: i3.MatDatepicker, selector: "mat-datepicker", exportAs: ["matDatepicker"] }], directives: [{ type: i4.DateMonthYearFormatDirective, selector: "[appDateMonthYearFormat]" }, { type: i5.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i6.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["id", "disabled", "required", "type", "value", "readonly", "placeholder", "errorStateMatcher", "aria-describedby"], exportAs: ["matInput"] }, { type: i3.MatDatepickerInput, selector: "input[matDatepicker]", inputs: ["matDatepicker", "min", "max", "matDatepickerFilter"], exportAs: ["matDatepickerInput"] }, { type: i7.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i7.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i7.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i2.MatSuffix, selector: "[matSuffix]" }, { type: i5.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i2.MatError, selector: "mat-error", inputs: ["id"] }, { type: i4.MonthYearFormatDirective, selector: "[appMonthYearFormat]" }, { type: i2.MatLabel, selector: "mat-label" }, { type: i4.YearFormatDirective, selector: "[appYearFormat]" }, { type: i8.DaterangepickerDirective, selector: "input[ngxDaterangepickerMd]", inputs: ["dateLimit", "showCancel", "lockStartDate", "timePicker", "timePicker24Hour", "timePickerIncrement", "timePickerSeconds", "closeOnAutoApply", "_endKey", "drops", "opens", "locale", "startKey", "endKey", "minDate", "maxDate", "autoApply", "alwaysShowCalendars", "showCustomRangeLabel", "linkedCalendars", "singleDatePicker", "showWeekNumbers", "showISOWeekNumbers", "showDropdowns", "isInvalidDate", "isCustomDate", "isTooltipDate", "showClearButton", "customRangeDirection", "ranges", "lastMonthDayClass", "emptyWeekRowClass", "emptyWeekColumnClass", "firstDayOfNextMonthClass", "lastDayOfPreviousMonthClass", "keepCalendarOpeningWithRange", "showRangeLabelOnInput"], outputs: ["change", "rangeClicked", "datesUpdated", "startDateChanged", "endDateChanged"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: DateInputComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-date-input',
                    templateUrl: './date-input.component.html',
                    styleUrls: []
                }]
        }], ctorParameters: function () { return [{ type: i1.DateService }]; }, propDecorators: { materialFormFieldAppearanceInp: [{
                type: Input
            }], materialFieldWidthInp: [{
                type: Input
            }], dateInputTypeInp: [{
                type: Input
            }], dateTypeInp: [{
                type: Input
            }], timezoneInp: [{
                type: Input
            }], labelInp: [{
                type: Input
            }], rangeInp: [{
                type: Input
            }], cdrFormatInp: [{
                type: Input
            }], isMandatoryFieldInp: [{
                type: Input
            }], showRangeInp: [{
                type: Input
            }], showCdrRangeLabelInp: [{
                type: Input
            }], showDefaultDurationInp: [{
                type: Input
            }], showTimeInCDRInp: [{
                type: Input
            }], emitFilter: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1pbnB1dC5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L2RhdGUvc3JjL2xpYi90c2MvY29tcG9uZW50L2RhdGUtaW5wdXQvZGF0ZS1pbnB1dC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L2RhdGUvc3JjL2xpYi90c2MvY29tcG9uZW50L2RhdGUtaW5wdXQvZGF0ZS1pbnB1dC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUU5RixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFLN0MsT0FBTyxLQUFLLE1BQU0sTUFBTSxpQkFBaUIsQ0FBQztBQUUxQyxPQUFPLEVBQUUsaUJBQWlCLEVBQUUsWUFBWSxFQUFFLE1BQU0sc0JBQXNCLENBQUM7QUFJdkUsY0FBYztBQUNkLE9BQU8sRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7Ozs7Ozs7O0FBQ2xFLGdCQUFnQjtBQVFoQixNQUFNLE9BQU8sa0JBQWtCO0lBcUUzQixZQUNXLFdBQXdCO1FBQXhCLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBcEVuQyxzQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQztRQUN0QyxpQkFBWSxHQUFHLFlBQVksQ0FBQztRQUM1QixnQ0FBMkIsR0FBRywyQkFBMkIsQ0FBQztRQTBDMUQsZUFBVSxHQUFHLElBQUksWUFBWSxFQUFFLENBQUM7UUFFaEMsd0JBQW1CLEdBQWdDLElBQUksQ0FBQywyQkFBMkIsQ0FBQyxxQkFBcUIsQ0FBQztRQUUxRyxhQUFRLEdBQWlCLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDO1FBR3JELFVBQUssR0FBVyxFQUFFLENBQUM7UUFDbkIsY0FBUyxHQUFXLFlBQVksQ0FBQTtRQUNoQyxhQUFRLEdBQVcsS0FBSyxDQUFDO1FBQ3pCLFVBQUssR0FBUSxJQUFJLENBQUM7UUFDbEIsdUJBQWtCLEdBQVksS0FBSyxDQUFDO1FBQ3BDLHFCQUFnQixHQUFZLEtBQUssQ0FBQztRQUNsQyxzQkFBaUIsR0FBWSxLQUFLLENBQUM7UUFDbkMsY0FBUyxHQUFZLEtBQUssQ0FBQztRQUMzQix3QkFBbUIsR0FBWSxLQUFLLENBQUM7UUFDckMsa0JBQWEsR0FBWSxLQUFLLENBQUM7UUFFL0IsY0FBUyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFDOUIsZUFBVSxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFDL0IsZ0JBQVcsR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO1FBQ2hDLGNBQVMsR0FBRyxJQUFJLFdBQVcsRUFBRSxDQUFDO0lBSTFCLENBQUM7SUFFTCxRQUFRO1FBQ0osSUFBSSxDQUFDLElBQUksR0FBRyxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO0lBQ3BELENBQUM7SUFFRCxXQUFXLENBQUMsT0FBc0I7UUFDOUIsSUFBSSxPQUFPLENBQUMsOEJBQThCLElBQUksSUFBSSxDQUFDLDhCQUE4QixFQUFFO1lBQy9FLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsOEJBQThCLENBQUM7U0FDbEU7UUFFRCxJQUFJLE9BQU8sQ0FBQyxxQkFBcUIsSUFBSSxJQUFJLENBQUMscUJBQXFCLEVBQUU7WUFDN0QsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxxQkFBcUIsQ0FBQztTQUN4RDtRQUVELElBQUksT0FBTyxDQUFDLG1CQUFtQixJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtZQUN6RCxJQUFJLENBQUMsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDLG1CQUFtQixDQUFDO1NBQ3BEO1FBRUQsSUFBSSxPQUFPLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7WUFDbkMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDO1NBQzlCO1FBRUQsSUFBSSxPQUFPLENBQUMsWUFBWSxJQUFJLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFDM0MsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUFDO1NBQ3RDO1FBRUQsSUFBSSxPQUFPLENBQUMsb0JBQW9CLElBQUksSUFBSSxDQUFDLG9CQUFvQixFQUFFO1lBQzNELElBQUksQ0FBQyxpQkFBaUIsR0FBRyxJQUFJLENBQUMsb0JBQW9CLENBQUM7U0FDdEQ7UUFFRCxJQUFJLE9BQU8sQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLFlBQVksRUFBRTtZQUMzQyxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxZQUFZLENBQUM7U0FDdEM7UUFFRCxJQUFJLE9BQU8sQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUNuQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7U0FDOUI7UUFFRCxJQUFJLE9BQU8sQ0FBQyxzQkFBc0IsSUFBSSxJQUFJLENBQUMsc0JBQXNCLEVBQUU7WUFDL0QsSUFBSSxDQUFDLG1CQUFtQixHQUFHLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztTQUMxRDtRQUVELElBQUksT0FBTyxDQUFDLGdCQUFnQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNuRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztTQUM5QztRQUVELElBQUksT0FBTyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3pDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztTQUNwQztRQUVELElBQUksT0FBTyxDQUFDLFdBQVcsSUFBSSxJQUFJLENBQUMsV0FBVyxFQUFFO1lBQ3pDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztTQUNwQztRQUVELElBQUksT0FBTyxDQUFDLGdCQUFnQixJQUFJLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtZQUNuRCxJQUFJLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztTQUM5QztRQUVELElBQUksQ0FBQyxrQkFBa0IsRUFBRSxDQUFDO0lBRTlCLENBQUM7SUFFRCxrQkFBa0I7UUFFZCxJQUFJLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLFNBQVMsRUFBRTtZQUV4RCxJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtnQkFDMUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztnQkFDbkUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDaEYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO2FBQ2xFO1NBRUo7YUFBTSxJQUFJLElBQUksQ0FBQyxhQUFhLElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLFdBQVcsRUFBRTtZQUVqRSxJQUFJLElBQUksQ0FBQyxtQkFBbUIsRUFBRTtnQkFDMUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztnQkFDaEUsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFFbEYsTUFBTSxZQUFZLEdBQUcsSUFBSSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsWUFBWSxDQUFDLFNBQVM7b0JBQzdELENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUU7b0JBQ3BELENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDO2dCQUU1RSxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxZQUFZLENBQUMsQ0FBQzthQUMzQztTQUVKO2FBQU0sSUFBSSxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxVQUFVLEVBQUU7WUFFaEUsSUFBSSxJQUFJLENBQUMsbUJBQW1CLEVBQUU7Z0JBQzFCLElBQUksQ0FBQyxVQUFVLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7Z0JBQzdELElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUM7Z0JBRWpGLE1BQU0sWUFBWSxHQUFHLElBQUksQ0FBQyxRQUFRLElBQUksSUFBSSxDQUFDLFlBQVksQ0FBQyxTQUFTO29CQUM3RCxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFO29CQUNuRCxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQztnQkFFekUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7YUFDM0M7U0FFSjthQUFNLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsWUFBWSxFQUFFO1lBRWxFLElBQUksSUFBSSxDQUFDLG1CQUFtQixFQUFFO2dCQUMxQixJQUFJLElBQUksQ0FBQyxhQUFhLEVBQUU7b0JBQ3BCLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLEVBQUUsU0FBUyxFQUFFLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLFdBQVcsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO2lCQUMvSTtxQkFBTTtvQkFDSCxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxNQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFLENBQUMsQ0FBQztpQkFDeEY7Z0JBQ0QsSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztnQkFDL0YsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQzthQUM5RjtTQUVKO0lBRUwsQ0FBQztJQUVELGVBQWU7UUFDWCxJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO0lBQzNCLENBQUM7SUFFRCxZQUFZLENBQUMsWUFBb0I7UUFDN0IsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxvQkFBb0IsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUVuRSxJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUU1RixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUztZQUM3RCxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUM5RCxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFFcEYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFeEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsY0FBYyxDQUFDLFlBQW9CLEVBQUUsVUFBaUM7UUFDbEUsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsWUFBWSxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQztRQUVyRixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUU5RixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUztZQUM3RCxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUNoRSxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsUUFBUSxDQUFDLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFFeEYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFeEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsYUFBYSxDQUFDLFlBQW9CLEVBQUUsVUFBaUM7UUFDakUsSUFBSSxRQUFRLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxlQUFlLENBQUMsWUFBWSxFQUFFLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUVsRixJQUFJLENBQUMsVUFBVSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNyQyxJQUFJLENBQUMsV0FBVyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQztRQUU3RixNQUFNLFlBQVksR0FBRyxJQUFJLENBQUMsUUFBUSxJQUFJLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUztZQUM3RCxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sRUFBRTtZQUMvRCxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFDLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUM7UUFFckYsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7UUFFeEMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRUQsZUFBZSxDQUFDLFlBQWlCO1FBQzdCLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBQ3ZGLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1FBRW5GLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDM0IsQ0FBQzs7Z0hBaFBRLGtCQUFrQjtvR0FBbEIsa0JBQWtCLHdtQkN2Qi9CLGloSUEwRGlCOzRGRG5DSixrQkFBa0I7a0JBTjlCLFNBQVM7bUJBQUM7b0JBQ1AsUUFBUSxFQUFFLGdCQUFnQjtvQkFDMUIsV0FBVyxFQUFFLDZCQUE2QjtvQkFDMUMsU0FBUyxFQUFFLEVBQUU7aUJBQ2hCO2tHQVNHLDhCQUE4QjtzQkFEN0IsS0FBSztnQkFJTixxQkFBcUI7c0JBRHBCLEtBQUs7Z0JBSU4sZ0JBQWdCO3NCQURmLEtBQUs7Z0JBSU4sV0FBVztzQkFEVixLQUFLO2dCQUlOLFdBQVc7c0JBRFYsS0FBSztnQkFJTixRQUFRO3NCQURQLEtBQUs7Z0JBSU4sUUFBUTtzQkFEUCxLQUFLO2dCQUlOLFlBQVk7c0JBRFgsS0FBSztnQkFJTixtQkFBbUI7c0JBRGxCLEtBQUs7Z0JBSU4sWUFBWTtzQkFEWCxLQUFLO2dCQUlOLG9CQUFvQjtzQkFEbkIsS0FBSztnQkFJTixzQkFBc0I7c0JBRHJCLEtBQUs7Z0JBSU4sZ0JBQWdCO3NCQURmLEtBQUs7Z0JBSU4sVUFBVTtzQkFEVCxNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCwgU2ltcGxlQ2hhbmdlcyB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBGb3JtQ29udHJvbCB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuaW1wb3J0IHsgTWF0RGF0ZXBpY2tlciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RhdGVwaWNrZXInO1xuXG5pbXBvcnQgeyBNb21lbnQgfSBmcm9tICdtb21lbnQnO1xuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudC10aW1lem9uZSc7XG5cbmltcG9ydCB7IERhdGVJbnB1dFR5cGVFbnVtLCBEYXRlVHlwZUVudW0gfSBmcm9tICcuLi8uLi9lbnVtL2RhdGUuZW51bSc7XG5cbmltcG9ydCB7IERhdGVTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZS9kYXRlLnNlcnZpY2UnO1xuXG4vLyB0c2MtbGlicmFyeVxuaW1wb3J0IHsgTWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlIH0gZnJvbSAnQGxpYnJhcnkvdHNjLWNvbW1vbic7XG4vLyAvdHNjLWxpYnJhcnkvXG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnbGliLWRhdGUtaW5wdXQnLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9kYXRlLWlucHV0LmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFtdXG59KVxuXG5leHBvcnQgY2xhc3MgRGF0ZUlucHV0Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIGRhdGVJbnB1dFR5cGVFbnVtID0gRGF0ZUlucHV0VHlwZUVudW07XG4gICAgZGF0ZVR5cGVFbnVtID0gRGF0ZVR5cGVFbnVtO1xuICAgIG1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZSA9IE1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZTtcblxuICAgIEBJbnB1dCgpXG4gICAgbWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlSW5wOiBNYXRlcmlhbEZvcm1GaWVsZEFwcGVhcmFuY2U7XG5cbiAgICBASW5wdXQoKVxuICAgIG1hdGVyaWFsRmllbGRXaWR0aElucDogYm9vbGVhbjtcblxuICAgIEBJbnB1dCgpXG4gICAgZGF0ZUlucHV0VHlwZUlucDogRGF0ZUlucHV0VHlwZUVudW07XG5cbiAgICBASW5wdXQoKVxuICAgIGRhdGVUeXBlSW5wOiBEYXRlVHlwZUVudW07XG5cbiAgICBASW5wdXQoKVxuICAgIHRpbWV6b25lSW5wOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIGxhYmVsSW5wOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIHJhbmdlSW5wOiBhbnk7XG5cbiAgICBASW5wdXQoKVxuICAgIGNkckZvcm1hdElucDogc3RyaW5nO1xuXG4gICAgQElucHV0KClcbiAgICBpc01hbmRhdG9yeUZpZWxkSW5wOiBib29sZWFuO1xuXG4gICAgQElucHV0KClcbiAgICBzaG93UmFuZ2VJbnA6IGJvb2xlYW47XG5cbiAgICBASW5wdXQoKVxuICAgIHNob3dDZHJSYW5nZUxhYmVsSW5wOiBib29sZWFuO1xuXG4gICAgQElucHV0KClcbiAgICBzaG93RGVmYXVsdER1cmF0aW9uSW5wOiBib29sZWFuO1xuXG4gICAgQElucHV0KClcbiAgICBzaG93VGltZUluQ0RSSW5wOiBib29sZWFuO1xuXG4gICAgQE91dHB1dCgpXG4gICAgZW1pdEZpbHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuICAgIGZvcm1GaWVsZEFwcGVhcmFuY2U6IE1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZSA9IHRoaXMubWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlLkZPUk1fRklFTERfQVBQRUFSQU5DRTtcbiAgICBkYXRlSW5wdXRUeXBlOiBEYXRlSW5wdXRUeXBlRW51bTtcbiAgICBkYXRlVHlwZTogRGF0ZVR5cGVFbnVtID0gdGhpcy5kYXRlVHlwZUVudW0uSU5DTFVTSVZFO1xuXG4gICAgZGF0ZTogYW55O1xuICAgIGxhYmVsOiBzdHJpbmcgPSAnJztcbiAgICBjRFJmb3JtYXQ6IHN0cmluZyA9ICdZWVlZLU1NLUREJ1xuICAgIHRpbWV6b25lOiBzdHJpbmcgPSAnVVRDJztcbiAgICByYW5nZTogYW55ID0gbnVsbDtcbiAgICBtYXRlcmlhbEZpZWxkV2lkdGg6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpc01hbmRhdG9yeUZpZWxkOiBib29sZWFuID0gZmFsc2U7XG4gICAgc2hvd0NkclJhbmdlTGFiZWw6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzaG93UmFuZ2U6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBzaG93RGVmYXVsdER1cmF0aW9uOiBib29sZWFuID0gZmFsc2U7XG4gICAgc2hvd1RpbWVJbkNEUjogYm9vbGVhbiA9IGZhbHNlO1xuXG4gICAgZGF0ZXJhbmdlID0gbmV3IEZvcm1Db250cm9sKCk7XG4gICAgZHVyYXRpb25GQyA9IG5ldyBGb3JtQ29udHJvbCgpO1xuICAgIHN0YXJ0RGF0ZUZDID0gbmV3IEZvcm1Db250cm9sKCk7XG4gICAgZW5kRGF0ZUZDID0gbmV3IEZvcm1Db250cm9sKCk7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHVibGljIGRhdGVTZXJ2aWNlOiBEYXRlU2VydmljZSxcbiAgICApIHsgfVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IG1vbWVudCgpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpO1xuICAgIH1cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpOiB2b2lkIHtcbiAgICAgICAgaWYgKGNoYW5nZXMubWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlSW5wICYmIHRoaXMubWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlSW5wKSB7XG4gICAgICAgICAgICB0aGlzLmZvcm1GaWVsZEFwcGVhcmFuY2UgPSB0aGlzLm1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZUlucDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGNoYW5nZXMubWF0ZXJpYWxGaWVsZFdpZHRoSW5wICYmIHRoaXMubWF0ZXJpYWxGaWVsZFdpZHRoSW5wKSB7XG4gICAgICAgICAgICB0aGlzLm1hdGVyaWFsRmllbGRXaWR0aCA9IHRoaXMubWF0ZXJpYWxGaWVsZFdpZHRoSW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuaXNNYW5kYXRvcnlGaWVsZElucCAmJiB0aGlzLmlzTWFuZGF0b3J5RmllbGRJbnApIHtcbiAgICAgICAgICAgIHRoaXMuaXNNYW5kYXRvcnlGaWVsZCA9IHRoaXMuaXNNYW5kYXRvcnlGaWVsZElucDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLmxhYmVsSW5wICYmIHRoaXMubGFiZWxJbnApIHtcbiAgICAgICAgICAgIHRoaXMubGFiZWwgPSB0aGlzLmxhYmVsSW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuY2RyRm9ybWF0SW5wICYmIHRoaXMuY2RyRm9ybWF0SW5wKSB7XG4gICAgICAgICAgICB0aGlzLmNEUmZvcm1hdCA9IHRoaXMuY2RyRm9ybWF0SW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuc2hvd0NkclJhbmdlTGFiZWxJbnAgJiYgdGhpcy5zaG93Q2RyUmFuZ2VMYWJlbElucCkge1xuICAgICAgICAgICAgdGhpcy5zaG93Q2RyUmFuZ2VMYWJlbCA9IHRoaXMuc2hvd0NkclJhbmdlTGFiZWxJbnA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy5zaG93UmFuZ2VJbnAgJiYgdGhpcy5zaG93UmFuZ2VJbnApIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1JhbmdlID0gdGhpcy5zaG93UmFuZ2VJbnA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy5yYW5nZUlucCAmJiB0aGlzLnJhbmdlSW5wKSB7XG4gICAgICAgICAgICB0aGlzLnJhbmdlID0gdGhpcy5yYW5nZUlucDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLnNob3dEZWZhdWx0RHVyYXRpb25JbnAgJiYgdGhpcy5zaG93RGVmYXVsdER1cmF0aW9uSW5wKSB7XG4gICAgICAgICAgICB0aGlzLnNob3dEZWZhdWx0RHVyYXRpb24gPSB0aGlzLnNob3dEZWZhdWx0RHVyYXRpb25JbnA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy5zaG93VGltZUluQ0RSSW5wICYmIHRoaXMuc2hvd1RpbWVJbkNEUklucCkge1xuICAgICAgICAgICAgdGhpcy5zaG93VGltZUluQ0RSID0gdGhpcy5zaG93VGltZUluQ0RSSW5wO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoYW5nZXMuZGF0ZVR5cGVJbnAgJiYgdGhpcy5kYXRlVHlwZUlucCkge1xuICAgICAgICAgICAgdGhpcy5kYXRlVHlwZSA9IHRoaXMuZGF0ZVR5cGVJbnA7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2hhbmdlcy50aW1lem9uZUlucCAmJiB0aGlzLnRpbWV6b25lSW5wKSB7XG4gICAgICAgICAgICB0aGlzLnRpbWV6b25lID0gdGhpcy50aW1lem9uZUlucDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjaGFuZ2VzLmRhdGVJbnB1dFR5cGVJbnAgJiYgdGhpcy5kYXRlSW5wdXRUeXBlSW5wKSB7XG4gICAgICAgICAgICB0aGlzLmRhdGVJbnB1dFR5cGUgPSB0aGlzLmRhdGVJbnB1dFR5cGVJbnA7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnBhdGNoRGVmYXVsdENvbmZpZygpO1xuXG4gICAgfVxuXG4gICAgcGF0Y2hEZWZhdWx0Q29uZmlnKCkge1xuXG4gICAgICAgIGlmICh0aGlzLmRhdGVJbnB1dFR5cGUgPT0gdGhpcy5kYXRlSW5wdXRUeXBlRW51bS5EQVlfSU5QVVQpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0RlZmF1bHREdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb25GQy5wYXRjaFZhbHVlKG1vbWVudCh0aGlzLmRhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KCkuc3RhcnRPZignZGF5JykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KCkudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRlSW5wdXRUeXBlID09IHRoaXMuZGF0ZUlucHV0VHlwZUVudW0uTU9OVEhfSU5QVVQpIHtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2hvd0RlZmF1bHREdXJhdGlvbikge1xuICAgICAgICAgICAgICAgIHRoaXMuZHVyYXRpb25GQy5wYXRjaFZhbHVlKG1vbWVudCh0aGlzLmRhdGUpLmZvcm1hdCgnWVlZWS1NTScpKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KCkuc3RhcnRPZignbW9udGgnKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG5cbiAgICAgICAgICAgICAgICBjb25zdCBlbmREYXRlVmFsdWUgPSB0aGlzLmRhdGVUeXBlID09IHRoaXMuZGF0ZVR5cGVFbnVtLklOQ0xVU0lWRVxuICAgICAgICAgICAgICAgICAgICA/IG1vbWVudCgpLmVuZE9mKCdtb250aCcpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpXG4gICAgICAgICAgICAgICAgICAgIDogbW9tZW50KCkuYWRkKDEsICdtb250aHMnKS5zdGFydE9mKCdtb250aCcpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlRkMucGF0Y2hWYWx1ZShlbmREYXRlVmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRlSW5wdXRUeXBlID09IHRoaXMuZGF0ZUlucHV0VHlwZUVudW0uWUVBUl9JTlBVVCkge1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zaG93RGVmYXVsdER1cmF0aW9uKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kdXJhdGlvbkZDLnBhdGNoVmFsdWUobW9tZW50KHRoaXMuZGF0ZSkuZm9ybWF0KCdZWVlZJykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3RhcnREYXRlRkMucGF0Y2hWYWx1ZShtb21lbnQoKS5zdGFydE9mKCd5ZWFyJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kRGF0ZVZhbHVlID0gdGhpcy5kYXRlVHlwZSA9PSB0aGlzLmRhdGVUeXBlRW51bS5JTkNMVVNJVkVcbiAgICAgICAgICAgICAgICAgICAgPyBtb21lbnQoKS5lbmRPZigneWVhcicpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpXG4gICAgICAgICAgICAgICAgICAgIDogbW9tZW50KCkuYWRkKDEsICd5ZWFyJykuc3RhcnRPZigneWVhcicpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5lbmREYXRlRkMucGF0Y2hWYWx1ZShlbmREYXRlVmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRlSW5wdXRUeXBlID09IHRoaXMuZGF0ZUlucHV0VHlwZUVudW0uQ1VTVE9NX0lOUFVUKSB7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnNob3dEZWZhdWx0RHVyYXRpb24pIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zaG93VGltZUluQ0RSKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0ZXJhbmdlLnBhdGNoVmFsdWUoeyBzdGFydERhdGU6IG1vbWVudCgpLnNldCh7IGhvdXI6IDAsIG1pbnV0ZTogMCwgc2Vjb25kOiAwLCBtaWxsaXNlY29uZDogMCB9KS5zdGFydE9mKCdkYXknKSwgZW5kRGF0ZTogbW9tZW50KCkgfSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRlcmFuZ2UucGF0Y2hWYWx1ZSh7IHN0YXJ0RGF0ZTogbW9tZW50KCkuc3RhcnRPZignZGF5JyksIGVuZERhdGU6IG1vbWVudCgpIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0RGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KHRoaXMuZGF0ZXJhbmdlLnZhbHVlLnN0YXJ0RGF0ZSkudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuZW5kRGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KHRoaXMuZGF0ZXJhbmdlLnZhbHVlLmVuZERhdGUpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgICAgXG4gICAgfVxuXG4gICAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgICAgICB0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuICAgIH1cblxuICAgIGRheURhdGVJbnB1dChzZWxlY3RlZERhdGU6IE1vbWVudCkge1xuICAgICAgICBsZXQgZHVyYXRpb24gPSB0aGlzLmRhdGVTZXJ2aWNlLmRhaWx5U2VsZWN0ZWRIYW5kbGVyKHNlbGVjdGVkRGF0ZSk7XG5cbiAgICAgICAgdGhpcy5kdXJhdGlvbkZDLnBhdGNoVmFsdWUoZHVyYXRpb24pO1xuICAgICAgICB0aGlzLnN0YXJ0RGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KHNlbGVjdGVkRGF0ZSkuc3RhcnRPZignZGF5JykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuXG4gICAgICAgIGNvbnN0IGVuZERhdGVWYWx1ZSA9IHRoaXMuZGF0ZVR5cGUgPT0gdGhpcy5kYXRlVHlwZUVudW0uSU5DTFVTSVZFXG4gICAgICAgICAgICA/IG1vbWVudChzZWxlY3RlZERhdGUpLmVuZE9mKCdkYXknKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKVxuICAgICAgICAgICAgOiBtb21lbnQoc2VsZWN0ZWREYXRlKS5hZGQoMSwgJ2RheXMnKS5zdGFydE9mKCdkYXknKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKTtcblxuICAgICAgICB0aGlzLmVuZERhdGVGQy5wYXRjaFZhbHVlKGVuZERhdGVWYWx1ZSk7XG5cbiAgICAgICAgdGhpcy5lbWl0RmlsdGVyLmVtaXQoKTtcbiAgICB9XG5cbiAgICBtb250aERhdGVJbnB1dChzZWxlY3RlZERhdGU6IE1vbWVudCwgZGF0ZXBpY2tlcjogTWF0RGF0ZXBpY2tlcjxNb21lbnQ+KSB7XG4gICAgICAgIGxldCBkdXJhdGlvbiA9IHRoaXMuZGF0ZVNlcnZpY2UuaGFuZGxlRGF0ZUlucHV0KHNlbGVjdGVkRGF0ZSwgZGF0ZXBpY2tlciwgXCJZWVlZLU1NXCIpO1xuXG4gICAgICAgIHRoaXMuZHVyYXRpb25GQy5wYXRjaFZhbHVlKGR1cmF0aW9uKTtcbiAgICAgICAgdGhpcy5zdGFydERhdGVGQy5wYXRjaFZhbHVlKG1vbWVudChzZWxlY3RlZERhdGUpLnN0YXJ0T2YoJ21vbnRoJykudHoodGhpcy50aW1lem9uZSkuZm9ybWF0KCkpO1xuXG4gICAgICAgIGNvbnN0IGVuZERhdGVWYWx1ZSA9IHRoaXMuZGF0ZVR5cGUgPT0gdGhpcy5kYXRlVHlwZUVudW0uSU5DTFVTSVZFXG4gICAgICAgICAgICA/IG1vbWVudChzZWxlY3RlZERhdGUpLmVuZE9mKCdtb250aCcpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpXG4gICAgICAgICAgICA6IG1vbWVudChzZWxlY3RlZERhdGUpLmFkZCgxLCAnbW9udGhzJykuc3RhcnRPZignbW9udGgnKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKTtcblxuICAgICAgICB0aGlzLmVuZERhdGVGQy5wYXRjaFZhbHVlKGVuZERhdGVWYWx1ZSk7XG5cbiAgICAgICAgdGhpcy5lbWl0RmlsdGVyLmVtaXQoKTtcbiAgICB9XG5cbiAgICB5ZWFyRGF0ZUlucHV0KHNlbGVjdGVkRGF0ZTogTW9tZW50LCBkYXRlcGlja2VyOiBNYXREYXRlcGlja2VyPE1vbWVudD4pIHtcbiAgICAgICAgbGV0IGR1cmF0aW9uID0gdGhpcy5kYXRlU2VydmljZS5oYW5kbGVEYXRlSW5wdXQoc2VsZWN0ZWREYXRlLCBkYXRlcGlja2VyLCBcIllZWVlcIik7XG5cbiAgICAgICAgdGhpcy5kdXJhdGlvbkZDLnBhdGNoVmFsdWUoZHVyYXRpb24pO1xuICAgICAgICB0aGlzLnN0YXJ0RGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KHNlbGVjdGVkRGF0ZSkuc3RhcnRPZigneWVhcicpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpKTtcblxuICAgICAgICBjb25zdCBlbmREYXRlVmFsdWUgPSB0aGlzLmRhdGVUeXBlID09IHRoaXMuZGF0ZVR5cGVFbnVtLklOQ0xVU0lWRVxuICAgICAgICAgICAgPyBtb21lbnQoc2VsZWN0ZWREYXRlKS5lbmRPZigneWVhcicpLnR6KHRoaXMudGltZXpvbmUpLmZvcm1hdCgpXG4gICAgICAgICAgICA6IG1vbWVudChzZWxlY3RlZERhdGUpLmFkZCgxLCAneWVhcicpLnN0YXJ0T2YoJ3llYXInKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKTtcblxuICAgICAgICB0aGlzLmVuZERhdGVGQy5wYXRjaFZhbHVlKGVuZERhdGVWYWx1ZSk7XG5cbiAgICAgICAgdGhpcy5lbWl0RmlsdGVyLmVtaXQoKTtcbiAgICB9XG5cbiAgICBjdXN0b21EYXRlSW5wdXQoc2VsZWN0ZWREYXRlOiBhbnkpIHtcbiAgICAgICAgdGhpcy5zdGFydERhdGVGQy5wYXRjaFZhbHVlKG1vbWVudChzZWxlY3RlZERhdGUuc3RhcnREYXRlKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG4gICAgICAgIHRoaXMuZW5kRGF0ZUZDLnBhdGNoVmFsdWUobW9tZW50KHNlbGVjdGVkRGF0ZS5lbmREYXRlKS50eih0aGlzLnRpbWV6b25lKS5mb3JtYXQoKSk7XG5cbiAgICAgICAgdGhpcy5lbWl0RmlsdGVyLmVtaXQoKTtcbiAgICB9XG5cbn1cbiIsIjxtYXQtZm9ybS1maWVsZCBbbmdDbGFzc109XCJ7J2Qtbm9uZSc6IGRhdGVJbnB1dFR5cGUgIT0gZGF0ZUlucHV0VHlwZUVudW0uREFZX0lOUFVULCAnbWF0RmllbGRXaWR0aDEwMCc6IG1hdGVyaWFsRmllbGRXaWR0aH1cIiBbYXBwZWFyYW5jZV09XCJmb3JtRmllbGRBcHBlYXJhbmNlXCJcbiAgICBpZD1cImRhaWx5RmllbGRcIiBhcHBEYXRlTW9udGhZZWFyRm9ybWF0IChjbGljayk9XCJkYXRlU2VydmljZS5vcGVuRGF0ZXBpY2tlck9uQ2xpY2soZGFpbHkpXCJcbiAgICAoa2V5ZG93bi5hcnJvd2Rvd24pPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKGRhaWx5KVwiXG4gICAgKGtleWRvd24uZW50ZXIpPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKGRhaWx5KVwiPlxuICAgIDwhLS0gPG1hdC1sYWJlbD4ge3sgbGFiZWwgfX0gPC9tYXQtbGFiZWw+IC0tPlxuICAgIDxpbnB1dCBtYXRJbnB1dCBjbGFzcz1cIm5vRm9jdXNcIiBbbWF0RGF0ZXBpY2tlcl09XCJkYWlseVwiIFtmb3JtQ29udHJvbF09XCJkdXJhdGlvbkZDXCIgW21heF09XCJkYXRlXCJcbiAgICAgICAgKGRhdGVJbnB1dCk9XCJkYXlEYXRlSW5wdXQoJGV2ZW50LnZhbHVlKVwiIHJlYWRvbmx5IFtyZXF1aXJlZF09XCJpc01hbmRhdG9yeUZpZWxkXCIvPlxuICAgIDxtYXQtZGF0ZXBpY2tlci10b2dnbGUgbWF0U3VmZml4IGNsYXNzPVwiZnMtNVwiIFtmb3JdPVwiZGFpbHlcIj48L21hdC1kYXRlcGlja2VyLXRvZ2dsZT5cbiAgICA8bWF0LWRhdGVwaWNrZXIgI2RhaWx5IChjbG9zZWQpPVwiZGF0ZVNlcnZpY2UudGFrZUZvY3VzQXdheSgnZGFpbHlGaWVsZCcpXCI+PC9tYXQtZGF0ZXBpY2tlcj5cbiAgICA8bWF0LWVycm9yICpuZ0lmPVwiZHVyYXRpb25GQy50b3VjaGVkICYmIGR1cmF0aW9uRkMuaGFzRXJyb3IoJ3JlcXVpcmVkJylcIj5cbiAgICAgICAge3sgbGFiZWwgfX1cbiAgICA8L21hdC1lcnJvcj5cbjwvbWF0LWZvcm0tZmllbGQ+XG5cbjxtYXQtZm9ybS1maWVsZFxuICAgIFtuZ0NsYXNzXT1cInsnZC1ub25lJzogZGF0ZUlucHV0VHlwZSAhPSBkYXRlSW5wdXRUeXBlRW51bS5NT05USF9JTlBVVCwgJ21hdEZpZWxkV2lkdGgxMDAnOiBtYXRlcmlhbEZpZWxkV2lkdGh9XCJcbiAgICBbYXBwZWFyYW5jZV09XCJmb3JtRmllbGRBcHBlYXJhbmNlXCIgaWQ9XCJtb250aGx5RmllbGRcIiBhcHBNb250aFllYXJGb3JtYXRcbiAgICAoY2xpY2spPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKG1vbnRobHkpXCJcbiAgICAoa2V5ZG93bi5hcnJvd2Rvd24pPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKG1vbnRobHkpXCJcbiAgICAoa2V5ZG93bi5lbnRlcik9XCJkYXRlU2VydmljZS5vcGVuRGF0ZXBpY2tlck9uQ2xpY2sobW9udGhseSlcIj5cbiAgICA8bWF0LWxhYmVsPiB7eyBsYWJlbCB9fSA8L21hdC1sYWJlbD5cbiAgICA8aW5wdXQgbWF0SW5wdXQgY2xhc3M9XCJub0ZvY3VzXCIgW21hdERhdGVwaWNrZXJdPVwibW9udGhseVwiIFtmb3JtQ29udHJvbF09XCJkdXJhdGlvbkZDXCIgW21heF09XCJkYXRlXCIgcmVhZG9ubHlcbiAgICAgICAgW3JlcXVpcmVkXT1cImlzTWFuZGF0b3J5RmllbGRcIiAvPlxuICAgIDxtYXQtZGF0ZXBpY2tlci10b2dnbGUgbWF0U3VmZml4IGNsYXNzPVwiZnMtNVwiIFtmb3JdPVwibW9udGhseVwiPjwvbWF0LWRhdGVwaWNrZXItdG9nZ2xlPlxuICAgIDxtYXQtZGF0ZXBpY2tlciAjbW9udGhseSBwYW5lbENsYXNzPVwibW9udGhQaWNrZXJcIiBzdGFydFZpZXc9XCJ5ZWFyXCIgKG1vbnRoU2VsZWN0ZWQpPVwibW9udGhEYXRlSW5wdXQoJGV2ZW50LCBtb250aGx5KVwiXG4gICAgICAgIChjbG9zZWQpPVwiZGF0ZVNlcnZpY2UudGFrZUZvY3VzQXdheSgnbW9udGhseUZpZWxkJylcIj48L21hdC1kYXRlcGlja2VyPlxuICAgIDxtYXQtZXJyb3IgKm5nSWY9XCJkdXJhdGlvbkZDLnRvdWNoZWQgJiYgZHVyYXRpb25GQy5oYXNFcnJvcigncmVxdWlyZWQnKVwiPlxuICAgICAgICB7eyBsYWJlbCB9fVxuICAgIDwvbWF0LWVycm9yPlxuPC9tYXQtZm9ybS1maWVsZD5cblxuPG1hdC1mb3JtLWZpZWxkIFtuZ0NsYXNzXT1cInsnZC1ub25lJzogZGF0ZUlucHV0VHlwZSAhPSBkYXRlSW5wdXRUeXBlRW51bS5ZRUFSX0lOUFVULCAnbWF0RmllbGRXaWR0aDEwMCc6IG1hdGVyaWFsRmllbGRXaWR0aH1cIiBbYXBwZWFyYW5jZV09XCJmb3JtRmllbGRBcHBlYXJhbmNlXCJcbiAgICBpZD1cInllYXJseUZpZWxkXCIgYXBwWWVhckZvcm1hdCAoY2xpY2spPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKHllYXJseSlcIlxuICAgIChrZXlkb3duLmFycm93ZG93bik9XCJkYXRlU2VydmljZS5vcGVuRGF0ZXBpY2tlck9uQ2xpY2soeWVhcmx5KVwiXG4gICAgKGtleWRvd24uZW50ZXIpPVwiZGF0ZVNlcnZpY2Uub3BlbkRhdGVwaWNrZXJPbkNsaWNrKHllYXJseSlcIj5cbiAgICA8bWF0LWxhYmVsPiB7eyBsYWJlbCB9fSA8L21hdC1sYWJlbD5cbiAgICA8aW5wdXQgbWF0SW5wdXQgY2xhc3M9XCJub0ZvY3VzXCIgW21hdERhdGVwaWNrZXJdPVwieWVhcmx5XCIgW2Zvcm1Db250cm9sXT1cImR1cmF0aW9uRkNcIiBbbWF4XT1cImRhdGVcIiByZWFkb25seSBbcmVxdWlyZWRdPVwiaXNNYW5kYXRvcnlGaWVsZFwiLz5cbiAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlIG1hdFN1ZmZpeCBjbGFzcz1cImZzLTVcIiBbZm9yXT1cInllYXJseVwiPjwvbWF0LWRhdGVwaWNrZXItdG9nZ2xlPlxuICAgIDxtYXQtZGF0ZXBpY2tlciAjeWVhcmx5IHN0YXJ0Vmlldz1cIm11bHRpLXllYXJcIiBwYW5lbENsYXNzPVwieWVhclBpY2tlclwiXG4gICAgICAgICh5ZWFyU2VsZWN0ZWQpPVwieWVhckRhdGVJbnB1dCgkZXZlbnQsIHllYXJseSlcIlxuICAgICAgICAoY2xvc2VkKT1cImRhdGVTZXJ2aWNlLnRha2VGb2N1c0F3YXkoJ3llYXJseUZpZWxkJylcIj48L21hdC1kYXRlcGlja2VyPlxuICAgIDxtYXQtZXJyb3IgKm5nSWY9XCJkdXJhdGlvbkZDLnRvdWNoZWQgJiYgZHVyYXRpb25GQy5oYXNFcnJvcigncmVxdWlyZWQnKVwiPlxuICAgICAgICB7eyBsYWJlbCB9fVxuICAgIDwvbWF0LWVycm9yPlxuPC9tYXQtZm9ybS1maWVsZD5cblxuPG1hdC1mb3JtLWZpZWxkIFtuZ0NsYXNzXT1cInsnZC1ub25lJzogZGF0ZUlucHV0VHlwZSAhPSBkYXRlSW5wdXRUeXBlRW51bS5DVVNUT01fSU5QVVQsICdtYXRGaWVsZFdpZHRoMTAwJzogbWF0ZXJpYWxGaWVsZFdpZHRofVwiXG4gICAgW2FwcGVhcmFuY2VdPVwiZm9ybUZpZWxkQXBwZWFyYW5jZVwiPlxuICAgIDxtYXQtbGFiZWw+IHt7IGxhYmVsIH19IDwvbWF0LWxhYmVsPlxuICAgIDxpbnB1dCB0eXBlPVwidGV4dFwiIG1hdElucHV0IG5neERhdGVyYW5nZXBpY2tlck1kXG4gICAgICAgIFtsb2NhbGVdPVwie2RpcmVjdGlvbjogJ2x0cicsIGFwcGx5TGFiZWw6ICdBcHBseScsIGZvcm1hdDogY0RSZm9ybWF0LCBjdXN0b21SYW5nZUxhYmVsOiAnQ3VzdG9tIFJhbmdlJ31cIlxuICAgICAgICBbc2hvd0N1c3RvbVJhbmdlTGFiZWxdPVwic2hvd0NkclJhbmdlTGFiZWxcIiBbdGltZVBpY2tlcl09XCJzaG93VGltZUluQ0RSXCIgW3Jhbmdlc109XCJzaG93UmFuZ2UgPyByYW5nZSA6IG51bGxcIlxuICAgICAgICBbZHJvcHNdPVwiJ2Rvd24nXCIgW29wZW5zXT1cIidyaWdodCdcIiBbYWx3YXlzU2hvd0NhbGVuZGFyc109XCJ0cnVlXCIgW2tlZXBDYWxlbmRhck9wZW5pbmdXaXRoUmFuZ2VdPVwidHJ1ZVwiXG4gICAgICAgIFtzaG93RHJvcGRvd25zXT1cInRydWVcIiBbc2hvd0NhbmNlbF09XCJ0cnVlXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgbmFtZT1cImRhdGVyYW5nZVwiIFtmb3JtQ29udHJvbF09XCJkYXRlcmFuZ2VcIlxuICAgICAgICAobmdNb2RlbENoYW5nZSk9XCJjdXN0b21EYXRlSW5wdXQoZGF0ZXJhbmdlLnZhbHVlKVwiIFtyZWFkb25seV09XCJ0cnVlXCIgW3JlcXVpcmVkXT1cImlzTWFuZGF0b3J5RmllbGRcIi8+XG4gICAgPG1hdC1lcnJvciAqbmdJZj1cImRhdGVyYW5nZS50b3VjaGVkICYmIGRhdGVyYW5nZS5oYXNFcnJvcigncmVxdWlyZWQnKVwiPlxuICAgICAgICB7eyBsYWJlbCB9fVxuICAgIDwvbWF0LWVycm9yPlxuPC9tYXQtZm9ybS1maWVsZD4iXX0=
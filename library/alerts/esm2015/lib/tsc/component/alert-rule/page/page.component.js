import { Component, ViewChild } from '@angular/core';
import { FormControl } from '@angular/forms';
import { merge, fromEvent, of as observableOf } from 'rxjs';
import { map, startWith, switchMap, catchError } from "rxjs/operators";
import { faPlus, faEllipsisV } from '@fortawesome/free-solid-svg-icons';
import { AlertButtonLabelEnum, AlertTypeEnum, AlertPageLabelEnum } from '../../../enum/alert.enum';
import { EscalationPermission } from '../../../model/escalation.model';
import { TABLE_CONSTANT, COMMON_CONSTANT, ButtonLabelEnum, DialogEnum, DialogOneEnum, DialogOneComponent, MATERIAL_CONSTANT, MaterialFormFieldAppearance } from '@library/tsc-common';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@library/storage-service";
import * as i3 from "@library/toastr-service";
import * as i4 from "../../../controller/alert.controller";
import * as i5 from "../../../controller/escalation.controller";
import * as i6 from "@angular/material/dialog";
import * as i7 from "@library/tsc-common";
import * as i8 from "@fortawesome/angular-fontawesome";
import * as i9 from "@angular/material/table";
import * as i10 from "@angular/material/sort";
import * as i11 from "@angular/material/slide-toggle";
import * as i12 from "@angular/material/paginator";
import * as i13 from "@angular/material/core";
import * as i14 from "@angular/material/tooltip";
import * as i15 from "@angular/forms";
import * as i16 from "@ng-bootstrap/ng-bootstrap";
import * as i17 from "@angular/common";
// /tsc-library/
export class PageComponent {
    constructor(router, activatedRoute, storageService, toastrService, alertController, escalationController, dialog) {
        this.router = router;
        this.activatedRoute = activatedRoute;
        this.storageService = storageService;
        this.toastrService = toastrService;
        this.alertController = alertController;
        this.escalationController = escalationController;
        this.dialog = dialog;
        this.faPlus = faPlus;
        this.faEllipsisV = faEllipsisV;
        this.TABLE_CONSTANT = TABLE_CONSTANT;
        this.COMMON_CONSTANT = COMMON_CONSTANT;
        this.MATERIAL_CONSTANT = MATERIAL_CONSTANT;
        this.AlertTypeEnum = AlertTypeEnum;
        this.AlertPageLabelEnum = AlertPageLabelEnum;
        this.AlertButtonLabelEnum = AlertButtonLabelEnum;
        this.ButtonLabelEnum = ButtonLabelEnum;
        this.DialogEnum = DialogEnum;
        this.MaterialFormFieldAppearance = MaterialFormFieldAppearance;
        this.displayedColumn = ['id', 'name', 'associatedWith', 'ruleDescription', 'status', 'action'];
        this.resultLength = 0;
        this.dataSource = [];
        this.searchFlag = false;
        this.searchArr = [];
        this.escalationPermissionM = new EscalationPermission();
        this.alertStatusFC = new FormControl();
    }
    ngOnInit() {
        this.orgID = this.storageService.getStorage('currentOrgID');
        this.activatedRoute.data.subscribe(data => {
            this.alertLabel = data['alertType'];
        });
        const currentUrl = this.router.url;
        const segments = currentUrl.split('/');
        segments.pop();
        this.baseUrl = segments.join('/');
        this.getEscalationPermission();
    }
    ngAfterViewInit() {
        merge(this.paginator.page, this.sort.sortChange, fromEvent(this.refreshBtn.nativeElement, 'click')).pipe(startWith({}), switchMap(() => {
            this.searchArr = [];
            if (this.searchFlag) {
                this.searchArr.push('name:' + this.searchValue);
            }
            const alertType = this.alertLabel == AlertPageLabelEnum.INSTANTANEOUS_LABEL ? AlertTypeEnum.INSTANTANEOUS : AlertTypeEnum.PERIODIC;
            return this.alertController.getAlertRuleByPage(this.paginator.pageIndex, this.paginator.pageSize, this.sort.active, this.sort.direction, this.searchArr, alertType, this.orgID).pipe(catchError(() => observableOf(null)));
        }), map((response) => {
            if (response == null) {
                this.resultLength = 0;
                return [];
            }
            this.resultLength = response["totalCount"];
            return response["records"];
        })).subscribe((dataSource) => {
            this.dataSource = dataSource;
            this.dataSource.forEach(alert => {
                this.alertStatusFC[alert.id] = new FormControl(alert.status);
            });
        });
    }
    getEscalationPermission() {
        this.escalationController.getEscalationPermission(this.orgID).subscribe((escalationPermissionRes) => {
            this.escalationPermissionM = escalationPermissionRes;
        }, error => {
            console.log('error in getEscalationPermission() -', error);
        });
    }
    getAlertStatusFC(alertID) {
        return this.alertStatusFC[alertID];
    }
    alertStatusChange(alertID) {
        let requestBody = {};
        requestBody['status'] = this.alertStatusFC[alertID].value;
        this.alertController.updateAlertRuleStatus(this.orgID, alertID, requestBody)
            .subscribe((alertStatusRes) => {
            let toast = this.toastrService.getToastStatus(alertStatusRes['status']);
            this.toastrService.openToast(toast.title, alertStatusRes.message, toast.color);
        }, error => {
            console.log('error in alertStatusChange - ', error);
        });
    }
    searchFn(value) {
        this.searchFlag = true;
        this.searchValue = value;
        if (value.length == 0) {
            this.resetSearch();
        }
        else {
            this.paginator.pageIndex = 0;
        }
        this.refreshBtn.nativeElement.click();
    }
    resetSearch() {
        this.searchFlag = false;
        this.searchBar.searchClear();
    }
    openDeleteAlertDialog(alertID, alertName) {
        const dialog = this.dialog.open(DialogOneComponent, {
            minWidth: '450px',
            maxWidth: '450px',
            data: {
                type: DialogOneEnum.DELETE,
                icon: 'dangerous',
                header: 'Delete alert rule?',
                body: '<b>' + alertName + '</b>' + ' will be deleted permanently.</br></br>Are you sure you want to continue?',
                buttonOne: ButtonLabelEnum.CANCEL_BTN_LABEL,
                buttonTwo: ButtonLabelEnum.DELETE_BTN_LABEL
            }
        });
        dialog.afterClosed().subscribe(res => {
            if (res) {
                this.deleteAlertRule(alertID);
            }
        });
    }
    deleteAlertRule(alertID) {
        this.alertController.deleteAlertRule(this.orgID, alertID).subscribe((deleteRes) => {
            this.refreshBtn.nativeElement.click();
            let toast = this.toastrService.getToastStatus(deleteRes.status);
            this.toastrService.openToast(toast.title, deleteRes.message, toast.color);
        });
    }
}
PageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PageComponent, deps: [{ token: i1.Router }, { token: i1.ActivatedRoute }, { token: i2.StorageService }, { token: i3.ToastrService }, { token: i4.AlertRuleController }, { token: i5.EscalationController }, { token: i6.MatDialog }], target: i0.ɵɵFactoryTarget.Component });
PageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: PageComponent, selector: "lib-page", viewQueries: [{ propertyName: "sort", first: true, predicate: ["sort"], descendants: true }, { propertyName: "paginator", first: true, predicate: ["paginator"], descendants: true }, { propertyName: "refreshBtn", first: true, predicate: ["refreshBtn"], descendants: true }, { propertyName: "searchBar", first: true, predicate: ["searchBar"], descendants: true }], ngImport: i0, template: "<div class=\"card main-card cardOverwrite h100\">\n    <div class=\"headerContainer\">\n        <div class=\"headerLeftContainer\">\n            <div class=\"pageTitle\">{{ alertLabel }} Alert</div>\n        </div>\n        <div class=\"headerRightContainer\">\n            <div class=\"headerRightContainerInner\">\n                <lib-search-bar-one class=\"me-3\" #searchBar searchBy=\"name\" (emitSearch)=\"searchFn($event)\">\n                </lib-search-bar-one>\n                <a class=\"btn btn-sm btn-success btnBase\" matRipple\n                    [matRippleCentered]=\"MATERIAL_CONSTANT.MAT_RIPPLE_CENTER\" [routerLink]=\"[baseUrl, 'create']\">\n                    <fa-icon [icon]=\"faPlus\"></fa-icon>&nbsp; {{ alertLabel }} Alert\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <button #refreshBtn class=\"d-none\"></button>\n\n    <div class=\"overflowX customScrollBar\">\n        <table class=\"w-100\" mat-table [dataSource]=\"dataSource\" #sort=\"matSort\" matSort matSortActive=\"id\"\n            matSortDirection=\"asc\" matSortDisableClear>\n\n            <ng-container matColumnDef=\"id\">\n                <th class=\"px-3 columnWidth1\" mat-header-cell *matHeaderCellDef mat-sort-header disableClear>\n                    ID\n                </th>\n                <td class=\"px-3 columnWidth1\" mat-cell *matCellDef=\"let row\">\n                    {{ row['id'] ? row['id']: COMMON_CONSTANT.HYPHEN }}\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"name\">\n                <th class=\"px-3 columnWidth2\" mat-header-cell *matHeaderCellDef> Name </th>\n                <td class=\"px-3 columnWidth2\" mat-cell *matCellDef=\"let row\" [matTooltip]=\"row?.['name']?.length>20? row['name']: ''\"\n                    matTooltipPosition=\"above\" matTooltipClass=\"nameTooltip\">\n                    {{ (row['name'] ? row['name']: COMMON_CONSTANT.HYPHEN) | dotdotdot:20}}\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"associatedWith\">\n                <th class=\"px-3 columnWidth3\" mat-header-cell *matHeaderCellDef> Associated with </th>\n                <td class=\"px-3 columnWidth3\" mat-cell *matCellDef=\"let row\"\n                    [matTooltip]=\"row?.['associatedWith']?.length>25? row['associatedWith']: ''\"\n                    matTooltipPosition=\"above\" matTooltipClass=\"nameTooltip\">\n                    {{ (row['associatedWith'] ? row['associatedWith']: COMMON_CONSTANT.HYPHEN) | dotdotdot:25}}\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"ruleDescription\">\n                <th class=\"px-3 columnWidth3\" mat-header-cell *matHeaderCellDef> Rule </th>\n                <td class=\"px-3 columnWidth3\" mat-cell *matCellDef=\"let row\"\n                    [matTooltip]=\"row?.['ruleDescription']?.length>25? row['ruleDescription']: ''\"\n                    matTooltipPosition=\"above\" matTooltipClass=\"nameTooltip\">\n                    {{ (row['ruleDescription'] ? row['ruleDescription']: COMMON_CONSTANT.HYPHEN) | dotdotdot:25}}\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"status\">\n                <th class=\"px-3 columnWidth1\" mat-header-cell *matHeaderCellDef> Status </th>\n                <td class=\"px-3 columnWidth1\" mat-cell *matCellDef=\"let row\">\n                    <mat-slide-toggle class=\"slideToggleBtn\" [formControl]=\"getAlertStatusFC(row.id)\"\n                        (change)=\"alertStatusChange(row.id)\"></mat-slide-toggle>\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"action\">\n                <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef></th>\n                <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row\">\n                    <div class=\"d-flex align-items-center\">\n                        <div class=\"btn-group\" ngbDropdown placement=\"left\">\n                            <button type=\"button\" ngbDropdownToggle class=\"dropdown-after dropdownAfter btn\">\n                                <fa-icon [icon]=\"faEllipsisV\"></fa-icon>\n                            </button>\n                            <div ngbDropdownMenu>\n                                <button class=\"dropdown-item\" [routerLink]=\"[baseUrl, row['id'], 'update']\">\n                                    {{ ButtonLabelEnum.UPDATE_BTN_LABEL }}\n                                </button>\n                                <button class=\"dropdown-item\" [routerLink]=\"[baseUrl + '/' + row['id'] + '/escalation']\" *ngIf=\"escalationPermissionM\">\n                                    {{ AlertButtonLabelEnum.ESCALATION_RULE }}\n                                </button>\n                                <button class=\"btn btn-outline-danger rounded-0 dropdown-item\" (click)=\"openDeleteAlertDialog(row.id, row.name)\">\n                                    {{ ButtonLabelEnum.DELETE_BTN_LABEL }}\n                                </button>\n                            </div>\n                        </div>\n                    </div>\n                </td>\n            </ng-container>\n\n            <tr mat-header-row *matHeaderRowDef=\"displayedColumn\"></tr>\n            <tr mat-row *matRowDef=\"let task; columns: displayedColumn;\"></tr>\n\n            <tr class=\"mat-row\" *matNoDataRow>\n                <td class=\"mat-cell text-center\" [attr.colspan]=\"displayedColumn.length\">\n                    {{ TABLE_CONSTANT.TABLE_NO_DATA }}\n                </td>\n            </tr>\n        </table>\n    </div>\n    <mat-paginator #paginator class=\"roundedBorder\" showFirstLastButtons [length]=\"resultLength\"\n        [pageSize]=\"TABLE_CONSTANT.DEFAULT_PAGE_SIZE\" [pageSizeOptions]=\"TABLE_CONSTANT.PAGE_SIZE_OPTION\">\n    </mat-paginator>\n</div>", styles: [".columnWidth1{min-width:120px}.columnWidth2{min-width:200px}.columnWidth3{min-width:230px}.slideToggleBtn .mat-slide-toggle.mat-checked .mat-slide-toggle-bar{background-color:#3ac47d}.slideToggleBtn .mat-slide-toggle.mat-checked .mat-slide-toggle-thumb{background-color:#fff}\n"], components: [{ type: i7.SearchBarOneComponent, selector: "lib-search-bar-one", inputs: ["type", "searchBy", "clear"], outputs: ["emitSearch"] }, { type: i8.FaIconComponent, selector: "fa-icon", inputs: ["classes", "icon", "title", "spin", "pulse", "mask", "styles", "flip", "size", "pull", "border", "inverse", "symbol", "rotate", "fixedWidth", "transform", "a11yRole"] }, { type: i9.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { type: i10.MatSortHeader, selector: "[mat-sort-header]", inputs: ["disabled", "arrowPosition", "sortActionDescription", "disableClear", "mat-sort-header", "start"], exportAs: ["matSortHeader"] }, { type: i11.MatSlideToggle, selector: "mat-slide-toggle", inputs: ["disabled", "disableRipple", "color", "tabIndex", "name", "id", "labelPosition", "aria-label", "aria-labelledby", "required", "checked", "aria-describedby"], outputs: ["change", "toggleChange"], exportAs: ["matSlideToggle"] }, { type: i9.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { type: i9.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { type: i12.MatPaginator, selector: "mat-paginator", inputs: ["disabled"], exportAs: ["matPaginator"] }], directives: [{ type: i1.RouterLinkWithHref, selector: "a[routerLink],area[routerLink]", inputs: ["routerLink", "target", "queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo"] }, { type: i13.MatRipple, selector: "[mat-ripple], [matRipple]", inputs: ["matRippleRadius", "matRippleDisabled", "matRippleTrigger", "matRippleColor", "matRippleUnbounded", "matRippleCentered", "matRippleAnimation"], exportAs: ["matRipple"] }, { type: i10.MatSort, selector: "[matSort]", inputs: ["matSortDisabled", "matSortStart", "matSortDirection", "matSortDisableClear", "matSortActive"], outputs: ["matSortChange"], exportAs: ["matSort"] }, { type: i9.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { type: i9.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { type: i9.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { type: i9.MatCellDef, selector: "[matCellDef]" }, { type: i9.MatCell, selector: "mat-cell, td[mat-cell]" }, { type: i14.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { type: i15.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i15.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i16.NgbDropdown, selector: "[ngbDropdown]", inputs: ["autoClose", "dropdownClass", "open", "placement", "container", "display"], outputs: ["openChange"], exportAs: ["ngbDropdown"] }, { type: i16.NgbDropdownToggle, selector: "[ngbDropdownToggle]" }, { type: i16.NgbDropdownMenu, selector: "[ngbDropdownMenu]" }, { type: i1.RouterLink, selector: ":not(a):not(area)[routerLink]", inputs: ["routerLink", "queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo"] }, { type: i17.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i9.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { type: i9.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { type: i9.MatNoDataRow, selector: "ng-template[matNoDataRow]" }], pipes: { "dotdotdot": i7.EllipsisPipeService } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: PageComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-page',
                    templateUrl: './page.component.html',
                    styleUrls: ['./page.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.Router }, { type: i1.ActivatedRoute }, { type: i2.StorageService }, { type: i3.ToastrService }, { type: i4.AlertRuleController }, { type: i5.EscalationController }, { type: i6.MatDialog }]; }, propDecorators: { sort: [{
                type: ViewChild,
                args: ['sort']
            }], paginator: [{
                type: ViewChild,
                args: ['paginator']
            }], refreshBtn: [{
                type: ViewChild,
                args: ['refreshBtn']
            }], searchBar: [{
                type: ViewChild,
                args: ['searchBar']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L2FsZXJ0cy9zcmMvbGliL3RzYy9jb21wb25lbnQvYWxlcnQtcnVsZS9wYWdlL3BhZ2UuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbGlicmFyeS9hbGVydHMvc3JjL2xpYi90c2MvY29tcG9uZW50L2FsZXJ0LXJ1bGUvcGFnZS9wYWdlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXNCLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUd6RSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFLN0MsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBRSxJQUFJLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUM1RCxPQUFPLEVBQUUsR0FBRyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFdkUsT0FBTyxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsTUFBTSxtQ0FBbUMsQ0FBQztBQUV4RSxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsYUFBYSxFQUFFLGtCQUFrQixFQUFFLE1BQU0sMEJBQTBCLENBQUM7QUFHbkcsT0FBTyxFQUFFLG9CQUFvQixFQUF5QixNQUFNLGlDQUFpQyxDQUFDO0FBUTlGLE9BQU8sRUFBRSxjQUFjLEVBQUUsZUFBZSxFQUFFLGVBQWUsRUFBRSxVQUFVLEVBQUUsYUFBYSxFQUFnQyxrQkFBa0IsRUFBYSxpQkFBaUIsRUFBRSwyQkFBMkIsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQy9OLGdCQUFnQjtBQVFoQixNQUFNLE9BQU8sYUFBYTtJQXFDdEIsWUFDWSxNQUFjLEVB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QUFFLEVBQUU7WUFDekYsSUFBSSxDQUFDLFVBQVUsQ0FBQyxhQUFhLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDdEMsSUFBSSxLQUFLLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1lBQ2hFLElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsU0FBUyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDOUUsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDOzsyR0E1S1EsYUFBYTsrRkFBYixhQUFhLDJaQ2pDMUIsaTBMQXVHTTs0RkR0RU8sYUFBYTtrQkFOekIsU0FBUzttQkFBQztvQkFDUCxRQUFRLEVBQUUsVUFBVTtvQkFDcEIsV0FBVyxFQUFFLHVCQUF1QjtvQkFDcEMsU0FBUyxFQUFFLENBQUMsdUJBQXVCLENBQUM7aUJBQ3ZDO2dSQWtDc0IsSUFBSTtzQkFBdEIsU0FBUzt1QkFBQyxNQUFNO2dCQUNPLFNBQVM7c0JBQWhDLFNBQVM7dUJBQUMsV0FBVztnQkFDRyxVQUFVO3NCQUFsQyxTQUFTO3VCQUFDLFlBQVk7Z0JBQ0MsU0FBUztzQkFBaEMsU0FBUzt1QkFBQyxXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBPbkluaXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQWN0aXZhdGVkUm91dGUsIFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmltcG9ydCB7IEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgTWF0U29ydCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NvcnQnO1xuaW1wb3J0IHsgTWF0UGFnaW5hdG9yIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvcGFnaW5hdG9yJztcbmltcG9ydCB7IE1hdERpYWxvZyB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL2RpYWxvZyc7XG5cbmltcG9ydCB7IG1lcmdlLCBmcm9tRXZlbnQsIG9mIGFzIG9ic2VydmFibGVPZiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgbWFwLCBzdGFydFdpdGgsIHN3aXRjaE1hcCwgY2F0Y2hFcnJvciB9IGZyb20gXCJyeGpzL29wZXJhdG9yc1wiO1xuXG5pbXBvcnQgeyBmYVBsdXMsIGZhRWxsaXBzaXNWIH0gZnJvbSAnQGZvcnRhd2Vzb21lL2ZyZWUtc29saWQtc3ZnLWljb25zJztcblxuaW1wb3J0IHsgQWxlcnRCdXR0b25MYWJlbEVudW0sIEFsZXJ0VHlwZUVudW0sIEFsZXJ0UGFnZUxhYmVsRW51bSB9IGZyb20gJy4uLy4uLy4uL2VudW0vYWxlcnQuZW51bSc7XG5cbmltcG9ydCB7IEFsZXJ0UGFnZU0gfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9hbGVydC5tb2RlbCc7XG5pbXBvcnQgeyBFc2NhbGF0aW9uUGVybWlzc2lvbiwgRXNjYWxhdGlvblBlcm1pc3Npb25NIH0gZnJvbSAnLi4vLi4vLi4vbW9kZWwvZXNjYWxhdGlvbi5tb2RlbCc7XG5cbmltcG9ydCB7IEFsZXJ0UnVsZUNvbnRyb2xsZXIgfSBmcm9tICcuLi8uLi8uLi9jb250cm9sbGVyL2FsZXJ0LmNvbnRyb2xsZXInO1xuaW1wb3J0IHsgRXNjYWxhdGlvbkNvbnRyb2xsZXIgfSBmcm9tICcuLi8uLi8uLi9jb250cm9sbGVyL2VzY2FsYXRpb24uY29udHJvbGxlcic7XG5cbi8vIHRzYy1saWJyYXJ5XG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJ0BsaWJyYXJ5L3N0b3JhZ2Utc2VydmljZSc7XG5pbXBvcnQgeyBUb2FzdHJTZXJ2aWNlIH0gZnJvbSAnQGxpYnJhcnkvdG9hc3RyLXNlcnZpY2UnO1xuaW1wb3J0IHsgVEFCTEVfQ09OU1RBTlQsIENPTU1PTl9DT05TVEFOVCwgQnV0dG9uTGFiZWxFbnVtLCBEaWFsb2dFbnVtLCBEaWFsb2dPbmVFbnVtLCBQYWdlTSwgU2VhcmNoQmFyT25lQ29tcG9uZW50LCBEaWFsb2dPbmVDb21wb25lbnQsIFJlc3BvbnNlTSwgTUFURVJJQUxfQ09OU1RBTlQsIE1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZSB9IGZyb20gJ0BsaWJyYXJ5L3RzYy1jb21tb24nO1xuLy8gL3RzYy1saWJyYXJ5L1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2xpYi1wYWdlJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vcGFnZS5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbJy4vcGFnZS5jb21wb25lbnQuc2NzcyddXG59KVxuXG5leHBvcnQgY2xhc3MgUGFnZUNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gICAgZmFQbHVzID0gZmFQbHVzO1xuICAgIGZhRWxsaXBzaXNWID0gZmFFbGxpcHNpc1Y7XG5cbiAgICBUQUJMRV9DT05TVEFOVCA9IFRBQkxFX0NPTlNUQU5UO1xuICAgIENPTU1PTl9DT05TVEFOVCA9IENPTU1PTl9DT05TVEFOVDtcbiAgICBNQVRFUklBTF9DT05TVEFOVCA9IE1BVEVSSUFMX0NPTlNUQU5UO1xuXG4gICAgQWxlcnRUeXBlRW51bSA9IEFsZXJ0VHlwZUVudW07XG4gICAgQWxlcnRQYWdlTGFiZWxFbnVtID0gQWxlcnRQYWdlTGFiZWxFbnVtO1xuICAgIEFsZXJ0QnV0dG9uTGFiZWxFbnVtID0gQWxlcnRCdXR0b25MYWJlbEVudW07XG4gICAgQnV0dG9uTGFiZWxFbnVtID0gQnV0dG9uTGFiZWxFbnVtO1xuICAgIERpYWxvZ0VudW0gPSBEaWFsb2dFbnVtO1xuICAgIE1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZSA9IE1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZTtcblxuICAgIG9yZ0lEOiBhbnk7XG4gICAgYWxlcnRMYWJlbDogYW55O1xuXG4gICAgYmFzZVVybDogYW55O1xuXG4gICAgZGlzcGxheWVkQ29sdW1uOiBzdHJpbmdbXSA9IFsnaWQnLCAnbmFtZScsICdhc3NvY2lhdGVkV2l0aCcsICdydWxlRGVzY3JpcHRpb24nLCAnc3RhdHVzJywgJ2FjdGlvbiddO1xuICAgIHJlc3VsdExlbmd0aDogbnVtYmVyID0gMDtcbiAgICBkYXRhU291cmNlOiBhbnlbXSA9IFtdO1xuXG4gICAgc2VhcmNoRmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHNlYXJjaFZhbHVlOiBzdHJpbmc7XG4gICAgc2VhcmNoQXJyOiBhbnlbXSA9IFtdO1xuXG4gICAgZXNjYWxhdGlvblBlcm1pc3Npb25NID0gbmV3IEVzY2FsYXRpb25QZXJtaXNzaW9uKCk7XG5cbiAgICBhbGVydFN0YXR1c0ZDOiBGb3JtQ29udHJvbCA9IG5ldyBGb3JtQ29udHJvbCgpO1xuXG4gICAgQFZpZXdDaGlsZCgnc29ydCcpIHNvcnQ6IE1hdFNvcnQ7XG4gICAgQFZpZXdDaGlsZCgncGFnaW5hdG9yJykgcGFnaW5hdG9yOiBNYXRQYWdpbmF0b3I7XG4gICAgQFZpZXdDaGlsZCgncmVmcmVzaEJ0bicpIHJlZnJlc2hCdG46IEVsZW1lbnRSZWY7XG4gICAgQFZpZXdDaGlsZCgnc2VhcmNoQmFyJykgc2VhcmNoQmFyOiBTZWFyY2hCYXJPbmVDb21wb25lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICAgICAgcHJpdmF0ZSBhY3RpdmF0ZWRSb3V0ZTogQWN0aXZhdGVkUm91dGUsXG4gICAgICAgIHByaXZhdGUgc3RvcmFnZVNlcnZpY2U6IFN0b3JhZ2VTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIHRvYXN0clNlcnZpY2U6IFRvYXN0clNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgYWxlcnRDb250cm9sbGVyOiBBbGVydFJ1bGVDb250cm9sbGVyLFxuICAgICAgICBwcml2YXRlIGVzY2FsYXRpb25Db250cm9sbGVyOiBFc2NhbGF0aW9uQ29udHJvbGxlcixcbiAgICAgICAgcHJpdmF0ZSBkaWFsb2c6IE1hdERpYWxvZyxcbiAgICApIHsgfVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JnSUQgPSB0aGlzLnN0b3JhZ2VTZXJ2aWNlLmdldFN0b3JhZ2UoJ2N1cnJlbnRPcmdJRCcpO1xuXG4gICAgICAgIHRoaXMuYWN0aXZhdGVkUm91dGUuZGF0YS5zdWJzY3JpYmUoZGF0YSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFsZXJ0TGFiZWwgPSBkYXRhWydhbGVydFR5cGUnXTtcbiAgICAgICAgfSlcblxuICAgICAgICBjb25zdCBjdXJyZW50VXJsID0gdGhpcy5yb3V0ZXIudXJsO1xuICAgICAgICBjb25zdCBzZWdtZW50cyA9IGN1cnJlbnRVcmwuc3BsaXQoJy8nKTtcbiAgICAgICAgc2VnbWVudHMucG9wKCk7XG5cbiAgICAgICAgdGhpcy5iYXNlVXJsID0gc2VnbWVudHMuam9pbignLycpO1xuXG4gICAgICAgIHRoaXMuZ2V0RXNjYWxhdGlvblBlcm1pc3Npb24oKTtcbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIG1lcmdlKFxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0b3IucGFnZSxcbiAgICAgICAgICAgIHRoaXMuc29ydC5zb3J0Q2hhbmdlLFxuICAgICAgICAgICAgZnJvbUV2ZW50KHRoaXMucmVmcmVzaEJ0bi5uYXRpdmVFbGVtZW50LCAnY2xpY2snKVxuICAgICAgICApLnBpcGUoXG4gICAgICAgICAgICBzdGFydFdpdGgoe30pLFxuICAgICAgICAgICAgc3dpdGNoTWFwKCgpOiBhbnkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VhcmNoQXJyID0gW107XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRmxhZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEFyci5wdXNoKCduYW1lOicgKyB0aGlzLnNlYXJjaFZhbHVlKVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGNvbnN0IGFsZXJ0VHlwZSA9IHRoaXMuYWxlcnRMYWJlbCA9PSBBbGVydFBhZ2VMYWJlbEVudW0uSU5TVEFOVEFORU9VU19MQUJFTCA/IEFsZXJ0VHlwZUVudW0uSU5TVEFOVEFORU9VUyA6IEFsZXJ0VHlwZUVudW0uUEVSSU9ESUM7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5hbGVydENvbnRyb2xsZXIuZ2V0QWxlcnRSdWxlQnlQYWdlKFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2luYXRvci5wYWdlSW5kZXgsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdG9yLnBhZ2VTaXplLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnQuYWN0aXZlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnQuZGlyZWN0aW9uLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEFycixcbiAgICAgICAgICAgICAgICAgICAgYWxlcnRUeXBlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9yZ0lEXG4gICAgICAgICAgICAgICAgKS5waXBlKGNhdGNoRXJyb3IoKCkgPT4gb2JzZXJ2YWJsZU9mKG51bGwpKSk7XG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIG1hcCgocmVzcG9uc2U6IFBhZ2VNPEFsZXJ0UGFnZU0+KTogYW55ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UgPT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdExlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRMZW5ndGggPSByZXNwb25zZVtcInRvdGFsQ291bnRcIl07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlW1wicmVjb3Jkc1wiXTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICkuc3Vic2NyaWJlKChkYXRhU291cmNlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSBkYXRhU291cmNlO1xuICAgICAgICAgICAgdGhpcy5kYXRhU291cmNlLmZvckVhY2goYWxlcnQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRTdGF0dXNGQ1thbGVydC5pZF0gPSBuZXcgRm9ybUNvbnRyb2woYWxlcnQuc3RhdHVzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXRFc2NhbGF0aW9uUGVybWlzc2lvbigpIHtcbiAgICAgICAgdGhpcy5lc2NhbGF0aW9uQ29udHJvbGxlci5nZXRFc2NhbGF0aW9uUGVybWlzc2lvbih0aGlzLm9yZ0lEKS5zdWJzY3JpYmUoKGVzY2FsYXRpb25QZXJtaXNzaW9uUmVzOiBFc2NhbGF0aW9uUGVybWlzc2lvbk0pID0+IHtcbiAgICAgICAgICAgIHRoaXMuZXNjYWxhdGlvblBlcm1pc3Npb25NID0gZXNjYWxhdGlvblBlcm1pc3Npb25SZXM7XG4gICAgICAgIH0sIGVycm9yID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBpbiBnZXRFc2NhbGF0aW9uUGVybWlzc2lvbigpIC0nLCBlcnJvcik7XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ2V0QWxlcnRTdGF0dXNGQyhhbGVydElEOiBudW1iZXIpOiBGb3JtQ29udHJvbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmFsZXJ0U3RhdHVzRkNbYWxlcnRJRF07XG4gICAgfVxuXG4gICAgYWxlcnRTdGF0dXNDaGFuZ2UoYWxlcnRJRCkge1xuICAgICAgICBsZXQgcmVxdWVzdEJvZHkgPSB7fTtcbiAgICAgICAgcmVxdWVzdEJvZHlbJ3N0YXR1cyddID0gdGhpcy5hbGVydFN0YXR1c0ZDW2FsZXJ0SURdLnZhbHVlO1xuXG4gICAgICAgIHRoaXMuYWxlcnRDb250cm9sbGVyLnVwZGF0ZUFsZXJ0UnVsZVN0YXR1cyh0aGlzLm9yZ0lELCBhbGVydElELCByZXF1ZXN0Qm9keSlcbiAgICAgICAgICAgIC5zdWJzY3JpYmUoKGFsZXJ0U3RhdHVzUmVzOiBSZXNwb25zZU0pID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgdG9hc3QgPSB0aGlzLnRvYXN0clNlcnZpY2UuZ2V0VG9hc3RTdGF0dXMoYWxlcnRTdGF0dXNSZXNbJ3N0YXR1cyddKTtcbiAgICAgICAgICAgICAgICB0aGlzLnRvYXN0clNlcnZpY2Uub3BlblRvYXN0KHRvYXN0LnRpdGxlLCBhbGVydFN0YXR1c1Jlcy5tZXNzYWdlLCB0b2FzdC5jb2xvcik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGluIGFsZXJ0U3RhdHVzQ2hhbmdlIC0gJywgZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNlYXJjaEZuKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hGbGFnID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9IHZhbHVlO1xuICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIHRoaXMucmVzZXRTZWFyY2goKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleCA9IDA7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZWZyZXNoQnRuLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcbiAgICB9XG5cbiAgICByZXNldFNlYXJjaCgpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hGbGFnID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VhcmNoQmFyLnNlYXJjaENsZWFyKCk7XG4gICAgfVxuXG4gICAgb3BlbkRlbGV0ZUFsZXJ0RGlhbG9nKGFsZXJ0SUQsIGFsZXJ0TmFtZSkge1xuICAgICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLmRpYWxvZy5vcGVuKERpYWxvZ09uZUNvbXBvbmVudCwge1xuICAgICAgICAgICAgbWluV2lkdGg6ICc0NTBweCcsXG4gICAgICAgICAgICBtYXhXaWR0aDogJzQ1MHB4JyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBEaWFsb2dPbmVFbnVtLkRFTEVURSxcbiAgICAgICAgICAgICAgICBpY29uOiAnZGFuZ2Vyb3VzJyxcbiAgICAgICAgICAgICAgICBoZWFkZXI6ICdEZWxldGUgYWxlcnQgcnVsZT8nLFxuICAgICAgICAgICAgICAgIGJvZHk6ICc8Yj4nICsgYWxlcnROYW1lICsgJzwvYj4nICsgJyB3aWxsIGJlIGRlbGV0ZWQgcGVybWFuZW50bHkuPC9icj48L2JyPkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb250aW51ZT8nLFxuICAgICAgICAgICAgICAgIGJ1dHRvbk9uZTogQnV0dG9uTGFiZWxFbnVtLkNBTkNFTF9CVE5fTEFCRUwsXG4gICAgICAgICAgICAgICAgYnV0dG9uVHdvOiBCdXR0b25MYWJlbEVudW0uREVMRVRFX0JUTl9MQUJFTFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGlhbG9nLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGVBbGVydFJ1bGUoYWxlcnRJRCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgZGVsZXRlQWxlcnRSdWxlKGFsZXJ0SUQpIHtcbiAgICAgICAgdGhpcy5hbGVydENvbnRyb2xsZXIuZGVsZXRlQWxlcnRSdWxlKHRoaXMub3JnSUQsIGFsZXJ0SUQpLnN1YnNjcmliZSgoZGVsZXRlUmVzOiBSZXNwb25zZU0pID0+IHtcbiAgICAgICAgICAgIHRoaXMucmVmcmVzaEJ0bi5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XG4gICAgICAgICAgICBsZXQgdG9hc3QgPSB0aGlzLnRvYXN0clNlcnZpY2UuZ2V0VG9hc3RTdGF0dXMoZGVsZXRlUmVzLnN0YXR1cyk7XG4gICAgICAgICAgICB0aGlzLnRvYXN0clNlcnZpY2Uub3BlblRvYXN0KHRvYXN0LnRpdGxlLCBkZWxldGVSZXMubWVzc2FnZSwgdG9hc3QuY29sb3IpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbn0iLCI8ZGl2IGNsYXNzPVwiY2FyZCBtYWluLWNhcmQgY2FyZE92ZXJ3cml0ZSBoMTAwXCI+XG4gICAgPGRpdiBjbGFzcz1cImhlYWRlckNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyTGVmdENvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2VUaXRsZVwiPnt7IGFsZXJ0TGFiZWwgfX0gQWxlcnQ8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJSaWdodENvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclJpZ2h0Q29udGFpbmVySW5uZXJcIj5cbiAgICAgICAgICAgICAgICA8bGliLXNlYXJjaC1iYXItb25lIGNsYXNzPVwibWUtM1wiICNzZWFyY2hCYXIgc2VhcmNoQnk9XCJuYW1lXCIgKGVtaXRTZWFyY2gpPVwic2VhcmNoRm4oJGV2ZW50KVwiPlxuICAgICAgICAgICAgICAgIDwvbGliLXNlYXJjaC1iYXItb25lPlxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyBidG5CYXNlXCIgbWF0UmlwcGxlXG4gICAgICAgICAgICAgICAgICAgIFttYXRSaXBwbGVDZW50ZXJlZF09XCJNQVRFUklBTF9DT05TVEFOVC5NQVRfUklQUExFX0NFTlRFUlwiIFtyb3V0ZXJMaW5rXT1cIltiYXNlVXJsLCAnY3JlYXRlJ11cIj5cbiAgICAgICAgICAgICAgICAgICAgPGZhLWljb24gW2ljb25dPVwiZmFQbHVzXCI+PC9mYS1pY29uPiZuYnNwOyB7eyBhbGVydExhYmVsIH19IEFsZXJ0XG4gICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuXG4gICAgPGJ1dHRvbiAjcmVmcmVzaEJ0biBjbGFzcz1cImQtbm9uZVwiPjwvYnV0dG9uPlxuXG4gICAgPGRpdiBjbGFzcz1cIm92ZXJmbG93WCBjdXN0b21TY3JvbGxCYXJcIj5cbiAgICAgICAgPHRhYmxlIGNsYXNzPVwidy0xMDBcIiBtYXQtdGFibGUgW2RhdGFTb3VyY2VdPVwiZGF0YVNvdXJjZVwiICNzb3J0PVwibWF0U29ydFwiIG1hdFNvcnQgbWF0U29ydEFjdGl2ZT1cImlkXCJcbiAgICAgICAgICAgIG1hdFNvcnREaXJlY3Rpb249XCJhc2NcIiBtYXRTb3J0RGlzYWJsZUNsZWFyPlxuXG4gICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cImlkXCI+XG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzPVwicHgtMyBjb2x1bW5XaWR0aDFcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWYgbWF0LXNvcnQtaGVhZGVyIGRpc2FibGVDbGVhcj5cbiAgICAgICAgICAgICAgICAgICAgSURcbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInB4LTMgY29sdW1uV2lkdGgxXCIgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgIHt7IHJvd1snaWQnXSA/IHJvd1snaWQnXTogQ09NTU9OX0NPTlNUQU5ULkhZUEhFTiB9fVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJuYW1lXCI+XG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzPVwicHgtMyBjb2x1bW5XaWR0aDJcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+IE5hbWUgPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJweC0zIGNvbHVtbldpZHRoMlwiIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiIFttYXRUb29sdGlwXT1cInJvdz8uWyduYW1lJ10/Lmxlbmd0aD4yMD8gcm93WyduYW1lJ106ICcnXCJcbiAgICAgICAgICAgICAgICAgICAgbWF0VG9vbHRpcFBvc2l0aW9uPVwiYWJvdmVcIiBtYXRUb29sdGlwQ2xhc3M9XCJuYW1lVG9vbHRpcFwiPlxuICAgICAgICAgICAgICAgICAgICB7eyAocm93WyduYW1lJ10gPyByb3dbJ25hbWUnXTogQ09NTU9OX0NPTlNUQU5ULkhZUEhFTikgfCBkb3Rkb3Rkb3Q6MjB9fVxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJhc3NvY2lhdGVkV2l0aFwiPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cInB4LTMgY29sdW1uV2lkdGgzXCIgbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPiBBc3NvY2lhdGVkIHdpdGggPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJweC0zIGNvbHVtbldpZHRoM1wiIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiXG4gICAgICAgICAgICAgICAgICAgIFttYXRUb29sdGlwXT1cInJvdz8uWydhc3NvY2lhdGVkV2l0aCddPy5sZW5ndGg+MjU/IHJvd1snYXNzb2NpYXRlZFdpdGgnXTogJydcIlxuICAgICAgICAgICAgICAgICAgICBtYXRUb29sdGlwUG9zaXRpb249XCJhYm92ZVwiIG1hdFRvb2x0aXBDbGFzcz1cIm5hbWVUb29sdGlwXCI+XG4gICAgICAgICAgICAgICAgICAgIHt7IChyb3dbJ2Fzc29jaWF0ZWRXaXRoJ10gPyByb3dbJ2Fzc29jaWF0ZWRXaXRoJ106IENPTU1PTl9DT05TVEFOVC5IWVBIRU4pIHwgZG90ZG90ZG90OjI1fX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwicnVsZURlc2NyaXB0aW9uXCI+XG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzPVwicHgtMyBjb2x1bW5XaWR0aDNcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+IFJ1bGUgPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJweC0zIGNvbHVtbldpZHRoM1wiIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiXG4gICAgICAgICAgICAgICAgICAgIFttYXRUb29sdGlwXT1cInJvdz8uWydydWxlRGVzY3JpcHRpb24nXT8ubGVuZ3RoPjI1PyByb3dbJ3J1bGVEZXNjcmlwdGlvbiddOiAnJ1wiXG4gICAgICAgICAgICAgICAgICAgIG1hdFRvb2x0aXBQb3NpdGlvbj1cImFib3ZlXCIgbWF0VG9vbHRpcENsYXNzPVwibmFtZVRvb2x0aXBcIj5cbiAgICAgICAgICAgICAgICAgICAge3sgKHJvd1sncnVsZURlc2NyaXB0aW9uJ10gPyByb3dbJ3J1bGVEZXNjcmlwdGlvbiddOiBDT01NT05fQ09OU1RBTlQuSFlQSEVOKSB8IGRvdGRvdGRvdDoyNX19XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cInN0YXR1c1wiPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cInB4LTMgY29sdW1uV2lkdGgxXCIgbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPiBTdGF0dXMgPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJweC0zIGNvbHVtbldpZHRoMVwiIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8bWF0LXNsaWRlLXRvZ2dsZSBjbGFzcz1cInNsaWRlVG9nZ2xlQnRuXCIgW2Zvcm1Db250cm9sXT1cImdldEFsZXJ0U3RhdHVzRkMocm93LmlkKVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAoY2hhbmdlKT1cImFsZXJ0U3RhdHVzQ2hhbmdlKHJvdy5pZClcIj48L21hdC1zbGlkZS10b2dnbGU+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cImFjdGlvblwiPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cImNvbHVtbldpZHRoMVwiIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj48L3RoPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNvbHVtbldpZHRoMVwiIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIG5nYkRyb3Bkb3duIHBsYWNlbWVudD1cImxlZnRcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBuZ2JEcm9wZG93blRvZ2dsZSBjbGFzcz1cImRyb3Bkb3duLWFmdGVyIGRyb3Bkb3duQWZ0ZXIgYnRuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxmYS1pY29uIFtpY29uXT1cImZhRWxsaXBzaXNWXCI+PC9mYS1pY29uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgbmdiRHJvcGRvd25NZW51PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiZHJvcGRvd24taXRlbVwiIFtyb3V0ZXJMaW5rXT1cIltiYXNlVXJsLCByb3dbJ2lkJ10sICd1cGRhdGUnXVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgQnV0dG9uTGFiZWxFbnVtLlVQREFURV9CVE5fTEFCRUwgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJkcm9wZG93bi1pdGVtXCIgW3JvdXRlckxpbmtdPVwiW2Jhc2VVcmwgKyAnLycgKyByb3dbJ2lkJ10gKyAnL2VzY2FsYXRpb24nXVwiICpuZ0lmPVwiZXNjYWxhdGlvblBlcm1pc3Npb25NXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBBbGVydEJ1dHRvbkxhYmVsRW51bS5FU0NBTEFUSU9OX1JVTEUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidG4gYnRuLW91dGxpbmUtZGFuZ2VyIHJvdW5kZWQtMCBkcm9wZG93bi1pdGVtXCIgKGNsaWNrKT1cIm9wZW5EZWxldGVBbGVydERpYWxvZyhyb3cuaWQsIHJvdy5uYW1lKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgQnV0dG9uTGFiZWxFbnVtLkRFTEVURV9CVE5fTEFCRUwgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8dHIgbWF0LWhlYWRlci1yb3cgKm1hdEhlYWRlclJvd0RlZj1cImRpc3BsYXllZENvbHVtblwiPjwvdHI+XG4gICAgICAgICAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHRhc2s7IGNvbHVtbnM6IGRpc3BsYXllZENvbHVtbjtcIj48L3RyPlxuXG4gICAgICAgICAgICA8dHIgY2xhc3M9XCJtYXQtcm93XCIgKm1hdE5vRGF0YVJvdz5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJtYXQtY2VsbCB0ZXh0LWNlbnRlclwiIFthdHRyLmNvbHNwYW5dPVwiZGlzcGxheWVkQ29sdW1uLmxlbmd0aFwiPlxuICAgICAgICAgICAgICAgICAgICB7eyBUQUJMRV9DT05TVEFOVC5UQUJMRV9OT19EQVRBIH19XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvdHI+XG4gICAgICAgIDwvdGFibGU+XG4gICAgPC9kaXY+XG4gICAgPG1hdC1wYWdpbmF0b3IgI3BhZ2luYXRvciBjbGFzcz1cInJvdW5kZWRCb3JkZXJcIiBzaG93Rmlyc3RMYXN0QnV0dG9ucyBbbGVuZ3RoXT1cInJlc3VsdExlbmd0aFwiXG4gICAgICAgIFtwYWdlU2l6ZV09XCJUQUJMRV9DT05TVEFOVC5ERUZBVUxUX1BBR0VfU0laRVwiIFtwYWdlU2l6ZU9wdGlvbnNdPVwiVEFCTEVfQ09OU1RBTlQuUEFHRV9TSVpFX09QVElPTlwiPlxuICAgIDwvbWF0LXBhZ2luYXRvcj5cbjwvZGl2PiJdfQ==
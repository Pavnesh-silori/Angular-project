import { __awaiter } from "tslib";
import { Component } from '@angular/core';
import { FormControl, Validators } from '@angular/forms';
import { DashboardErrorEnum } from '../../../enum/error.enum';
import { OrgRecentData, RecentDataRequestWithParam, RecentDataRequestWithoutParam } from '../../../model/recent-data.model';
import { Alert } from '../../../model/alert.model';
import { EntityType } from '../../../model/entity.model';
import { COMMON_CONSTANT, FormErrorEnum, MatSelectSearchService, MaterialFormFieldAppearance, MessageAlertIconEnum, MessageAlertTypeEnum } from '@library/tsc-common';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@library/storage-service";
import * as i3 from "@library/date";
import * as i4 from "../../../service/entity.service";
import * as i5 from "../../../service/trend.service";
import * as i6 from "../../../service/recent-data.service";
import * as i7 from "../../../service/alert.service";
import * as i8 from "@angular/material/form-field";
import * as i9 from "@angular/material/select";
import * as i10 from "@angular/material/core";
import * as i11 from "ngx-mat-select-search";
import * as i12 from "@library/tsc-common";
import * as i13 from "@angular/material/card";
import * as i14 from "@angular/common";
import * as i15 from "@angular/forms";
import * as i16 from "@angular/material/tooltip";
// /tsc-library/
export class FacilityComponent {
    constructor(router, storageService, dateService, entityService, trendService, recentDataService, alertService) {
        this.router = router;
        this.storageService = storageService;
        this.dateService = dateService;
        this.entityService = entityService;
        this.trendService = trendService;
        this.recentDataService = recentDataService;
        this.alertService = alertService;
        this.commonConstant = COMMON_CONSTANT;
        this.materialFormFieldAppearance = MaterialFormFieldAppearance;
        this.FormErrorEnum = FormErrorEnum;
        this.entityTypeLoader = true;
        this.facilityDataLoader = false;
        this.entityTypeM = [new EntityType()];
        this.orgRecentDataM = [new OrgRecentData()];
        this.alertObj = new Alert();
        this.last48HrsMeterData = {};
        this.entityTypeFC = new FormControl('', Validators.required);
        this.entityTypeSearchUtil = new MatSelectSearchService(['type']);
    }
    ngOnInit() {
        this.orgID = this.storageService.getStorage('currentOrgID');
        this.timezone = this.storageService.getStorage('timezone');
        this.getEntityTypeByLayoutID();
    }
    getEntityTypeByLayoutID() {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                this.entityTypeM = (yield this.entityService.getEntityTypeByLayoutID(this.orgID, 'YES'));
                this.entityTypeSearchUtil.entityArr = this.entityTypeM;
                this.entityTypeSearchUtil.createSubscription();
                if (this.entityTypeM && this.entityTypeM.length > 0) {
                    const defaultEntityType = this.entityTypeM[0].type;
                    if (defaultEntityType) {
                        this.entityTypeFC.patchValue(defaultEntityType);
                        this.getOrgRecentData(this.entityTypeFC.value);
                    }
                }
            }
            catch (error) {
                console.error("Error in getEntityTypeByLayoutID()", error);
            }
            finally {
                this.entityTypeLoader = false;
            }
        });
    }
    entityTypeChange(selectedType) {
        // Clear the timer when changing the device
        clearTimeout(this.apiTimer);
        this.entityTypeFC.patchValue(selectedType);
        this.orgRecentDataM = [new OrgRecentData()];
        this.getOrgRecentData(selectedType);
    }
    getOrgRecentData(entityType) {
        return __awaiter(this, void 0, void 0, function* () {
            this.facilityDataLoader = true;
            this.alertService.resetAlertProperties(this.alertObj);
            try {
                let requestBody = new RecentDataRequestWithoutParam();
                requestBody.timezone = this.timezone;
                requestBody.entityType = entityType;
                requestBody.backscan = 1;
                this.orgRecentDataM = (yield this.recentDataService.getOrgRecentData(this.orgID, requestBody));
                if (this.orgRecentDataM && this.orgRecentDataM.length == 0) {
                    this.alertService.setAlertProperties(this.alertObj, DashboardErrorEnum.DATA_NOT_FOUND_LABEL, DashboardErrorEnum.DATA_NOT_FOUND_MESSAGE, MessageAlertTypeEnum.WARNING, MessageAlertIconEnum.WARNING_ICON);
                }
            }
            catch (error) {
                console.error(`Error in getOrgRecentData()`, error);
                this.alertService.setAlertProperties(this.alertObj, DashboardErrorEnum.INVALID_ERROR_LABEL, DashboardErrorEnum.INVALID_ERROR_MESSAGE, MessageAlertTypeEnum.DANGER, MessageAlertIconEnum.DANGER_ICON);
            }
            finally {
                this.apiTimer = setTimeout(() => {
                    this.getOrgRecentData(entityType);
                }, 300000);
                this.facilityDataLoader = false;
            }
        });
    }
    getLast48HrsMeterData(deviceID, paramName) {
        return __awaiter(this, void 0, void 0, function* () {
            try {
                let requestData = new RecentDataRequestWithParam();
                requestData.params = [{ name: paramName }];
                requestData.deviceID = [deviceID];
                requestData.backscan = 48;
                requestData.timezone = this.timezone;
                const result = yield this.recentDataService.getRecentDataWithParam(this.orgID, requestData);
                if (result.length > 0) {
                    if (!this.last48HrsMeterData[deviceID]) {
                        this.last48HrsMeterData[deviceID] = {};
                    }
                    this.last48HrsMeterData[deviceID][paramName] = result[0];
                }
                else {
                    if (!this.last48HrsMeterData[deviceID]) {
                        this.last48HrsMeterData[deviceID] = {};
                    }
                    this.last48HrsMeterData[deviceID][paramName] = null;
                }
            }
            catch (error) {
                console.error(`Error in getLast48HrsMeterData()`, error);
            }
        });
    }
    showEntityConsumption(id) {
        this.router.navigate(['/analytics-insights/consumption'], { queryParams: { entityID: id } });
    }
    showTrend(paramMetric, deviceID, entityID) {
        let requestBody = {
            paramMetric: paramMetric,
            deviceID: deviceID,
            entityID: entityID
        };
        this.trendService.openDialog(requestBody);
    }
    ngOnDestroy() {
        clearTimeout(this.apiTimer);
    }
}
FacilityComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: FacilityComponent, deps: [{ token: i1.Router }, { token: i2.StorageService }, { token: i3.DateService }, { token: i4.EntityService }, { token: i5.TrendService }, { token: i6.RecentDataService }, { token: i7.AlertService }], target: i0.ɵɵFactoryTarget.Component });
FacilityComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: FacilityComponent, selector: "app-facility", ngImport: i0, template: "<div class=\"card main-card cardOverwrite h100\">\n    <div class=\"headerContainer\">\n        <div class=\"headerLeftContainer\">\n            <div class=\"pageTitle\">Facility Dashboard</div>\n        </div>\n    </div>\n\n    <div class=\"card-body\">\n        <div class=\"row\">\n            <ng-container *ngIf=\"entityTypeLoader; else showEntityType\">\n                <ng-container *ngTemplateOutlet=\"showLoader; context: { count: 1 }\"></ng-container>\n            </ng-container>\n\n            <ng-template #showEntityType>\n                <div class=\"col-sm-3\">\n                    <mat-form-field class=\"matFieldWidth100\"\n                        [appearance]=\"materialFormFieldAppearance.FORM_FIELD_APPEARANCE\">\n                        <mat-label>Select entity type</mat-label>\n                        <mat-select (selectionChange)=\"entityTypeChange($event.value)\" [formControl]=\"entityTypeFC\"\n                            required>\n                            <ng-container *ngIf=\"entityTypeM && entityTypeM.length > 0 && entityTypeM?.[0]?.type; else noDataFound\">\n                                <mat-option>\n                                    <ngx-mat-select-search [formControl]=\"entityTypeSearchUtil.filterFC\"\n                                        placeholderLabel=\"Search by name\" noEntriesFoundLabel=\"No matching name found.\">\n                                    </ngx-mat-select-search>\n                                </mat-option>\n                                <mat-option *ngFor=\"let type of entityTypeSearchUtil.filteredEntities | async\"\n                                    [value]=\"type.type\">\n                                    {{ type.type | titlecase }}\n                                </mat-option>\n                            </ng-container>\n                            <ng-template #noDataFound>\n                                <mat-option disabled>\n                                    {{ commonConstant.NO_DATA_FOUND }}\n                                </mat-option>\n                            </ng-template>\n                        </mat-select>\n                        <mat-error *ngIf=\"entityTypeFC.touched && entityTypeFC.hasError('required')\">\n                            {{ FormErrorEnum.REQUIRED }}\n                        </mat-error>\n                    </mat-form-field>\n                </div>\n            </ng-template>\n        </div>\n\n        <div class=\"row mt-2\" *ngIf=\"facilityDataLoader\">\n            <ng-container *ngTemplateOutlet=\"showLoader; context: { count: 3 }\"></ng-container>\n        </div>\n\n        <div class=\"row\">\n            <div class=\"col-sm-12\">\n                <lib-message-alert *ngIf=\"alertObj.showAlert\" [labelInp]=\"alertObj.alertLabel\"\n                    [contentInp]=\"alertObj.alertContent\" [messageAlertTypeInp]=\"alertObj.messageAlertType\"\n                    [messageAlertIconInp]=\"alertObj.messageAlertIcon\">\n                </lib-message-alert>\n            </div>\n        </div>\n\n        <div class=\"row mt-2\" *ngIf=\"orgRecentDataM.length > 0 && orgRecentDataM[0].orgID != null\">\n            <div class=\"col-sm-12 mb-3\" *ngFor=\"let recentRes of orgRecentDataM\">\n                <mat-card class=\"cardOverwrite border\">\n                    <div class=\"row mb-2\">\n                        <div class=\"col-sm-6\">\n                            <div class=\"d-flex align-items-center\">\n                                <span class=\"cardTitle me-2\">{{ recentRes.entityName }}</span>\n                                <span class=\"badge rounded-pill info\">\n                                    {{ recentRes.entityType }}\n                                </span>\n                            </div>\n                        </div>\n                        <div class=\"col-sm-6 text-end\" *ngIf=\"recentRes.entityStatusFlag\">\n                            <a class=\"text-primary cursorPointer\" matTooltip=\"Entity consumption\"\n                                matTooltipPosition=\"below\"\n                                (click)=\"showEntityConsumption(recentRes.entityID)\">\n                                <span class=\"material-symbols-outlined fs-4 fw-bold\">monitoring</span>\n                            </a>\n                        </div>\n                    </div>\n\n                    <div class=\"row\">\n                        <div class=\"col-sm-12\" *ngFor=\"let deviceRes of recentRes.deviceData\">\n                            <div class=\"d-flex align-items-center\">\n                                <span class=\"material-symbols-outlined me-1\"\n                                    [ngClass]=\"{'text-success': deviceRes.status == 'LIVE', 'text-secondary': deviceRes.status == 'OFFLINE' || deviceRes.status == 'NO_DATA'}\">\n                                    devices\n                                </span>\n                                {{ deviceRes.name }}\n                            </div>\n\n                            <div class=\"row mt-2\">\n                                <div class=\"col-sm-4 mb-3\" *ngFor=\"let paramRes of deviceRes.paramData\">\n                                    <mat-card class=\"cardOverwrite cardBackgroundColor\">\n                                            <ng-container *ngTemplateOutlet=\"parameterData; context: {\n                                                duration: last48HrsMeterData[deviceRes.id]?.[paramRes.name]?.data?.date ? dateService.getRelativeTimeAgoLabel(last48HrsMeterData[deviceRes.id][paramRes.name]?.data?.date, timezone) : dateService.getRelativeTimeAgoLabel(paramRes?.data?.date, timezone),\n                                                value: last48HrsMeterData[deviceRes.id]?.[paramRes.name]?.data?.value != null ? last48HrsMeterData[deviceRes.id][paramRes.name]?.data?.value : paramRes?.data?.value,\n                                                unit: paramRes?.unit,\n                                                label: paramRes?.label,\n                                                entityID: recentRes?.entityID,\n                                                deviceID: deviceRes?.id,\n                                                paramName: paramRes?.name,\n                                                paramStatus: paramRes?.status\n                                            }\"></ng-container>\n                                    </mat-card>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </mat-card>\n            </div>\n        </div>\n    </div>\n</div>\n\n<ng-template #parameterData let-duration=\"duration\" let-label=\"label\" let-value=\"value\" let-unit=\"unit\"\n    let-entityID=\"entityID\" let-deviceID=\"deviceID\" let-paramName=\"paramName\" let-paramStatus=\"paramStatus\">\n    <div class=\"row\">\n        <div class=\"col-sm-6 textDurationWithAgoTime\">\n            {{ duration }}\n        </div>\n        <div class=\"col-sm-6 text-end\">\n            <a *ngIf=\"paramStatus == 'OFFLINE'\" class=\"text-secondary cursorPointer me-2\"\n                matTooltip=\"Currently parameter is offline, click here to see data of last 48 hrs.\" matTooltipPosition=\"below\"\n                (click)=\"getLast48HrsMeterData(deviceID, paramName)\">\n                <span class=\"material-symbols-outlined fs-5 fw-bold\">devices</span>\n            </a>\n\n            <a class=\"text-primary cursorPointer\" matTooltip=\"Trend\" matTooltipPosition=\"below\"\n                (click)=\"showTrend(paramName, deviceID, entityID)\">\n                <span class=\"material-symbols-outlined fs-5 fw-bold\">trending_up</span>\n            </a>\n        </div>\n    </div>\n    <div class=\"row mt-3\">\n        <div class=\"col-sm-12 text-center\">\n            <span class=\"fs-1 fw-bold text-primary\">{{ value ? value : commonConstant.HYPHEN }}</span>\n            <span class=\"text-secondary fw-bold\"> {{ value ? unit : '' }} </span>\n        </div>\n    </div>\n    <div class=\"row mt-4 mb-4\">\n        <div class=\"col-sm-12 fs-5 text-center\">\n            {{ label }}\n        </div>\n    </div>\n</ng-template>\n\n<ng-template #showLoader let-count=\"count\">\n    <lib-skeleton-loader [count]=\"count\" [appearance]=\"''\"\n        [theme]=\"{ 'border-radius': '16px', height: '40px', 'background-color': 'rgb(230 232 235)' }\"></lib-skeleton-loader>\n</ng-template>", components: [{ type: i8.MatFormField, selector: "mat-form-field", inputs: ["color", "floatLabel", "appearance", "hideRequiredMarker", "hintLabel"], exportAs: ["matFormField"] }, { type: i9.MatSelect, selector: "mat-select", inputs: ["disabled", "disableRipple", "tabIndex"], exportAs: ["matSelect"] }, { type: i10.MatOption, selector: "mat-option", exportAs: ["matOption"] }, { type: i11.MatSelectSearchComponent, selector: "ngx-mat-select-search", inputs: ["placeholderLabel", "type", "closeIcon", "closeSvgIcon", "noEntriesFoundLabel", "indexAndLengthScreenReaderText", "clearSearchInput", "searching", "disableInitialFocus", "enableClearOnEscapePressed", "preventHomeEndKeyPropagation", "disableScrollToActiveOnOptionsChanged", "ariaLabel", "showToggleAllCheckbox", "toggleAllCheckboxChecked", "toggleAllCheckboxIndeterminate", "toggleAllCheckboxTooltipMessage", "toogleAllCheckboxTooltipPosition", "hideClearSearchButton", "alwaysRestoreSelectedOptionsMulti"], outputs: ["toggleAll"] }, { type: i12.MessageAlertComponent, selector: "lib-message-alert", inputs: ["messageAlertTypeInp", "messageAlertIconInp", "labelInp", "contentInp", "showCloseBtnInp"] }, { type: i13.MatCard, selector: "mat-card", exportAs: ["matCard"] }, { type: i12.SkeletonComponent, selector: "lib-skeleton-loader", inputs: ["count", "appearance", "theme"] }], directives: [{ type: i14.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i14.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i8.MatLabel, selector: "mat-label" }, { type: i15.RequiredValidator, selector: ":not([type=checkbox])[required][formControlName],:not([type=checkbox])[required][formControl],:not([type=checkbox])[required][ngModel]", inputs: ["required"] }, { type: i15.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i15.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i14.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i8.MatError, selector: "mat-error", inputs: ["id"] }, { type: i16.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { type: i14.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], pipes: { "async": i14.AsyncPipe, "titlecase": i14.TitleCasePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: FacilityComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'app-facility',
                    templateUrl: './facility.component.html',
                    styleUrls: []
                }]
        }], ctorParameters: function () { return [{ type: i1.Router }, { type: i2.StorageService }, { type: i3.DateService }, { type: i4.EntityService }, { type: i5.TrendService }, { type: i6.RecentDataService }, { type: i7.AlertService }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmFjaWxpdHkuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbGlicmFyeS90c2MtbGl0ZS9zcmMvbGliL3RzYy9jb21wb25lbnQvZGFzaGJvYXJkL2ZhY2lsaXR5L2ZhY2lsaXR5LmNvbXBvbmVudC50cyIsIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2xpYnJhcnkvdHNjLWxpdGUvc3JjL2xpYi90c2MvY29tcG9uZW50L2Rhc2hib2FyZC9mYWNpbGl0eS9mYWNpbGl0eS5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUVsRCxPQUFPLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXpELE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBRTlELE9BQU8sRUFBRSxhQUFhLEVBQWtCLDBCQUEwQixFQUFFLDZCQUE2QixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFDNUksT0FBTyxFQUFFLEtBQUssRUFBVSxNQUFNLDRCQUE0QixDQUFDO0FBQzNELE9BQU8sRUFBRSxVQUFVLEVBQWUsTUFBTSw2QkFBNkIsQ0FBQztBQVV0RSxPQUFPLEVBQUUsZUFBZSxFQUFFLGFBQWEsRUFBRSxzQkFBc0IsRUFBRSwyQkFBMkIsRUFBRSxvQkFBb0IsRUFBRSxvQkFBb0IsRUFBRSxNQUFNLHFCQUFxQixDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDdEssZ0JBQWdCO0FBUWhCLE1BQU0sT0FBTyxpQkFBaUI7SUFzQjFCLFlBQ1ksTUFBYyxFQUNkLGNBQThCLEVBQy9CLFdBQXdCLEVBQ3ZCLGFBQTRCLEVBQzVCLFlBQTBCLEVBQzFCLGlCQUFvQyxFQUNwQyxZQUEwQjtRQU4xQixXQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsbUJBQWMs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SjtZQUFDLE9BQU8sS0FBSyxFQUFFO2dCQUNaLE9BQU8sQ0FBQyxLQUFLLENBQUMsa0NBQWtDLEVBQUUsS0FBSyxDQUFDLENBQUM7YUFDNUQ7UUFDTCxDQUFDO0tBQUE7SUFFRCxxQkFBcUIsQ0FBQyxFQUFFO1FBQ3BCLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsaUNBQWlDLENBQUMsRUFBRSxFQUFFLFdBQVcsRUFBRSxFQUFFLFFBQVEsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDakcsQ0FBQztJQUVELFNBQVMsQ0FBQyxXQUFXLEVBQUUsUUFBUSxFQUFFLFFBQVE7UUFDckMsSUFBSSxXQUFXLEdBQUc7WUFDZCxXQUFXLEVBQUUsV0FBVztZQUN4QixRQUFRLEVBQUUsUUFBUTtZQUNsQixRQUFRLEVBQUUsUUFBUTtTQUNyQixDQUFDO1FBQ0YsSUFBSSxDQUFDLFlBQVksQ0FBQyxVQUFVLENBQUMsV0FBVyxDQUFDLENBQUM7SUFDOUMsQ0FBQztJQUVELFdBQVc7UUFDUCxZQUFZLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2hDLENBQUM7OytHQWxKUSxpQkFBaUI7bUdBQWpCLGlCQUFpQixvREMzQjlCLGcwUUFvSmM7NEZEekhELGlCQUFpQjtrQkFON0IsU0FBUzttQkFBQztvQkFDUCxRQUFRLEVBQUUsY0FBYztvQkFDeEIsV0FBVyxFQUFFLDJCQUEyQjtvQkFDeEMsU0FBUyxFQUFFLEVBQUU7aUJBQ2hCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBGb3JtQ29udHJvbCwgVmFsaWRhdG9ycyB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcblxuaW1wb3J0IHsgRGFzaGJvYXJkRXJyb3JFbnVtIH0gZnJvbSAnLi4vLi4vLi4vZW51bS9lcnJvci5lbnVtJztcblxuaW1wb3J0IHsgT3JnUmVjZW50RGF0YSwgT3JnUmVjZW50RGF0YU0sIFJlY2VudERhdGFSZXF1ZXN0V2l0aFBhcmFtLCBSZWNlbnREYXRhUmVxdWVzdFdpdGhvdXRQYXJhbSB9IGZyb20gJy4uLy4uLy4uL21vZGVsL3JlY2VudC1kYXRhLm1vZGVsJztcbmltcG9ydCB7IEFsZXJ0LCBBbGVydE0gfSBmcm9tICcuLi8uLi8uLi9tb2RlbC9hbGVydC5tb2RlbCc7XG5pbXBvcnQgeyBFbnRpdHlUeXBlLCBFbnRpdHlUeXBlTSB9IGZyb20gJy4uLy4uLy4uL21vZGVsL2VudGl0eS5tb2RlbCc7XG5cbmltcG9ydCB7IFJlY2VudERhdGFTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vc2VydmljZS9yZWNlbnQtZGF0YS5zZXJ2aWNlJztcbmltcG9ydCB7IFRyZW5kU2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2UvdHJlbmQuc2VydmljZSc7XG5pbXBvcnQgeyBBbGVydFNlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlL2FsZXJ0LnNlcnZpY2UnO1xuaW1wb3J0IHsgRW50aXR5U2VydmljZSB9IGZyb20gJy4uLy4uLy4uL3NlcnZpY2UvZW50aXR5LnNlcnZpY2UnO1xuXG4vLyB0c2MtbGlicmFyeVxuaW1wb3J0IHsgRGF0ZVNlcnZpY2UgfSBmcm9tICdAbGlicmFyeS9kYXRlJztcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnQGxpYnJhcnkvc3RvcmFnZS1zZXJ2aWNlJztcbmltcG9ydCB7IENPTU1PTl9DT05TVEFOVCwgRm9ybUVycm9yRW51bSwgTWF0U2VsZWN0U2VhcmNoU2VydmljZSwgTWF0ZXJpYWxGb3JtRmllbGRBcHBlYXJhbmNlLCBNZXNzYWdlQWxlcnRJY29uRW51bSwgTWVzc2FnZUFsZXJ0VHlwZUVudW0gfSBmcm9tICdAbGlicmFyeS90c2MtY29tbW9uJztcbi8vIC90c2MtbGlicmFyeS9cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhcHAtZmFjaWxpdHknLFxuICAgIHRlbXBsYXRlVXJsOiAnLi9mYWNpbGl0eS5jb21wb25lbnQuaHRtbCcsXG4gICAgc3R5bGVVcmxzOiBbXVxufSlcblxuZXhwb3J0IGNsYXNzIEZhY2lsaXR5Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICAgIGNvbW1vbkNvbnN0YW50ID0gQ09NTU9OX0NPTlNUQU5UO1xuICAgIG1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZSA9IE1hdGVyaWFsRm9ybUZpZWxkQXBwZWFyYW5jZTtcblxuICAgIEZvcm1FcnJvckVudW0gPSBGb3JtRXJyb3JFbnVtO1xuXG4gICAgb3JnSUQ6IGFueTtcbiAgICB0aW1lem9uZTogYW55O1xuICAgIGFwaVRpbWVyOiBhbnk7XG4gICAgZW50aXR5VHlwZUxvYWRlcjogYm9vbGVhbiA9IHRydWU7XG4gICAgZmFjaWxpdHlEYXRhTG9hZGVyOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBlbnRpdHlUeXBlTSA9IFtuZXcgRW50aXR5VHlwZSgpXTtcbiAgICBvcmdSZWNlbnREYXRhTSA9IFtuZXcgT3JnUmVjZW50RGF0YSgpXTtcbiAgICBhbGVydE9iajogQWxlcnRNID0gbmV3IEFsZXJ0KCk7XG5cbiAgICBsYXN0NDhIcnNNZXRlckRhdGE6IHsgW2RldmljZUlEOiBzdHJpbmddOiB7IFtwYXJhbU5hbWU6IHN0cmluZ106IGFueSB9IH0gPSB7fTtcblxuICAgIGVudGl0eVR5cGVGQzogRm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woJycsIFZhbGlkYXRvcnMucmVxdWlyZWQpO1xuICAgIGVudGl0eVR5cGVTZWFyY2hVdGlsOiBNYXRTZWxlY3RTZWFyY2hTZXJ2aWNlID0gbmV3IE1hdFNlbGVjdFNlYXJjaFNlcnZpY2UoWyd0eXBlJ10pO1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIsXG4gICAgICAgIHByaXZhdGUgc3RvcmFnZVNlcnZpY2U6IFN0b3JhZ2VTZXJ2aWNlLFxuICAgICAgICBwdWJsaWMgZGF0ZVNlcnZpY2U6IERhdGVTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGVudGl0eVNlcnZpY2U6IEVudGl0eVNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgdHJlbmRTZXJ2aWNlOiBUcmVuZFNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgcmVjZW50RGF0YVNlcnZpY2U6IFJlY2VudERhdGFTZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGFsZXJ0U2VydmljZTogQWxlcnRTZXJ2aWNlLFxuICAgICkgeyB9XG5cbiAgICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5vcmdJRCA9IHRoaXMuc3RvcmFnZVNlcnZpY2UuZ2V0U3RvcmFnZSgnY3VycmVudE9yZ0lEJyk7XG4gICAgICAgIHRoaXMudGltZXpvbmUgPSB0aGlzLnN0b3JhZ2VTZXJ2aWNlLmdldFN0b3JhZ2UoJ3RpbWV6b25lJyk7XG5cbiAgICAgICAgdGhpcy5nZXRFbnRpdHlUeXBlQnlMYXlvdXRJRCgpO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEVudGl0eVR5cGVCeUxheW91dElEKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgdGhpcy5lbnRpdHlUeXBlTSA9IDxFbnRpdHlUeXBlTVtdPmF3YWl0IHRoaXMuZW50aXR5U2VydmljZS5nZXRFbnRpdHlUeXBlQnlMYXlvdXRJRCh0aGlzLm9yZ0lELCAnWUVTJyk7XG5cbiAgICAgICAgICAgIHRoaXMuZW50aXR5VHlwZVNlYXJjaFV0aWwuZW50aXR5QXJyID0gdGhpcy5lbnRpdHlUeXBlTTtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5VHlwZVNlYXJjaFV0aWwuY3JlYXRlU3Vic2NyaXB0aW9uKCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmVudGl0eVR5cGVNICYmIHRoaXMuZW50aXR5VHlwZU0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRFbnRpdHlUeXBlID0gdGhpcy5lbnRpdHlUeXBlTVswXS50eXBlO1xuXG4gICAgICAgICAgICAgICAgaWYgKGRlZmF1bHRFbnRpdHlUeXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5VHlwZUZDLnBhdGNoVmFsdWUoZGVmYXVsdEVudGl0eVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE9yZ1JlY2VudERhdGEodGhpcy5lbnRpdHlUeXBlRkMudmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBnZXRFbnRpdHlUeXBlQnlMYXlvdXRJRCgpXCIsIGVycm9yKTtcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5VHlwZUxvYWRlciA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZW50aXR5VHlwZUNoYW5nZShzZWxlY3RlZFR5cGUpIHtcblxuICAgICAgICAvLyBDbGVhciB0aGUgdGltZXIgd2hlbiBjaGFuZ2luZyB0aGUgZGV2aWNlXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmFwaVRpbWVyKTtcblxuICAgICAgICB0aGlzLmVudGl0eVR5cGVGQy5wYXRjaFZhbHVlKHNlbGVjdGVkVHlwZSk7XG5cbiAgICAgICAgdGhpcy5vcmdSZWNlbnREYXRhTSA9IFtuZXcgT3JnUmVjZW50RGF0YSgpXTtcbiAgICAgICAgdGhpcy5nZXRPcmdSZWNlbnREYXRhKHNlbGVjdGVkVHlwZSk7XG4gICAgfVxuXG4gICAgYXN5bmMgZ2V0T3JnUmVjZW50RGF0YShlbnRpdHlUeXBlKSB7XG5cbiAgICAgICAgdGhpcy5mYWNpbGl0eURhdGFMb2FkZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLmFsZXJ0U2VydmljZS5yZXNldEFsZXJ0UHJvcGVydGllcyh0aGlzLmFsZXJ0T2JqKTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgbGV0IHJlcXVlc3RCb2R5ID0gbmV3IFJlY2VudERhdGFSZXF1ZXN0V2l0aG91dFBhcmFtKCk7XG5cbiAgICAgICAgICAgIHJlcXVlc3RCb2R5LnRpbWV6b25lID0gdGhpcy50aW1lem9uZTtcbiAgICAgICAgICAgIHJlcXVlc3RCb2R5LmVudGl0eVR5cGUgPSBlbnRpdHlUeXBlO1xuICAgICAgICAgICAgcmVxdWVzdEJvZHkuYmFja3NjYW4gPSAxO1xuXG4gICAgICAgICAgICB0aGlzLm9yZ1JlY2VudERhdGFNID0gPE9yZ1JlY2VudERhdGFNW10+YXdhaXQgdGhpcy5yZWNlbnREYXRhU2VydmljZS5nZXRPcmdSZWNlbnREYXRhKHRoaXMub3JnSUQsIHJlcXVlc3RCb2R5KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMub3JnUmVjZW50RGF0YU0gJiYgdGhpcy5vcmdSZWNlbnREYXRhTS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLnNldEFsZXJ0UHJvcGVydGllcyh0aGlzLmFsZXJ0T2JqLCBEYXNoYm9hcmRFcnJvckVudW0uREFUQV9OT1RfRk9VTkRfTEFCRUwsIERhc2hib2FyZEVycm9yRW51bS5EQVRBX05PVF9GT1VORF9NRVNTQUdFLCBNZXNzYWdlQWxlcnRUeXBlRW51bS5XQVJOSU5HLCBNZXNzYWdlQWxlcnRJY29uRW51bS5XQVJOSU5HX0lDT04pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG5cbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGluIGdldE9yZ1JlY2VudERhdGEoKWAsIGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMuYWxlcnRTZXJ2aWNlLnNldEFsZXJ0UHJvcGVydGllcyh0aGlzLmFsZXJ0T2JqLCBEYXNoYm9hcmRFcnJvckVudW0uSU5WQUxJRF9FUlJPUl9MQUJFTCwgRGFzaGJvYXJkRXJyb3JFbnVtLklOVkFMSURfRVJST1JfTUVTU0FHRSwgTWVzc2FnZUFsZXJ0VHlwZUVudW0uREFOR0VSLCBNZXNzYWdlQWxlcnRJY29uRW51bS5EQU5HRVJfSUNPTik7XG5cbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRoaXMuYXBpVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9yZ1JlY2VudERhdGEoZW50aXR5VHlwZSk7XG4gICAgICAgICAgICB9LCAzMDAwMDApO1xuICAgICAgICAgICAgdGhpcy5mYWNpbGl0eURhdGFMb2FkZXIgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFzeW5jIGdldExhc3Q0OEhyc01ldGVyRGF0YShkZXZpY2VJRCwgcGFyYW1OYW1lKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBsZXQgcmVxdWVzdERhdGEgPSBuZXcgUmVjZW50RGF0YVJlcXVlc3RXaXRoUGFyYW0oKTtcblxuICAgICAgICAgICAgcmVxdWVzdERhdGEucGFyYW1zID0gW3sgbmFtZTogcGFyYW1OYW1lIH1dO1xuICAgICAgICAgICAgcmVxdWVzdERhdGEuZGV2aWNlSUQgPSBbZGV2aWNlSURdO1xuICAgICAgICAgICAgcmVxdWVzdERhdGEuYmFja3NjYW4gPSA0ODtcbiAgICAgICAgICAgIHJlcXVlc3REYXRhLnRpbWV6b25lID0gdGhpcy50aW1lem9uZTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy5yZWNlbnREYXRhU2VydmljZS5nZXRSZWNlbnREYXRhV2l0aFBhcmFtKHRoaXMub3JnSUQsIHJlcXVlc3REYXRhKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmxhc3Q0OEhyc01ldGVyRGF0YVtkZXZpY2VJRF0pIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYXN0NDhIcnNNZXRlckRhdGFbZGV2aWNlSURdID0ge307XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMubGFzdDQ4SHJzTWV0ZXJEYXRhW2RldmljZUlEXVtwYXJhbU5hbWVdID0gcmVzdWx0WzBdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGFzdDQ4SHJzTWV0ZXJEYXRhW2RldmljZUlEXSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmxhc3Q0OEhyc01ldGVyRGF0YVtkZXZpY2VJRF0gPSB7fTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0NDhIcnNNZXRlckRhdGFbZGV2aWNlSURdW3BhcmFtTmFtZV0gPSBudWxsO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBpbiBnZXRMYXN0NDhIcnNNZXRlckRhdGEoKWAsIGVycm9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3dFbnRpdHlDb25zdW1wdGlvbihpZCkge1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJy9hbmFseXRpY3MtaW5zaWdodHMvY29uc3VtcHRpb24nXSwgeyBxdWVyeVBhcmFtczogeyBlbnRpdHlJRDogaWQgfSB9KTtcbiAgICB9XG5cbiAgICBzaG93VHJlbmQocGFyYW1NZXRyaWMsIGRldmljZUlELCBlbnRpdHlJRCkge1xuICAgICAgICBsZXQgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgICAgICBwYXJhbU1ldHJpYzogcGFyYW1NZXRyaWMsXG4gICAgICAgICAgICBkZXZpY2VJRDogZGV2aWNlSUQsXG4gICAgICAgICAgICBlbnRpdHlJRDogZW50aXR5SURcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy50cmVuZFNlcnZpY2Uub3BlbkRpYWxvZyhyZXF1ZXN0Qm9keSk7XG4gICAgfVxuXG4gICAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmFwaVRpbWVyKTtcbiAgICB9XG5cbn0iLCI8ZGl2IGNsYXNzPVwiY2FyZCBtYWluLWNhcmQgY2FyZE92ZXJ3cml0ZSBoMTAwXCI+XG4gICAgPGRpdiBjbGFzcz1cImhlYWRlckNvbnRhaW5lclwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyTGVmdENvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cInBhZ2VUaXRsZVwiPkZhY2lsaXR5IERhc2hib2FyZDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImVudGl0eVR5cGVMb2FkZXI7IGVsc2Ugc2hvd0VudGl0eVR5cGVcIj5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwic2hvd0xvYWRlcjsgY29udGV4dDogeyBjb3VudDogMSB9XCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNzaG93RW50aXR5VHlwZT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTNcIj5cbiAgICAgICAgICAgICAgICAgICAgPG1hdC1mb3JtLWZpZWxkIGNsYXNzPVwibWF0RmllbGRXaWR0aDEwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbYXBwZWFyYW5jZV09XCJtYXRlcmlhbEZvcm1GaWVsZEFwcGVhcmFuY2UuRk9STV9GSUVMRF9BUFBFQVJBTkNFXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWxhYmVsPlNlbGVjdCBlbnRpdHkgdHlwZTwvbWF0LWxhYmVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1zZWxlY3QgKHNlbGVjdGlvbkNoYW5nZSk9XCJlbnRpdHlUeXBlQ2hhbmdlKCRldmVudC52YWx1ZSlcIiBbZm9ybUNvbnRyb2xdPVwiZW50aXR5VHlwZUZDXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1aXJlZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiZW50aXR5VHlwZU0gJiYgZW50aXR5VHlwZU0ubGVuZ3RoID4gMCAmJiBlbnRpdHlUeXBlTT8uWzBdPy50eXBlOyBlbHNlIG5vRGF0YUZvdW5kXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5neC1tYXQtc2VsZWN0LXNlYXJjaCBbZm9ybUNvbnRyb2xdPVwiZW50aXR5VHlwZVNlYXJjaFV0aWwuZmlsdGVyRkNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyTGFiZWw9XCJTZWFyY2ggYnkgbmFtZVwiIG5vRW50cmllc0ZvdW5kTGFiZWw9XCJObyBtYXRjaGluZyBuYW1lIGZvdW5kLlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZ3gtbWF0LXNlbGVjdC1zZWFyY2g+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbWF0LW9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1vcHRpb24gKm5nRm9yPVwibGV0IHR5cGUgb2YgZW50aXR5VHlwZVNlYXJjaFV0aWwuZmlsdGVyZWRFbnRpdGllcyB8IGFzeW5jXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJ0eXBlLnR5cGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IHR5cGUudHlwZSB8IHRpdGxlY2FzZSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21hdC1vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNub0RhdGFGb3VuZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1vcHRpb24gZGlzYWJsZWQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBjb21tb25Db25zdGFudC5OT19EQVRBX0ZPVU5EIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbWF0LW9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLXRlbXBsYXRlPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1lcnJvciAqbmdJZj1cImVudGl0eVR5cGVGQy50b3VjaGVkICYmIGVudGl0eVR5cGVGQy5oYXNFcnJvcigncmVxdWlyZWQnKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IEZvcm1FcnJvckVudW0uUkVRVUlSRUQgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbWF0LWVycm9yPlxuICAgICAgICAgICAgICAgICAgICA8L21hdC1mb3JtLWZpZWxkPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBtdC0yXCIgKm5nSWY9XCJmYWNpbGl0eURhdGFMb2FkZXJcIj5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJzaG93TG9hZGVyOyBjb250ZXh0OiB7IGNvdW50OiAzIH1cIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgPC9kaXY+XG5cbiAgICAgICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS0xMlwiPlxuICAgICAgICAgICAgICAgIDxsaWItbWVzc2FnZS1hbGVydCAqbmdJZj1cImFsZXJ0T2JqLnNob3dBbGVydFwiIFtsYWJlbElucF09XCJhbGVydE9iai5hbGVydExhYmVsXCJcbiAgICAgICAgICAgICAgICAgICAgW2NvbnRlbnRJbnBdPVwiYWxlcnRPYmouYWxlcnRDb250ZW50XCIgW21lc3NhZ2VBbGVydFR5cGVJbnBdPVwiYWxlcnRPYmoubWVzc2FnZUFsZXJ0VHlwZVwiXG4gICAgICAgICAgICAgICAgICAgIFttZXNzYWdlQWxlcnRJY29uSW5wXT1cImFsZXJ0T2JqLm1lc3NhZ2VBbGVydEljb25cIj5cbiAgICAgICAgICAgICAgICA8L2xpYi1tZXNzYWdlLWFsZXJ0PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbXQtMlwiICpuZ0lmPVwib3JnUmVjZW50RGF0YU0ubGVuZ3RoID4gMCAmJiBvcmdSZWNlbnREYXRhTVswXS5vcmdJRCAhPSBudWxsXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTEyIG1iLTNcIiAqbmdGb3I9XCJsZXQgcmVjZW50UmVzIG9mIG9yZ1JlY2VudERhdGFNXCI+XG4gICAgICAgICAgICAgICAgPG1hdC1jYXJkIGNsYXNzPVwiY2FyZE92ZXJ3cml0ZSBib3JkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInJvdyBtYi0yXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTZcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImNhcmRUaXRsZSBtZS0yXCI+e3sgcmVjZW50UmVzLmVudGl0eU5hbWUgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiYmFkZ2Ugcm91bmRlZC1waWxsIGluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IHJlY2VudFJlcy5lbnRpdHlUeXBlIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS02IHRleHQtZW5kXCIgKm5nSWY9XCJyZWNlbnRSZXMuZW50aXR5U3RhdHVzRmxhZ1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwidGV4dC1wcmltYXJ5IGN1cnNvclBvaW50ZXJcIiBtYXRUb29sdGlwPVwiRW50aXR5IGNvbnN1bXB0aW9uXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0VG9vbHRpcFBvc2l0aW9uPVwiYmVsb3dcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwic2hvd0VudGl0eUNvbnN1bXB0aW9uKHJlY2VudFJlcy5lbnRpdHlJRClcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIGZzLTQgZnctYm9sZFwiPm1vbml0b3Jpbmc8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tMTJcIiAqbmdGb3I9XCJsZXQgZGV2aWNlUmVzIG9mIHJlY2VudFJlcy5kZXZpY2VEYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIG1lLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW25nQ2xhc3NdPVwieyd0ZXh0LXN1Y2Nlc3MnOiBkZXZpY2VSZXMuc3RhdHVzID09ICdMSVZFJywgJ3RleHQtc2Vjb25kYXJ5JzogZGV2aWNlUmVzLnN0YXR1cyA9PSAnT0ZGTElORScgfHwgZGV2aWNlUmVzLnN0YXR1cyA9PSAnTk9fREFUQSd9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXZpY2VzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgZGV2aWNlUmVzLm5hbWUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgbXQtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTQgbWItM1wiICpuZ0Zvcj1cImxldCBwYXJhbVJlcyBvZiBkZXZpY2VSZXMucGFyYW1EYXRhXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWNhcmQgY2xhc3M9XCJjYXJkT3ZlcndyaXRlIGNhcmRCYWNrZ3JvdW5kQ29sb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdUZW1wbGF0ZU91dGxldD1cInBhcmFtZXRlckRhdGE7IGNvbnRleHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiBsYXN0NDhIcnNNZXRlckRhdGFbZGV2aWNlUmVzLmlkXT8uW3BhcmFtUmVzLm5hbWVdPy5kYXRhPy5kYXRlID8gZGF0ZVNlcnZpY2UuZ2V0UmVsYXRpdmVUaW1lQWdvTGFiZWwobGFzdDQ4SHJzTWV0ZXJEYXRhW2RldmljZVJlcy5pZF1bcGFyYW1SZXMubmFtZV0/LmRhdGE/LmRhdGUsIHRpbWV6b25lKSA6IGRhdGVTZXJ2aWNlLmdldFJlbGF0aXZlVGltZUFnb0xhYmVsKHBhcmFtUmVzPy5kYXRhPy5kYXRlLCB0aW1lem9uZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogbGFzdDQ4SHJzTWV0ZXJEYXRhW2RldmljZVJlcy5pZF0/LltwYXJhbVJlcy5uYW1lXT8uZGF0YT8udmFsdWUgIT0gbnVsbCA/IGxhc3Q0OEhyc01ldGVyRGF0YVtkZXZpY2VSZXMuaWRdW3BhcmFtUmVzLm5hbWVdPy5kYXRhPy52YWx1ZSA6IHBhcmFtUmVzPy5kYXRhPy52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuaXQ6IHBhcmFtUmVzPy51bml0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHBhcmFtUmVzPy5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVudGl0eUlEOiByZWNlbnRSZXM/LmVudGl0eUlELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGV2aWNlSUQ6IGRldmljZVJlcz8uaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbU5hbWU6IHBhcmFtUmVzPy5uYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1TdGF0dXM6IHBhcmFtUmVzPy5zdGF0dXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVwiPjwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtY2FyZD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9tYXQtY2FyZD5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvZGl2PlxuXG48bmctdGVtcGxhdGUgI3BhcmFtZXRlckRhdGEgbGV0LWR1cmF0aW9uPVwiZHVyYXRpb25cIiBsZXQtbGFiZWw9XCJsYWJlbFwiIGxldC12YWx1ZT1cInZhbHVlXCIgbGV0LXVuaXQ9XCJ1bml0XCJcbiAgICBsZXQtZW50aXR5SUQ9XCJlbnRpdHlJRFwiIGxldC1kZXZpY2VJRD1cImRldmljZUlEXCIgbGV0LXBhcmFtTmFtZT1cInBhcmFtTmFtZVwiIGxldC1wYXJhbVN0YXR1cz1cInBhcmFtU3RhdHVzXCI+XG4gICAgPGRpdiBjbGFzcz1cInJvd1wiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTYgdGV4dER1cmF0aW9uV2l0aEFnb1RpbWVcIj5cbiAgICAgICAgICAgIHt7IGR1cmF0aW9uIH19XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTYgdGV4dC1lbmRcIj5cbiAgICAgICAgICAgIDxhICpuZ0lmPVwicGFyYW1TdGF0dXMgPT0gJ09GRkxJTkUnXCIgY2xhc3M9XCJ0ZXh0LXNlY29uZGFyeSBjdXJzb3JQb2ludGVyIG1lLTJcIlxuICAgICAgICAgICAgICAgIG1hdFRvb2x0aXA9XCJDdXJyZW50bHkgcGFyYW1ldGVyIGlzIG9mZmxpbmUsIGNsaWNrIGhlcmUgdG8gc2VlIGRhdGEgb2YgbGFzdCA0OCBocnMuXCIgbWF0VG9vbHRpcFBvc2l0aW9uPVwiYmVsb3dcIlxuICAgICAgICAgICAgICAgIChjbGljayk9XCJnZXRMYXN0NDhIcnNNZXRlckRhdGEoZGV2aWNlSUQsIHBhcmFtTmFtZSlcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgZnMtNSBmdy1ib2xkXCI+ZGV2aWNlczwvc3Bhbj5cbiAgICAgICAgICAgIDwvYT5cblxuICAgICAgICAgICAgPGEgY2xhc3M9XCJ0ZXh0LXByaW1hcnkgY3Vyc29yUG9pbnRlclwiIG1hdFRvb2x0aXA9XCJUcmVuZFwiIG1hdFRvb2x0aXBQb3NpdGlvbj1cImJlbG93XCJcbiAgICAgICAgICAgICAgICAoY2xpY2spPVwic2hvd1RyZW5kKHBhcmFtTmFtZSwgZGV2aWNlSUQsIGVudGl0eUlEKVwiPlxuICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBmcy01IGZ3LWJvbGRcIj50cmVuZGluZ191cDwvc3Bhbj5cbiAgICAgICAgICAgIDwvYT5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInJvdyBtdC0zXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tMTIgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZnMtMSBmdy1ib2xkIHRleHQtcHJpbWFyeVwiPnt7IHZhbHVlID8gdmFsdWUgOiBjb21tb25Db25zdGFudC5IWVBIRU4gfX08L3NwYW4+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cInRleHQtc2Vjb25kYXJ5IGZ3LWJvbGRcIj4ge3sgdmFsdWUgPyB1bml0IDogJycgfX0gPC9zcGFuPlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwicm93IG10LTQgbWItNFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiY29sLXNtLTEyIGZzLTUgdGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgIHt7IGxhYmVsIH19XG4gICAgICAgIDwvZGl2PlxuICAgIDwvZGl2PlxuPC9uZy10ZW1wbGF0ZT5cblxuPG5nLXRlbXBsYXRlICNzaG93TG9hZGVyIGxldC1jb3VudD1cImNvdW50XCI+XG4gICAgPGxpYi1za2VsZXRvbi1sb2FkZXIgW2NvdW50XT1cImNvdW50XCIgW2FwcGVhcmFuY2VdPVwiJydcIlxuICAgICAgICBbdGhlbWVdPVwieyAnYm9yZGVyLXJhZGl1cyc6ICcxNnB4JywgaGVpZ2h0OiAnNDBweCcsICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3JnYigyMzAgMjMyIDIzNSknIH1cIj48L2xpYi1za2VsZXRvbi1sb2FkZXI+XG48L25nLXRlbXBsYXRlPiJdfQ==
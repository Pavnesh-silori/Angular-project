import { Component, ViewChild } from '@angular/core';
import { FormControl, Validators } from '@angular/forms';
import { merge, fromEvent, of as observableOf } from 'rxjs';
import { map, startWith, switchMap, catchError } from "rxjs/operators";
import { faCaretDown, faPlus } from '@fortawesome/free-solid-svg-icons';
import { LIST_CONSTANT } from '../../../../constant/list.constant';
import { ScheduleReportTypeEnum } from '../../../../enum/schedule-report.enum';
import { ScheduleReportPage } from '../../../../model/schedule-report.model';
// tsc-library
import { MATERIAL_CONSTANT, TABLE_CONSTANT, ButtonTooltipEnum, FormAction, COMMON_CONSTANT, DialogOneComponent, DialogOneEnum, DialogResponseEnum, ButtonLabelEnum } from '@library/tsc-common';
import { ApplicationKeyID } from '@library/application-service';
import { ProfileImg } from '@library/user-service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/dialog";
import * as i2 from "@angular/router";
import * as i3 from "../../../../controller/schedule-report.controller";
import * as i4 from "@library/storage-service";
import * as i5 from "@library/tsc-common";
import * as i6 from "@library/user-service";
import * as i7 from "@fortawesome/angular-fontawesome";
import * as i8 from "@angular/material/table";
import * as i9 from "@angular/material/sort";
import * as i10 from "@angular/material/menu";
import * as i11 from "@angular/material/slide-toggle";
import * as i12 from "@angular/material/paginator";
import * as i13 from "@angular/material/core";
import * as i14 from "@angular/material/tooltip";
import * as i15 from "@ng-bootstrap/ng-bootstrap";
import * as i16 from "@angular/common";
// /tsc-library/
export class ScheduleReportPageComponent {
    constructor(dialog, router, scheduleReportController, 
    // tsc-library
    storageService, statusService, userService, imageService
    // /tsc-library/
    ) {
        this.dialog = dialog;
        this.router = router;
        this.scheduleReportController = scheduleReportController;
        this.storageService = storageService;
        this.statusService = statusService;
        this.userService = userService;
        this.imageService = imageService;
        this.faPlus = faPlus;
        this.faCaretDown = faCaretDown;
        this.MATERIAL_CONSTANT = MATERIAL_CONSTANT;
        this.TABLE_CONSTANT = TABLE_CONSTANT;
        this.COMMON_CONSTANT = COMMON_CONSTANT;
        this.ButtonTooltipEnum = ButtonTooltipEnum;
        this.DialogResponseEnum = DialogResponseEnum;
        this.FormAction = FormAction;
        this.ProfileImg = ProfileImg;
        this.searchByPlaceHolder = 'report name';
        this.reportType = [];
        this.dataSource = [new ScheduleReportPage()];
        this.dataSourceLength = 0;
        this.displayedColumn = ['id', 'name', 'type', 'recipients', 'frequency', 'scheduledBy', 'status', 'option'];
        this.searchFlag = false;
        this.searchFC = new FormControl('', Validators.required);
        this.reportTypeFlag = false;
        this.reportTypeFC = new FormControl(['all']);
        this.filterArr = [];
        this.totalReportTypeCount = 0;
        this.recipientUserList = [];
    }
    ngOnInit() {
        this.orgID = this.storageService.getStorage('currentOrgID');
        this.applicationKeyID = this.storageService.getStorage('applicationKeyID');
        this.applicationName = this.applicationKeyID == ApplicationKeyID.WATER_KEY_ID ? 'water' : 'energy';
        if (this.applicationKeyID == ApplicationKeyID.ENERGY_KEY_ID) {
            this.reportType = LIST_CONSTANT.ENERGY_APP_SCHEDULE_REPORT_TYPE;
            this.totalReportTypeCount = this.reportType.length;
        }
        else if (this.applicationKeyID == ApplicationKeyID.WATER_KEY_ID) {
            this.reportType = LIST_CONSTANT.WATER_APP_SCHEDULE_REPORT_TYPE;
            this.totalReportTypeCount = this.reportType.length;
        }
    }
    ngAfterViewInit() {
        merge(this.sort.sortChange, this.typeSelect.multi, fromEvent(this.refreshBtn.nativeElement, 'click')).pipe(startWith({}), switchMap(() => {
            this.filterArr = [];
            if (this.searchFlag) {
                var searchValue = 'name:' + this.searchValue;
            }
            if (this.reportTypeFlag) {
                let selectedReportType = this.reportTypeFC.value.length - 1;
                if (selectedReportType == this.totalReportTypeCount) {
                    this.reportTypeFlag = false;
                }
                else {
                    this.filterArr.push('reportType:' + this.reportTypeFC.value);
                }
            }
            return this.scheduleReportController.getScheduleReportByPage(this.paginator.pageIndex, this.paginator.pageSize, this.sort.active, this.sort.direction, searchValue, this.filterArr, this.orgID).pipe(catchError(() => observableOf(null)));
        }), map((response) => {
            if (response == null) {
                this.dataSourceLength = 0;
                return [];
            }
            this.dataSourceLength = response.totalCount;
            return response.records;
        })).subscribe((dataSource) => {
            this.dataSource = dataSource;
        });
    }
    searchFn(value) {
        this.searchFlag = true;
        this.searchValue = value;
        if (value.length == 0) {
            this.resetSearch();
        }
        this.refreshBtn.nativeElement.click();
    }
    resetSearch() {
        this.searchFlag = false;
        this.searchBar.searchClear();
    }
    showAllRecipient(userList) {
        this.recipientUserList = [];
        userList.forEach(user => {
            let metric = {
                profileImg: user.profileImgUrl || this.userService.defaultImage((user.firstName ? user.firstName + ' ' : '') + (user.lastName ? user.lastName : ''), ProfileImg.PROFILE_IMAGE_DROPDOWN_NAME_VIEW),
                name: (user.firstName ? user.firstName + ' ' + (user.lastName ? user.lastName : '') : ''),
            };
            this.recipientUserList.push(metric);
        });
    }
    openDeleteDialog(scheduleReport) {
        const dialog = this.dialog.open(DialogOneComponent, {
            minWidth: '450px',
            maxWidth: '450px',
            data: {
                type: DialogOneEnum.DELETE,
                icon: 'dangerous',
                header: 'Delete schedule report?',
                body: '<b>' + scheduleReport.name + '</b>' + ' will be deleted permanently.</br></br>Are you sure you want to continue?',
                buttonOne: ButtonLabelEnum.CANCEL_BTN_LABEL,
                buttonTwo: ButtonLabelEnum.DELETE_BTN_LABEL
            }
        });
        dialog.afterClosed().subscribe(res => {
            if (res) {
                this.deleteScheduledReport(scheduleReport.id);
            }
        });
    }
    deleteScheduledReport(scheduleReportID) {
        this.scheduleReportController.deleteScheduledReport(this.orgID, scheduleReportID).subscribe((deleteRes) => {
            if (deleteRes) {
                this.refreshBtn.nativeElement.click();
            }
        });
    }
    updateReportStatusByID(scheduleReport) {
        let newStatus = scheduleReport.status == 'ACTIVE' ? 'INACTIVE' : 'ACTIVE';
        let requestBody = {
            status: newStatus
        };
        this.scheduleReportController.updateReportStatusByID(this.orgID, scheduleReport.id, requestBody)
            .subscribe(response => {
            if (response) {
                this.refreshBtn.nativeElement.click();
            }
        }, error => {
            console.log('error in updateReportStatusByID -', error);
        });
    }
    goToReportPage(reportType) {
        switch (reportType) {
            case ScheduleReportTypeEnum.SOURCING_REPORT:
                this.router.navigate([`schedule-report/${this.applicationName}-sourcing`]);
                break;
            case ScheduleReportTypeEnum.CONSUMPTION_REPORT:
                this.router.navigate([`schedule-report/${this.applicationName}-consumption`]);
                break;
            case ScheduleReportTypeEnum.BREAKUP_REPORT:
                this.router.navigate([`schedule-report/${this.applicationName}-breakup`]);
                break;
            case ScheduleReportTypeEnum.CGWA_REPORT:
                this.router.navigate([`schedule-report/cgwa`]);
                break;
            case ScheduleReportTypeEnum.TEMPERATURE_REPORT:
                this.router.navigate([`schedule-report/temperature`]);
                break;
        }
    }
    updateScheduledReport(scheduleReport) {
        switch (scheduleReport.type) {
            case ScheduleReportTypeEnum.SOURCING_REPORT:
                this.router.navigate([`schedule-report/${scheduleReport.id}/${this.applicationName}-sourcing/update`]);
                break;
            case ScheduleReportTypeEnum.CONSUMPTION_REPORT:
                this.router.navigate([`schedule-report/${scheduleReport.id}/${this.applicationName}-consumption/update`]);
                break;
            case ScheduleReportTypeEnum.BREAKUP_REPORT:
                this.router.navigate([`schedule-report/${scheduleReport.id}/${this.applicationName}-breakup/update`]);
                break;
            case ScheduleReportTypeEnum.CGWA_REPORT:
                this.router.navigate([`schedule-report/${scheduleReport.id}/cgwa/update`]);
                break;
            case ScheduleReportTypeEnum.TEMPERATURE_REPORT:
                this.router.navigate([`schedule-report/${scheduleReport.id}/temperature/update`]);
                break;
        }
    }
    getReportTypeLabel(type) {
        let reportLabel;
        let applicationName = this.applicationKeyID == ApplicationKeyID.WATER_KEY_ID ? 'Water' : 'Energy';
        switch (type) {
            case ScheduleReportTypeEnum.SOURCING_REPORT:
                reportLabel = `${applicationName} Sourcing Report`;
                break;
            case ScheduleReportTypeEnum.CONSUMPTION_REPORT:
                reportLabel = `${applicationName} Consumption Report`;
                break;
            case ScheduleReportTypeEnum.BREAKUP_REPORT:
                reportLabel = `${applicationName} Breakup Report`;
                break;
            case ScheduleReportTypeEnum.CGWA_REPORT:
                reportLabel = `CGWA Report`;
                break;
            case ScheduleReportTypeEnum.TEMPERATURE_REPORT:
                reportLabel = `Temperature Report`;
                break;
        }
        return reportLabel;
    }
    getFrequencyLabel(type) {
        let frequencyLabel;
        switch (type) {
            case 'DAILY':
                frequencyLabel = 'Daily';
                break;
            case 'WEEKLY':
                frequencyLabel = 'Weekly';
                break;
            case 'MONTHLY':
                frequencyLabel = 'Monthly';
                break;
        }
        return frequencyLabel;
    }
}
ScheduleReportPageComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: ScheduleReportPageComponent, deps: [{ token: i1.MatDialog }, { token: i2.Router }, { token: i3.ScheduleReportController }, { token: i4.StorageService }, { token: i5.StatusService }, { token: i6.UserService }, { token: i5.ImageService }], target: i0.ɵɵFactoryTarget.Component });
ScheduleReportPageComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: ScheduleReportPageComponent, selector: "lib-page", viewQueries: [{ propertyName: "sort", first: true, predicate: ["sort"], descendants: true }, { propertyName: "paginator", first: true, predicate: ["paginator"], descendants: true }, { propertyName: "refreshBtn", first: true, predicate: ["refreshBtn"], descendants: true }, { propertyName: "searchBar", first: true, predicate: ["searchBar"], descendants: true }, { propertyName: "typeSelect", first: true, predicate: ["typeSelect"], descendants: true }], ngImport: i0, template: "<div class=\"card cardOverwrite h100\">\n    <div class=\"headerContainer\">\n        <div class=\"headerLeftContainer\">\n            <div class=\"pageTitle\">Schedule Report</div>\n            <div class=\"pageSubtitle\"></div>\n        </div>\n\n        <div class=\"headerRightContainer\">\n            <div class=\"headerRightContainerInner\">\n                <lib-search-bar-one class=\"me-3\" #searchBar [searchBy]=\"searchByPlaceHolder\"\n                    (emitSearch)=\"searchFn($event)\"></lib-search-bar-one>\n\n                <button class=\"btn btn-sm btn-light refreshBtn centerAlign me-3 py-1\" #refreshBtn matRipple\n                    [matRippleCentered]=\"MATERIAL_CONSTANT.MAT_RIPPLE_CENTER\" matTooltipPosition=\"below\"\n                    [matTooltip]=\"ButtonTooltipEnum.REFRESH\">\n                    <span class=\"material-symbols-outlined text-secondary\">\n                        refresh\n                    </span>\n                </button>\n\n                <div class=\"btn-group\" ngbDropdown placement=\"bottom-right\">\n                    <button type=\"button\" ngbDropdownToggle class=\"hideDropdownIcon btn btn-sm btn-success\">\n                        <fa-icon [icon]=\"faPlus\" class=\"me-1\"></fa-icon>Schedule report\n                        <fa-icon [icon]=\"faCaretDown\" class=\"ms-2\"></fa-icon>\n                    </button>\n                    <div ngbDropdownMenu>\n                        <a class=\"dropdown-item mt-1\" *ngFor=\"let type of reportType\" (click)=\"goToReportPage(type.value)\">\n                            {{ type.label }}\n                        </a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"overflowX customScrollBar\">\n        <table class=\"w-100\" mat-table matSort #sort=\"matSort\" matSortActive=\"name\" matSortDirection=\"asc\"\n            matSortDisableClear [dataSource]=\"dataSource\">\n\n            <ng-container matColumnDef=\"id\">\n                <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef>ID</th>\n                <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row\">{{ row.id }}</td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"name\">\n                <th class=\"px-4 columnWidth2\" mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Name</th>\n                <td class=\"px-4 columnWidth2\" mat-cell *matCellDef=\"let row\" matTooltipPosition=\"above\"\n                    [matTooltip]=\"(row?.name.length > 20 ? row?.name : '')\" matTooltipClass=\"nameTooltip\">\n                    {{ (row.name ? row.name : COMMON_CONSTANT.HYPHEN) | dotdotdot:20 }}\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"type\">\n                <th class=\"px-4 columnWidth2\" mat-header-cell *matHeaderCellDef>\n                    <funnel-filter #typeSelect header=\"Report type\" type=\"multi\" [entityList]=\"reportType\" value=\"value\" view=\"label\"\n                        [selectFC]=\"reportTypeFC\" [active]=\"reportTypeFlag\" selectAllLabel=\"All report type\"\n                        (multi)=\"reportTypeFlag = true;\">\n                    </funnel-filter>\n                </th>\n                <td class=\"px-4 columnWidth2\" mat-cell *matCellDef=\"let row\">\n                    {{ getReportTypeLabel(row.type) }}\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"recipients\">\n                <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef>Recipients</th>\n                <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row\">\n                    <ng-container *ngFor=\"let user of row.recipients.slice(0,3); let i = index\">\n                        <img class=\"multipleProfileImg rounded-circle border\"\n                            [src]=\"imageService.getProfileImageUrl(user, ProfileImg.PROFILE_IMAGE_DROPDOWN_NAME_VIEW)\" alt=\"profile-image\"\n                            #tooltip=\"matTooltip\" matTooltipPosition=\"above\"\n                            [matTooltip]=\"row.recipients.length != 1 ? (user?.firstName ? user?.firstName + ' ' + (user?.lastName ? user?.lastName : '') : '') : ''\"\n                            matTooltipClass=\"nameTooltip\" />\n\n                        <span *ngIf=\"row.recipients.length == 1\">\n                            {{ user.firstName }} {{user.lastName }}\n                        </span>\n                    </ng-container>\n                    <button *ngIf=\"imageService.getCountForCircleDisplay(row.recipients) >= 1\" [matMenuTriggerFor]=\"menu\"\n                        class=\"btn btn-sm rounded-circle countCircleBtn\" (click)=\"showAllRecipient(row.recipients)\">\n                        {{ imageService.getCountForCircleDisplay(row.recipients) }}\n                    </button>\n                    <mat-menu #menu=\"matMenu\">\n                        <button mat-menu-item *ngFor=\"let recipient of recipientUserList\">\n                            <img class=\"multipleProfileImg rounded-circle border me-1\" [src]=\"recipient.profileImg\">\n                            {{ recipient.name }}\n                        </button>\n                    </mat-menu>\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"frequency\">\n                <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef>Frequency</th>\n                <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row\">\n                    {{ getFrequencyLabel(row.frequency) }}\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"scheduledBy\">\n                <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef>Scheduled by</th>\n                <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row\">\n                    <img class=\"rounded-circle border profileImageDropdownView\"\n                        [src]=\"row?.scheduledBy?.profileImgUrl || userService.defaultImage(row?.scheduledBy?.firstName + ' ', ProfileImg.PROFILE_IMAGE_DROPDOWN_NAME_VIEW)\"\n                        alt=\"profile img\">\n                    <span matTooltipPosition=\"above\"\n                        [matTooltip]=\"(row?.scheduledBy?.firstName + ' ' + row?.scheduledBy?.lastName).length > 12 ? row?.scheduledBy?.firstName + ' ' + row?.scheduledBy?.lastName : ''\"\n                        matTooltipClass=\"nameTooltip\">\n                        {{ (row?.scheduledBy?.firstName ? row?.scheduledBy?.firstName + ' ' + row?.scheduledBy?.lastName :\n                        COMMON_CONSTANT.HYPHEN)| dotdotdot:12 }}\n                    </span>\n                </td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"status\">\n                <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef>Status</th>\n                <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row\"\n                    [ngClass]=\"statusService.getStatusClass(row.status)\">{{\n                    row.status ? statusService.getStatusValue(row.status) : COMMON_CONSTANT.HYPHEN }}</td>\n            </ng-container>\n\n            <ng-container matColumnDef=\"option\">\n                <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef></th>\n                <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row\">\n                    <div class=\"centerAlignVertical\">\n\n                        <button type=\"button\" class=\"iconBtn centerAlign text-primary updateIconHover\"\n                            (click)=\"updateScheduledReport(row)\" matRipple\n                            [matRippleCentered]=\"MATERIAL_CONSTANT.MAT_RIPPLE_CENTER\" matTooltipPosition=\"below\"\n                            [matTooltip]=\"ButtonTooltipEnum.UPDATE\">\n                            <span class=\"material-symbols-outlined icon\">\n                                edit\n                            </span>\n                        </button>\n\n                        <button type=\"button\" class=\"iconBtn centerAlign text-danger deleteIconHover cursorPointer\"\n                            matTooltipPosition=\"below\" [matTooltip]=\"ButtonTooltipEnum.DELETE\" matRipple\n                            [matRippleCentered]=\"MATERIAL_CONSTANT.MAT_RIPPLE_CENTER\" (click)=\"openDeleteDialog(row)\">\n                            <span class=\"material-symbols-outlined icon\">\n                                delete\n                            </span>\n                        </button>\n\n                        <mat-slide-toggle class=\"ms-3\" [checked]=\"row.status == 'ACTIVE'\"\n                            (change)=\"updateReportStatusByID(row)\"></mat-slide-toggle>\n                    </div>\n                </td>\n            </ng-container>\n\n            <tr mat-header-row *matHeaderRowDef=\"displayedColumn\"></tr>\n            <tr mat-row *matRowDef=\"let row; columns: displayedColumn;\" class=\"dataRow\"></tr>\n\n            <tr class=\"mat-row\" *matNoDataRow>\n                <td class=\"mat-cell text-center\" [attr.colspan]=\"displayedColumn.length\">\n                    {{ TABLE_CONSTANT.TABLE_NO_DATA }}\n                </td>\n            </tr>\n        </table>\n    </div>\n\n    <mat-paginator class=\"roundedBorder\" showFirstLastButtons #paginator [length]=\"dataSourceLength\"\n        [pageSize]=\"TABLE_CONSTANT.DEFAULT_PAGE_SIZE\" [pageSizeOptions]=\"TABLE_CONSTANT.PAGE_SIZE_OPTION\">\n    </mat-paginator>\n</div>", styles: ["::ng-deep .mat-menu-content{max-height:250px;overflow-x:auto}.columnWidth1{min-width:120px}.columnWidth2{min-width:200px}\n"], components: [{ type: i5.SearchBarOneComponent, selector: "lib-search-bar-one", inputs: ["type", "searchBy", "clear", "emitValueOnChange"], outputs: ["emitSearch"] }, { type: i7.FaIconComponent, selector: "fa-icon", inputs: ["classes", "icon", "title", "spin", "pulse", "mask", "styles", "flip", "size", "pull", "border", "inverse", "symbol", "rotate", "fixedWidth", "transform", "a11yRole"] }, { type: i8.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { type: i9.MatSortHeader, selector: "[mat-sort-header]", inputs: ["disabled", "arrowPosition", "sortActionDescription", "disableClear", "mat-sort-header", "start"], exportAs: ["matSortHeader"] }, { type: i5.FunnelFilterComponent, selector: "funnel-filter", inputs: ["header", "active", "showSearchBar", "searchByPlaceholder", "searchBy", "selectAllLabel", "entityList", "view", "value", "type", "selectFC", "resetFlag"], outputs: ["mono", "multi", "selected"] }, { type: i10.MatMenu, selector: "mat-menu", exportAs: ["matMenu"] }, { type: i10.MatMenuItem, selector: "[mat-menu-item]", inputs: ["disabled", "disableRipple", "role"], exportAs: ["matMenuItem"] }, { type: i11.MatSlideToggle, selector: "mat-slide-toggle", inputs: ["disabled", "disableRipple", "color", "tabIndex", "name", "id", "labelPosition", "aria-label", "aria-labelledby", "required", "checked", "aria-describedby"], outputs: ["change", "toggleChange"], exportAs: ["matSlideToggle"] }, { type: i8.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { type: i8.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { type: i12.MatPaginator, selector: "mat-paginator", inputs: ["disabled"], exportAs: ["matPaginator"] }], directives: [{ type: i13.MatRipple, selector: "[mat-ripple], [matRipple]", inputs: ["matRippleRadius", "matRippleDisabled", "matRippleTrigger", "matRippleColor", "matRippleUnbounded", "matRippleCentered", "matRippleAnimation"], exportAs: ["matRipple"] }, { type: i14.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { type: i15.NgbDropdown, selector: "[ngbDropdown]", inputs: ["autoClose", "dropdownClass", "open", "placement", "container", "display"], outputs: ["openChange"], exportAs: ["ngbDropdown"] }, { type: i15.NgbDropdownToggle, selector: "[ngbDropdownToggle]" }, { type: i15.NgbDropdownMenu, selector: "[ngbDropdownMenu]" }, { type: i16.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i9.MatSort, selector: "[matSort]", inputs: ["matSortDisabled", "matSortStart", "matSortDirection", "matSortDisableClear", "matSortActive"], outputs: ["matSortChange"], exportAs: ["matSort"] }, { type: i8.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { type: i8.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { type: i8.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { type: i8.MatCellDef, selector: "[matCellDef]" }, { type: i8.MatCell, selector: "mat-cell, td[mat-cell]" }, { type: i16.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i10.MatMenuTrigger, selector: "[mat-menu-trigger-for], [matMenuTriggerFor]", exportAs: ["matMenuTrigger"] }, { type: i16.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i8.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { type: i8.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { type: i8.MatNoDataRow, selector: "ng-template[matNoDataRow]" }], pipes: { "dotdotdot": i5.EllipsisPipeService } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: ScheduleReportPageComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-page',
                    templateUrl: './page.component.html',
                    styleUrls: ['./page.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.MatDialog }, { type: i2.Router }, { type: i3.ScheduleReportController }, { type: i4.StorageService }, { type: i5.StatusService }, { type: i6.UserService }, { type: i5.ImageService }]; }, propDecorators: { sort: [{
                type: ViewChild,
                args: ['sort']
            }], paginator: [{
                type: ViewChild,
                args: ['paginator']
            }], refreshBtn: [{
                type: ViewChild,
                args: ['refreshBtn']
            }], searchBar: [{
                type: ViewChild,
                args: ['searchBar']
            }], typeSelect: [{
                type: ViewChild,
                args: ['typeSelect']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L3RzYy1saXRlL3NyYy9saWIvdHNjL2NvbXBvbmVudC9zY2hlZHVsZS1yZXBvcnQvX3NoYXJlZC9wYWdlL3BhZ2UuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbGlicmFyeS90c2MtbGl0ZS9zcmMvbGliL3RzYy9jb21wb25lbnQvc2NoZWR1bGUtcmVwb3J0L19zaGFyZWQvcGFnZS9wYWdlLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQXNCLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUN6RSxPQUFPLEVBQUUsV0FBVyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBT3pELE9BQU8sRUFBRSxLQUFLLEVBQUUsU0FBUyxFQUFFLEVBQUUsSUFBSSxZQUFZLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFDNUQsT0FBTyxFQUFFLEdBQUcsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFVBQVUsRUFBRSxNQUFNLGdCQUFnQixDQUFDO0FBRXZFLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLE1BQU0sbUNBQW1DLENBQUM7QUFFeEUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBRW5FLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHVDQUF1QyxDQUFDO0FBRS9FLE9BQU8sRUFBRSxrQkFBa0IsRUFBdUIsTUFBTSx5Q0FBeUMsQ0FBQztBQUlsRyxjQUFjO0FBQ2QsT0FBTyxFQUNILGlCQUFpQixFQUNqQixjQUFjLEVBQ2QsaUJBQWlCLEVBRWpCLFVBQVUsRUFDVixlQUFlLEVBQ2Ysa0JBQWtCLEVBQ2xCLGFBQWEsRUFHYixrQkFBa0IsRUFFbEIsZUFBZSxF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TTtZQUNWLEtBQUssc0JBQXNCLENBQUMsa0JBQWtCO2dCQUMxQyxXQUFXLEdBQUcsb0JBQW9CLENBQUM7Z0JBQ25DLE1BQU07U0FDYjtRQUVELE9BQU8sV0FBVyxDQUFDO0lBQ3ZCLENBQUM7SUFFRCxpQkFBaUIsQ0FBQyxJQUFJO1FBQ2xCLElBQUksY0FBc0IsQ0FBQztRQUUzQixRQUFRLElBQUksRUFBRTtZQUNWLEtBQUssT0FBTztnQkFDUixjQUFjLEdBQUcsT0FBTyxDQUFDO2dCQUN6QixNQUFNO1lBQ1YsS0FBSyxRQUFRO2dCQUNULGNBQWMsR0FBRyxRQUFRLENBQUM7Z0JBQzFCLE1BQU07WUFDVixLQUFLLFNBQVM7Z0JBQ1YsY0FBYyxHQUFHLFNBQVMsQ0FBQztnQkFDM0IsTUFBTTtTQUNiO1FBRUQsT0FBTyxjQUFjLENBQUM7SUFDMUIsQ0FBQzs7eUhBbFJRLDJCQUEyQjs2R0FBM0IsMkJBQTJCLHNmQ2hEeEMsdTNTQWtLTTs0RkRsSE8sMkJBQTJCO2tCQUx2QyxTQUFTO21CQUFDO29CQUNQLFFBQVEsRUFBRSxVQUFVO29CQUNwQixXQUFXLEVBQUUsdUJBQXVCO29CQUNwQyxTQUFTLEVBQUUsQ0FBQyx1QkFBdUIsQ0FBQztpQkFDdkM7MFFBcUNzQixJQUFJO3NCQUF0QixTQUFTO3VCQUFDLE1BQU07Z0JBQ08sU0FBUztzQkFBaEMsU0FBUzt1QkFBQyxXQUFXO2dCQUNHLFVBQVU7c0JBQWxDLFNBQVM7dUJBQUMsWUFBWTtnQkFDQyxTQUFTO3NCQUFoQyxTQUFTO3VCQUFDLFdBQVc7Z0JBQ0csVUFBVTtzQkFBbEMsU0FBUzt1QkFBQyxZQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBPbkluaXQsIFZpZXdDaGlsZCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUNvbnRyb2wsIFZhbGlkYXRvcnMgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5pbXBvcnQgeyBSb3V0ZXIgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuXG5pbXBvcnQgeyBNYXREaWFsb2cgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xuaW1wb3J0IHsgTWF0U29ydCB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3NvcnQnO1xuaW1wb3J0IHsgTWF0UGFnaW5hdG9yIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvcGFnaW5hdG9yJztcblxuaW1wb3J0IHsgbWVyZ2UsIGZyb21FdmVudCwgb2YgYXMgb2JzZXJ2YWJsZU9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBtYXAsIHN0YXJ0V2l0aCwgc3dpdGNoTWFwLCBjYXRjaEVycm9yIH0gZnJvbSBcInJ4anMvb3BlcmF0b3JzXCI7XG5cbmltcG9ydCB7IGZhQ2FyZXREb3duLCBmYVBsdXMgfSBmcm9tICdAZm9ydGF3ZXNvbWUvZnJlZS1zb2xpZC1zdmctaWNvbnMnO1xuXG5pbXBvcnQgeyBMSVNUX0NPTlNUQU5UIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29uc3RhbnQvbGlzdC5jb25zdGFudCc7XG5cbmltcG9ydCB7IFNjaGVkdWxlUmVwb3J0VHlwZUVudW0gfSBmcm9tICcuLi8uLi8uLi8uLi9lbnVtL3NjaGVkdWxlLXJlcG9ydC5lbnVtJztcblxuaW1wb3J0IHsgU2NoZWR1bGVSZXBvcnRQYWdlLCBTY2hlZHVsZVJlcG9ydFBhZ2VJIH0gZnJvbSAnLi4vLi4vLi4vLi4vbW9kZWwvc2NoZWR1bGUtcmVwb3J0Lm1vZGVsJztcblxuaW1wb3J0IHsgU2NoZWR1bGVSZXBvcnRDb250cm9sbGVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vY29udHJvbGxlci9zY2hlZHVsZS1yZXBvcnQuY29udHJvbGxlcic7XG5cbi8vIHRzYy1saWJyYXJ5XG5pbXBvcnQge1xuICAgIE1BVEVSSUFMX0NPTlNUQU5ULFxuICAgIFRBQkxFX0NPTlNUQU5ULFxuICAgIEJ1dHRvblRvb2x0aXBFbnVtLFxuICAgIFNlYXJjaEJhck9uZUNvbXBvbmVudCxcbiAgICBGb3JtQWN0aW9uLFxuICAgIENPTU1PTl9DT05TVEFOVCxcbiAgICBEaWFsb2dPbmVDb21wb25lbnQsXG4gICAgRGlhbG9nT25lRW51bSxcbiAgICBGdW5uZWxGaWx0ZXJDb21wb25lbnQsXG4gICAgUGFnZU0sXG4gICAgRGlhbG9nUmVzcG9uc2VFbnVtLFxuICAgIFN0YXR1c1NlcnZpY2UsXG4gICAgQnV0dG9uTGFiZWxFbnVtLFxuICAgIEltYWdlU2VydmljZVxufSBmcm9tICdAbGlicmFyeS90c2MtY29tbW9uJztcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnQGxpYnJhcnkvc3RvcmFnZS1zZXJ2aWNlJztcbmltcG9ydCB7IEFwcGxpY2F0aW9uS2V5SUQgfSBmcm9tICdAbGlicmFyeS9hcHBsaWNhdGlvbi1zZXJ2aWNlJztcbmltcG9ydCB7IFByb2ZpbGVJbWcsIFVzZXJTZXJ2aWNlIH0gZnJvbSAnQGxpYnJhcnkvdXNlci1zZXJ2aWNlJztcbi8vIC90c2MtbGlicmFyeS9cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdsaWItcGFnZScsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3BhZ2UuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL3BhZ2UuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBTY2hlZHVsZVJlcG9ydFBhZ2VDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgZmFQbHVzID0gZmFQbHVzO1xuICAgIGZhQ2FyZXREb3duID0gZmFDYXJldERvd247XG5cbiAgICBNQVRFUklBTF9DT05TVEFOVCA9IE1BVEVSSUFMX0NPTlNUQU5UO1xuICAgIFRBQkxFX0NPTlNUQU5UID0gVEFCTEVfQ09OU1RBTlQ7XG4gICAgQ09NTU9OX0NPTlNUQU5UID0gQ09NTU9OX0NPTlNUQU5UO1xuXG4gICAgQnV0dG9uVG9vbHRpcEVudW0gPSBCdXR0b25Ub29sdGlwRW51bTtcbiAgICBEaWFsb2dSZXNwb25zZUVudW0gPSBEaWFsb2dSZXNwb25zZUVudW07XG4gICAgRm9ybUFjdGlvbiA9IEZvcm1BY3Rpb247XG4gICAgUHJvZmlsZUltZyA9IFByb2ZpbGVJbWc7XG5cbiAgICBzZWFyY2hCeVBsYWNlSG9sZGVyOiBzdHJpbmcgPSAncmVwb3J0IG5hbWUnO1xuXG4gICAgb3JnSUQ6IGFueTtcbiAgICBhcHBsaWNhdGlvbktleUlEOiBzdHJpbmc7XG4gICAgYXBwbGljYXRpb25OYW1lOiBzdHJpbmc7XG4gICAgcmVwb3J0VHlwZTogYW55W10gPSBbXTtcblxuICAgIGRhdGFTb3VyY2UgPSBbbmV3IFNjaGVkdWxlUmVwb3J0UGFnZSgpXTtcbiAgICBkYXRhU291cmNlTGVuZ3RoOiBudW1iZXIgPSAwO1xuICAgIGRpc3BsYXllZENvbHVtbjogc3RyaW5nW10gPSBbJ2lkJywgJ25hbWUnLCAndHlwZScsICdyZWNpcGllbnRzJywgJ2ZyZXF1ZW5jeScsICdzY2hlZHVsZWRCeScsICdzdGF0dXMnLCAnb3B0aW9uJ107XG5cbiAgICBzZWFyY2hGbGFnOiBib29sZWFuID0gZmFsc2U7XG4gICAgc2VhcmNoVmFsdWU6IHN0cmluZztcbiAgICBzZWFyY2hGQyA9IG5ldyBGb3JtQ29udHJvbCgnJywgVmFsaWRhdG9ycy5yZXF1aXJlZCk7XG5cbiAgICByZXBvcnRUeXBlRmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHJlcG9ydFR5cGVGQzogRm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woWydhbGwnXSk7XG4gICAgZmlsdGVyQXJyOiBBcnJheTxzdHJpbmc+ID0gW107XG4gICAgdG90YWxSZXBvcnRUeXBlQ291bnQ6IG51bWJlciA9IDA7XG5cbiAgICByZWNpcGllbnRVc2VyTGlzdDogYW55W10gPSBbXTtcblxuICAgIEBWaWV3Q2hpbGQoJ3NvcnQnKSBzb3J0OiBNYXRTb3J0O1xuICAgIEBWaWV3Q2hpbGQoJ3BhZ2luYXRvcicpIHBhZ2luYXRvcjogTWF0UGFnaW5hdG9yO1xuICAgIEBWaWV3Q2hpbGQoJ3JlZnJlc2hCdG4nKSByZWZyZXNoQnRuOiBFbGVtZW50UmVmO1xuICAgIEBWaWV3Q2hpbGQoJ3NlYXJjaEJhcicpIHNlYXJjaEJhcjogU2VhcmNoQmFyT25lQ29tcG9uZW50O1xuICAgIEBWaWV3Q2hpbGQoJ3R5cGVTZWxlY3QnKSB0eXBlU2VsZWN0OiBGdW5uZWxGaWx0ZXJDb21wb25lbnQ7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBkaWFsb2c6IE1hdERpYWxvZyxcbiAgICAgICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICAgICAgcHJpdmF0ZSBzY2hlZHVsZVJlcG9ydENvbnRyb2xsZXI6IFNjaGVkdWxlUmVwb3J0Q29udHJvbGxlcixcblxuICAgICAgICAvLyB0c2MtbGlicmFyeVxuICAgICAgICBwcml2YXRlIHN0b3JhZ2VTZXJ2aWNlOiBTdG9yYWdlU2VydmljZSxcbiAgICAgICAgcHVibGljIHN0YXR1c1NlcnZpY2U6IFN0YXR1c1NlcnZpY2UsXG4gICAgICAgIHB1YmxpYyB1c2VyU2VydmljZTogVXNlclNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBpbWFnZVNlcnZpY2U6IEltYWdlU2VydmljZVxuICAgICAgICAvLyAvdHNjLWxpYnJhcnkvXG4gICAgKSB7IH1cblxuICAgIG5nT25Jbml0KCk6IHZvaWQge1xuICAgICAgICB0aGlzLm9yZ0lEID0gdGhpcy5zdG9yYWdlU2VydmljZS5nZXRTdG9yYWdlKCdjdXJyZW50T3JnSUQnKTtcbiAgICAgICAgdGhpcy5hcHBsaWNhdGlvbktleUlEID0gdGhpcy5zdG9yYWdlU2VydmljZS5nZXRTdG9yYWdlKCdhcHBsaWNhdGlvbktleUlEJyk7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb25OYW1lID0gdGhpcy5hcHBsaWNhdGlvbktleUlEID09IEFwcGxpY2F0aW9uS2V5SUQuV0FURVJfS0VZX0lEID8gJ3dhdGVyJyA6ICdlbmVyZ3knO1xuXG4gICAgICAgIGlmICh0aGlzLmFwcGxpY2F0aW9uS2V5SUQgPT0gQXBwbGljYXRpb25LZXlJRC5FTkVSR1lfS0VZX0lEKSB7XG4gICAgICAgICAgICB0aGlzLnJlcG9ydFR5cGUgPSBMSVNUX0NPTlNUQU5ULkVORVJHWV9BUFBfU0NIRURVTEVfUkVQT1JUX1RZUEU7XG4gICAgICAgICAgICB0aGlzLnRvdGFsUmVwb3J0VHlwZUNvdW50ID0gdGhpcy5yZXBvcnRUeXBlLmxlbmd0aDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmFwcGxpY2F0aW9uS2V5SUQgPT0gQXBwbGljYXRpb25LZXlJRC5XQVRFUl9LRVlfSUQpIHtcbiAgICAgICAgICAgIHRoaXMucmVwb3J0VHlwZSA9IExJU1RfQ09OU1RBTlQuV0FURVJfQVBQX1NDSEVEVUxFX1JFUE9SVF9UWVBFO1xuICAgICAgICAgICAgdGhpcy50b3RhbFJlcG9ydFR5cGVDb3VudCA9IHRoaXMucmVwb3J0VHlwZS5sZW5ndGg7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIG1lcmdlKFxuICAgICAgICAgICAgdGhpcy5zb3J0LnNvcnRDaGFuZ2UsXG4gICAgICAgICAgICB0aGlzLnR5cGVTZWxlY3QubXVsdGksXG4gICAgICAgICAgICBmcm9tRXZlbnQodGhpcy5yZWZyZXNoQnRuLm5hdGl2ZUVsZW1lbnQsICdjbGljaycpXG4gICAgICAgICkucGlwZShcbiAgICAgICAgICAgIHN0YXJ0V2l0aCh7fSksXG4gICAgICAgICAgICBzd2l0Y2hNYXAoKCk6IGFueSA9PiB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckFyciA9IFtdO1xuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuc2VhcmNoRmxhZykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgc2VhcmNoVmFsdWUgPSAnbmFtZTonICsgdGhpcy5zZWFyY2hWYWx1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZXBvcnRUeXBlRmxhZykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgc2VsZWN0ZWRSZXBvcnRUeXBlID0gdGhpcy5yZXBvcnRUeXBlRkMudmFsdWUubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkUmVwb3J0VHlwZSA9PSB0aGlzLnRvdGFsUmVwb3J0VHlwZUNvdW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcG9ydFR5cGVGbGFnID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckFyci5wdXNoKCdyZXBvcnRUeXBlOicgKyB0aGlzLnJlcG9ydFR5cGVGQy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zY2hlZHVsZVJlcG9ydENvbnRyb2xsZXIuZ2V0U2NoZWR1bGVSZXBvcnRCeVBhZ2UoXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGFnaW5hdG9yLnBhZ2VJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYWdpbmF0b3IucGFnZVNpemUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydC5hY3RpdmUsXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydC5kaXJlY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgIHNlYXJjaFZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZpbHRlckFycixcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vcmdJRCxcbiAgICAgICAgICAgICAgICApLnBpcGUoY2F0Y2hFcnJvcigoKSA9PiBvYnNlcnZhYmxlT2YobnVsbCkpKTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgbWFwKChyZXNwb25zZTogUGFnZU08U2NoZWR1bGVSZXBvcnRQYWdlST4pOiBhbnkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZUxlbmd0aCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2VMZW5ndGggPSByZXNwb25zZS50b3RhbENvdW50O1xuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5yZWNvcmRzO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgKS5zdWJzY3JpYmUoKGRhdGFTb3VyY2UpID0+IHtcbiAgICAgICAgICAgIHRoaXMuZGF0YVNvdXJjZSA9IGRhdGFTb3VyY2U7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHNlYXJjaEZuKHZhbHVlOiBzdHJpbmcpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hGbGFnID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZWFyY2hWYWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgdGhpcy5yZXNldFNlYXJjaCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5yZWZyZXNoQnRuLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcbiAgICB9XG5cbiAgICByZXNldFNlYXJjaCgpIHtcbiAgICAgICAgdGhpcy5zZWFyY2hGbGFnID0gZmFsc2U7XG4gICAgICAgIHRoaXMuc2VhcmNoQmFyLnNlYXJjaENsZWFyKCk7XG4gICAgfVxuXG4gICAgc2hvd0FsbFJlY2lwaWVudCh1c2VyTGlzdCkge1xuICAgICAgICB0aGlzLnJlY2lwaWVudFVzZXJMaXN0ID0gW107XG5cbiAgICAgICAgdXNlckxpc3QuZm9yRWFjaCh1c2VyID0+IHtcbiAgICAgICAgICAgIGxldCBtZXRyaWMgPSB7XG4gICAgICAgICAgICAgICAgcHJvZmlsZUltZzogdXNlci5wcm9maWxlSW1nVXJsIHx8IHRoaXMudXNlclNlcnZpY2UuZGVmYXVsdEltYWdlKFxuICAgICAgICAgICAgICAgICAgICAodXNlci5maXJzdE5hbWUgPyB1c2VyLmZpcnN0TmFtZSArICcgJyA6ICcnKSArICh1c2VyLmxhc3ROYW1lID8gdXNlci5sYXN0TmFtZSA6ICcnKSxcbiAgICAgICAgICAgICAgICAgICAgUHJvZmlsZUltZy5QUk9GSUxFX0lNQUdFX0RST1BET1dOX05BTUVfVklFVyksXG4gICAgICAgICAgICAgICAgbmFtZTogKHVzZXIuZmlyc3ROYW1lID8gdXNlci5maXJzdE5hbWUgKyAnICcgKyAodXNlci5sYXN0TmFtZSA/IHVzZXIubGFzdE5hbWUgOiAnJykgOiAnJyksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5yZWNpcGllbnRVc2VyTGlzdC5wdXNoKG1ldHJpYyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIG9wZW5EZWxldGVEaWFsb2coc2NoZWR1bGVSZXBvcnQpIHtcblxuICAgICAgICBjb25zdCBkaWFsb2cgPSB0aGlzLmRpYWxvZy5vcGVuKERpYWxvZ09uZUNvbXBvbmVudCwge1xuICAgICAgICAgICAgbWluV2lkdGg6ICc0NTBweCcsXG4gICAgICAgICAgICBtYXhXaWR0aDogJzQ1MHB4JyxcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBEaWFsb2dPbmVFbnVtLkRFTEVURSxcbiAgICAgICAgICAgICAgICBpY29uOiAnZGFuZ2Vyb3VzJyxcbiAgICAgICAgICAgICAgICBoZWFkZXI6ICdEZWxldGUgc2NoZWR1bGUgcmVwb3J0PycsXG4gICAgICAgICAgICAgICAgYm9keTogJzxiPicgKyBzY2hlZHVsZVJlcG9ydC5uYW1lICsgJzwvYj4nICsgJyB3aWxsIGJlIGRlbGV0ZWQgcGVybWFuZW50bHkuPC9icj48L2JyPkFyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBjb250aW51ZT8nLFxuICAgICAgICAgICAgICAgIGJ1dHRvbk9uZTogQnV0dG9uTGFiZWxFbnVtLkNBTkNFTF9CVE5fTEFCRUwsXG4gICAgICAgICAgICAgICAgYnV0dG9uVHdvOiBCdXR0b25MYWJlbEVudW0uREVMRVRFX0JUTl9MQUJFTFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGlhbG9nLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgICAgICBpZiAocmVzKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZWxldGVTY2hlZHVsZWRSZXBvcnQoc2NoZWR1bGVSZXBvcnQuaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIGRlbGV0ZVNjaGVkdWxlZFJlcG9ydChzY2hlZHVsZVJlcG9ydElEKSB7XG4gICAgICAgIHRoaXMuc2NoZWR1bGVSZXBvcnRDb250cm9sbGVyLmRlbGV0ZVNjaGVkdWxlZFJlcG9ydCh0aGlzLm9yZ0lELCBzY2hlZHVsZVJlcG9ydElEKS5zdWJzY3JpYmUoKGRlbGV0ZVJlcykgPT4ge1xuICAgICAgICAgICAgaWYgKGRlbGV0ZVJlcykge1xuICAgICAgICAgICAgICAgIHRoaXMucmVmcmVzaEJ0bi5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHVwZGF0ZVJlcG9ydFN0YXR1c0J5SUQoc2NoZWR1bGVSZXBvcnQpIHtcbiAgICAgICAgbGV0IG5ld1N0YXR1cyA9IHNjaGVkdWxlUmVwb3J0LnN0YXR1cyA9PSAnQUNUSVZFJyA/ICdJTkFDVElWRScgOiAnQUNUSVZFJztcblxuICAgICAgICBsZXQgcmVxdWVzdEJvZHkgPSB7XG4gICAgICAgICAgICBzdGF0dXM6IG5ld1N0YXR1c1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zY2hlZHVsZVJlcG9ydENvbnRyb2xsZXIudXBkYXRlUmVwb3J0U3RhdHVzQnlJRCh0aGlzLm9yZ0lELCBzY2hlZHVsZVJlcG9ydC5pZCwgcmVxdWVzdEJvZHkpXG4gICAgICAgICAgICAuc3Vic2NyaWJlKHJlc3BvbnNlID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWZyZXNoQnRuLm5hdGl2ZUVsZW1lbnQuY2xpY2soKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBlcnJvciA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIGluIHVwZGF0ZVJlcG9ydFN0YXR1c0J5SUQgLScsIGVycm9yKTtcbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgZ29Ub1JlcG9ydFBhZ2UocmVwb3J0VHlwZSkge1xuICAgICAgICBzd2l0Y2ggKHJlcG9ydFR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2NoZWR1bGVSZXBvcnRUeXBlRW51bS5TT1VSQ0lOR19SRVBPUlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2BzY2hlZHVsZS1yZXBvcnQvJHt0aGlzLmFwcGxpY2F0aW9uTmFtZX0tc291cmNpbmdgXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNjaGVkdWxlUmVwb3J0VHlwZUVudW0uQ09OU1VNUFRJT05fUkVQT1JUOlxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtgc2NoZWR1bGUtcmVwb3J0LyR7dGhpcy5hcHBsaWNhdGlvbk5hbWV9LWNvbnN1bXB0aW9uYF0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTY2hlZHVsZVJlcG9ydFR5cGVFbnVtLkJSRUFLVVBfUkVQT1JUOlxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtgc2NoZWR1bGUtcmVwb3J0LyR7dGhpcy5hcHBsaWNhdGlvbk5hbWV9LWJyZWFrdXBgXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNjaGVkdWxlUmVwb3J0VHlwZUVudW0uQ0dXQV9SRVBPUlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2BzY2hlZHVsZS1yZXBvcnQvY2d3YWBdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2NoZWR1bGVSZXBvcnRUeXBlRW51bS5URU1QRVJBVFVSRV9SRVBPUlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2BzY2hlZHVsZS1yZXBvcnQvdGVtcGVyYXR1cmVgXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVTY2hlZHVsZWRSZXBvcnQoc2NoZWR1bGVSZXBvcnQpIHtcbiAgICAgICAgc3dpdGNoIChzY2hlZHVsZVJlcG9ydC50eXBlKSB7XG4gICAgICAgICAgICBjYXNlIFNjaGVkdWxlUmVwb3J0VHlwZUVudW0uU09VUkNJTkdfUkVQT1JUOlxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtgc2NoZWR1bGUtcmVwb3J0LyR7c2NoZWR1bGVSZXBvcnQuaWR9LyR7dGhpcy5hcHBsaWNhdGlvbk5hbWV9LXNvdXJjaW5nL3VwZGF0ZWBdKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgU2NoZWR1bGVSZXBvcnRUeXBlRW51bS5DT05TVU1QVElPTl9SRVBPUlQ6XG4gICAgICAgICAgICAgICAgdGhpcy5yb3V0ZXIubmF2aWdhdGUoW2BzY2hlZHVsZS1yZXBvcnQvJHtzY2hlZHVsZVJlcG9ydC5pZH0vJHt0aGlzLmFwcGxpY2F0aW9uTmFtZX0tY29uc3VtcHRpb24vdXBkYXRlYF0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTY2hlZHVsZVJlcG9ydFR5cGVFbnVtLkJSRUFLVVBfUkVQT1JUOlxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtgc2NoZWR1bGUtcmVwb3J0LyR7c2NoZWR1bGVSZXBvcnQuaWR9LyR7dGhpcy5hcHBsaWNhdGlvbk5hbWV9LWJyZWFrdXAvdXBkYXRlYF0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTY2hlZHVsZVJlcG9ydFR5cGVFbnVtLkNHV0FfUkVQT1JUOlxuICAgICAgICAgICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtgc2NoZWR1bGUtcmVwb3J0LyR7c2NoZWR1bGVSZXBvcnQuaWR9L2Nnd2EvdXBkYXRlYF0pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTY2hlZHVsZVJlcG9ydFR5cGVFbnVtLlRFTVBFUkFUVVJFX1JFUE9SVDpcbiAgICAgICAgICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbYHNjaGVkdWxlLXJlcG9ydC8ke3NjaGVkdWxlUmVwb3J0LmlkfS90ZW1wZXJhdHVyZS91cGRhdGVgXSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBnZXRSZXBvcnRUeXBlTGFiZWwodHlwZSkge1xuICAgICAgICBsZXQgcmVwb3J0TGFiZWw6IHN0cmluZztcbiAgICAgICAgbGV0IGFwcGxpY2F0aW9uTmFtZSA9IHRoaXMuYXBwbGljYXRpb25LZXlJRCA9PSBBcHBsaWNhdGlvbktleUlELldBVEVSX0tFWV9JRCA/ICdXYXRlcicgOiAnRW5lcmd5JztcblxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgU2NoZWR1bGVSZXBvcnRUeXBlRW51bS5TT1VSQ0lOR19SRVBPUlQ6XG4gICAgICAgICAgICAgICAgcmVwb3J0TGFiZWwgPSBgJHthcHBsaWNhdGlvbk5hbWV9IFNvdXJjaW5nIFJlcG9ydGA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNjaGVkdWxlUmVwb3J0VHlwZUVudW0uQ09OU1VNUFRJT05fUkVQT1JUOlxuICAgICAgICAgICAgICAgIHJlcG9ydExhYmVsID0gYCR7YXBwbGljYXRpb25OYW1lfSBDb25zdW1wdGlvbiBSZXBvcnRgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTY2hlZHVsZVJlcG9ydFR5cGVFbnVtLkJSRUFLVVBfUkVQT1JUOlxuICAgICAgICAgICAgICAgIHJlcG9ydExhYmVsID0gYCR7YXBwbGljYXRpb25OYW1lfSBCcmVha3VwIFJlcG9ydGA7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFNjaGVkdWxlUmVwb3J0VHlwZUVudW0uQ0dXQV9SRVBPUlQ6XG4gICAgICAgICAgICAgICAgcmVwb3J0TGFiZWwgPSBgQ0dXQSBSZXBvcnRgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBTY2hlZHVsZVJlcG9ydFR5cGVFbnVtLlRFTVBFUkFUVVJFX1JFUE9SVDpcbiAgICAgICAgICAgICAgICByZXBvcnRMYWJlbCA9IGBUZW1wZXJhdHVyZSBSZXBvcnRgO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlcG9ydExhYmVsO1xuICAgIH1cblxuICAgIGdldEZyZXF1ZW5jeUxhYmVsKHR5cGUpIHtcbiAgICAgICAgbGV0IGZyZXF1ZW5jeUxhYmVsOiBzdHJpbmc7XG5cbiAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICBjYXNlICdEQUlMWSc6XG4gICAgICAgICAgICAgICAgZnJlcXVlbmN5TGFiZWwgPSAnRGFpbHknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnV0VFS0xZJzpcbiAgICAgICAgICAgICAgICBmcmVxdWVuY3lMYWJlbCA9ICdXZWVrbHknO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnTU9OVEhMWSc6XG4gICAgICAgICAgICAgICAgZnJlcXVlbmN5TGFiZWwgPSAnTW9udGhseSc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZnJlcXVlbmN5TGFiZWw7XG4gICAgfVxuXG59XG4iLCI8ZGl2IGNsYXNzPVwiY2FyZCBjYXJkT3ZlcndyaXRlIGgxMDBcIj5cbiAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyQ29udGFpbmVyXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJMZWZ0Q29udGFpbmVyXCI+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFnZVRpdGxlXCI+U2NoZWR1bGUgUmVwb3J0PC9kaXY+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwicGFnZVN1YnRpdGxlXCI+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJSaWdodENvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlclJpZ2h0Q29udGFpbmVySW5uZXJcIj5cbiAgICAgICAgICAgICAgICA8bGliLXNlYXJjaC1iYXItb25lIGNsYXNzPVwibWUtM1wiICNzZWFyY2hCYXIgW3NlYXJjaEJ5XT1cInNlYXJjaEJ5UGxhY2VIb2xkZXJcIlxuICAgICAgICAgICAgICAgICAgICAoZW1pdFNlYXJjaCk9XCJzZWFyY2hGbigkZXZlbnQpXCI+PC9saWItc2VhcmNoLWJhci1vbmU+XG5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tbGlnaHQgcmVmcmVzaEJ0biBjZW50ZXJBbGlnbiBtZS0zIHB5LTFcIiAjcmVmcmVzaEJ0biBtYXRSaXBwbGVcbiAgICAgICAgICAgICAgICAgICAgW21hdFJpcHBsZUNlbnRlcmVkXT1cIk1BVEVSSUFMX0NPTlNUQU5ULk1BVF9SSVBQTEVfQ0VOVEVSXCIgbWF0VG9vbHRpcFBvc2l0aW9uPVwiYmVsb3dcIlxuICAgICAgICAgICAgICAgICAgICBbbWF0VG9vbHRpcF09XCJCdXR0b25Ub29sdGlwRW51bS5SRUZSRVNIXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCB0ZXh0LXNlY29uZGFyeVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYnRuLWdyb3VwXCIgbmdiRHJvcGRvd24gcGxhY2VtZW50PVwiYm90dG9tLXJpZ2h0XCI+XG4gICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIG5nYkRyb3Bkb3duVG9nZ2xlIGNsYXNzPVwiaGlkZURyb3Bkb3duSWNvbiBidG4gYnRuLXNtIGJ0bi1zdWNjZXNzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmEtaWNvbiBbaWNvbl09XCJmYVBsdXNcIiBjbGFzcz1cIm1lLTFcIj48L2ZhLWljb24+U2NoZWR1bGUgcmVwb3J0XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZmEtaWNvbiBbaWNvbl09XCJmYUNhcmV0RG93blwiIGNsYXNzPVwibXMtMlwiPjwvZmEtaWNvbj5cbiAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgbmdiRHJvcGRvd25NZW51PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJkcm9wZG93bi1pdGVtIG10LTFcIiAqbmdGb3I9XCJsZXQgdHlwZSBvZiByZXBvcnRUeXBlXCIgKGNsaWNrKT1cImdvVG9SZXBvcnRQYWdlKHR5cGUudmFsdWUpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgdHlwZS5sYWJlbCB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3M9XCJvdmVyZmxvd1ggY3VzdG9tU2Nyb2xsQmFyXCI+XG4gICAgICAgIDx0YWJsZSBjbGFzcz1cInctMTAwXCIgbWF0LXRhYmxlIG1hdFNvcnQgI3NvcnQ9XCJtYXRTb3J0XCIgbWF0U29ydEFjdGl2ZT1cIm5hbWVcIiBtYXRTb3J0RGlyZWN0aW9uPVwiYXNjXCJcbiAgICAgICAgICAgIG1hdFNvcnREaXNhYmxlQ2xlYXIgW2RhdGFTb3VyY2VdPVwiZGF0YVNvdXJjZVwiPlxuXG4gICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cImlkXCI+XG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzPVwiY29sdW1uV2lkdGgxXCIgbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPklEPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJjb2x1bW5XaWR0aDFcIiBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCByb3dcIj57eyByb3cuaWQgfX08L3RkPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwibmFtZVwiPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cInB4LTQgY29sdW1uV2lkdGgyXCIgbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmIG1hdC1zb3J0LWhlYWRlciBkaXNhYmxlQ2xlYXI+TmFtZTwvdGg+XG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwicHgtNCBjb2x1bW5XaWR0aDJcIiBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCByb3dcIiBtYXRUb29sdGlwUG9zaXRpb249XCJhYm92ZVwiXG4gICAgICAgICAgICAgICAgICAgIFttYXRUb29sdGlwXT1cIihyb3c/Lm5hbWUubGVuZ3RoID4gMjAgPyByb3c/Lm5hbWUgOiAnJylcIiBtYXRUb29sdGlwQ2xhc3M9XCJuYW1lVG9vbHRpcFwiPlxuICAgICAgICAgICAgICAgICAgICB7eyAocm93Lm5hbWUgPyByb3cubmFtZSA6IENPTU1PTl9DT05TVEFOVC5IWVBIRU4pIHwgZG90ZG90ZG90OjIwIH19XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cInR5cGVcIj5cbiAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJweC00IGNvbHVtbldpZHRoMlwiIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj5cbiAgICAgICAgICAgICAgICAgICAgPGZ1bm5lbC1maWx0ZXIgI3R5cGVTZWxlY3QgaGVhZGVyPVwiUmVwb3J0IHR5cGVcIiB0eXBlPVwibXVsdGlcIiBbZW50aXR5TGlzdF09XCJyZXBvcnRUeXBlXCIgdmFsdWU9XCJ2YWx1ZVwiIHZpZXc9XCJsYWJlbFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBbc2VsZWN0RkNdPVwicmVwb3J0VHlwZUZDXCIgW2FjdGl2ZV09XCJyZXBvcnRUeXBlRmxhZ1wiIHNlbGVjdEFsbExhYmVsPVwiQWxsIHJlcG9ydCB0eXBlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIChtdWx0aSk9XCJyZXBvcnRUeXBlRmxhZyA9IHRydWU7XCI+XG4gICAgICAgICAgICAgICAgICAgIDwvZnVubmVsLWZpbHRlcj5cbiAgICAgICAgICAgICAgICA8L3RoPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cInB4LTQgY29sdW1uV2lkdGgyXCIgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgIHt7IGdldFJlcG9ydFR5cGVMYWJlbChyb3cudHlwZSkgfX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwicmVjaXBpZW50c1wiPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cImNvbHVtbldpZHRoMVwiIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj5SZWNpcGllbnRzPC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJjb2x1bW5XaWR0aDFcIiBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCByb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgdXNlciBvZiByb3cucmVjaXBpZW50cy5zbGljZSgwLDMpOyBsZXQgaSA9IGluZGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVwibXVsdGlwbGVQcm9maWxlSW1nIHJvdW5kZWQtY2lyY2xlIGJvcmRlclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW3NyY109XCJpbWFnZVNlcnZpY2UuZ2V0UHJvZmlsZUltYWdlVXJsKHVzZXIsIFByb2ZpbGVJbWcuUFJPRklMRV9JTUFHRV9EUk9QRE9XTl9OQU1FX1ZJRVcpXCIgYWx0PVwicHJvZmlsZS1pbWFnZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgI3Rvb2x0aXA9XCJtYXRUb29sdGlwXCIgbWF0VG9vbHRpcFBvc2l0aW9uPVwiYWJvdmVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFttYXRUb29sdGlwXT1cInJvdy5yZWNpcGllbnRzLmxlbmd0aCAhPSAxID8gKHVzZXI/LmZpcnN0TmFtZSA/IHVzZXI/LmZpcnN0TmFtZSArICcgJyArICh1c2VyPy5sYXN0TmFtZSA/IHVzZXI/Lmxhc3ROYW1lIDogJycpIDogJycpIDogJydcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdFRvb2x0aXBDbGFzcz1cIm5hbWVUb29sdGlwXCIgLz5cblxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gKm5nSWY9XCJyb3cucmVjaXBpZW50cy5sZW5ndGggPT0gMVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IHVzZXIuZmlyc3ROYW1lIH19IHt7dXNlci5sYXN0TmFtZSB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiAqbmdJZj1cImltYWdlU2VydmljZS5nZXRDb3VudEZvckNpcmNsZURpc3BsYXkocm93LnJlY2lwaWVudHMpID49IDFcIiBbbWF0TWVudVRyaWdnZXJGb3JdPVwibWVudVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cImJ0biBidG4tc20gcm91bmRlZC1jaXJjbGUgY291bnRDaXJjbGVCdG5cIiAoY2xpY2spPVwic2hvd0FsbFJlY2lwaWVudChyb3cucmVjaXBpZW50cylcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIHt7IGltYWdlU2VydmljZS5nZXRDb3VudEZvckNpcmNsZURpc3BsYXkocm93LnJlY2lwaWVudHMpIH19XG4gICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8bWF0LW1lbnUgI21lbnU9XCJtYXRNZW51XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIG1hdC1tZW51LWl0ZW0gKm5nRm9yPVwibGV0IHJlY2lwaWVudCBvZiByZWNpcGllbnRVc2VyTGlzdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XCJtdWx0aXBsZVByb2ZpbGVJbWcgcm91bmRlZC1jaXJjbGUgYm9yZGVyIG1lLTFcIiBbc3JjXT1cInJlY2lwaWVudC5wcm9maWxlSW1nXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgcmVjaXBpZW50Lm5hbWUgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L21hdC1tZW51PlxuICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJmcmVxdWVuY3lcIj5cbiAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJjb2x1bW5XaWR0aDFcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+RnJlcXVlbmN5PC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJjb2x1bW5XaWR0aDFcIiBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCByb3dcIj5cbiAgICAgICAgICAgICAgICAgICAge3sgZ2V0RnJlcXVlbmN5TGFiZWwocm93LmZyZXF1ZW5jeSkgfX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwic2NoZWR1bGVkQnlcIj5cbiAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJjb2x1bW5XaWR0aDFcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+U2NoZWR1bGVkIGJ5PC90aD5cbiAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJjb2x1bW5XaWR0aDFcIiBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCByb3dcIj5cbiAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cInJvdW5kZWQtY2lyY2xlIGJvcmRlciBwcm9maWxlSW1hZ2VEcm9wZG93blZpZXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgW3NyY109XCJyb3c/LnNjaGVkdWxlZEJ5Py5wcm9maWxlSW1nVXJsIHx8IHVzZXJTZXJ2aWNlLmRlZmF1bHRJbWFnZShyb3c/LnNjaGVkdWxlZEJ5Py5maXJzdE5hbWUgKyAnICcsIFByb2ZpbGVJbWcuUFJPRklMRV9JTUFHRV9EUk9QRE9XTl9OQU1FX1ZJRVcpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsdD1cInByb2ZpbGUgaW1nXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIG1hdFRvb2x0aXBQb3NpdGlvbj1cImFib3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFttYXRUb29sdGlwXT1cIihyb3c/LnNjaGVkdWxlZEJ5Py5maXJzdE5hbWUgKyAnICcgKyByb3c/LnNjaGVkdWxlZEJ5Py5sYXN0TmFtZSkubGVuZ3RoID4gMTIgPyByb3c/LnNjaGVkdWxlZEJ5Py5maXJzdE5hbWUgKyAnICcgKyByb3c/LnNjaGVkdWxlZEJ5Py5sYXN0TmFtZSA6ICcnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdFRvb2x0aXBDbGFzcz1cIm5hbWVUb29sdGlwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7eyAocm93Py5zY2hlZHVsZWRCeT8uZmlyc3ROYW1lID8gcm93Py5zY2hlZHVsZWRCeT8uZmlyc3ROYW1lICsgJyAnICsgcm93Py5zY2hlZHVsZWRCeT8ubGFzdE5hbWUgOlxuICAgICAgICAgICAgICAgICAgICAgICAgQ09NTU9OX0NPTlNUQU5ULkhZUEhFTil8IGRvdGRvdGRvdDoxMiB9fVxuICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cInN0YXR1c1wiPlxuICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cImNvbHVtbldpZHRoMVwiIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj5TdGF0dXM8L3RoPlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNvbHVtbldpZHRoMVwiIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiXG4gICAgICAgICAgICAgICAgICAgIFtuZ0NsYXNzXT1cInN0YXR1c1NlcnZpY2UuZ2V0U3RhdHVzQ2xhc3Mocm93LnN0YXR1cylcIj57e1xuICAgICAgICAgICAgICAgICAgICByb3cuc3RhdHVzID8gc3RhdHVzU2VydmljZS5nZXRTdGF0dXNWYWx1ZShyb3cuc3RhdHVzKSA6IENPTU1PTl9DT05TVEFOVC5IWVBIRU4gfX08L3RkPlxuICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwib3B0aW9uXCI+XG4gICAgICAgICAgICAgICAgPHRoIGNsYXNzPVwiY29sdW1uV2lkdGgxXCIgbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPjwvdGg+XG4gICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwiY29sdW1uV2lkdGgxXCIgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjZW50ZXJBbGlnblZlcnRpY2FsXCI+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiaWNvbkJ0biBjZW50ZXJBbGlnbiB0ZXh0LXByaW1hcnkgdXBkYXRlSWNvbkhvdmVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwidXBkYXRlU2NoZWR1bGVkUmVwb3J0KHJvdylcIiBtYXRSaXBwbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWF0UmlwcGxlQ2VudGVyZWRdPVwiTUFURVJJQUxfQ09OU1RBTlQuTUFUX1JJUFBMRV9DRU5URVJcIiBtYXRUb29sdGlwUG9zaXRpb249XCJiZWxvd1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hdFRvb2x0aXBdPVwiQnV0dG9uVG9vbHRpcEVudW0uVVBEQVRFXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIGljb25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImljb25CdG4gY2VudGVyQWxpZ24gdGV4dC1kYW5nZXIgZGVsZXRlSWNvbkhvdmVyIGN1cnNvclBvaW50ZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdFRvb2x0aXBQb3NpdGlvbj1cImJlbG93XCIgW21hdFRvb2x0aXBdPVwiQnV0dG9uVG9vbHRpcEVudW0uREVMRVRFXCIgbWF0UmlwcGxlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hdFJpcHBsZUNlbnRlcmVkXT1cIk1BVEVSSUFMX0NPTlNUQU5ULk1BVF9SSVBQTEVfQ0VOVEVSXCIgKGNsaWNrKT1cIm9wZW5EZWxldGVEaWFsb2cocm93KVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBpY29uXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8bWF0LXNsaWRlLXRvZ2dsZSBjbGFzcz1cIm1zLTNcIiBbY2hlY2tlZF09XCJyb3cuc3RhdHVzID09ICdBQ1RJVkUnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2hhbmdlKT1cInVwZGF0ZVJlcG9ydFN0YXR1c0J5SUQocm93KVwiPjwvbWF0LXNsaWRlLXRvZ2dsZT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICA8dHIgbWF0LWhlYWRlci1yb3cgKm1hdEhlYWRlclJvd0RlZj1cImRpc3BsYXllZENvbHVtblwiPjwvdHI+XG4gICAgICAgICAgICA8dHIgbWF0LXJvdyAqbWF0Um93RGVmPVwibGV0IHJvdzsgY29sdW1uczogZGlzcGxheWVkQ29sdW1uO1wiIGNsYXNzPVwiZGF0YVJvd1wiPjwvdHI+XG5cbiAgICAgICAgICAgIDx0ciBjbGFzcz1cIm1hdC1yb3dcIiAqbWF0Tm9EYXRhUm93PlxuICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm1hdC1jZWxsIHRleHQtY2VudGVyXCIgW2F0dHIuY29sc3Bhbl09XCJkaXNwbGF5ZWRDb2x1bW4ubGVuZ3RoXCI+XG4gICAgICAgICAgICAgICAgICAgIHt7IFRBQkxFX0NPTlNUQU5ULlRBQkxFX05PX0RBVEEgfX1cbiAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgPC90cj5cbiAgICAgICAgPC90YWJsZT5cbiAgICA8L2Rpdj5cblxuICAgIDxtYXQtcGFnaW5hdG9yIGNsYXNzPVwicm91bmRlZEJvcmRlclwiIHNob3dGaXJzdExhc3RCdXR0b25zICNwYWdpbmF0b3IgW2xlbmd0aF09XCJkYXRhU291cmNlTGVuZ3RoXCJcbiAgICAgICAgW3BhZ2VTaXplXT1cIlRBQkxFX0NPTlNUQU5ULkRFRkFVTFRfUEFHRV9TSVpFXCIgW3BhZ2VTaXplT3B0aW9uc109XCJUQUJMRV9DT05TVEFOVC5QQUdFX1NJWkVfT1BUSU9OXCI+XG4gICAgPC9tYXQtcGFnaW5hdG9yPlxuPC9kaXY+Il19
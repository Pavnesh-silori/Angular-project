import { __awaiter } from "tslib";
import { Component, ViewChild } from '@angular/core';
import { isEqual } from 'lodash';
import { merge, fromEvent, of as observableOf } from 'rxjs';
import { catchError, filter, map, startWith, switchMap, tap } from 'rxjs/operators';
import { Entity } from '../../../../model/entity.model';
import { SourceConsumerConfigure } from '../../../../model/source-consumer.model';
import { SourceLoadComponent } from '../../_dialog/create-update/source-load/source-load.component';
import { ButtonLabelEnum, DialogOneComponent, DialogOneEnum, TABLE_CONSTANT } from '@library/tsc-common';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@library/storage-service";
import * as i3 from "@library/tsc-common";
import * as i4 from "../../../../service/entity.service";
import * as i5 from "../../../../controller/device.controller";
import * as i6 from "../../../../controller/source.controller";
import * as i7 from "@angular/forms";
import * as i8 from "@angular/material/dialog";
import * as i9 from "@angular/material/table";
import * as i10 from "@angular/material/checkbox";
import * as i11 from "ngx-smart-popover";
import * as i12 from "@angular/material/sort";
import * as i13 from "@angular/material/button";
import * as i14 from "@angular/material/paginator";
import * as i15 from "@angular/common";
import * as i16 from "@angular/material/tooltip";
import * as i17 from "@angular/cdk/clipboard";
// /tsc-library/
export class AddComponent {
    constructor(activatedRoute, storageService, tscCommonService, entityService, deviceController, sourceController, deviceMappingFB, dialog) {
        this.activatedRoute = activatedRoute;
        this.storageService = storageService;
        this.tscCommonService = tscCommonService;
        this.entityService = entityService;
        this.deviceController = deviceController;
        this.sourceController = sourceController;
        this.deviceMappingFB = deviceMappingFB;
        this.dialog = dialog;
        this.TABLE_CONSTANT = TABLE_CONSTANT;
        this.ButtonLabelEnum = ButtonLabelEnum;
        this.searchArr = [];
        this.dataSource = [];
        this.searchFlag = false;
        this.resultLength = 0;
        this.isEqual = true;
        this.showEdit = false;
        this.allowBackendCall = true;
        this.entityM = new Entity();
        this.sourceConsumerConfiguredM = new SourceConsumerConfigure();
        this.initialMappingRecords = {};
        this.displayedColumn = ['mapDevice', 'id', 'name', 'make', 'model', 'type'];
    }
    ngOnInit() {
        this.orgID = this.storageService.getStorage('currentOrgID');
        this.activatedRoute.params.subscribe((param) => {
            this.layoutID = param.layoutID;
            this.entityID = param.entityID;
            this.getEntityByID();
        });
        this.getSourceConsumerConfig();
        this.deviceMappingInit();
    }
    getSourceConsumerConfig() {
        this.sourceController.getSourceConsumerConfig(this.orgID).subscribe((res) => {
            this.sourceConsumerConfiguredM = res;
            this.redirectUrl = this.getRedirectUrl();
        }, error => console.log('Error:', error));
    }
    getRedirectUrl() {
        if (!this.sourceConsumerConfiguredM.sourceTypeConfigured) {
            return 'preference/source/create';
        }
        if (!this.sourceConsumerConfiguredM.consumerTypeConfigured) {
            return 'preference/consumer/create';
        }
        return 'preference/source/page';
    }
    getEntityByID() {
        return __awaiter(this, void 0, void 0, function* () {
            this.entityM = yield this.entityService.getEntityByID(this.orgID, this.layoutID, this.entityID);
        });
    }
    deviceMappingInit() {
        this.deviceMappingFG = this.deviceMappingFB.group({
            deviceRecords: this.deviceMappingFB.array([])
        });
    }
    get deviceRecords() {
        return this.deviceMappingFG.get('deviceRecords');
    }
    ngAfterViewInit() {
        merge(this.paginator.page, this.sort.sortChange, fromEvent(this.refreshBtn.nativeElement, 'click')).pipe(startWith({}), filter(() => this.handleBackendTrigger()), switchMap(() => this.getUnmappedDevice())).subscribe();
    }
    getUnmappedDevice() {
        this.deviceMappingFG.valueChanges.subscribe(() => {
            this.isEqual = isEqual(this.intialObject, this.deviceMappingFG.value);
        });
        this.searchArr = [];
        if (this.searchFlag) {
            this.searchArr.push('name:' + this.searchValue);
        }
        return this.deviceController.getUnMappedDevices(this.paginator.pageIndex, this.paginator.pageSize, this.sort.active, this.sort.direction, this.searchArr, this.orgID, this.layoutID, this.entityID).pipe(catchError(() => observableOf(null)), map((response) => {
            if (response == null) {
                this.resultLength = 0;
                return [];
            }
            this.resultLength = response["totalCount"];
            return response["records"];
        }), tap((dataSource) => {
            this.dataSource = dataSource;
            this.deviceMappingFG.reset();
            this.deviceRecords.clear();
            dataSource.forEach((record, index) => {
                this.deviceRecords.push(this.deviceMappingFB.group({
                    id: [record.id],
                    isDeviceMapped: [false],
                    type: [record.type],
                    parameter: [record.parameter],
                    mappingRecords: this.deviceMappingFB.array([])
                }));
            });
            this.intialObject = this.deviceMappingFG.value;
            this.isEqual = true;
        }));
    }
    handleBackendTrigger() {
        if (this.intialObject != undefined && !isEqual(this.intialObject, this.deviceMappingFG.value)) {
            this.openConfirmationDialog();
            return false;
        }
        return true;
    }
    openConfirmationDialog() {
        const dialog = this.dialog.open(DialogOneComponent, {
            minWidth: '450px',
            maxWidth: '450px',
            data: {
                type: DialogOneEnum.CONFIRMATION,
                icon: 'warning',
                header: 'Confirm?',
                body: 'Changes made will not be saved. Are you sure you want to proceed?',
                buttonOne: ButtonLabelEnum.NO_BTN_LABEL,
                buttonTwo: ButtonLabelEnum.YES_BTN_LABEL
            }
        });
        dialog.afterClosed().subscribe(res => {
            this.allowBackendCall = res;
            if (this.allowBackendCall == true) {
                this.deviceMappingFG.reset();
                this.getUnmappedDevice().subscribe();
            }
            else {
                this.searchBar.searchClear();
            }
        });
    }
    searchFn(value) {
        this.searchFlag = true;
        this.searchValue = value;
        if (value.length == 0) {
            this.resetSearch();
        }
        else {
            this.paginator.pageIndex = 0;
        }
        this.refreshBtn.nativeElement.click();
    }
    resetSearch() {
        this.searchFlag = false;
        this.searchBar.searchClear();
    }
    onCheckboxChange(index, isChecked) {
        const deviceGroup = this.deviceRecords.at(index);
        deviceGroup.get('isDeviceMapped').setValue(isChecked);
        if (isChecked) {
            if (deviceGroup.get('isDeviceMapped').value && deviceGroup.get('type').value == 'METER' && deviceGroup.get('parameter').value.length > 0) {
                this.openSourceLoadDialog(deviceGroup.value);
            }
        }
        else {
            const mappingRecordsArray = deviceGroup.get('mappingRecords');
            mappingRecordsArray.clear();
        }
    }
    openSourceLoadDialog(device) {
        const dialog = this.dialog.open(SourceLoadComponent, {
            data: {
                deviceInfo: device,
                entityID: this.entityID
            },
            minWidth: '40vw',
            maxWidth: '40vw',
            height: '100%',
            position: { right: '-2px', top: '0px' },
        });
        dialog.afterClosed()
            .subscribe((dialogRes) => {
            const deviceIndex = this.findIndexByDeviceID(device.id);
            if (dialogRes && dialogRes.sourceLoadMappingRes) {
                if (deviceIndex != -1) {
                    const deviceRecordsControl = this.deviceMappingFG.get('deviceRecords');
                    const mappingRecordsControl = deviceRecordsControl.at(deviceIndex).get('mappingRecords');
                    mappingRecordsControl.clear();
                    dialogRes.sourceLoadMappingRes.forEach(mappingItem => {
                        const parameterID = mappingItem.parameterID;
                        const mappings = mappingItem.mapping.map(mapping => {
                            return this.deviceMappingFB.group(mapping);
                        });
                        const mappingGroup = this.deviceMappingFB.group({
                            parameterID,
                            mapping: this.deviceMappingFB.array(mappings)
                        });
                        mappingRecordsControl.push(mappingGroup);
                    });
                }
            }
            if (dialogRes && dialogRes.sourceLoadMappingRes.length == 0) {
                if (deviceIndex != -1) {
                    const isDeviceMappedControl = this.deviceMappingFG.get('deviceRecords')['controls'][deviceIndex].get('isDeviceMapped');
                    isDeviceMappedControl.setValue(false);
                }
            }
        });
    }
    findIndexByDeviceID(id) {
        return this.deviceMappingFG.get('deviceRecords')['controls']
            .findIndex((d) => d.value.id == id);
    }
    saveDeviceMapping() {
        const deviceRecordsArray = this.deviceMappingFG.get('deviceRecords');
        deviceRecordsArray.controls.forEach((deviceGroup) => {
            const isDeviceMapped = deviceGroup.get('isDeviceMapped').value;
            const type = deviceGroup.get('type').value;
            const mappingRecordsControl = deviceGroup.get('mappingRecords');
            if (type == 'METER' && !isDeviceMapped) {
                mappingRecordsControl.clear();
            }
            deviceGroup.removeControl('parameter');
        });
        this.deviceController.saveDeviceMapping(this.orgID, this.layoutID, this.entityID, this.deviceMappingFG.getRawValue()).subscribe((mappedDevicesRes) => {
            this.tscCommonService.back();
        }, error => {
            console.log('error in saveDeviceMapping() - ', error);
        });
    }
}
AddComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: AddComponent, deps: [{ token: i1.ActivatedRoute }, { token: i2.StorageService }, { token: i3.TSCCommonService }, { token: i4.EntityService }, { token: i5.DeviceController }, { token: i6.SourceController }, { token: i7.FormBuilder }, { token: i8.MatDialog }], target: i0.ɵɵFactoryTarget.Component });
AddComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: AddComponent, selector: "app-add", viewQueries: [{ propertyName: "sort", first: true, predicate: ["sort"], descendants: true }, { propertyName: "paginator", first: true, predicate: ["paginator"], descendants: true }, { propertyName: "refreshBtn", first: true, predicate: ["refreshBtn"], descendants: true }, { propertyName: "searchBar", first: true, predicate: ["searchBar"], descendants: true }], ngImport: i0, template: "<div class=\"card main-card cardOverwrite h100\">\n    <div class=\"headerContainer\">\n        <div class=\"headerLeftContainer\">\n            <div class=\"pageTitle\">Map Devices <span *ngIf=\"entityM\">\n                    - ({{ entityM?.name }})\n                </span></div>\n        </div>\n        <div class=\"headerRightContainer\">\n            <div class=\"headerRightContainerInner\">\n                <lib-search-bar-one class=\"me-3\" #searchBar searchBy=\"device name\" (emitSearch)=\"searchFn($event)\">\n                </lib-search-bar-one>\n                <a [routerLink]=\"'/layout/' + layoutID + '/entity/' + entityID + '/map-device/view'\">View mapped devices</a>\n            </div>\n        </div>\n    </div>\n\n    <button #refreshBtn class=\"d-none\"></button>\n\n    <form [formGroup]=\"deviceMappingFG\">\n        <div class=\"overflowX customScrollBar w-100\">\n            <table mat-table class=\"w-100\" [dataSource]=\"dataSource\" #sort=\"matSort\" matSort matSortActive=\"name\"\n                matSortDirection=\"asc\" matSortDisableClear>\n\n                <ng-container matColumnDef=\"mapDevice\">\n                    <th class=\"columnWidth1\" mat-header-cell *matHeaderCellDef> Map device </th>\n                    <td class=\"columnWidth1\" mat-cell *matCellDef=\"let row; let i = index\">\n                        <div class=\"d-flex align-items-center\">\n                            <mat-checkbox [formControl]=\"deviceRecords?.at(i)?.get('isDeviceMapped')\"\n                                [disabled]=\"row.type == 'METER' && (!sourceConsumerConfiguredM.sourceTypeConfigured || !sourceConsumerConfiguredM.consumerTypeConfigured)\"\n                                (change)=\"onCheckboxChange(i, $event.checked)\"></mat-checkbox>\n\n                            <span\n                                *ngIf=\"row.type == 'METER' && (!sourceConsumerConfiguredM.sourceTypeConfigured || !sourceConsumerConfiguredM.consumerTypeConfigured)\"\n                                [popover]=\"infoPopover\" popoverPlacement=\"right\" [popoverOnHover]=\"false\" [popoverAnimation]=\"true\">\n                                <span class=\"material-symbols-outlined fontSize cursorPointer mt-2 ms-2\">\n                                    info\n                                </span>\n                            </span>\n\n                            <popover-content #infoPopover [animation]=\"true\" [closeOnClickOutside]=\"true\">\n                                <span>Click <a [href]=\"redirectUrl\">here </a>to set preferences</span>\n                            </popover-content>\n\n                            <span *ngIf=\"deviceRecords?.at(i)?.get('mappingRecords').length > 0\"\n                                class=\"material-symbols-outlined text-secondary fontSize cursorPointer ms-5\" #tooltip=\"matTooltip\"\n                                matTooltipPosition=\"above\" matTooltipClass=\"nameTooltip\" matTooltip=\"Update source/consumer\"\n                                (click)=\"this.openSourceLoadDialog(deviceRecords?.at(i).value)\">\n                                edit_square\n                            </span>\n                        </div>\n                    </td>\n                </ng-container>\n\n                <ng-container matColumnDef=\"id\">\n                    <th class=\"columnWidth2\" mat-header-cell *matHeaderCellDef>\n                        Device ID\n                    </th>\n                    <td class=\"columnWidth2\" mat-cell *matCellDef=\"let row\">\n                        {{ row['id'] }}\n                    </td>\n                </ng-container>\n\n                <ng-container matColumnDef=\"name\">\n                    <th class=\"columnWidth3\" mat-header-cell *matHeaderCellDef mat-sort-header disableClear> Name </th>\n                    <td class=\"columnWidth3\" mat-cell *matCellDef=\"let row\"> <span\n                            [matTooltip]=\"row?.['name']?.length>24? row['name']: ''\" matTooltipPosition=\"above\"\n                            matTooltipClass=\"nameTooltip\">\n                            {{ row.name | dotdotdot:24 }}\n                        </span>\n                        <button [cdkCopyToClipboard]=\"row.name\" matSuffix mat-icon-button type=\"button\">\n                            <span class=\"material-symbols-outlined fs-5\" mat-raised-button matTooltipPosition=\"right\"\n                                matTooltip=\"copy\">\n                                content_copy\n                            </span>\n                        </button>\n                    </td>\n                </ng-container>\n\n                <ng-container matColumnDef=\"make\">\n                    <th class=\"columnWidth4\" mat-header-cell *matHeaderCellDef> Make </th>\n                    <td class=\"columnWidth4\" mat-cell *matCellDef=\"let row\"\n                        [matTooltip]=\"row?.['make']?.length>15? row['make']: ''\" matTooltipPosition=\"above\"\n                        matTooltipClass=\"nameTooltip\">\n                        {{ row?.['make'] | dotdotdot:15 }}\n                    </td>\n                </ng-container>\n\n                <ng-container matColumnDef=\"model\">\n                    <th class=\"columnWidth4\" mat-header-cell *matHeaderCellDef> Model </th>\n                    <td class=\"columnWidth4\" mat-cell *matCellDef=\"let row\"\n                        [matTooltip]=\"row?.['model']?.length>15? row['model']: ''\" matTooltipPosition=\"above\"\n                        matTooltipClass=\"nameTooltip\">\n                        {{ row?.['model'] | dotdotdot:15 }}\n                    </td>\n                </ng-container>\n\n                <ng-container matColumnDef=\"type\">\n                    <th class=\"columnWidth4\" mat-header-cell *matHeaderCellDef> Type </th>\n                    <td class=\"columnWidth4\" mat-cell *matCellDef=\"let row\">\n                        {{ row.type | titlecase }}\n                    </td>\n                </ng-container>\n\n                <tr mat-header-row *matHeaderRowDef=\"displayedColumn; sticky: true\"></tr>\n                <tr mat-row *matRowDef=\"let row; columns: displayedColumn;\"></tr>\n\n                <tr class=\"mat-row\" *matNoDataRow>\n                    <td class=\"mat-cell text-center\" [attr.colspan]=\"displayedColumn.length\">\n                        {{ TABLE_CONSTANT.TABLE_NO_DATA }}\n                    </td>\n                </tr>\n            </table>\n        </div>\n\n        <mat-paginator #paginator class=\"roundedBorder\" showFirstLastButtons [length]=\"resultLength\"\n            [pageSize]=\"TABLE_CONSTANT.DEFAULT_PAGE_SIZE\" [pageSizeOptions]=\"TABLE_CONSTANT.PAGE_SIZE_OPTION\">\n        </mat-paginator>\n    </form>\n\n    <div align=\"end\">\n        <button type=\"submit\" class=\"btn btn-sm btn-success me-3 mb-2\" [ngClass]=\"{'disabled': isEqual}\"\n            (click)=\"saveDeviceMapping()\">\n            {{ ButtonLabelEnum.SAVE_BTN_LABEL }}\n        </button>\n    </div>\n\n</div>", styles: [".columnWidth1{min-width:120px}.columnWidth2{min-width:140px}.columnWidth3{min-width:180px}.columnWidth4{min-width:140px}.badge{font-weight:bold;font-size:1em;text-transform:lowercase}.fontSize{font-size:20px}\n"], components: [{ type: i3.SearchBarOneComponent, selector: "lib-search-bar-one", inputs: ["type", "searchBy", "clear", "emitValueOnChange"], outputs: ["emitSearch"] }, { type: i9.MatTable, selector: "mat-table, table[mat-table]", exportAs: ["matTable"] }, { type: i10.MatCheckbox, selector: "mat-checkbox", inputs: ["disableRipple", "color", "tabIndex", "aria-label", "aria-labelledby", "id", "labelPosition", "name", "required", "checked", "disabled", "indeterminate", "aria-describedby", "value"], outputs: ["change", "indeterminateChange"], exportAs: ["matCheckbox"] }, { type: i11.PopoverContentComponent, selector: "popover-content", inputs: ["placement", "animation", "closeOnClickOutside", "closeOnMouseOutside", "appendToBody", "size", "content", "title", "parentClass"] }, { type: i12.MatSortHeader, selector: "[mat-sort-header]", inputs: ["disabled", "arrowPosition", "sortActionDescription", "disableClear", "mat-sort-header", "start"], exportAs: ["matSortHeader"] }, { type: i13.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i9.MatHeaderRow, selector: "mat-header-row, tr[mat-header-row]", exportAs: ["matHeaderRow"] }, { type: i9.MatRow, selector: "mat-row, tr[mat-row]", exportAs: ["matRow"] }, { type: i14.MatPaginator, selector: "mat-paginator", inputs: ["disabled"], exportAs: ["matPaginator"] }], directives: [{ type: i15.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i1.RouterLinkWithHref, selector: "a[routerLink],area[routerLink]", inputs: ["routerLink", "target", "queryParams", "fragment", "queryParamsHandling", "preserveFragment", "skipLocationChange", "replaceUrl", "state", "relativeTo"] }, { type: i7.ɵNgNoValidate, selector: "form:not([ngNoForm]):not([ngNativeValidate])" }, { type: i7.NgControlStatusGroup, selector: "[formGroupName],[formArrayName],[ngModelGroup],[formGroup],form:not([ngNoForm]),[ngForm]" }, { type: i7.FormGroupDirective, selector: "[formGroup]", inputs: ["formGroup"], outputs: ["ngSubmit"], exportAs: ["ngForm"] }, { type: i12.MatSort, selector: "[matSort]", inputs: ["matSortDisabled", "matSortStart", "matSortDirection", "matSortDisableClear", "matSortActive"], outputs: ["matSortChange"], exportAs: ["matSort"] }, { type: i9.MatColumnDef, selector: "[matColumnDef]", inputs: ["sticky", "matColumnDef"] }, { type: i9.MatHeaderCellDef, selector: "[matHeaderCellDef]" }, { type: i9.MatHeaderCell, selector: "mat-header-cell, th[mat-header-cell]" }, { type: i9.MatCellDef, selector: "[matCellDef]" }, { type: i9.MatCell, selector: "mat-cell, td[mat-cell]" }, { type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i7.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i11.PopoverDirective, selector: "[popover]", inputs: ["popoverOnHover", "popoverDismissTimeout", "popover", "popoverSize", "popoverDisabled", "popoverAnimation", "popoverPlacement", "popoverTitle", "popoverCloseOnClickOutside", "popoverCloseOnMouseOutside", "appendToBody"], outputs: ["onShown", "onHidden"], exportAs: ["popover"] }, { type: i16.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }, { type: i17.CdkCopyToClipboard, selector: "[cdkCopyToClipboard]", inputs: ["cdkCopyToClipboard", "cdkCopyToClipboardAttempts"], outputs: ["cdkCopyToClipboardCopied"] }, { type: i9.MatHeaderRowDef, selector: "[matHeaderRowDef]", inputs: ["matHeaderRowDef", "matHeaderRowDefSticky"] }, { type: i9.MatRowDef, selector: "[matRowDef]", inputs: ["matRowDefColumns", "matRowDefWhen"] }, { type: i9.MatNoDataRow, selector: "ng-template[matNoDataRow]" }, { type: i15.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }], pipes: { "dotdotdot": i3.EllipsisPipeService, "titlecase": i15.TitleCasePipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: AddComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'app-add',
                    templateUrl: './add.component.html',
                    styleUrls: ['./add.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.ActivatedRoute }, { type: i2.StorageService }, { type: i3.TSCCommonService }, { type: i4.EntityService }, { type: i5.DeviceController }, { type: i6.SourceController }, { type: i7.FormBuilder }, { type: i8.MatDialog }]; }, propDecorators: { sort: [{
                type: ViewChild,
                args: ['sort']
            }], paginator: [{
                type: ViewChild,
                args: ['paginator']
            }], refreshBtn: [{
                type: ViewChild,
                args: ['refreshBtn']
            }], searchBar: [{
                type: ViewChild,
                args: ['searchBar']
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL2xpYnJhcnkvdHNjLWxpdGUvc3JjL2xpYi90c2MvY29tcG9uZW50L2xheW91dC9tYXAtZGV2aWNlL2FkZC9hZGQuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbGlicmFyeS90c2MtbGl0ZS9zcmMvbGliL3RzYy9jb21wb25lbnQvbGF5b3V0L21hcC1kZXZpY2UvYWRkL2FkZC5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsT0FBTyxFQUFFLFNBQVMsRUFBc0IsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBUXpFLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxRQUFRLENBQUM7QUFFakMsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsRUFBRSxJQUFJLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUM1RCxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxHQUFHLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUVwRixPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFeEQsT0FBTyxFQUFFLHVCQUF1QixFQUE0QixNQUFNLHlDQUF5QyxDQUFDO0FBRTVHLE9BQU8sRUFBRSxtQkFBbUIsRUFBRSxNQUFNLCtEQUErRCxDQUFDO0FBU3BHLE9BQU8sRUFBRSxlQUFlLEVBQUUsa0JBQWtCLEVBQUUsYUFBYSxFQUEyQyxjQUFjLEVBQW9CLE1BQU0scUJBQXFCLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFDcEssZ0JBQWdCO0FBT2hCLE1BQU0sT0FBTyxZQUFZO0lBZ0NyQixZQUNZLGNBQThCLEVBQzlCLGNBQThCLEVBQzlCLGdCQUFrQyxFQUNsQyxhQUE0QixF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QUFZO2tCQUx4QixTQUFTO21CQUFDO29CQUNQLFFBQVEsRUFBRSxTQUFTO29CQUNuQixXQUFXLEVBQUUsc0JBQXNCO29CQUNuQyxTQUFTLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQztpQkFDdEM7NlNBNEJzQixJQUFJO3NCQUF0QixTQUFTO3VCQUFDLE1BQU07Z0JBQ08sU0FBUztzQkFBaEMsU0FBUzt1QkFBQyxXQUFXO2dCQUNHLFVBQVU7c0JBQWxDLFNBQVM7dUJBQUMsWUFBWTtnQkFDQyxTQUFTO3NCQUFoQyxTQUFTO3VCQUFDLFdBQVciLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEVsZW1lbnRSZWYsIE9uSW5pdCwgVmlld0NoaWxkIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBBY3RpdmF0ZWRSb3V0ZSB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5pbXBvcnQgeyBGb3JtQXJyYXksIEZvcm1CdWlsZGVyLCBGb3JtR3JvdXAgfSBmcm9tICdAYW5ndWxhci9mb3Jtcyc7XG5cbmltcG9ydCB7IE1hdFBhZ2luYXRvciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsL3BhZ2luYXRvcic7XG5pbXBvcnQgeyBNYXRTb3J0IH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvc29ydCc7XG5pbXBvcnQgeyBNYXREaWFsb2cgfSBmcm9tICdAYW5ndWxhci9tYXRlcmlhbC9kaWFsb2cnO1xuXG5pbXBvcnQgeyBpc0VxdWFsIH0gZnJvbSAnbG9kYXNoJztcblxuaW1wb3J0IHsgbWVyZ2UsIGZyb21FdmVudCwgb2YgYXMgb2JzZXJ2YWJsZU9mIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBjYXRjaEVycm9yLCBmaWx0ZXIsIG1hcCwgc3RhcnRXaXRoLCBzd2l0Y2hNYXAsIHRhcCB9IGZyb20gJ3J4anMvb3BlcmF0b3JzJztcblxuaW1wb3J0IHsgRW50aXR5IH0gZnJvbSAnLi4vLi4vLi4vLi4vbW9kZWwvZW50aXR5Lm1vZGVsJztcbmltcG9ydCB7IERldmljZU1hcHBpbmdNIH0gZnJvbSAnLi4vLi4vLi4vLi4vbW9kZWwvZGV2aWNlLm1vZGVsJztcbmltcG9ydCB7IFNvdXJjZUNvbnN1bWVyQ29uZmlndXJlLCBTb3VyY2VDb25zdW1lckNvbmZpZ3VyZU0gfSBmcm9tICcuLi8uLi8uLi8uLi9tb2RlbC9zb3VyY2UtY29uc3VtZXIubW9kZWwnO1xuXG5pbXBvcnQgeyBTb3VyY2VMb2FkQ29tcG9uZW50IH0gZnJvbSAnLi4vLi4vX2RpYWxvZy9jcmVhdGUtdXBkYXRlL3NvdXJjZS1sb2FkL3NvdXJjZS1sb2FkLmNvbXBvbmVudCc7XG5cbmltcG9ydCB7IERldmljZUNvbnRyb2xsZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb250cm9sbGVyL2RldmljZS5jb250cm9sbGVyJztcbmltcG9ydCB7IFNvdXJjZUNvbnRyb2xsZXIgfSBmcm9tICcuLi8uLi8uLi8uLi9jb250cm9sbGVyL3NvdXJjZS5jb250cm9sbGVyJztcblxuaW1wb3J0IHsgRW50aXR5U2VydmljZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NlcnZpY2UvZW50aXR5LnNlcnZpY2UnO1xuXG4vLyB0c2MtbGlicmFyeVxuaW1wb3J0IHsgU3RvcmFnZVNlcnZpY2UgfSBmcm9tICdAbGlicmFyeS9zdG9yYWdlLXNlcnZpY2UnO1xuaW1wb3J0IHsgQnV0dG9uTGFiZWxFbnVtLCBEaWFsb2dPbmVDb21wb25lbnQsIERpYWxvZ09uZUVudW0sIFBhZ2VNLCBSZXNwb25zZU0sIFNlYXJjaEJhck9uZUNvbXBvbmVudCwgVEFCTEVfQ09OU1RBTlQsIFRTQ0NvbW1vblNlcnZpY2UgfSBmcm9tICdAbGlicmFyeS90c2MtY29tbW9uJztcbi8vIC90c2MtbGlicmFyeS9cblxuQENvbXBvbmVudCh7XG4gICAgc2VsZWN0b3I6ICdhcHAtYWRkJyxcbiAgICB0ZW1wbGF0ZVVybDogJy4vYWRkLmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9hZGQuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBBZGRDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgVEFCTEVfQ09OU1RBTlQgPSBUQUJMRV9DT05TVEFOVDtcbiAgICBCdXR0b25MYWJlbEVudW0gPSBCdXR0b25MYWJlbEVudW07XG5cbiAgICBvcmdJRDogYW55O1xuICAgIGxheW91dElEOiBhbnk7XG4gICAgZW50aXR5SUQ6IGFueTtcbiAgICBzZWFyY2hWYWx1ZTogc3RyaW5nO1xuICAgIGludGlhbE9iamVjdDogYW55O1xuICAgIHJlZGlyZWN0VXJsOiBzdHJpbmc7XG4gICAgc2VhcmNoQXJyOiBhbnlbXSA9IFtdO1xuICAgIGRhdGFTb3VyY2U6IGFueVtdID0gW107XG4gICAgc2VhcmNoRmxhZzogYm9vbGVhbiA9IGZhbHNlO1xuICAgIHJlc3VsdExlbmd0aDogbnVtYmVyID0gMDtcbiAgICBpc0VxdWFsOiBib29sZWFuID0gdHJ1ZTtcbiAgICBzaG93RWRpdDogYm9vbGVhbiA9IGZhbHNlO1xuICAgIGFsbG93QmFja2VuZENhbGw6IGJvb2xlYW4gPSB0cnVlO1xuICAgIGVudGl0eU0gPSBuZXcgRW50aXR5KCk7XG4gICAgc291cmNlQ29uc3VtZXJDb25maWd1cmVkTSA9IG5ldyBTb3VyY2VDb25zdW1lckNvbmZpZ3VyZSgpO1xuXG4gICAgaW5pdGlhbE1hcHBpbmdSZWNvcmRzOiB7IFtpZDogbnVtYmVyXTogYW55W10gfSA9IHt9O1xuXG4gICAgZGlzcGxheWVkQ29sdW1uOiBzdHJpbmdbXSA9IFsnbWFwRGV2aWNlJywgJ2lkJywgJ25hbWUnLCAnbWFrZScsICdtb2RlbCcsICd0eXBlJ107XG5cbiAgICBkZXZpY2VNYXBwaW5nRkc6IEZvcm1Hcm91cDtcblxuICAgIEBWaWV3Q2hpbGQoJ3NvcnQnKSBzb3J0OiBNYXRTb3J0O1xuICAgIEBWaWV3Q2hpbGQoJ3BhZ2luYXRvcicpIHBhZ2luYXRvcjogTWF0UGFnaW5hdG9yO1xuICAgIEBWaWV3Q2hpbGQoJ3JlZnJlc2hCdG4nKSByZWZyZXNoQnRuOiBFbGVtZW50UmVmO1xuICAgIEBWaWV3Q2hpbGQoJ3NlYXJjaEJhcicpIHNlYXJjaEJhcjogU2VhcmNoQmFyT25lQ29tcG9uZW50O1xuXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgYWN0aXZhdGVkUm91dGU6IEFjdGl2YXRlZFJvdXRlLFxuICAgICAgICBwcml2YXRlIHN0b3JhZ2VTZXJ2aWNlOiBTdG9yYWdlU2VydmljZSxcbiAgICAgICAgcHJpdmF0ZSB0c2NDb21tb25TZXJ2aWNlOiBUU0NDb21tb25TZXJ2aWNlLFxuICAgICAgICBwcml2YXRlIGVudGl0eVNlcnZpY2U6IEVudGl0eVNlcnZpY2UsXG4gICAgICAgIHByaXZhdGUgZGV2aWNlQ29udHJvbGxlcjogRGV2aWNlQ29udHJvbGxlcixcbiAgICAgICAgcHJpdmF0ZSBzb3VyY2VDb250cm9sbGVyOiBTb3VyY2VDb250cm9sbGVyLFxuICAgICAgICBwcml2YXRlIGRldmljZU1hcHBpbmdGQjogRm9ybUJ1aWxkZXIsXG4gICAgICAgIHByaXZhdGUgZGlhbG9nOiBNYXREaWFsb2dcbiAgICApIHsgfVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMub3JnSUQgPSB0aGlzLnN0b3JhZ2VTZXJ2aWNlLmdldFN0b3JhZ2UoJ2N1cnJlbnRPcmdJRCcpO1xuXG4gICAgICAgIHRoaXMuYWN0aXZhdGVkUm91dGUucGFyYW1zLnN1YnNjcmliZSgocGFyYW0pID0+IHtcbiAgICAgICAgICAgIHRoaXMubGF5b3V0SUQgPSBwYXJhbS5sYXlvdXRJRDtcbiAgICAgICAgICAgIHRoaXMuZW50aXR5SUQgPSBwYXJhbS5lbnRpdHlJRDtcblxuICAgICAgICAgICAgdGhpcy5nZXRFbnRpdHlCeUlEKCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgdGhpcy5nZXRTb3VyY2VDb25zdW1lckNvbmZpZygpO1xuICAgICAgICB0aGlzLmRldmljZU1hcHBpbmdJbml0KCk7XG4gICAgfVxuXG4gICAgZ2V0U291cmNlQ29uc3VtZXJDb25maWcoKSB7XG4gICAgICAgIHRoaXMuc291cmNlQ29udHJvbGxlci5nZXRTb3VyY2VDb25zdW1lckNvbmZpZyh0aGlzLm9yZ0lEKS5zdWJzY3JpYmUoKHJlczogU291cmNlQ29uc3VtZXJDb25maWd1cmVNKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnNvdXJjZUNvbnN1bWVyQ29uZmlndXJlZE0gPSByZXM7XG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXJsID0gdGhpcy5nZXRSZWRpcmVjdFVybCgpO1xuICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3IgPT4gY29uc29sZS5sb2coJ0Vycm9yOicsIGVycm9yKVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldFJlZGlyZWN0VXJsKCkge1xuICAgICAgICBpZiAoIXRoaXMuc291cmNlQ29uc3VtZXJDb25maWd1cmVkTS5zb3VyY2VUeXBlQ29uZmlndXJlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdwcmVmZXJlbmNlL3NvdXJjZS9jcmVhdGUnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCF0aGlzLnNvdXJjZUNvbnN1bWVyQ29uZmlndXJlZE0uY29uc3VtZXJUeXBlQ29uZmlndXJlZCkge1xuICAgICAgICAgICAgcmV0dXJuICdwcmVmZXJlbmNlL2NvbnN1bWVyL2NyZWF0ZSc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gJ3ByZWZlcmVuY2Uvc291cmNlL3BhZ2UnO1xuICAgIH1cblxuICAgIGFzeW5jIGdldEVudGl0eUJ5SUQoKSB7XG4gICAgICAgIHRoaXMuZW50aXR5TSA9IGF3YWl0IHRoaXMuZW50aXR5U2VydmljZS5nZXRFbnRpdHlCeUlEKHRoaXMub3JnSUQsIHRoaXMubGF5b3V0SUQsIHRoaXMuZW50aXR5SUQpO1xuICAgIH1cblxuICAgIGRldmljZU1hcHBpbmdJbml0KCkge1xuICAgICAgICB0aGlzLmRldmljZU1hcHBpbmdGRyA9IHRoaXMuZGV2aWNlTWFwcGluZ0ZCLmdyb3VwKHtcbiAgICAgICAgICAgIGRldmljZVJlY29yZHM6IHRoaXMuZGV2aWNlTWFwcGluZ0ZCLmFycmF5KFtdKVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBnZXQgZGV2aWNlUmVjb3JkcygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlTWFwcGluZ0ZHLmdldCgnZGV2aWNlUmVjb3JkcycpIGFzIEZvcm1BcnJheTtcbiAgICB9XG5cbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgICAgIG1lcmdlKFxuICAgICAgICAgICAgdGhpcy5wYWdpbmF0b3IucGFnZSxcbiAgICAgICAgICAgIHRoaXMuc29ydC5zb3J0Q2hhbmdlLFxuICAgICAgICAgICAgZnJvbUV2ZW50KHRoaXMucmVmcmVzaEJ0bi5uYXRpdmVFbGVtZW50LCAnY2xpY2snKVxuICAgICAgICApLnBpcGUoXG4gICAgICAgICAgICBzdGFydFdpdGgoe30pLFxuICAgICAgICAgICAgZmlsdGVyKCgpID0+IHRoaXMuaGFuZGxlQmFja2VuZFRyaWdnZXIoKSksXG4gICAgICAgICAgICBzd2l0Y2hNYXAoKCkgPT4gdGhpcy5nZXRVbm1hcHBlZERldmljZSgpKVxuICAgICAgICApLnN1YnNjcmliZSgpO1xuICAgIH1cblxuICAgIGdldFVubWFwcGVkRGV2aWNlKCkge1xuXG4gICAgICAgIHRoaXMuZGV2aWNlTWFwcGluZ0ZHLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0VxdWFsID0gaXNFcXVhbCh0aGlzLmludGlhbE9iamVjdCwgdGhpcy5kZXZpY2VNYXBwaW5nRkcudmFsdWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnNlYXJjaEFyciA9IFtdO1xuICAgICAgICBpZiAodGhpcy5zZWFyY2hGbGFnKSB7XG4gICAgICAgICAgICB0aGlzLnNlYXJjaEFyci5wdXNoKCduYW1lOicgKyB0aGlzLnNlYXJjaFZhbHVlKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZGV2aWNlQ29udHJvbGxlci5nZXRVbk1hcHBlZERldmljZXMoXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRvci5wYWdlSW5kZXgsXG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRvci5wYWdlU2l6ZSxcbiAgICAgICAgICAgIHRoaXMuc29ydC5hY3RpdmUsXG4gICAgICAgICAgICB0aGlzLnNvcnQuZGlyZWN0aW9uLFxuICAgICAgICAgICAgdGhpcy5zZWFyY2hBcnIsXG4gICAgICAgICAgICB0aGlzLm9yZ0lELFxuICAgICAgICAgICAgdGhpcy5sYXlvdXRJRCxcbiAgICAgICAgICAgIHRoaXMuZW50aXR5SUQsXG4gICAgICAgICkucGlwZShcbiAgICAgICAgICAgIGNhdGNoRXJyb3IoKCkgPT4gb2JzZXJ2YWJsZU9mKG51bGwpKSxcbiAgICAgICAgICAgIG1hcCgocmVzcG9uc2U6IFBhZ2VNPERldmljZU1hcHBpbmdNPikgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0TGVuZ3RoID0gMDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aGlzLnJlc3VsdExlbmd0aCA9IHJlc3BvbnNlW1widG90YWxDb3VudFwiXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VbXCJyZWNvcmRzXCJdO1xuICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB0YXAoKGRhdGFTb3VyY2UpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFTb3VyY2UgPSBkYXRhU291cmNlO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kZXZpY2VNYXBwaW5nRkcucmVzZXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmRldmljZVJlY29yZHMuY2xlYXIoKTtcblxuICAgICAgICAgICAgICAgIGRhdGFTb3VyY2UuZm9yRWFjaCgocmVjb3JkLCBpbmRleCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRldmljZVJlY29yZHMucHVzaCh0aGlzLmRldmljZU1hcHBpbmdGQi5ncm91cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogW3JlY29yZC5pZF0sXG4gICAgICAgICAgICAgICAgICAgICAgICBpc0RldmljZU1hcHBlZDogW2ZhbHNlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFtyZWNvcmQudHlwZV0sXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXI6IFtyZWNvcmQucGFyYW1ldGVyXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBpbmdSZWNvcmRzOiB0aGlzLmRldmljZU1hcHBpbmdGQi5hcnJheShbXSlcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pbnRpYWxPYmplY3QgPSB0aGlzLmRldmljZU1hcHBpbmdGRy52YWx1ZTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzRXF1YWwgPSB0cnVlO1xuXG4gICAgICAgICAgICB9KVxuICAgICAgICApO1xuICAgIH1cblxuICAgIGhhbmRsZUJhY2tlbmRUcmlnZ2VyKCk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAodGhpcy5pbnRpYWxPYmplY3QgIT0gdW5kZWZpbmVkICYmICFpc0VxdWFsKHRoaXMuaW50aWFsT2JqZWN0LCB0aGlzLmRldmljZU1hcHBpbmdGRy52YWx1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbkNvbmZpcm1hdGlvbkRpYWxvZygpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIG9wZW5Db25maXJtYXRpb25EaWFsb2coKSB7XG4gICAgICAgIGNvbnN0IGRpYWxvZyA9IHRoaXMuZGlhbG9nLm9wZW4oRGlhbG9nT25lQ29tcG9uZW50LCB7XG4gICAgICAgICAgICBtaW5XaWR0aDogJzQ1MHB4JyxcbiAgICAgICAgICAgIG1heFdpZHRoOiAnNDUwcHgnLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHR5cGU6IERpYWxvZ09uZUVudW0uQ09ORklSTUFUSU9OLFxuICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nJyxcbiAgICAgICAgICAgICAgICBoZWFkZXI6ICdDb25maXJtPycsXG4gICAgICAgICAgICAgICAgYm9keTogJ0NoYW5nZXMgbWFkZSB3aWxsIG5vdCBiZSBzYXZlZC4gQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIHByb2NlZWQ/JyxcbiAgICAgICAgICAgICAgICBidXR0b25PbmU6IEJ1dHRvbkxhYmVsRW51bS5OT19CVE5fTEFCRUwsXG4gICAgICAgICAgICAgICAgYnV0dG9uVHdvOiBCdXR0b25MYWJlbEVudW0uWUVTX0JUTl9MQUJFTFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgZGlhbG9nLmFmdGVyQ2xvc2VkKCkuc3Vic2NyaWJlKHJlcyA9PiB7XG4gICAgICAgICAgICB0aGlzLmFsbG93QmFja2VuZENhbGwgPSByZXM7XG4gICAgICAgICAgICBpZiAodGhpcy5hbGxvd0JhY2tlbmRDYWxsID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRldmljZU1hcHBpbmdGRy5yZXNldCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuZ2V0VW5tYXBwZWREZXZpY2UoKS5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hCYXIuc2VhcmNoQ2xlYXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICBzZWFyY2hGbih2YWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoRmxhZyA9IHRydWU7XG4gICAgICAgIHRoaXMuc2VhcmNoVmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICB0aGlzLnJlc2V0U2VhcmNoKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnBhZ2luYXRvci5wYWdlSW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVmcmVzaEJ0bi5uYXRpdmVFbGVtZW50LmNsaWNrKCk7XG4gICAgfVxuXG4gICAgcmVzZXRTZWFyY2goKSB7XG4gICAgICAgIHRoaXMuc2VhcmNoRmxhZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnNlYXJjaEJhci5zZWFyY2hDbGVhcigpO1xuICAgIH1cblxuICAgIG9uQ2hlY2tib3hDaGFuZ2UoaW5kZXg6IG51bWJlciwgaXNDaGVja2VkOiBib29sZWFuKSB7XG4gICAgICAgIGNvbnN0IGRldmljZUdyb3VwID0gdGhpcy5kZXZpY2VSZWNvcmRzLmF0KGluZGV4KTtcbiAgICAgICAgZGV2aWNlR3JvdXAuZ2V0KCdpc0RldmljZU1hcHBlZCcpLnNldFZhbHVlKGlzQ2hlY2tlZCk7XG5cbiAgICAgICAgaWYgKGlzQ2hlY2tlZCkge1xuICAgICAgICAgICAgaWYgKGRldmljZUdyb3VwLmdldCgnaXNEZXZpY2VNYXBwZWQnKS52YWx1ZSAmJiBkZXZpY2VHcm91cC5nZXQoJ3R5cGUnKS52YWx1ZSA9PSAnTUVURVInICYmIGRldmljZUdyb3VwLmdldCgncGFyYW1ldGVyJykudmFsdWUubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlblNvdXJjZUxvYWREaWFsb2coZGV2aWNlR3JvdXAudmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbWFwcGluZ1JlY29yZHNBcnJheSA9IGRldmljZUdyb3VwLmdldCgnbWFwcGluZ1JlY29yZHMnKSBhcyBGb3JtQXJyYXk7XG4gICAgICAgICAgICBtYXBwaW5nUmVjb3Jkc0FycmF5LmNsZWFyKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBvcGVuU291cmNlTG9hZERpYWxvZyhkZXZpY2UpIHtcbiAgICAgICAgY29uc3QgZGlhbG9nID0gdGhpcy5kaWFsb2cub3BlbihTb3VyY2VMb2FkQ29tcG9uZW50LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgZGV2aWNlSW5mbzogZGV2aWNlLFxuICAgICAgICAgICAgICAgICAgICBlbnRpdHlJRDogdGhpcy5lbnRpdHlJRFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbWluV2lkdGg6ICc0MHZ3JyxcbiAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzQwdncnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiB7IHJpZ2h0OiAnLTJweCcsIHRvcDogJzBweCcgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBkaWFsb2cuYWZ0ZXJDbG9zZWQoKVxuICAgICAgICAgICAgLnN1YnNjcmliZSgoZGlhbG9nUmVzKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGV2aWNlSW5kZXggPSB0aGlzLmZpbmRJbmRleEJ5RGV2aWNlSUQoZGV2aWNlLmlkKTtcblxuICAgICAgICAgICAgICAgIGlmIChkaWFsb2dSZXMgJiYgZGlhbG9nUmVzLnNvdXJjZUxvYWRNYXBwaW5nUmVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXZpY2VJbmRleCAhPSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGV2aWNlUmVjb3Jkc0NvbnRyb2wgPSB0aGlzLmRldmljZU1hcHBpbmdGRy5nZXQoJ2RldmljZVJlY29yZHMnKSBhcyBGb3JtQXJyYXk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXBwaW5nUmVjb3Jkc0NvbnRyb2wgPSBkZXZpY2VSZWNvcmRzQ29udHJvbC5hdChkZXZpY2VJbmRleCkuZ2V0KCdtYXBwaW5nUmVjb3JkcycpIGFzIEZvcm1BcnJheTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBpbmdSZWNvcmRzQ29udHJvbC5jbGVhcigpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWFsb2dSZXMuc291cmNlTG9hZE1hcHBpbmdSZXMuZm9yRWFjaChtYXBwaW5nSXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVySUQgPSBtYXBwaW5nSXRlbS5wYXJhbWV0ZXJJRDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXBwaW5ncyA9IG1hcHBpbmdJdGVtLm1hcHBpbmcubWFwKG1hcHBpbmcgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kZXZpY2VNYXBwaW5nRkIuZ3JvdXAobWFwcGluZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXBwaW5nR3JvdXAgPSB0aGlzLmRldmljZU1hcHBpbmdGQi5ncm91cCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcklELFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXBwaW5nOiB0aGlzLmRldmljZU1hcHBpbmdGQi5hcnJheShtYXBwaW5ncylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHBpbmdSZWNvcmRzQ29udHJvbC5wdXNoKG1hcHBpbmdHcm91cCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGRpYWxvZ1JlcyAmJiBkaWFsb2dSZXMuc291cmNlTG9hZE1hcHBpbmdSZXMubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRldmljZUluZGV4ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpc0RldmljZU1hcHBlZENvbnRyb2wgPSB0aGlzLmRldmljZU1hcHBpbmdGRy5nZXQoJ2RldmljZVJlY29yZHMnKVsnY29udHJvbHMnXVtkZXZpY2VJbmRleF0uZ2V0KCdpc0RldmljZU1hcHBlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaXNEZXZpY2VNYXBwZWRDb250cm9sLnNldFZhbHVlKGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgfVxuXG4gICAgZmluZEluZGV4QnlEZXZpY2VJRChpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZXZpY2VNYXBwaW5nRkcuZ2V0KCdkZXZpY2VSZWNvcmRzJylbJ2NvbnRyb2xzJ11cbiAgICAgICAgICAgIC5maW5kSW5kZXgoKGQ6IGFueSkgPT4gZC52YWx1ZS5pZCA9PSBpZCk7XG4gICAgfVxuXG4gICAgc2F2ZURldmljZU1hcHBpbmcoKSB7XG4gICAgICAgIGNvbnN0IGRldmljZVJlY29yZHNBcnJheSA9IHRoaXMuZGV2aWNlTWFwcGluZ0ZHLmdldCgnZGV2aWNlUmVjb3JkcycpIGFzIEZvcm1BcnJheTtcblxuICAgICAgICBkZXZpY2VSZWNvcmRzQXJyYXkuY29udHJvbHMuZm9yRWFjaCgoZGV2aWNlR3JvdXA6IEZvcm1Hcm91cCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaXNEZXZpY2VNYXBwZWQgPSBkZXZpY2VHcm91cC5nZXQoJ2lzRGV2aWNlTWFwcGVkJykudmFsdWU7XG4gICAgICAgICAgICBjb25zdCB0eXBlID0gZGV2aWNlR3JvdXAuZ2V0KCd0eXBlJykudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBtYXBwaW5nUmVjb3Jkc0NvbnRyb2wgPSBkZXZpY2VHcm91cC5nZXQoJ21hcHBpbmdSZWNvcmRzJykgYXMgRm9ybUFycmF5O1xuXG4gICAgICAgICAgICBpZiAodHlwZSA9PSAnTUVURVInICYmICFpc0RldmljZU1hcHBlZCkge1xuICAgICAgICAgICAgICAgIG1hcHBpbmdSZWNvcmRzQ29udHJvbC5jbGVhcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBkZXZpY2VHcm91cC5yZW1vdmVDb250cm9sKCdwYXJhbWV0ZXInKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5kZXZpY2VDb250cm9sbGVyLnNhdmVEZXZpY2VNYXBwaW5nKHRoaXMub3JnSUQsIHRoaXMubGF5b3V0SUQsIHRoaXMuZW50aXR5SUQsIHRoaXMuZGV2aWNlTWFwcGluZ0ZHLmdldFJhd1ZhbHVlKCkpLnN1YnNjcmliZSgobWFwcGVkRGV2aWNlc1JlczogUmVzcG9uc2VNKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnRzY0NvbW1vblNlcnZpY2UuYmFjaygpO1xuICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3IgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBpbiBzYXZlRGV2aWNlTWFwcGluZygpIC0gJywgZXJyb3IpO1xuICAgICAgICAgICAgfSk7XG4gICAgfVxuXG59IiwiPGRpdiBjbGFzcz1cImNhcmQgbWFpbi1jYXJkIGNhcmRPdmVyd3JpdGUgaDEwMFwiPlxuICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJDb250YWluZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImhlYWRlckxlZnRDb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJwYWdlVGl0bGVcIj5NYXAgRGV2aWNlcyA8c3BhbiAqbmdJZj1cImVudGl0eU1cIj5cbiAgICAgICAgICAgICAgICAgICAgLSAoe3sgZW50aXR5TT8ubmFtZSB9fSlcbiAgICAgICAgICAgICAgICA8L3NwYW4+PC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyUmlnaHRDb250YWluZXJcIj5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoZWFkZXJSaWdodENvbnRhaW5lcklubmVyXCI+XG4gICAgICAgICAgICAgICAgPGxpYi1zZWFyY2gtYmFyLW9uZSBjbGFzcz1cIm1lLTNcIiAjc2VhcmNoQmFyIHNlYXJjaEJ5PVwiZGV2aWNlIG5hbWVcIiAoZW1pdFNlYXJjaCk9XCJzZWFyY2hGbigkZXZlbnQpXCI+XG4gICAgICAgICAgICAgICAgPC9saWItc2VhcmNoLWJhci1vbmU+XG4gICAgICAgICAgICAgICAgPGEgW3JvdXRlckxpbmtdPVwiJy9sYXlvdXQvJyArIGxheW91dElEICsgJy9lbnRpdHkvJyArIGVudGl0eUlEICsgJy9tYXAtZGV2aWNlL3ZpZXcnXCI+VmlldyBtYXBwZWQgZGV2aWNlczwvYT5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cblxuICAgIDxidXR0b24gI3JlZnJlc2hCdG4gY2xhc3M9XCJkLW5vbmVcIj48L2J1dHRvbj5cblxuICAgIDxmb3JtIFtmb3JtR3JvdXBdPVwiZGV2aWNlTWFwcGluZ0ZHXCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJvdmVyZmxvd1ggY3VzdG9tU2Nyb2xsQmFyIHctMTAwXCI+XG4gICAgICAgICAgICA8dGFibGUgbWF0LXRhYmxlIGNsYXNzPVwidy0xMDBcIiBbZGF0YVNvdXJjZV09XCJkYXRhU291cmNlXCIgI3NvcnQ9XCJtYXRTb3J0XCIgbWF0U29ydCBtYXRTb3J0QWN0aXZlPVwibmFtZVwiXG4gICAgICAgICAgICAgICAgbWF0U29ydERpcmVjdGlvbj1cImFzY1wiIG1hdFNvcnREaXNhYmxlQ2xlYXI+XG5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cIm1hcERldmljZVwiPlxuICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJjb2x1bW5XaWR0aDFcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+IE1hcCBkZXZpY2UgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwiY29sdW1uV2lkdGgxXCIgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93OyBsZXQgaSA9IGluZGV4XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtY2hlY2tib3ggW2Zvcm1Db250cm9sXT1cImRldmljZVJlY29yZHM/LmF0KGkpPy5nZXQoJ2lzRGV2aWNlTWFwcGVkJylcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbZGlzYWJsZWRdPVwicm93LnR5cGUgPT0gJ01FVEVSJyAmJiAoIXNvdXJjZUNvbnN1bWVyQ29uZmlndXJlZE0uc291cmNlVHlwZUNvbmZpZ3VyZWQgfHwgIXNvdXJjZUNvbnN1bWVyQ29uZmlndXJlZE0uY29uc3VtZXJUeXBlQ29uZmlndXJlZClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2hhbmdlKT1cIm9uQ2hlY2tib3hDaGFuZ2UoaSwgJGV2ZW50LmNoZWNrZWQpXCI+PC9tYXQtY2hlY2tib3g+XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqbmdJZj1cInJvdy50eXBlID09ICdNRVRFUicgJiYgKCFzb3VyY2VDb25zdW1lckNvbmZpZ3VyZWRNLnNvdXJjZVR5cGVDb25maWd1cmVkIHx8ICFzb3VyY2VDb25zdW1lckNvbmZpZ3VyZWRNLmNvbnN1bWVyVHlwZUNvbmZpZ3VyZWQpXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BvcG92ZXJdPVwiaW5mb1BvcG92ZXJcIiBwb3BvdmVyUGxhY2VtZW50PVwicmlnaHRcIiBbcG9wb3Zlck9uSG92ZXJdPVwiZmFsc2VcIiBbcG9wb3ZlckFuaW1hdGlvbl09XCJ0cnVlXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBmb250U2l6ZSBjdXJzb3JQb2ludGVyIG10LTIgbXMtMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBvcG92ZXItY29udGVudCAjaW5mb1BvcG92ZXIgW2FuaW1hdGlvbl09XCJ0cnVlXCIgW2Nsb3NlT25DbGlja091dHNpZGVdPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Bhbj5DbGljayA8YSBbaHJlZl09XCJyZWRpcmVjdFVybFwiPmhlcmUgPC9hPnRvIHNldCBwcmVmZXJlbmNlczwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3BvcG92ZXItY29udGVudD5cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuICpuZ0lmPVwiZGV2aWNlUmVjb3Jkcz8uYXQoaSk/LmdldCgnbWFwcGluZ1JlY29yZHMnKS5sZW5ndGggPiAwXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIHRleHQtc2Vjb25kYXJ5IGZvbnRTaXplIGN1cnNvclBvaW50ZXIgbXMtNVwiICN0b29sdGlwPVwibWF0VG9vbHRpcFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdFRvb2x0aXBQb3NpdGlvbj1cImFib3ZlXCIgbWF0VG9vbHRpcENsYXNzPVwibmFtZVRvb2x0aXBcIiBtYXRUb29sdGlwPVwiVXBkYXRlIHNvdXJjZS9jb25zdW1lclwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjbGljayk9XCJ0aGlzLm9wZW5Tb3VyY2VMb2FkRGlhbG9nKGRldmljZVJlY29yZHM/LmF0KGkpLnZhbHVlKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0X3NxdWFyZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciBtYXRDb2x1bW5EZWY9XCJpZFwiPlxuICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJjb2x1bW5XaWR0aDJcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+XG4gICAgICAgICAgICAgICAgICAgICAgICBEZXZpY2UgSURcbiAgICAgICAgICAgICAgICAgICAgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwiY29sdW1uV2lkdGgyXCIgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7eyByb3dbJ2lkJ10gfX1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwibmFtZVwiPlxuICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJjb2x1bW5XaWR0aDNcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWYgbWF0LXNvcnQtaGVhZGVyIGRpc2FibGVDbGVhcj4gTmFtZSA8L3RoPlxuICAgICAgICAgICAgICAgICAgICA8dGQgY2xhc3M9XCJjb2x1bW5XaWR0aDNcIiBtYXQtY2VsbCAqbWF0Q2VsbERlZj1cImxldCByb3dcIj4gPHNwYW5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbWF0VG9vbHRpcF09XCJyb3c/LlsnbmFtZSddPy5sZW5ndGg+MjQ/IHJvd1snbmFtZSddOiAnJ1wiIG1hdFRvb2x0aXBQb3NpdGlvbj1cImFib3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXRUb29sdGlwQ2xhc3M9XCJuYW1lVG9vbHRpcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IHJvdy5uYW1lIHwgZG90ZG90ZG90OjI0IH19XG4gICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIFtjZGtDb3B5VG9DbGlwYm9hcmRdPVwicm93Lm5hbWVcIiBtYXRTdWZmaXggbWF0LWljb24tYnV0dG9uIHR5cGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgZnMtNVwiIG1hdC1yYWlzZWQtYnV0dG9uIG1hdFRvb2x0aXBQb3NpdGlvbj1cInJpZ2h0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0VG9vbHRpcD1cImNvcHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudF9jb3B5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cIm1ha2VcIj5cbiAgICAgICAgICAgICAgICAgICAgPHRoIGNsYXNzPVwiY29sdW1uV2lkdGg0XCIgbWF0LWhlYWRlci1jZWxsICptYXRIZWFkZXJDZWxsRGVmPiBNYWtlIDwvdGg+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cImNvbHVtbldpZHRoNFwiIG1hdC1jZWxsICptYXRDZWxsRGVmPVwibGV0IHJvd1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBbbWF0VG9vbHRpcF09XCJyb3c/LlsnbWFrZSddPy5sZW5ndGg+MTU/IHJvd1snbWFrZSddOiAnJ1wiIG1hdFRvb2x0aXBQb3NpdGlvbj1cImFib3ZlXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hdFRvb2x0aXBDbGFzcz1cIm5hbWVUb29sdGlwXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7eyByb3c/LlsnbWFrZSddIHwgZG90ZG90ZG90OjE1IH19XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyIG1hdENvbHVtbkRlZj1cIm1vZGVsXCI+XG4gICAgICAgICAgICAgICAgICAgIDx0aCBjbGFzcz1cImNvbHVtbldpZHRoNFwiIG1hdC1oZWFkZXItY2VsbCAqbWF0SGVhZGVyQ2VsbERlZj4gTW9kZWwgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwiY29sdW1uV2lkdGg0XCIgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93XCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFttYXRUb29sdGlwXT1cInJvdz8uWydtb2RlbCddPy5sZW5ndGg+MTU/IHJvd1snbW9kZWwnXTogJydcIiBtYXRUb29sdGlwUG9zaXRpb249XCJhYm92ZVwiXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRUb29sdGlwQ2xhc3M9XCJuYW1lVG9vbHRpcFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAge3sgcm93Py5bJ21vZGVsJ10gfCBkb3Rkb3Rkb3Q6MTUgfX1cbiAgICAgICAgICAgICAgICAgICAgPC90ZD5cbiAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgbWF0Q29sdW1uRGVmPVwidHlwZVwiPlxuICAgICAgICAgICAgICAgICAgICA8dGggY2xhc3M9XCJjb2x1bW5XaWR0aDRcIiBtYXQtaGVhZGVyLWNlbGwgKm1hdEhlYWRlckNlbGxEZWY+IFR5cGUgPC90aD5cbiAgICAgICAgICAgICAgICAgICAgPHRkIGNsYXNzPVwiY29sdW1uV2lkdGg0XCIgbWF0LWNlbGwgKm1hdENlbGxEZWY9XCJsZXQgcm93XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7eyByb3cudHlwZSB8IHRpdGxlY2FzZSB9fVxuICAgICAgICAgICAgICAgICAgICA8L3RkPlxuICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgICAgICAgPHRyIG1hdC1oZWFkZXItcm93ICptYXRIZWFkZXJSb3dEZWY9XCJkaXNwbGF5ZWRDb2x1bW47IHN0aWNreTogdHJ1ZVwiPjwvdHI+XG4gICAgICAgICAgICAgICAgPHRyIG1hdC1yb3cgKm1hdFJvd0RlZj1cImxldCByb3c7IGNvbHVtbnM6IGRpc3BsYXllZENvbHVtbjtcIj48L3RyPlxuXG4gICAgICAgICAgICAgICAgPHRyIGNsYXNzPVwibWF0LXJvd1wiICptYXROb0RhdGFSb3c+XG4gICAgICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz1cIm1hdC1jZWxsIHRleHQtY2VudGVyXCIgW2F0dHIuY29sc3Bhbl09XCJkaXNwbGF5ZWRDb2x1bW4ubGVuZ3RoXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICB7eyBUQUJMRV9DT05TVEFOVC5UQUJMRV9OT19EQVRBIH19XG4gICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxtYXQtcGFnaW5hdG9yICNwYWdpbmF0b3IgY2xhc3M9XCJyb3VuZGVkQm9yZGVyXCIgc2hvd0ZpcnN0TGFzdEJ1dHRvbnMgW2xlbmd0aF09XCJyZXN1bHRMZW5ndGhcIlxuICAgICAgICAgICAgW3BhZ2VTaXplXT1cIlRBQkxFX0NPTlNUQU5ULkRFRkFVTFRfUEFHRV9TSVpFXCIgW3BhZ2VTaXplT3B0aW9uc109XCJUQUJMRV9DT05TVEFOVC5QQUdFX1NJWkVfT1BUSU9OXCI+XG4gICAgICAgIDwvbWF0LXBhZ2luYXRvcj5cbiAgICA8L2Zvcm0+XG5cbiAgICA8ZGl2IGFsaWduPVwiZW5kXCI+XG4gICAgICAgIDxidXR0b24gdHlwZT1cInN1Ym1pdFwiIGNsYXNzPVwiYnRuIGJ0bi1zbSBidG4tc3VjY2VzcyBtZS0zIG1iLTJcIiBbbmdDbGFzc109XCJ7J2Rpc2FibGVkJzogaXNFcXVhbH1cIlxuICAgICAgICAgICAgKGNsaWNrKT1cInNhdmVEZXZpY2VNYXBwaW5nKClcIj5cbiAgICAgICAgICAgIHt7IEJ1dHRvbkxhYmVsRW51bS5TQVZFX0JUTl9MQUJFTCB9fVxuICAgICAgICA8L2J1dHRvbj5cbiAgICA8L2Rpdj5cblxuPC9kaXY+Il19
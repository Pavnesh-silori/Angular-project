import { Inject, Injectable } from '@angular/core';
import { HttpHeaders, HttpParams } from '@angular/common/http';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
export class EntityController {
    constructor(http, environment) {
        this.http = http;
        this.environment = environment;
    }
    getEntitiesHavingDevicesByOrgID(orgID) {
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/entities-having-devices`);
    }
    getEntityByID(orgID, layoutID, entityID) {
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/${layoutID}/entities/${entityID}`);
    }
    getConsumptionEntities(orgID) {
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/consumption-entities`);
    }
    getEntitiesByParameterID(orgID, parameterID) {
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/parameters/${parameterID}/entities`);
    }
    getEntitiesByLayoutID(orgID, layoutID) {
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/${layoutID}/entities`);
    }
    getEntitiesWithDevicesByLayoutID(orgID, layoutID, requestBody, skipLoader) {
        let headers = new HttpHeaders().set('skipLoader', skipLoader);
        return this.http.post(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/${layoutID}/entity-device`, requestBody, { headers: headers });
    }
    getEntitiesByEntityType(orgID, requestBody) {
        return this.http.post(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/entity-type/entities`, requestBody);
    }
    getEntitiesByParamMetric(orgID, paramName) {
        let params = new HttpParams();
        params = params.append('paramName', paramName);
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/parameter-entities`, { params: params });
    }
    getEntityLevelConsumption(orgID, requestBody) {
        return this.http.post(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/entities/load-consumption`, requestBody);
    }
    getEntityTypeByLayoutID(orgID, skipLoader) {
        let headers = new HttpHeaders().set('skipLoader', skipLoader);
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/entities/type`, { headers: headers });
    }
    createEntity(orgID, layoutID, entityID, entity) {
        return this.http.post(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/${layoutID}/entities/${entityID}/add-child`, entity);
    }
    updateEntity(orgID, layoutID, entityID, entity) {
        return this.http.patch(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/${layoutID}/entities/${entityID}`, entity);
    }
    deleteEntity(orgID, layoutID, entityID) {
        return this.http.delete(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/${layoutID}/entities/${entityID}`);
    }
    getEntityStatusInfo(orgID) {
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/entities/status`);
    }
    getDashboardEntities(entityTypeFilterArr, orgID) {
        let params = new HttpParams();
        entityTypeFilterArr.forEach(filter => params = params.append('filter', filter));
        return this.http.get(`${this.environment.TSC_COMMON_API_URL}organizations/${orgID}/layouts/dashboard/entities`, { params: params });
    }
}
EntityController.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: EntityController, deps: [{ token: i1.HttpClient }, { token: 'environment' }], target: i0.ɵɵFactoryTarget.Injectable });
EntityController.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: EntityController, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: EntityController, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return [{ type: i1.HttpClient }, { type: undefined, decorators: [{
                    type: Inject,
                    args: ['environment']
                }] }]; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW50aXR5LmNvbnRyb2xsZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L3RzYy1saXRlL3NyYy9saWIvdHNjL2NvbnRyb2xsZXIvZW50aXR5LmNvbnRyb2xsZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFDbkQsT0FBTyxFQUFjLFdBQVcsRUFBRSxVQUFVLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQzs7O0FBVzNFLE1BQU0sT0FBTyxnQkFBZ0I7SUFFekIsWUFDWSxJQUFnQixFQUNPLFdBQWdCO1FBRHZDLFNBQUksR0FBSixJQUFJLENBQVk7UUFDTyxnQkFBVyxHQUFYLFdBQVcsQ0FBSztJQUMvQyxDQUFDO0lBRUwsK0JBQStCLENBQUMsS0FBSztRQUNqQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFZLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsaUJBQWlCLEtBQUssMEJBQTBCLENBQUMsQ0FBQztJQUM1SCxDQUFDO0lBRUQsYUFBYSxDQUFDLEtBQUssRUFBRSxRQUFRLEVBQUUsUUFBUTtRQUNuQyxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFVLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsaUJBQWlCLEtBQUssWUFBWSxRQUFRLGFBQWEsUUFBUSxFQUFFLENBQUMsQ0FBQztJQUMzSSxDQUFDO0lBRUQsc0JBQXNCLENBQUMsS0FBSztRQUN4QixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFzQixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLGlCQUFpQixLQUFLLCtCQUErQixDQUFDLENBQUM7SUFDM0ksQ0FBQztJQUVELHdCQUF3QixDQUFDLEtBQUssRUFBRSxXQUFXO1FBQ3ZDLE9BQU8sSUFBSSxDQUFDLElB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QUFFLFFBQVE7UUFDbEMsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLGlCQUFpQixLQUFLLFlBQVksUUFBUSxhQUFhLFFBQVEsRUFBRSxDQUFDLENBQUM7SUFDckksQ0FBQztJQUVELG1CQUFtQixDQUFDLEtBQUs7UUFDckIsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBYyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLGlCQUFpQixLQUFLLGtCQUFrQixDQUFDLENBQUM7SUFDdEgsQ0FBQztJQUVELG9CQUFvQixDQUFDLG1CQUFtQixFQUFFLEtBQUs7UUFDM0MsSUFBSSxNQUFNLEdBQUcsSUFBSSxVQUFVLEVBQUUsQ0FBQztRQUM5QixtQkFBbUIsQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUMsQ0FBQztRQUVoRixPQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUF1QixHQUFHLElBQUksQ0FBQyxXQUFXLENBQUMsa0JBQWtCLGlCQUFpQixLQUFLLDZCQUE2QixFQUFFLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUM7SUFDOUosQ0FBQzs7OEdBM0VRLGdCQUFnQiw0Q0FJYixhQUFhO2tIQUpoQixnQkFBZ0IsY0FIYixNQUFNOzRGQUdULGdCQUFnQjtrQkFKNUIsVUFBVTttQkFBQztvQkFDUixVQUFVLEVBQUUsTUFBTTtpQkFDckI7OzBCQU1RLE1BQU07MkJBQUMsYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdCwgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgSHR0cENsaWVudCwgSHR0cEhlYWRlcnMsIEh0dHBQYXJhbXMgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5cbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuaW1wb3J0IHsgRW50aXR5V2l0aENoaWxkcmVuTSwgRW50aXR5TSwgUGFyYW1ldGVyRW50aXR5TSwgRW50aXR5VHlwZU0sIERhc2hib2FyZEVudGl0aWVzSSB9IGZyb20gJy4uL21vZGVsL2VudGl0eS5tb2RlbCc7XG5pbXBvcnQgeyBTdGF0dXNJbmZvTSB9IGZyb20gJy4uL21vZGVsL2RldmljZS5tb2RlbCc7XG5cbkBJbmplY3RhYmxlKHtcbiAgICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5cbmV4cG9ydCBjbGFzcyBFbnRpdHlDb250cm9sbGVyIHtcblxuICAgIGNvbnN0cnVjdG9yKFxuICAgICAgICBwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsXG4gICAgICAgIEBJbmplY3QoJ2Vudmlyb25tZW50JykgcHJpdmF0ZSBlbnZpcm9ubWVudDogYW55XG4gICAgKSB7IH1cblxuICAgIGdldEVudGl0aWVzSGF2aW5nRGV2aWNlc0J5T3JnSUQob3JnSUQpOiBPYnNlcnZhYmxlPEVudGl0eU1bXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxFbnRpdHlNW10+KGAke3RoaXMuZW52aXJvbm1lbnQuVFNDX0NPTU1PTl9BUElfVVJMfW9yZ2FuaXphdGlvbnMvJHtvcmdJRH0vZW50aXRpZXMtaGF2aW5nLWRldmljZXNgKTtcbiAgICB9XG5cbiAgICBnZXRFbnRpdHlCeUlEKG9yZ0lELCBsYXlvdXRJRCwgZW50aXR5SUQpOiBPYnNlcnZhYmxlPEVudGl0eU0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8RW50aXR5TT4oYCR7dGhpcy5lbnZpcm9ubWVudC5UU0NfQ09NTU9OX0FQSV9VUkx9b3JnYW5pemF0aW9ucy8ke29yZ0lEfS9sYXlvdXRzLyR7bGF5b3V0SUR9L2VudGl0aWVzLyR7ZW50aXR5SUR9YCk7XG4gICAgfVxuXG4gICAgZ2V0Q29uc3VtcHRpb25FbnRpdGllcyhvcmdJRCk6IE9ic2VydmFibGU8RW50aXR5V2l0aENoaWxkcmVuTT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxFbnRpdHlXaXRoQ2hpbGRyZW5NPihgJHt0aGlzLmVudmlyb25tZW50LlRTQ19DT01NT05fQVBJX1VSTH1vcmdhbml6YXRpb25zLyR7b3JnSUR9L2xheW91dHMvY29uc3VtcHRpb24tZW50aXRpZXNgKTtcbiAgICB9XG5cbiAgICBnZXRFbnRpdGllc0J5UGFyYW1ldGVySUQob3JnSUQsIHBhcmFtZXRlcklEKTogT2JzZXJ2YWJsZTxQYXJhbWV0ZXJFbnRpdHlNW10+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8UGFyYW1ldGVyRW50aXR5TVtdPihgJHt0aGlzLmVudmlyb25tZW50LlRTQ19DT01NT05fQVBJX1VSTH1vcmdhbml6YXRpb25zLyR7b3JnSUR9L2xheW91dHMvcGFyYW1ldGVycy8ke3BhcmFtZXRlcklEfS9lbnRpdGllc2ApO1xuICAgIH1cblxuICAgIGdldEVudGl0aWVzQnlMYXlvdXRJRChvcmdJRCwgbGF5b3V0SUQpOiBPYnNlcnZhYmxlPFBhcmFtZXRlckVudGl0eU1bXT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxQYXJhbWV0ZXJFbnRpdHlNW10+KGAke3RoaXMuZW52aXJvbm1lbnQuVFNDX0NPTU1PTl9BUElfVVJMfW9yZ2FuaXphdGlvbnMvJHtvcmdJRH0vbGF5b3V0cy8ke2xheW91dElEfS9lbnRpdGllc2ApO1xuICAgIH1cblxuICAgIGdldEVudGl0aWVzV2l0aERldmljZXNCeUxheW91dElEKG9yZ0lELCBsYXlvdXRJRCwgcmVxdWVzdEJvZHksIHNraXBMb2FkZXIpOiBPYnNlcnZhYmxlPFBhcmFtZXRlckVudGl0eU0+IHtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKS5zZXQoJ3NraXBMb2FkZXInLCBza2lwTG9hZGVyKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3Q8UGFyYW1ldGVyRW50aXR5TT4oYCR7dGhpcy5lbnZpcm9ubWVudC5UU0NfQ09NTU9OX0FQSV9VUkx9b3JnYW5pemF0aW9ucy8ke29yZ0lEfS9sYXlvdXRzLyR7bGF5b3V0SUR9L2VudGl0eS1kZXZpY2VgLCByZXF1ZXN0Qm9keSwgeyBoZWFkZXJzOiBoZWFkZXJzIH0pO1xuICAgIH1cblxuICAgIGdldEVudGl0aWVzQnlFbnRpdHlUeXBlKG9yZ0lELCByZXF1ZXN0Qm9keSk6IE9ic2VydmFibGU8RW50aXR5V2l0aENoaWxkcmVuTT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3Q8RW50aXR5V2l0aENoaWxkcmVuTT4oYCR7dGhpcy5lbnZpcm9ubWVudC5UU0NfQ09NTU9OX0FQSV9VUkx9b3JnYW5pemF0aW9ucy8ke29yZ0lEfS9lbnRpdHktdHlwZS9lbnRpdGllc2AsIHJlcXVlc3RCb2R5KTtcbiAgICB9XG5cbiAgICBnZXRFbnRpdGllc0J5UGFyYW1NZXRyaWMob3JnSUQsIHBhcmFtTmFtZSk6IE9ic2VydmFibGU8RW50aXR5TVtdPiB7XG4gICAgICAgIGxldCBwYXJhbXMgPSBuZXcgSHR0cFBhcmFtcygpO1xuICAgICAgICBwYXJhbXMgPSBwYXJhbXMuYXBwZW5kKCdwYXJhbU5hbWUnLCBwYXJhbU5hbWUpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PEVudGl0eU1bXT4oYCR7dGhpcy5lbnZpcm9ubWVudC5UU0NfQ09NTU9OX0FQSV9VUkx9b3JnYW5pemF0aW9ucy8ke29yZ0lEfS9wYXJhbWV0ZXItZW50aXRpZXNgLCB7IHBhcmFtczogcGFyYW1zIH0pO1xuICAgIH1cblxuICAgIGdldEVudGl0eUxldmVsQ29uc3VtcHRpb24ob3JnSUQsIHJlcXVlc3RCb2R5KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAucG9zdChgJHt0aGlzLmVudmlyb25tZW50LlRTQ19DT01NT05fQVBJX1VSTH1vcmdhbml6YXRpb25zLyR7b3JnSUR9L2VudGl0aWVzL2xvYWQtY29uc3VtcHRpb25gLCByZXF1ZXN0Qm9keSk7XG4gICAgfVxuXG4gICAgZ2V0RW50aXR5VHlwZUJ5TGF5b3V0SUQob3JnSUQsIHNraXBMb2FkZXIpOiBPYnNlcnZhYmxlPEVudGl0eVR5cGVNW10+IHtcbiAgICAgICAgbGV0IGhlYWRlcnMgPSBuZXcgSHR0cEhlYWRlcnMoKS5zZXQoJ3NraXBMb2FkZXInLCBza2lwTG9hZGVyKTtcblxuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmdldDxFbnRpdHlUeXBlTVtdPihgJHt0aGlzLmVudmlyb25tZW50LlRTQ19DT01NT05fQVBJX1VSTH1vcmdhbml6YXRpb25zLyR7b3JnSUR9L2VudGl0aWVzL3R5cGVgLCB7IGhlYWRlcnM6IGhlYWRlcnMgfSk7XG4gICAgfVxuXG4gICAgY3JlYXRlRW50aXR5KG9yZ0lELCBsYXlvdXRJRCwgZW50aXR5SUQsIGVudGl0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QoYCR7dGhpcy5lbnZpcm9ubWVudC5UU0NfQ09NTU9OX0FQSV9VUkx9b3JnYW5pemF0aW9ucy8ke29yZ0lEfS9sYXlvdXRzLyR7bGF5b3V0SUR9L2VudGl0aWVzLyR7ZW50aXR5SUR9L2FkZC1jaGlsZGAsIGVudGl0eSk7XG4gICAgfVxuXG4gICAgdXBkYXRlRW50aXR5KG9yZ0lELCBsYXlvdXRJRCwgZW50aXR5SUQsIGVudGl0eSkge1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnBhdGNoKGAke3RoaXMuZW52aXJvbm1lbnQuVFNDX0NPTU1PTl9BUElfVVJMfW9yZ2FuaXphdGlvbnMvJHtvcmdJRH0vbGF5b3V0cy8ke2xheW91dElEfS9lbnRpdGllcy8ke2VudGl0eUlEfWAsIGVudGl0eSk7XG4gICAgfVxuXG4gICAgZGVsZXRlRW50aXR5KG9yZ0lELCBsYXlvdXRJRCwgZW50aXR5SUQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5kZWxldGUoYCR7dGhpcy5lbnZpcm9ubWVudC5UU0NfQ09NTU9OX0FQSV9VUkx9b3JnYW5pemF0aW9ucy8ke29yZ0lEfS9sYXlvdXRzLyR7bGF5b3V0SUR9L2VudGl0aWVzLyR7ZW50aXR5SUR9YCk7XG4gICAgfVxuXG4gICAgZ2V0RW50aXR5U3RhdHVzSW5mbyhvcmdJRCk6IE9ic2VydmFibGU8U3RhdHVzSW5mb00+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQ8U3RhdHVzSW5mb00+KGAke3RoaXMuZW52aXJvbm1lbnQuVFNDX0NPTU1PTl9BUElfVVJMfW9yZ2FuaXphdGlvbnMvJHtvcmdJRH0vZW50aXRpZXMvc3RhdHVzYCk7XG4gICAgfVxuXG4gICAgZ2V0RGFzaGJvYXJkRW50aXRpZXMoZW50aXR5VHlwZUZpbHRlckFyciwgb3JnSUQpOiBPYnNlcnZhYmxlPERhc2hib2FyZEVudGl0aWVzSVtdPiB7XG4gICAgICAgIGxldCBwYXJhbXMgPSBuZXcgSHR0cFBhcmFtcygpO1xuICAgICAgICBlbnRpdHlUeXBlRmlsdGVyQXJyLmZvckVhY2goZmlsdGVyID0+IHBhcmFtcyA9IHBhcmFtcy5hcHBlbmQoJ2ZpbHRlcicsIGZpbHRlcikpO1xuXG4gICAgICAgIHJldHVybiB0aGlzLmh0dHAuZ2V0PERhc2hib2FyZEVudGl0aWVzSVtdPihgJHt0aGlzLmVudmlyb25tZW50LlRTQ19DT01NT05fQVBJX1VSTH1vcmdhbml6YXRpb25zLyR7b3JnSUR9L2xheW91dHMvZGFzaGJvYXJkL2VudGl0aWVzYCwgeyBwYXJhbXM6IHBhcmFtcyB9KTtcbiAgICB9XG59XG4iXX0=
{"version":3,"file":"library-generate-otp.umd.js","sources":["../../../projects/library/generate-otp/src/lib/generate-otp.service.ts","../../../projects/library/generate-otp/src/lib/generate-otp.component.ts","../../../projects/library/generate-otp/src/lib/generate-otp.component.html","../../../projects/library/generate-otp/src/lib/generate-otp.module.ts","../../../projects/library/generate-otp/src/public-api.ts","../../../projects/library/generate-otp/src/library-generate-otp.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class GenerateOtpService {\n\n  constructor() { }\n}\n","import { Component, EventEmitter, Input, OnInit, Output, SimpleChanges, ViewChild } from '@angular/core';\n\nimport { NgOtpInputComponent } from 'ng-otp-input';\n\nimport { MATERIAL_CONSTANT } from '@library/tsc-common';\nimport { ToastrColor, ToastrService, ToastrTitle } from '@library/toastr-service';\n\n@Component({\n    selector: 'lib-generate-otp',\n    templateUrl: './generate-otp.component.html',\n    styleUrls: ['./generate-otp.component.scss']\n})\n\nexport class GenerateOtpComponent implements OnInit {\n    // library\n    MATERIAL_CONSTANT = MATERIAL_CONSTANT;\n    // /library/\n\n    @Output() otpEmitter: EventEmitter<{ otp: string, resendOtp: boolean }> = new EventEmitter();\n\n    @Input()\n    showEnterOtpInput: any;\n\n    @Input()\n    generateOtpBtnLblInput: string;\n\n    @Input()\n    submitBtnLblInput: string;\n\n    @Input()\n    remainingTimeInput: number;\n\n    @ViewChild(NgOtpInputComponent, { static: false }) ngOtpInput: NgOtpInputComponent;\n\n    generateOtpBtnLbl: string = 'Generate OTP';\n    submitBtnLbl: string = 'Submit';\n    private countdownInterval: any;\n    otpValue: any;\n\n    checkOtp: boolean;\n    resendOtpBoolean: boolean = false;\n    showGenreateOtpBtn: boolean = true;\n    showEnterOtp: boolean = false;\n    defaultRemainingTime: number = 100;\n    remainingTime: number = this.defaultRemainingTime;\n\n    constructor(\n        private toastrService: ToastrService\n    ) { }\n\n    ngOnInit(): void {\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        if (changes.submitBtnLblInput && this.submitBtnLblInput) {\n            this.submitBtnLbl = this.submitBtnLblInput;\n        }\n\n        if (changes.generateOtpBtnLblInput && this.generateOtpBtnLblInput) {\n            this.generateOtpBtnLbl = this.generateOtpBtnLblInput;\n        }\n\n        if (changes.remainingTimeInput && this.remainingTimeInput) {\n            this.defaultRemainingTime = this.remainingTimeInput;\n            this.remainingTime = this.remainingTimeInput;\n        }\n\n        if (this.showEnterOtpInput) {\n            this.showEnterOtpFnc();\n        }\n    }\n\n    generateOtp() {\n        this.otpEmitter.emit({ otp: this.otpValue, resendOtp: this.resendOtpBoolean });\n    }\n\n    showEnterOtpFnc() {\n        this.showGenreateOtpBtn = false;\n        this.showEnterOtp = true;\n        this.remainingTime = this.defaultRemainingTime;\n\n        // Start the countdown timer\n        this.startCountdown();\n    }\n\n    onOtpChange(value: any) {\n        // Handle OTP change if needed\n        this.otpValue = value;\n        this.checkOtp = true;\n    }\n\n    resendOtp() {\n        this.showEnterOtpInput = false;\n        this.ngOtpInput.setValue(null);\n        this.otpValue = null;\n        this.checkOtp = false;\n        this.resendOtpBoolean = true;\n        this.otpEmitter.emit({ otp: this.otpValue, resendOtp: this.resendOtpBoolean });\n        this.startCountdown();\n    }\n\n    submitOtp() {\n        this.resendOtpBoolean = false;\n        if (this.checkOtp && this.otpValue.length == 6) {\n            this.otpEmitter.emit({ otp: this.otpValue, resendOtp: this.resendOtpBoolean });\n        } else {\n            this.toastrService.openToast(ToastrTitle.ERROR, 'Plese enter 6 digit OTP.', ToastrColor.ERROR);\n            return;\n        }\n    }\n\n    startCountdown() {\n        const interval = 1000; // Update every second\n        this.remainingTime = this.defaultRemainingTime;\n\n        const countdown = setInterval(() => {\n            this.remainingTime--;\n\n            if (this.remainingTime <= 0) {\n                clearInterval(countdown); // Stop the countdown when time reaches 0\n            }\n        }, interval);\n    }\n\n    formatTime(): string {\n        clearInterval(this.countdownInterval);\n        const seconds = this.remainingTime;\n        const minutes = Math.floor((seconds % 3600) / 60);\n        const remainingSeconds = seconds % 60;\n\n        return `${minutes}:${remainingSeconds}`;\n    }\n}\n","<div class=\"text-end\">\n    <button class=\"btn btn-success\" type=\"button\" *ngIf=\"showGenreateOtpBtn\" (click)=\"generateOtp()\" matRipple\n        [matRippleCentered]=\"MATERIAL_CONSTANT.MAT_RIPPLE_CENTER\">\n        {{ generateOtpBtnLbl }}\n    </button>\n\n    <div *ngIf=\"showEnterOtp\">\n        <div class=\"pt-2\">\n            <span>Enter a OTP</span>\n            <ng-otp-input (onInputChange)=\"onOtpChange($event)\"\n                [config]=\"{length:6,inputClass:'dot',allowNumbersOnly:true}\">\n            </ng-otp-input>\n\n            <div class=\"pt-2\">\n                <button [disabled]=\"remainingTime > 0\" class=\"btn ps-1 fw-normal\" (click)=\"resendOtp()\"><span\n                        class=\"cursorPointer btn-link\">Resend OTP </span> <span *ngIf=\"remainingTime > 0\"\n                        class=\"ml-2\">in {{\n                        formatTime() }}</span></button>\n            </div>\n        </div>\n\n        <div class=\"pt-1 sm-3\">\n            <button class=\"btn btn-success\" (click)=\"submitOtp()\" matRipple\n                [matRippleCentered]=\"MATERIAL_CONSTANT.MAT_RIPPLE_CENTER\">\n                {{ submitBtnLbl }}\n            </button>\n        </div>\n\n    </div>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { MatRippleModule } from '@angular/material/core';\n\nimport { GenerateOtpComponent } from './generate-otp.component';\n\nimport { NgOtpInputModule } from 'ng-otp-input';\n\n@NgModule({\n    declarations: [\n        GenerateOtpComponent\n    ],\n    imports: [\n        CommonModule,\n        MatRippleModule,\n        NgOtpInputModule\n\n    ],\n    exports: [\n        GenerateOtpComponent,\n\n    ]\n})\nexport class GenerateOtpModule { }\n","/*\n * Public API Surface of generate-otp\n */\n\nexport * from './lib/generate-otp.service';\nexport * from './lib/generate-otp.component';\nexport * from './lib/generate-otp.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0","Injectable","MATERIAL_CONSTANT","EventEmitter","ToastrTitle","ToastrColor","i1","NgOtpInputComponent","i2","i3","i4","Component","Output","Input","ViewChild","CommonModule","MatRippleModule","NgOtpInputModule","NgModule"],"mappings":"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"}
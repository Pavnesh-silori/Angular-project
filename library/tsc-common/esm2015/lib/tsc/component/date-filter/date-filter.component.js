import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { FormControl } from '@angular/forms';
import { DaterangepickerDirective } from 'ngx-daterangepicker-material';
import * as moment from 'moment';
import { FrequencyEnum } from '../../enum/frequency.enum';
import { FREQUENCY_CONSTANT } from '../../constant/frequency.constant';
import * as i0 from "@angular/core";
import * as i1 from "@library/storage-service";
import * as i2 from "@angular/material/button-toggle";
import * as i3 from "@angular/material/form-field";
import * as i4 from "@angular/material/datepicker";
import * as i5 from "@angular/forms";
import * as i6 from "@angular/common";
import * as i7 from "../../directive/date-month-year-format.directive";
import * as i8 from "@angular/material/input";
import * as i9 from "ngx-daterangepicker-material";
export class DateFilterComponent {
    constructor(storageService) {
        this.storageService = storageService;
        this.frequency = [];
        this.defaultFlag = null;
        this.emitFilter = new EventEmitter();
        this.today = new Date();
        this.durationValueFC = new FormControl(moment().format("YYYY-MM"));
        this.daterange = new FormControl();
        this.startDate = new FormControl(moment().startOf('month').format("YYYY-MM-DD"));
        this.endDate = new FormControl(moment().endOf('month').format("YYYY-MM-DD"));
        this.frequencyKeyIDFC = new FormControl();
    }
    ngOnInit() {
        if (this.defaultFlag) {
            this.frequencyKeyIDFC.patchValue(this.defaultFlag);
        }
        else {
            this.frequencyKeyIDFC.patchValue(FrequencyEnum.MONTHLY_KEY_ID);
        }
        if (this.frequency.length == 0) {
            this.frequency = FREQUENCY_CONSTANT;
        }
        this.frequencyChange();
    }
    frequencyChange() {
        let duration;
        let startDate;
        let endDate;
        switch (this.frequencyKeyIDFC.value) {
            case FrequencyEnum.DAILY_KEY_ID:
                duration = moment(this.today).format("YYYY-MM-DD");
                startDate = moment().format("YYYY-MM-DD");
                endDate = moment().format("YYYY-MM-DD");
                break;
            case FrequencyEnum.MONTHLY_KEY_ID:
                duration = moment(this.today).format("YYYY-MM");
                startDate = moment().startOf('month').format("YYYY-MM-DD");
                endDate = moment().endOf('month').format("YYYY-MM-DD");
                break;
            case FrequencyEnum.YEARLY_KEY_ID:
                duration = moment(this.today).format("YYYY");
                startDate = moment().startOf('year').format("YYYY-MM-DD");
                endDate = moment().endOf('year').format("YYYY-MM-DD");
                break;
            case FrequencyEnum.CUSTOM_KEY_ID:
                console.log("Frequency: ", this.frequencyKeyIDFC.value);
                break;
            default:
                console.log('undefined case encountered!');
        }
        this.durationValueFC.patchValue(duration);
        if (this.frequencyKeyIDFC.value != FrequencyEnum.CUSTOM_KEY_ID) {
            this.daterange.patchValue('');
            this.startDate.patchValue(startDate);
            this.endDate.patchValue(endDate);
            this.emitFilter.emit();
        }
    }
    openDatepicker() {
        if (this.frequencyKeyIDFC.value == FrequencyEnum.CUSTOM_KEY_ID) {
            this.pickerDirective.open();
        }
    }
    openDatepickerOnClick(datepicker) {
        if (!datepicker.opened) {
            datepicker.open();
        }
    }
    takeFocusAway(durationField) {
        this.durationField = document.getElementById(durationField);
        this.durationField.classList.remove('mat-focused', 'mat-form-field-should-float');
    }
    dateSelectedHandler(chosenDate) {
        this.durationValueFC.patchValue(moment(chosenDate).format("YYYY-MM-DD"));
        this.startDate.patchValue(moment(chosenDate).format("YYYY-MM-DD"));
        this.endDate.patchValue(moment(chosenDate).format("YYYY-MM-DD"));
        this.emitFilter.emit();
    }
    monthSelectedHandler(normalizedMonthAndYear, datepicker) {
        datepicker.close();
        let duration = moment(normalizedMonthAndYear).format("YYYY-MM");
        this.durationValueFC.patchValue(duration);
        this.startDate.patchValue(moment(normalizedMonthAndYear).startOf('month').format("YYYY-MM-DD"));
        this.endDate.patchValue(moment(normalizedMonthAndYear).endOf('month').format("YYYY-MM-DD"));
        this.emitFilter.emit();
    }
    yearSelectedHandler(normalizedYear, datepicker) {
        datepicker.close();
        let duration = moment(normalizedYear).format("YYYY");
        this.durationValueFC.patchValue(duration);
        this.startDate.patchValue(moment(normalizedYear).startOf('year').format("YYYY-MM-DD"));
        this.endDate.patchValue(moment(normalizedYear).endOf('year').format("YYYY-MM-DD"));
        this.emitFilter.emit();
    }
    customDateRange(selectedValue) {
        if (this.frequencyKeyIDFC.value == FrequencyEnum.CUSTOM_KEY_ID) {
            this.startDate.patchValue(moment(selectedValue.startDate).format('YYYY-MM-DD'));
            this.endDate.patchValue(moment(selectedValue.endDate).format('YYYY-MM-DD'));
            this.durationValueFC.patchValue(this.endDate);
            this.emitFilter.emit();
        }
    }
}
DateFilterComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: DateFilterComponent, deps: [{ token: i1.StorageService }], target: i0.ɵɵFactoryTarget.Component });
DateFilterComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: DateFilterComponent, selector: "lib-date-filter", inputs: { frequency: "frequency", defaultFlag: "defaultFlag" }, outputs: { emitFilter: "emitFilter" }, viewQueries: [{ propertyName: "pickerDirective", first: true, predicate: DaterangepickerDirective, descendants: true }], ngImport: i0, template: "<mat-button-toggle-group class=\"matBtnFilter\" [formControl]=\"frequencyKeyIDFC\" (change)=\"frequencyChange()\">\n    <mat-button-toggle *ngFor=\"let frequency2 of frequency\" value=\"{{ frequency2.keyID }}\">\n        {{ frequency2.name }}\n    </mat-button-toggle>\n</mat-button-toggle-group>\n\n<mat-form-field class=\"ms-3\" id=\"dailyField\" appDateMonthYearFormat\n    [ngClass]=\"{'d-none': frequencyKeyIDFC.value !='DAILY'}\" (click)=\"openDatepickerOnClick(daily)\"\n    (keydown.arrowdown)=\"openDatepickerOnClick(daily)\" (keydown.enter)=\"openDatepickerOnClick(daily)\">\n    <input matInput class=\"noFocus\" [matDatepicker]=\"daily\" [formControl]=\"durationValueFC\" [max]=\"today\"\n        (dateInput)=\"dateSelectedHandler($event.value)\" readonly />\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"daily\"></mat-datepicker-toggle>\n    <mat-datepicker #daily (closed)=\"takeFocusAway('dailyField')\"></mat-datepicker>\n</mat-form-field>\n\n<mat-form-field class=\"ms-3\" id=\"monthlyField\" appMonthYearFormat\n    [ngClass]=\"{'d-none': frequencyKeyIDFC.value !='MONTHLY'}\" (click)=\"openDatepickerOnClick(monthly)\"\n    (keydown.arrowdown)=\"openDatepickerOnClick(monthly)\" (keydown.enter)=\"openDatepickerOnClick(monthly)\">\n    <input matInput class=\"noFocus\" [matDatepicker]=\"monthly\" [formControl]=\"durationValueFC\" [max]=\"today\" readonly />\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"monthly\"></mat-datepicker-toggle>\n    <mat-datepicker panelClass=\"monthPicker\" #monthly startView=\"year\"\n        (monthSelected)=\"monthSelectedHandler($event, monthly)\" (closed)=\"takeFocusAway('monthlyField')\">\n    </mat-datepicker>\n</mat-form-field>\n\n<mat-form-field class=\"ms-3\" id=\"yearlyField\" appYearFormat [ngClass]=\"{'d-none': frequencyKeyIDFC.value !='YEARLY'}\"\n    (click)=\"openDatepickerOnClick(yearly)\" (keydown.arrowdown)=\"openDatepickerOnClick(yearly)\"\n    (keydown.enter)=\"openDatepickerOnClick(yearly)\">\n    <input matInput class=\"noFocus\" [matDatepicker]=\"yearly\" [formControl]=\"durationValueFC\" [max]=\"today\" readonly />\n    <mat-datepicker-toggle matSuffix class=\"fs-5\" [for]=\"yearly\"></mat-datepicker-toggle>\n    <mat-datepicker panelClass=\"yearPicker\" #yearly startView=\"multi-year\"\n        (yearSelected)=\"yearSelectedHandler($event, yearly)\" (closed)=\"takeFocusAway('yearlyField')\">\n    </mat-datepicker>\n</mat-form-field>\n\n<mat-form-field class=\"ms-3\" [ngClass]=\"{'d-none': frequencyKeyIDFC.value !='CUSTOM'}\">\n    <mat-label class=\"formLabel\"> Select date </mat-label>\n    <input type=\"text\" matInput ngxDaterangepickerMd\n        [locale]=\"{direction: 'ltr', applyLabel: 'Apply', format: 'DD-MMM-YYYY', customRangeLabel: 'Custom Range'}\"\n        [drops]=\"'down'\" [opens]=\"'right'\" [alwaysShowCalendars]=\"true\" [keepCalendarOpeningWithRange]=\"true\"\n        [showDropdowns]=\"true\" [showCancel]=\"true\" autocomplete=\"off\" name=\"daterange\" [formControl]=\"daterange\"\n        (ngModelChange)=\"customDateRange(daterange.value)\" [readonly]=\"true\" />\n</mat-form-field>", styles: [".matBtnFilter mat-button-toggle.mat-button-toggle-checked{background-color:#e6e6e6!important}.noFocus{pointer-events:none}.formLabel{text-transform:none}\n"], components: [{ type: i2.MatButtonToggle, selector: "mat-button-toggle", inputs: ["disableRipple", "aria-labelledby", "tabIndex", "appearance", "checked", "disabled", "id", "name", "aria-label", "value"], outputs: ["change"], exportAs: ["matButtonToggle"] }, { type: i3.MatFormField, selector: "mat-form-field", inputs: ["color", "floatLabel", "appearance", "hideRequiredMarker", "hintLabel"], exportAs: ["matFormField"] }, { type: i4.MatDatepickerToggle, selector: "mat-datepicker-toggle", inputs: ["tabIndex", "disabled", "for", "aria-label", "disableRipple"], exportAs: ["matDatepickerToggle"] }, { type: i4.MatDatepicker, selector: "mat-datepicker", exportAs: ["matDatepicker"] }], directives: [{ type: i2.MatButtonToggleGroup, selector: "mat-button-toggle-group", inputs: ["appearance", "name", "vertical", "value", "multiple", "disabled"], outputs: ["valueChange", "change"], exportAs: ["matButtonToggleGroup"] }, { type: i5.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i5.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i7.DateMonthYearFormatDirective, selector: "[appDateMonthYearFormat]" }, { type: i6.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i8.MatInput, selector: "input[matInput], textarea[matInput], select[matNativeControl],      input[matNativeControl], textarea[matNativeControl]", inputs: ["id", "disabled", "required", "type", "value", "readonly", "placeholder", "errorStateMatcher", "aria-describedby"], exportAs: ["matInput"] }, { type: i4.MatDatepickerInput, selector: "input[matDatepicker]", inputs: ["matDatepicker", "min", "max", "matDatepickerFilter"], exportAs: ["matDatepickerInput"] }, { type: i5.DefaultValueAccessor, selector: "input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]" }, { type: i3.MatSuffix, selector: "[matSuffix]" }, { type: i7.MonthYearFormatDirective, selector: "[appMonthYearFormat]" }, { type: i7.YearFormatDirective, selector: "[appYearFormat]" }, { type: i3.MatLabel, selector: "mat-label" }, { type: i9.DaterangepickerDirective, selector: "input[ngxDaterangepickerMd]", inputs: ["dateLimit", "showCancel", "lockStartDate", "timePicker", "timePicker24Hour", "timePickerIncrement", "timePickerSeconds", "closeOnAutoApply", "_endKey", "drops", "opens", "locale", "startKey", "endKey", "minDate", "maxDate", "autoApply", "alwaysShowCalendars", "showCustomRangeLabel", "linkedCalendars", "singleDatePicker", "showWeekNumbers", "showISOWeekNumbers", "showDropdowns", "isInvalidDate", "isCustomDate", "isTooltipDate", "showClearButton", "customRangeDirection", "ranges", "lastMonthDayClass", "emptyWeekRowClass", "emptyWeekColumnClass", "firstDayOfNextMonthClass", "lastDayOfPreviousMonthClass", "keepCalendarOpeningWithRange", "showRangeLabelOnInput"], outputs: ["change", "rangeClicked", "datesUpdated", "startDateChanged", "endDateChanged"] }] });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: DateFilterComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-date-filter',
                    templateUrl: './date-filter.component.html',
                    styleUrls: ['./date-filter.component.scss']
                }]
        }], ctorParameters: function () { return [{ type: i1.StorageService }]; }, propDecorators: { frequency: [{
                type: Input
            }], defaultFlag: [{
                type: Input
            }], emitFilter: [{
                type: Output
            }], pickerDirective: [{
                type: ViewChild,
                args: [DaterangepickerDirective, { static: false }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1maWx0ZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbGlicmFyeS90c2MtY29tbW9uL3NyYy9saWIvdHNjL2NvbXBvbmVudC9kYXRlLWZpbHRlci9kYXRlLWZpbHRlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L3RzYy1jb21tb24vc3JjL2xpYi90c2MvY29tcG9uZW50L2RhdGUtZmlsdGVyL2RhdGUtZmlsdGVyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBVSxNQUFNLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzFGLE9BQU8sRUFBRSxXQUFXLEVBQUUsTUFBTSxnQkFBZ0IsQ0FBQztBQUc3QyxPQUFPLEVBQUUsd0JBQXdCLEVBQUUsTUFBTSw4QkFBOEIsQ0FBQztBQUV4RSxPQUFPLEtBQUssTUFBTSxNQUFNLFFBQVEsQ0FBQztBQUdqQyxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sMkJBQTJCLENBQUM7QUFDMUQsT0FBTyxFQUFFLGtCQUFrQixFQUFFLE1BQU0sbUNBQW1DLENBQUM7Ozs7Ozs7Ozs7O0FBU3ZFLE1BQU0sT0FBTyxtQkFBbUI7SUF3Qi9CLFlBQ1MsY0FBOEI7UUFBOUIsbUJBQWMsR0FBZCxjQUFjLENBQWdCO1FBdkI5QixjQUFTLEdBQVUsRUFBRSxDQUFDO1FBQ3RCLGdCQUFXLEdBQVcsSUFBSSxDQUFDO1FBR3BDLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBRSxDQUFDO1FBT2hDLFVBQUssR0FBUyxJQUFJLElBQUksRUFBRSxDQUFDO1FBRXpCLG9CQUFlLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7UUFDOUQsY0FBUyxHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7UUFDOUIsY0FBUyxHQUFHLElBQUksV0FBVyxDQUFDLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUM1RSxZQUFPLEdBQUcsSUFBSSxXQUFXLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBRXhFLHFCQUFnQixHQUFHLElBQUksV0FBVyxFQUFFLENBQUM7SUFNakMsQ0FBQztJQUVMLFFBQVE7UUFDUCxJQUFJLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDckIsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLENBQUM7U0FDbkQ7YUFBSztZQUNMLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDO1NBQy9EO1FBRUQsSUFBSSxJQUFJLENBQUMsU0FBUyxDQUFDLE1BQU0sSUFBSSxDQUFDLEVBQUU7WUFDL0IsSUFBSSxDQUFDLFNBQVMsR0FBRyxrQkFBa0IsQ0FBQztTQUNwQztRQUVELElBQUksQ0FBQyxlQUFlLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRUQsZUFBZTtRQUNkLElBQUksUUFBUSxDQUFDO1FBQ2IsSUFBSSxTQUFTLENBQUM7UUFDZCxJQUFJLE9BQU8sQ0FBQztRQUNaLFFBQVEsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssRUFBRTtZQUNwQyxLQUFLLGFBQWEsQ0FBQyxZQUFZO2dCQUM5QixRQUFRLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ25ELFNBQVMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQzFDLE9BQU8sR0FBRyxNQUFNLEVBQUUsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQ3hDLE1BQU07WUFDUCxLQUFLLGFBQWEsQ0FBQyxjQUFjO2dCQUNoQyxRQUFRLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7Z0JBQ2hELFNBQVMsR0FBRyxNQUFNLEVBQUUsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUMzRCxPQUFPLEdBQUcsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDdkQsTUFBTTtZQUNQLEtBQUssYUFBYSxDQUFDLGFBQWE7Z0JBQy9CLFFBQVEsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztnQkFDN0MsU0FBUyxHQUFHLE1BQU0sRUFBRSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUM7Z0JBQzFELE9BQU8sR0FBRyxNQUFNLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO2dCQUN0RCxNQUFNO1lBQ1AsS0FBSyxhQUFhLENBQUMsYUFBYTtnQkFDL0IsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFBO2dCQUN2RCxNQUFNO1lBQ1A7Z0JBQ0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDO1NBQzVDO1FBQ0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7UUFFMUMsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxJQUFJLGFBQWEsQ0FBQyxhQUFhLEVBQUU7WUFDL0QsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDOUIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDckMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDakMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUN2QjtJQUNGLENBQUM7SUFFRCxjQUFjO1FBQ2IsSUFBSSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsS0FBSyxJQUFJLGFBQWEsQ0FBQyxhQUFhLEVBQUU7WUFDL0QsSUFBSSxDQUFDLGVBQWUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztTQUM1QjtJQUNGLENBQUM7SUFFRCxxQkFBcUIsQ0FBQyxVQUFpQztRQUN0RCxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQU0sRUFBRTtZQUN2QixVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDbEI7SUFDRixDQUFDO0lBRUQsYUFBYSxDQUFDLGFBQWE7UUFDMUIsSUFBSSxDQUFDLGFBQWEsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGFBQWEsQ0FBQyxDQUFDO1FBQzVELElBQUksQ0FBQyxhQUFhLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxhQUFhLEVBQUUsNkJBQTZCLENBQUMsQ0FBQztJQUNuRixDQUFDO0lBRUQsbUJBQW1CLENBQUMsVUFBa0I7UUFFckMsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBRXpFLElBQUksQ0FBQyxTQUFTLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUNuRSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDakUsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUN4QixDQUFDO0lBRUQsb0JBQW9CLENBQUMsc0JBQThCLEVBQUUsVUFBaUM7UUFDckYsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ25CLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNoRSxJQUFJLENBQUMsZUFBZSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUUxQyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDaEcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQzVGLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELG1CQUFtQixDQUFDLGNBQXNCLEVBQUUsVUFBaUM7UUFDNUUsVUFBVSxDQUFDLEtBQUssRUFBRSxDQUFDO1FBQ25CLElBQUksUUFBUSxHQUFHLE1BQU0sQ0FBQyxjQUFjLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDckQsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDMUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxNQUFNLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQztRQUN2RixJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsY0FBYyxDQUFDLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1FBRW5GLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUVELGVBQWUsQ0FBQyxhQUFrQjtRQUNqQyxJQUFJLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLElBQUksYUFBYSxDQUFDLGFBQWEsRUFBRTtZQUMvRCxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO1lBQ2hGLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUM7WUFDNUUsSUFBSSxDQUFDLGVBQWUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzlDLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7U0FDdkI7SUFDRixDQUFDOztpSEFuSVcsbUJBQW1CO3FHQUFuQixtQkFBbUIsK01Bc0JwQix3QkFBd0IsZ0RDekNwQywrakdBMENpQjs0RkR2QkosbUJBQW1CO2tCQUwvQixTQUFTO21CQUFDO29CQUNWLFFBQVEsRUFBRSxpQkFBaUI7b0JBQzNCLFdBQVcsRUFBRSw4QkFBOEI7b0JBQzNDLFNBQVMsRUFBRSxDQUFDLDhCQUE4QixDQUFDO2lCQUMzQztxR0FHUyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLFdBQVc7c0JBQW5CLEtBQUs7Z0JBR04sVUFBVTtzQkFEVCxNQUFNO2dCQWlCaUQsZUFBZTtzQkFBdEUsU0FBUzt1QkFBQyx3QkFBd0IsRUFBRSxFQUFFLE1BQU0sRUFBRSxLQUFLLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBNYXREYXRlcGlja2VyIH0gZnJvbSAnQGFuZ3VsYXIvbWF0ZXJpYWwvZGF0ZXBpY2tlcic7XG5pbXBvcnQgeyBEYXRlcmFuZ2VwaWNrZXJEaXJlY3RpdmUgfSBmcm9tICduZ3gtZGF0ZXJhbmdlcGlja2VyLW1hdGVyaWFsJztcblxuaW1wb3J0ICogYXMgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBNb21lbnQgfSBmcm9tICdtb21lbnQnO1xuXG5pbXBvcnQgeyBGcmVxdWVuY3lFbnVtIH0gZnJvbSAnLi4vLi4vZW51bS9mcmVxdWVuY3kuZW51bSc7XG5pbXBvcnQgeyBGUkVRVUVOQ1lfQ09OU1RBTlQgfSBmcm9tICcuLi8uLi9jb25zdGFudC9mcmVxdWVuY3kuY29uc3RhbnQnO1xuXG5pbXBvcnQgeyBTdG9yYWdlU2VydmljZSB9IGZyb20gJ0BsaWJyYXJ5L3N0b3JhZ2Utc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuXHRzZWxlY3RvcjogJ2xpYi1kYXRlLWZpbHRlcicsXG5cdHRlbXBsYXRlVXJsOiAnLi9kYXRlLWZpbHRlci5jb21wb25lbnQuaHRtbCcsXG5cdHN0eWxlVXJsczogWycuL2RhdGUtZmlsdGVyLmNvbXBvbmVudC5zY3NzJ11cbn0pXG5leHBvcnQgY2xhc3MgRGF0ZUZpbHRlckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cblx0QElucHV0KCkgZnJlcXVlbmN5OiBhbnlbXSA9IFtdO1xuXHRASW5wdXQoKSBkZWZhdWx0RmxhZzogc3RyaW5nID0gbnVsbDtcblxuXHRAT3V0cHV0KClcblx0ZW1pdEZpbHRlciA9IG5ldyBFdmVudEVtaXR0ZXIoKTtcblxuXHRGcmVxdWVuY3lFbnVtOiBGcmVxdWVuY3lFbnVtO1xuXG5cdHJvb3RPcmdJRDogYW55O1xuXHRjdXJyZW50T3JnVHlwZTogYW55O1xuXG5cdHRvZGF5OiBEYXRlID0gbmV3IERhdGUoKTtcblx0ZHVyYXRpb25GaWVsZDogYW55O1xuXHRkdXJhdGlvblZhbHVlRkMgPSBuZXcgRm9ybUNvbnRyb2wobW9tZW50KCkuZm9ybWF0KFwiWVlZWS1NTVwiKSk7XG5cdGRhdGVyYW5nZSA9IG5ldyBGb3JtQ29udHJvbCgpO1xuXHRzdGFydERhdGUgPSBuZXcgRm9ybUNvbnRyb2wobW9tZW50KCkuc3RhcnRPZignbW9udGgnKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcblx0ZW5kRGF0ZSA9IG5ldyBGb3JtQ29udHJvbChtb21lbnQoKS5lbmRPZignbW9udGgnKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcblxuXHRmcmVxdWVuY3lLZXlJREZDID0gbmV3IEZvcm1Db250cm9sKCk7XG5cblx0QFZpZXdDaGlsZChEYXRlcmFuZ2VwaWNrZXJEaXJlY3RpdmUsIHsgc3RhdGljOiBmYWxzZSB9KSBwaWNrZXJEaXJlY3RpdmU6IERhdGVyYW5nZXBpY2tlckRpcmVjdGl2ZTtcblxuXHRjb25zdHJ1Y3Rvcihcblx0XHRwcml2YXRlIHN0b3JhZ2VTZXJ2aWNlOiBTdG9yYWdlU2VydmljZSxcblx0KSB7IH1cblxuXHRuZ09uSW5pdCgpOiB2b2lkIHtcblx0XHRpZiAodGhpcy5kZWZhdWx0RmxhZykge1xuXHRcdFx0dGhpcy5mcmVxdWVuY3lLZXlJREZDLnBhdGNoVmFsdWUodGhpcy5kZWZhdWx0RmxhZyk7XG5cdFx0fWVsc2Uge1xuXHRcdFx0dGhpcy5mcmVxdWVuY3lLZXlJREZDLnBhdGNoVmFsdWUoRnJlcXVlbmN5RW51bS5NT05USExZX0tFWV9JRCk7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuZnJlcXVlbmN5Lmxlbmd0aCA9PSAwKSB7XG5cdFx0XHR0aGlzLmZyZXF1ZW5jeSA9IEZSRVFVRU5DWV9DT05TVEFOVDtcblx0XHR9XG5cblx0XHR0aGlzLmZyZXF1ZW5jeUNoYW5nZSgpO1xuXHR9XG5cblx0ZnJlcXVlbmN5Q2hhbmdlKCkge1xuXHRcdGxldCBkdXJhdGlvbjtcblx0XHRsZXQgc3RhcnREYXRlO1xuXHRcdGxldCBlbmREYXRlO1xuXHRcdHN3aXRjaCAodGhpcy5mcmVxdWVuY3lLZXlJREZDLnZhbHVlKSB7XG5cdFx0XHRjYXNlIEZyZXF1ZW5jeUVudW0uREFJTFlfS0VZX0lEOlxuXHRcdFx0XHRkdXJhdGlvbiA9IG1vbWVudCh0aGlzLnRvZGF5KS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuXHRcdFx0XHRzdGFydERhdGUgPSBtb21lbnQoKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuXHRcdFx0XHRlbmREYXRlID0gbW9tZW50KCkuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlIEZyZXF1ZW5jeUVudW0uTU9OVEhMWV9LRVlfSUQ6XG5cdFx0XHRcdGR1cmF0aW9uID0gbW9tZW50KHRoaXMudG9kYXkpLmZvcm1hdChcIllZWVktTU1cIik7XG5cdFx0XHRcdHN0YXJ0RGF0ZSA9IG1vbWVudCgpLnN0YXJ0T2YoJ21vbnRoJykuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKTtcblx0XHRcdFx0ZW5kRGF0ZSA9IG1vbWVudCgpLmVuZE9mKCdtb250aCcpLmZvcm1hdChcIllZWVktTU0tRERcIik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBGcmVxdWVuY3lFbnVtLllFQVJMWV9LRVlfSUQ6XG5cdFx0XHRcdGR1cmF0aW9uID0gbW9tZW50KHRoaXMudG9kYXkpLmZvcm1hdChcIllZWVlcIik7XG5cdFx0XHRcdHN0YXJ0RGF0ZSA9IG1vbWVudCgpLnN0YXJ0T2YoJ3llYXInKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuXHRcdFx0XHRlbmREYXRlID0gbW9tZW50KCkuZW5kT2YoJ3llYXInKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgRnJlcXVlbmN5RW51bS5DVVNUT01fS0VZX0lEOlxuXHRcdFx0XHRjb25zb2xlLmxvZyhcIkZyZXF1ZW5jeTogXCIsIHRoaXMuZnJlcXVlbmN5S2V5SURGQy52YWx1ZSlcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRjb25zb2xlLmxvZygndW5kZWZpbmVkIGNhc2UgZW5jb3VudGVyZWQhJyk7XG5cdFx0fVxuXHRcdHRoaXMuZHVyYXRpb25WYWx1ZUZDLnBhdGNoVmFsdWUoZHVyYXRpb24pO1xuXG5cdFx0aWYgKHRoaXMuZnJlcXVlbmN5S2V5SURGQy52YWx1ZSAhPSBGcmVxdWVuY3lFbnVtLkNVU1RPTV9LRVlfSUQpIHtcblx0XHRcdHRoaXMuZGF0ZXJhbmdlLnBhdGNoVmFsdWUoJycpO1xuXHRcdFx0dGhpcy5zdGFydERhdGUucGF0Y2hWYWx1ZShzdGFydERhdGUpO1xuXHRcdFx0dGhpcy5lbmREYXRlLnBhdGNoVmFsdWUoZW5kRGF0ZSk7XG5cdFx0XHR0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuXHRcdH1cblx0fVxuXG5cdG9wZW5EYXRlcGlja2VyKCkge1xuXHRcdGlmICh0aGlzLmZyZXF1ZW5jeUtleUlERkMudmFsdWUgPT0gRnJlcXVlbmN5RW51bS5DVVNUT01fS0VZX0lEKSB7XG5cdFx0XHR0aGlzLnBpY2tlckRpcmVjdGl2ZS5vcGVuKCk7XG5cdFx0fVxuXHR9XG5cblx0b3BlbkRhdGVwaWNrZXJPbkNsaWNrKGRhdGVwaWNrZXI6IE1hdERhdGVwaWNrZXI8TW9tZW50Pikge1xuXHRcdGlmICghZGF0ZXBpY2tlci5vcGVuZWQpIHtcblx0XHRcdGRhdGVwaWNrZXIub3BlbigpO1xuXHRcdH1cblx0fVxuXG5cdHRha2VGb2N1c0F3YXkoZHVyYXRpb25GaWVsZCkge1xuXHRcdHRoaXMuZHVyYXRpb25GaWVsZCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGR1cmF0aW9uRmllbGQpO1xuXHRcdHRoaXMuZHVyYXRpb25GaWVsZC5jbGFzc0xpc3QucmVtb3ZlKCdtYXQtZm9jdXNlZCcsICdtYXQtZm9ybS1maWVsZC1zaG91bGQtZmxvYXQnKTtcblx0fVxuXG5cdGRhdGVTZWxlY3RlZEhhbmRsZXIoY2hvc2VuRGF0ZTogTW9tZW50KSB7XG5cblx0XHR0aGlzLmR1cmF0aW9uVmFsdWVGQy5wYXRjaFZhbHVlKG1vbWVudChjaG9zZW5EYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcblxuXHRcdHRoaXMuc3RhcnREYXRlLnBhdGNoVmFsdWUobW9tZW50KGNob3NlbkRhdGUpLmZvcm1hdChcIllZWVktTU0tRERcIikpO1xuXHRcdHRoaXMuZW5kRGF0ZS5wYXRjaFZhbHVlKG1vbWVudChjaG9zZW5EYXRlKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcblx0XHR0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuXHR9XG5cblx0bW9udGhTZWxlY3RlZEhhbmRsZXIobm9ybWFsaXplZE1vbnRoQW5kWWVhcjogTW9tZW50LCBkYXRlcGlja2VyOiBNYXREYXRlcGlja2VyPE1vbWVudD4pIHtcblx0XHRkYXRlcGlja2VyLmNsb3NlKCk7XG5cdFx0bGV0IGR1cmF0aW9uID0gbW9tZW50KG5vcm1hbGl6ZWRNb250aEFuZFllYXIpLmZvcm1hdChcIllZWVktTU1cIik7XG5cdFx0dGhpcy5kdXJhdGlvblZhbHVlRkMucGF0Y2hWYWx1ZShkdXJhdGlvbik7XG5cblx0XHR0aGlzLnN0YXJ0RGF0ZS5wYXRjaFZhbHVlKG1vbWVudChub3JtYWxpemVkTW9udGhBbmRZZWFyKS5zdGFydE9mKCdtb250aCcpLmZvcm1hdChcIllZWVktTU0tRERcIikpO1xuXHRcdHRoaXMuZW5kRGF0ZS5wYXRjaFZhbHVlKG1vbWVudChub3JtYWxpemVkTW9udGhBbmRZZWFyKS5lbmRPZignbW9udGgnKS5mb3JtYXQoXCJZWVlZLU1NLUREXCIpKTtcblx0XHR0aGlzLmVtaXRGaWx0ZXIuZW1pdCgpO1xuXHR9XG5cblx0eWVhclNlbGVjdGVkSGFuZGxlcihub3JtYWxpemVkWWVhcjogTW9tZW50LCBkYXRlcGlja2VyOiBNYXREYXRlcGlja2VyPE1vbWVudD4pIHtcblx0XHRkYXRlcGlja2VyLmNsb3NlKCk7XG5cdFx0bGV0IGR1cmF0aW9uID0gbW9tZW50KG5vcm1hbGl6ZWRZZWFyKS5mb3JtYXQoXCJZWVlZXCIpO1xuXHRcdHRoaXMuZHVyYXRpb25WYWx1ZUZDLnBhdGNoVmFsdWUoZHVyYXRpb24pO1xuXHRcdHRoaXMuc3RhcnREYXRlLnBhdGNoVmFsdWUobW9tZW50KG5vcm1hbGl6ZWRZZWFyKS5zdGFydE9mKCd5ZWFyJykuZm9ybWF0KFwiWVlZWS1NTS1ERFwiKSk7XG5cdFx0dGhpcy5lbmREYXRlLnBhdGNoVmFsdWUobW9tZW50KG5vcm1hbGl6ZWRZZWFyKS5lbmRPZigneWVhcicpLmZvcm1hdChcIllZWVktTU0tRERcIikpO1xuXG5cdFx0dGhpcy5lbWl0RmlsdGVyLmVtaXQoKTtcblx0fVxuXG5cdGN1c3RvbURhdGVSYW5nZShzZWxlY3RlZFZhbHVlOiBhbnkpIHtcblx0XHRpZiAodGhpcy5mcmVxdWVuY3lLZXlJREZDLnZhbHVlID09IEZyZXF1ZW5jeUVudW0uQ1VTVE9NX0tFWV9JRCkge1xuXHRcdFx0dGhpcy5zdGFydERhdGUucGF0Y2hWYWx1ZShtb21lbnQoc2VsZWN0ZWRWYWx1ZS5zdGFydERhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpKTtcblx0XHRcdHRoaXMuZW5kRGF0ZS5wYXRjaFZhbHVlKG1vbWVudChzZWxlY3RlZFZhbHVlLmVuZERhdGUpLmZvcm1hdCgnWVlZWS1NTS1ERCcpKTtcblx0XHRcdHRoaXMuZHVyYXRpb25WYWx1ZUZDLnBhdGNoVmFsdWUodGhpcy5lbmREYXRlKTtcblx0XHRcdHRoaXMuZW1pdEZpbHRlci5lbWl0KCk7XG5cdFx0fVxuXHR9XG59XG4iLCI8bWF0LWJ1dHRvbi10b2dnbGUtZ3JvdXAgY2xhc3M9XCJtYXRCdG5GaWx0ZXJcIiBbZm9ybUNvbnRyb2xdPVwiZnJlcXVlbmN5S2V5SURGQ1wiIChjaGFuZ2UpPVwiZnJlcXVlbmN5Q2hhbmdlKClcIj5cbiAgICA8bWF0LWJ1dHRvbi10b2dnbGUgKm5nRm9yPVwibGV0IGZyZXF1ZW5jeTIgb2YgZnJlcXVlbmN5XCIgdmFsdWU9XCJ7eyBmcmVxdWVuY3kyLmtleUlEIH19XCI+XG4gICAgICAgIHt7IGZyZXF1ZW5jeTIubmFtZSB9fVxuICAgIDwvbWF0LWJ1dHRvbi10b2dnbGU+XG48L21hdC1idXR0b24tdG9nZ2xlLWdyb3VwPlxuXG48bWF0LWZvcm0tZmllbGQgY2xhc3M9XCJtcy0zXCIgaWQ9XCJkYWlseUZpZWxkXCIgYXBwRGF0ZU1vbnRoWWVhckZvcm1hdFxuICAgIFtuZ0NsYXNzXT1cInsnZC1ub25lJzogZnJlcXVlbmN5S2V5SURGQy52YWx1ZSAhPSdEQUlMWSd9XCIgKGNsaWNrKT1cIm9wZW5EYXRlcGlja2VyT25DbGljayhkYWlseSlcIlxuICAgIChrZXlkb3duLmFycm93ZG93bik9XCJvcGVuRGF0ZXBpY2tlck9uQ2xpY2soZGFpbHkpXCIgKGtleWRvd24uZW50ZXIpPVwib3BlbkRhdGVwaWNrZXJPbkNsaWNrKGRhaWx5KVwiPlxuICAgIDxpbnB1dCBtYXRJbnB1dCBjbGFzcz1cIm5vRm9jdXNcIiBbbWF0RGF0ZXBpY2tlcl09XCJkYWlseVwiIFtmb3JtQ29udHJvbF09XCJkdXJhdGlvblZhbHVlRkNcIiBbbWF4XT1cInRvZGF5XCJcbiAgICAgICAgKGRhdGVJbnB1dCk9XCJkYXRlU2VsZWN0ZWRIYW5kbGVyKCRldmVudC52YWx1ZSlcIiByZWFkb25seSAvPlxuICAgIDxtYXQtZGF0ZXBpY2tlci10b2dnbGUgbWF0U3VmZml4IGNsYXNzPVwiZnMtNVwiIFtmb3JdPVwiZGFpbHlcIj48L21hdC1kYXRlcGlja2VyLXRvZ2dsZT5cbiAgICA8bWF0LWRhdGVwaWNrZXIgI2RhaWx5IChjbG9zZWQpPVwidGFrZUZvY3VzQXdheSgnZGFpbHlGaWVsZCcpXCI+PC9tYXQtZGF0ZXBpY2tlcj5cbjwvbWF0LWZvcm0tZmllbGQ+XG5cbjxtYXQtZm9ybS1maWVsZCBjbGFzcz1cIm1zLTNcIiBpZD1cIm1vbnRobHlGaWVsZFwiIGFwcE1vbnRoWWVhckZvcm1hdFxuICAgIFtuZ0NsYXNzXT1cInsnZC1ub25lJzogZnJlcXVlbmN5S2V5SURGQy52YWx1ZSAhPSdNT05USExZJ31cIiAoY2xpY2spPVwib3BlbkRhdGVwaWNrZXJPbkNsaWNrKG1vbnRobHkpXCJcbiAgICAoa2V5ZG93bi5hcnJvd2Rvd24pPVwib3BlbkRhdGVwaWNrZXJPbkNsaWNrKG1vbnRobHkpXCIgKGtleWRvd24uZW50ZXIpPVwib3BlbkRhdGVwaWNrZXJPbkNsaWNrKG1vbnRobHkpXCI+XG4gICAgPGlucHV0IG1hdElucHV0IGNsYXNzPVwibm9Gb2N1c1wiIFttYXREYXRlcGlja2VyXT1cIm1vbnRobHlcIiBbZm9ybUNvbnRyb2xdPVwiZHVyYXRpb25WYWx1ZUZDXCIgW21heF09XCJ0b2RheVwiIHJlYWRvbmx5IC8+XG4gICAgPG1hdC1kYXRlcGlja2VyLXRvZ2dsZSBtYXRTdWZmaXggY2xhc3M9XCJmcy01XCIgW2Zvcl09XCJtb250aGx5XCI+PC9tYXQtZGF0ZXBpY2tlci10b2dnbGU+XG4gICAgPG1hdC1kYXRlcGlja2VyIHBhbmVsQ2xhc3M9XCJtb250aFBpY2tlclwiICNtb250aGx5IHN0YXJ0Vmlldz1cInllYXJcIlxuICAgICAgICAobW9udGhTZWxlY3RlZCk9XCJtb250aFNlbGVjdGVkSGFuZGxlcigkZXZlbnQsIG1vbnRobHkpXCIgKGNsb3NlZCk9XCJ0YWtlRm9jdXNBd2F5KCdtb250aGx5RmllbGQnKVwiPlxuICAgIDwvbWF0LWRhdGVwaWNrZXI+XG48L21hdC1mb3JtLWZpZWxkPlxuXG48bWF0LWZvcm0tZmllbGQgY2xhc3M9XCJtcy0zXCIgaWQ9XCJ5ZWFybHlGaWVsZFwiIGFwcFllYXJGb3JtYXQgW25nQ2xhc3NdPVwieydkLW5vbmUnOiBmcmVxdWVuY3lLZXlJREZDLnZhbHVlICE9J1lFQVJMWSd9XCJcbiAgICAoY2xpY2spPVwib3BlbkRhdGVwaWNrZXJPbkNsaWNrKHllYXJseSlcIiAoa2V5ZG93bi5hcnJvd2Rvd24pPVwib3BlbkRhdGVwaWNrZXJPbkNsaWNrKHllYXJseSlcIlxuICAgIChrZXlkb3duLmVudGVyKT1cIm9wZW5EYXRlcGlja2VyT25DbGljayh5ZWFybHkpXCI+XG4gICAgPGlucHV0IG1hdElucHV0IGNsYXNzPVwibm9Gb2N1c1wiIFttYXREYXRlcGlja2VyXT1cInllYXJseVwiIFtmb3JtQ29udHJvbF09XCJkdXJhdGlvblZhbHVlRkNcIiBbbWF4XT1cInRvZGF5XCIgcmVhZG9ubHkgLz5cbiAgICA8bWF0LWRhdGVwaWNrZXItdG9nZ2xlIG1hdFN1ZmZpeCBjbGFzcz1cImZzLTVcIiBbZm9yXT1cInllYXJseVwiPjwvbWF0LWRhdGVwaWNrZXItdG9nZ2xlPlxuICAgIDxtYXQtZGF0ZXBpY2tlciBwYW5lbENsYXNzPVwieWVhclBpY2tlclwiICN5ZWFybHkgc3RhcnRWaWV3PVwibXVsdGkteWVhclwiXG4gICAgICAgICh5ZWFyU2VsZWN0ZWQpPVwieWVhclNlbGVjdGVkSGFuZGxlcigkZXZlbnQsIHllYXJseSlcIiAoY2xvc2VkKT1cInRha2VGb2N1c0F3YXkoJ3llYXJseUZpZWxkJylcIj5cbiAgICA8L21hdC1kYXRlcGlja2VyPlxuPC9tYXQtZm9ybS1maWVsZD5cblxuPG1hdC1mb3JtLWZpZWxkIGNsYXNzPVwibXMtM1wiIFtuZ0NsYXNzXT1cInsnZC1ub25lJzogZnJlcXVlbmN5S2V5SURGQy52YWx1ZSAhPSdDVVNUT00nfVwiPlxuICAgIDxtYXQtbGFiZWwgY2xhc3M9XCJmb3JtTGFiZWxcIj4gU2VsZWN0IGRhdGUgPC9tYXQtbGFiZWw+XG4gICAgPGlucHV0IHR5cGU9XCJ0ZXh0XCIgbWF0SW5wdXQgbmd4RGF0ZXJhbmdlcGlja2VyTWRcbiAgICAgICAgW2xvY2FsZV09XCJ7ZGlyZWN0aW9uOiAnbHRyJywgYXBwbHlMYWJlbDogJ0FwcGx5JywgZm9ybWF0OiAnREQtTU1NLVlZWVknLCBjdXN0b21SYW5nZUxhYmVsOiAnQ3VzdG9tIFJhbmdlJ31cIlxuICAgICAgICBbZHJvcHNdPVwiJ2Rvd24nXCIgW29wZW5zXT1cIidyaWdodCdcIiBbYWx3YXlzU2hvd0NhbGVuZGFyc109XCJ0cnVlXCIgW2tlZXBDYWxlbmRhck9wZW5pbmdXaXRoUmFuZ2VdPVwidHJ1ZVwiXG4gICAgICAgIFtzaG93RHJvcGRvd25zXT1cInRydWVcIiBbc2hvd0NhbmNlbF09XCJ0cnVlXCIgYXV0b2NvbXBsZXRlPVwib2ZmXCIgbmFtZT1cImRhdGVyYW5nZVwiIFtmb3JtQ29udHJvbF09XCJkYXRlcmFuZ2VcIlxuICAgICAgICAobmdNb2RlbENoYW5nZSk9XCJjdXN0b21EYXRlUmFuZ2UoZGF0ZXJhbmdlLnZhbHVlKVwiIFtyZWFkb25seV09XCJ0cnVlXCIgLz5cbjwvbWF0LWZvcm0tZmllbGQ+Il19
import { __decorate } from "tslib";
import { Component, EventEmitter, Input, Output, ViewChild } from '@angular/core';
import { select } from '@angular-redux/store';
import { NgbAccordion, NgbAccordionConfig } from '@ng-bootstrap/ng-bootstrap';
import * as i0 from "@angular/core";
import * as i1 from "@angular/router";
import * as i2 from "@library/storage-service";
import * as i3 from "@library/application-service";
import * as i4 from "ngx-perfect-scrollbar";
import * as i5 from "@ng-bootstrap/ng-bootstrap";
import * as i6 from "@angular/common";
import * as i7 from "@angular/material/tooltip";
// /tsc-library/
export class SideNavComponent {
    constructor(router, storageService, applicationService) {
        this.router = router;
        this.storageService = storageService;
        this.applicationService = applicationService;
        this.menuOutput = new EventEmitter();
        this.toggleSidebarGlobal = new EventEmitter(true);
        this.toggleSettingDrawerGlobal = new EventEmitter(true);
        this.sidebarArray = [];
        this.activeID = [];
    }
    ngOnInit() {
        this.applicationKeyID = this.storageService.getStorage(['applicationKeyID']);
        this.sidebarType = this.sidebarTypeInp;
        this.sidebarArray = this.sidebarArrayInp;
        this.openAccordion();
        this.handleActiveTabOnRefresh(); /* TODO: SOMYA AGRAWAL, added to handle selected tab on refresh, not working properly */
    }
    ngOnChanges(changes) {
        if (changes.sidebarArrayInp && this.sidebarArrayInp) {
            this.onMenuClick(this.sidebarArrayInp);
        }
    }
    onMenuClick(menu) {
        if (menu === null || menu === void 0 ? void 0 : menu.route) {
            this.navigate(menu);
        }
        if (menu.dualMenu) {
            if (this.sidebarType == 'LEFT') {
                this.sidebarArray = menu.dualMenu;
                this.openAccordion();
            }
            const defaultMenu = this.findDefaultLandingPage(menu.dualMenu);
            if (defaultMenu) {
                this.navigate(defaultMenu);
            }
        }
        if (this.sidebarType == 'RIGHT') {
            const clonedMenu = Object.assign({}, menu);
            this.menuOutput.emit(clonedMenu);
            this.toggleSettingDrawerFun();
        }
    }
    findDefaultLandingPage(menuArray) {
        for (const menu of menuArray) {
            if (menu.isDefaultLandingPage) {
                return menu;
            }
            if (menu.children) {
                const result = this.findDefaultLandingPage(menu.children);
                if (result) {
                    return result;
                }
            }
        }
        return null;
    }
    backFunc(menu) {
        if (menu === null || menu === void 0 ? void 0 : menu.backMenuItem) {
            this.sidebarArray = menu.backMenuItem;
        }
        if (menu === null || menu === void 0 ? void 0 : menu.navigateToLandingPage) {
            const landingPageItem = menu === null || menu === void 0 ? void 0 : menu.backMenuItem.find(item => item.isLandingPage);
            if (landingPageItem) {
                this.navigate(landingPageItem);
                return;
            }
        }
        this.openAccordion();
    }
    openAccordion() {
        var _a;
        const openAccordionItems = (_a = this.sidebarArray) === null || _a === void 0 ? void 0 : _a.filter(item => (item === null || item === void 0 ? void 0 : item.type) == 'ACCORDION' && (item === null || item === void 0 ? void 0 : item.defaultState) == 'OPEN');
        this.activeID = openAccordionItems === null || openAccordionItems === void 0 ? void 0 : openAccordionItems.map(item => item === null || item === void 0 ? void 0 : item.label);
    }
    changeAccordionState(menu) {
        this.accordion.collapseAll();
        this.activeID = menu.label;
        this.accordion.expand(menu.label);
        if (menu.children) {
            menu.children.forEach((child) => {
                this.accordion.expand(child.label);
            });
        }
    }
    handleActiveTabOnRefresh() {
        this.sidebarArray.forEach(menu => {
            if (menu.dualMenu) {
                menu.dualMenu.forEach(dualMenuItem => {
                    if (dualMenuItem.children) {
                        dualMenuItem.children.forEach(child => {
                            if ((child === null || child === void 0 ? void 0 : child.route) == window.location.pathname) {
                                child.active = true;
                            }
                        });
                    }
                });
            }
        });
    }
    isActiveRoute(menu) {
        if (!menu) {
            return false;
        }
        if (menu.activeLink) {
            for (const parentLink of menu.activeLink) {
                if (this.router.isActive(parentLink, false)) {
                    return true;
                }
            }
        }
        return false;
    }
    navigate(menu) {
        this.router.navigate([
            menu === null || menu === void 0 ? void 0 : menu.route,
            { outlets: this.getOutlets(menu) }
        ], { queryParams: this.getQueryParams(menu) });
    }
    getOutlets(menu) {
        let outlets = {};
        if (menu === null || menu === void 0 ? void 0 : menu.outlet) {
            menu === null || menu === void 0 ? void 0 : menu.outlet.forEach(outlet => {
                outlets[outlet['outlet']] = outlet['route'];
            });
        }
        return outlets;
    }
    getQueryParams(menu) {
        let params = {};
        if (menu === null || menu === void 0 ? void 0 : menu.queryParam) {
            menu === null || menu === void 0 ? void 0 : menu.queryParam.forEach(param => {
                params[param['key']] = param['param'];
            });
        }
        return params;
    }
    navigateToLandingPage() {
    }
    toggleSidebarFun() {
        this.toggleSidebar = !this.toggleSidebar;
        this.toggleSidebarGlobal.emit(this.toggleSidebar);
    }
    toggleSettingDrawerFun() {
        this.toggleSettingDrawer = !this.toggleSettingDrawer;
        this.toggleSettingDrawerGlobal.emit(this.toggleSettingDrawer);
    }
}
SideNavComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: SideNavComponent, deps: [{ token: i1.Router }, { token: i2.StorageService }, { token: i3.ApplicationService }], target: i0.ɵɵFactoryTarget.Component });
SideNavComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: SideNavComponent, selector: "lib-side-nav", inputs: { sidebarTypeInp: "sidebarTypeInp", sidebarArrayInp: "sidebarArrayInp", sidebarHeaderLabelInp: "sidebarHeaderLabelInp", headerLogo: "headerLogo", footerLogo: "footerLogo", toggleSidebar: "toggleSidebar", toggleSettingDrawer: "toggleSettingDrawer" }, outputs: { menuOutput: "menuOutput", toggleSidebarGlobal: "toggleSidebarGlobal", toggleSettingDrawerGlobal: "toggleSettingDrawerGlobal" }, providers: [NgbAccordionConfig], viewQueries: [{ propertyName: "accordion", first: true, predicate: NgbAccordion, descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div\n    [ngClass]=\"[sidebarType == 'LEFT' ? 'app-sidebar sidebar-shadow ' : 'setting-sidebar setting-drawer-wrapper', toggleSettingDrawer ? 'setting-drawer-open' : '']\">\n\n    <div class=\"app-header__logo separator-bottom\" *ngIf=\"headerLogo\">\n        <div (click)=\"navigateToLandingPage()\" class=\"cursorPointer\">\n            <img class=\"headerProductLogo ms-1\"\n                [src]=\"applicationService.getApplicationLogoWithSideName(applicationKeyID)\" alt=\"Application logo\" />\n        </div>\n        <div class=\"header__pane ms-auto\">\n            <button type=\"button\" class=\"hamburger hamburger--elastic\" [ngClass]=\"{'is-active' : !toggleSidebar}\"\n                (click)=\"toggleSidebarFun();\">\n                <span class=\"hamburger-box\"><span class=\"hamburger-inner\"></span></span>\n            </button>\n        </div>\n    </div>\n\n    <div class=\"drawer-nav-btn\" *ngIf=\"!headerLogo\">\n        <button type=\"button\" class=\"hamburger hamburger--elastic\" [ngClass]=\"{'is-active' : toggleSettingDrawer}\"\n            (click)=\"toggleSettingDrawerFun()\">\n            <span class=\"hamburger-box\"><span class=\"hamburger-inner\"></span></span>\n        </button>\n    </div>\n\n    <div class=\"app-sidebar-content pt-3\" [ngClass]=\"{'drawer-content-wrapper': sidebarType == 'RIGHT'}\">\n        <div class=\"app-sidebar-scroll\">\n            <perfect-scrollbar [config]=\"{wheelPropagation: false}\" class=\"scroll-fix\" [scrollIndicators]=\"true\"\n                style=\"max-width: 600px;\">\n                <div class=\"v-sidebar-menu\">\n                    <div class=\"vsm-list\">\n                        <div *ngIf=\"sidebarHeaderLabelInp\" [ngClass]=\"{'bottomMargin': sidebarHeaderLabelInp}\">\n                            <span class=\"fw-bold ms-2 fs-4\">{{ sidebarHeaderLabelInp }}</span>\n                        </div>\n\n                        <div *ngFor=\"let menu of sidebarArray\">\n                            <ng-container *ngIf=\"!toggleSidebar; else closedSidebar\">\n                                <ng-container *ngIf=\"!menu.children && !menu.isSidebarHeaderLabel; else childrenView\">\n                                    <div class=\"vsm-link mb-1\" [ngClass]=\"{'mb-3': menu.isBackButton, 'customPadding': !menu?.icon, 'selected': isActiveRoute(menu)}\"\n                                        (click)=\"menu.isBackButton ? backFunc(menu) : onMenuClick(menu)\" routerLinkActive=\"active-item\">\n                                        <div class=\"d-flex align-items-center\">\n                                            <span class=\"material-symbols-outlined vsm-icon icon me-3\"> {{ menu?.icon }}\n                                            </span>\n                                            <span [ngClass]=\"{'fw-bold fs-4': menu.isSidebarHeaderLabel, 'fw-bold': isActiveRoute(menu)}\">{{ menu?.label }}</span>\n                                            <span class=\"material-symbols-outlined showRightArrowOnHover\" *ngIf=\"menu?.dualMenu\">\n                                                arrow_circle_right\n                                            </span>\n                                        </div>\n                                    </div>\n                                </ng-container>\n                        \n                                <ng-template #childrenView>\n                        \n                                    <ng-container *ngIf=\"menu.type == 'ACCORDION'; else openMenuView\">\n                                        <ng-container *ngTemplateOutlet=\"accordionTemplate; context: { accordionContent: menu }\"></ng-container>\n                                    </ng-container>\n                        \n                                    <ng-template #openMenuView>\n                                        <div class=\"openMenuHeader vsm-title mb-2\" [ngClass]=\"{'fw-bold fs-4': menu.isSidebarHeaderLabel}\">\n                                            {{ menu?.label }}\n                                        </div>\n                                        <div *ngFor=\"let openMenuChildren of menu.children\">\n                                            <a class=\"vsm-link mb-1\" [ngClass]=\"{'selected': isActiveRoute(openMenuChildren)}\"\n                                                routerLinkActive=\"active-item\" (click)=\"navigate(openMenuChildren)\">\n                                                <div class=\"d-flex align-items-center\">\n                                                    <span class=\"material-symbols-outlined icon ms-3\"> {{\n                                                        openMenuChildren?.icon }} </span>\n                                                    <span class=\"ms-3\" [ngClass]=\"{'fw-bold': isActiveRoute(openMenuChildren)}\"> {{ openMenuChildren?.label }} </span>\n                                                </div>\n                                            </a>\n                                        </div>\n                                    </ng-template>\n                                </ng-template>\n                            </ng-container>\n                        \n                            <ng-template #closedSidebar>\n                                <div *ngIf=\"!menu.children && !menu.isSidebarHeaderLabel\">\n                                    <ng-container *ngTemplateOutlet=\"closedSidebarTemplate; context: { menuItem: menu }\"></ng-container>\n                                </div>\n                                <ng-container *ngFor=\"let child of menu.children\">\n                                    <ng-container *ngIf=\"!child.subLabel\">\n                                        <ng-container *ngTemplateOutlet=\"closedSidebarTemplate; context: { menuItem: child }\"></ng-container>\n                                    </ng-container>\n                                </ng-container>\n                            </ng-template>\n                        \n                        </div>\n                    </div>\n                </div>\n            </perfect-scrollbar>\n        </div>\n    </div>\n\n    <div class=\"app-header__logo separator-top\" *ngIf=\"footerLogo\">\n        <img class=\"tscLogoWithName\" [ngClass]=\"{'d-none': toggleSidebar}\"\n            src=\"../assets/images/application-logo/tsc-with-name.png\" />\n        <img class=\"tscLogoWithoutName\" [ngClass]=\"{'d-none': !toggleSidebar}\"\n            src=\"../assets/images/application-logo/tsc-without-name.png\" />\n    </div>\n</div>\n\n<div class=\"setting-drawer-overlay\" (click)=\"toggleSettingDrawerFun()\"></div>\n\n<ng-template #accordionTemplate let-accordionContent=\"accordionContent\">\n    <ngb-accordion [destroyOnHide]=\"true\" #acc=\"ngbAccordion\" [activeIds]=\"activeID\">\n        <ngb-panel [id]=\"accordionContent.label\">\n\n            <ng-template ngbPanelHeader>\n                <button ngbPanelToggle routerLinkActive=\"active-item\" class=\"vsm-link\"\n                    [ngClass]=\"{'customPadding': !accordionContent?.icon}\">\n                    <div class=\"d-flex align-items-center\">\n                        <span class=\"material-symbols-outlined icon me-3\">{{ accordionContent?.icon }}</span>\n                        <span class=\"fw-normal\">{{ accordionContent?.label }}</span>\n                    </div>\n                    <i class=\"vsm-arrow\"></i>\n                </button>\n            </ng-template>\n\n            <ng-template ngbPanelContent>\n                <div class=\"vsm-dropdown\">\n                    <div class=\"vsm-list\">\n                        <ng-container *ngFor=\"let submenuItem of accordionContent?.children\">\n                            <ng-container *ngIf=\"!submenuItem.subLabel; else subMenuSubHeader\">\n                                <a class=\"vsm-link mb-1 ms-3\" [ngClass]=\"{'selected': isActiveRoute(submenuItem)}\"\n                                    routerLinkActive=\"active-item\" (click)=\"changeAccordionState(accordionContent); navigate(submenuItem)\">\n                                    <div class=\"d-flex align-items-center\">\n                                        <span class=\"material-symbols-outlined icon me-3\"> {{ submenuItem?.icon }}\n                                        </span>\n                                        <span [ngClass]=\"{'fw-bold': isActiveRoute(openMenuChildren)}\"> {{ submenuItem?.label }} </span>\n                                    </div>\n                                </a>\n                            </ng-container>\n                            <ng-template #subMenuSubHeader>\n                                <div class=\"ms-4 text-secondary fw-bold mb-2\"> {{ submenuItem.subLabel }} </div>\n                            </ng-template>\n                        </ng-container>\n                    </div>\n                </div>\n            </ng-template>\n        </ngb-panel>\n    </ngb-accordion>\n</ng-template>\n\n<ng-template #closedSidebarTemplate let-menuItem=\"menuItem\">\n    <a class=\"vsm-link mb-1 closedSideBarIconPadding\" [ngClass]=\"{'selected': isActiveRoute(menuItem)}\" routerLinkActive=\"active-item\"\n        (click)=\"menuItem.isBackButton ? backFunc(menuItem) : onMenuClick(menuItem); navigate(menuItem)\"\n        [matTooltip]=\"menuItem?.label\" matTooltipPosition=\"left\" matTooltipClass=\"sideBarTooltip\">\n        <div class=\"d-flex align-items-center\">\n            <span class=\"material-symbols-outlined vsm-icon icon me-3\"> {{ menuItem?.icon }}\n            </span>\n        </div>\n    </a>\n</ng-template>", styles: [".scroll-fix{max-height:calc(100vh - 50px)!important}.material-symbols-outlined{font-variation-settings:\"FILL\" 1}.headerProductLogo{height:40px;width:auto}.vsm-link.selected{background-color:#e0f3ff;color:#3f6ad8}.vsm-link{font-weight:normal!important;min-height:30px!important;border-radius:16px}.vsm-link:hover .showRightArrowOnHover{opacity:1}.showRightArrowOnHover{text-align:center;width:34px;height:34px;line-height:34px;position:absolute;right:5px;top:50%;margin-top:-17px;font-size:1.5rem;opacity:0}.showLeftArrow{text-align:center;width:34px;height:34px;line-height:34px;position:absolute;left:5px;top:50%;margin-top:-17px;font-size:1.5rem}.customPadding{padding:0 1.5rem 0 15px}.sideBarTooltip{white-space:pre-line!important;max-width:1100px!important;max-height:550px!important;font-size:18px!important}.openMenuHeader{pointer-events:none;padding:0 1.5rem 0 15px}.vsm-title{font-size:14px;white-space:nowrap;position:relative;font-weight:normal}.v-sidebar-menu .vsm-dropdown .vsm-list{padding:.75rem}.vsm-icon{opacity:1}.icon{text-align:center;width:34px;height:34px;line-height:34px;position:absolute;left:5px;top:50%;margin-top:-17px;font-size:1.3rem}.subLabelMargin{margin-left:1.9rem!important}.separator-top{border-top:1px solid #f6eded;background-color:#fff!important;position:fixed;bottom:0;left:0}.tscLogoWithName{height:38px;width:auto}.tscLogoWithoutName{width:32px;height:32px}.bottomMargin{margin-bottom:17px}.closedSideBarIconPadding{padding:unset}\n"], components: [{ type: i4.PerfectScrollbarComponent, selector: "perfect-scrollbar", inputs: ["disabled", "usePSClass", "autoPropagation", "scrollIndicators", "config"], outputs: ["psScrollY", "psScrollX", "psScrollUp", "psScrollDown", "psScrollLeft", "psScrollRight", "psYReachEnd", "psYReachStart", "psXReachEnd", "psXReachStart"], exportAs: ["ngxPerfectScrollbar"] }, { type: i5.NgbAccordion, selector: "ngb-accordion", inputs: ["animation", "activeIds", "closeOthers", "destroyOnHide", "type"], outputs: ["panelChange", "shown", "hidden"], exportAs: ["ngbAccordion"] }], directives: [{ type: i6.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i6.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet"] }, { type: i5.NgbPanel, selector: "ngb-panel", inputs: ["disabled", "id", "title", "type", "cardClass"], outputs: ["shown", "hidden"] }, { type: i5.NgbPanelHeader, selector: "ng-template[ngbPanelHeader]" }, { type: i5.NgbPanelToggle, selector: "button[ngbPanelToggle]", inputs: ["ngbPanelToggle"] }, { type: i5.NgbPanelContent, selector: "ng-template[ngbPanelContent]" }, { type: i7.MatTooltip, selector: "[matTooltip]", exportAs: ["matTooltip"] }] });
__decorate([
    select('config')
], SideNavComponent.prototype, "config$", void 0);
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: SideNavComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'lib-side-nav',
                    templateUrl: './side-nav.component.html',
                    styleUrls: ['./side-nav.component.scss'],
                    providers: [NgbAccordionConfig],
                }]
        }], ctorParameters: function () { return [{ type: i1.Router }, { type: i2.StorageService }, { type: i3.ApplicationService }]; }, propDecorators: { sidebarTypeInp: [{
                type: Input
            }], sidebarArrayInp: [{
                type: Input
            }], sidebarHeaderLabelInp: [{
                type: Input
            }], headerLogo: [{
                type: Input
            }], footerLogo: [{
                type: Input
            }], toggleSidebar: [{
                type: Input
            }], toggleSettingDrawer: [{
                type: Input
            }], menuOutput: [{
                type: Output
            }], toggleSidebarGlobal: [{
                type: Output
            }], toggleSettingDrawerGlobal: [{
                type: Output
            }], config$: [], accordion: [{
                type: ViewChild,
                args: [NgbAccordion]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2lkZS1uYXYuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbGlicmFyeS90c2MtY29tbW9uL3NyYy9saWIvdHNjL2NvbXBvbmVudC9sYXlvdXQvc2lkZWJhci9zaWRlLW5hdi9zaWRlLW5hdi5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L3RzYy1jb21tb24vc3JjL2xpYi90c2MvY29tcG9uZW50L2xheW91dC9zaWRlYmFyL3NpZGUtbmF2L3NpZGUtbmF2LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFpQixTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFHekcsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLHNCQUFzQixDQUFDO0FBRTlDLE9BQU8sRUFBRSxZQUFZLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSw0QkFBNEIsQ0FBQzs7Ozs7Ozs7O0FBTzlFLGdCQUFnQjtBQVNoQixNQUFNLE9BQU8sZ0JBQWdCO0lBeUN6QixZQUNZLE1BQWMsRUFDZCxjQUE4QixFQUMvQixrQkFBc0M7UUFGckMsV0FBTSxHQUFOLE1BQU0sQ0FBUTtRQUNkLG1CQUFjLEdBQWQsY0FBYyxDQUFnQjtRQUMvQix1QkFBa0IsR0FBbEIsa0JBQWtCLENBQW9CO1FBcEJqRCxlQUFVLEdBQXNCLElBQUksWUFBWSxFQUFPLENBQUM7UUFHeEQsd0JBQW1CLEdBQTBCLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBR3BFLDhCQUF5QixHQUEwQixJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUkxRSxpQkFBWSxHQUFVLEVBQUUsQ0FBQztRQUN6QixhQUFRLEdBQWEsRUFBRSxDQUFDO0lBVXBCLENBQUM7SUFF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QjtvQkFDeEMsU0FBUyxFQUFFLENBQUMsMkJBQTJCLENBQUM7b0JBQ3hDLFNBQVMsRUFBRSxDQUFDLGtCQUFrQixDQUFDO2lCQUNsQzsySkFLRyxjQUFjO3NCQURiLEtBQUs7Z0JBSU4sZUFBZTtzQkFEZCxLQUFLO2dCQUlOLHFCQUFxQjtzQkFEcEIsS0FBSztnQkFJTixVQUFVO3NCQURULEtBQUs7Z0JBSU4sVUFBVTtzQkFEVCxLQUFLO2dCQUlOLGFBQWE7c0JBRFosS0FBSztnQkFJTixtQkFBbUI7c0JBRGxCLEtBQUs7Z0JBSU4sVUFBVTtzQkFEVCxNQUFNO2dCQUlQLG1CQUFtQjtzQkFEbEIsTUFBTTtnQkFJUCx5QkFBeUI7c0JBRHhCLE1BQU07Z0JBUWtCLE9BQU8sTUFFUCxTQUFTO3NCQUFqQyxTQUFTO3VCQUFDLFlBQVkiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFJvdXRlciB9IGZyb20gJ0Bhbmd1bGFyL3JvdXRlcic7XG5cbmltcG9ydCB7IHNlbGVjdCB9IGZyb20gJ0Bhbmd1bGFyLXJlZHV4L3N0b3JlJztcblxuaW1wb3J0IHsgTmdiQWNjb3JkaW9uLCBOZ2JBY2NvcmRpb25Db25maWcgfSBmcm9tICdAbmctYm9vdHN0cmFwL25nLWJvb3RzdHJhcCc7XG5cbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzJztcblxuLy8gdHNjLWxpYnJhcnlcbmltcG9ydCB7IFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnQGxpYnJhcnkvc3RvcmFnZS1zZXJ2aWNlJztcbmltcG9ydCB7IEFwcGxpY2F0aW9uU2VydmljZSB9IGZyb20gJ0BsaWJyYXJ5L2FwcGxpY2F0aW9uLXNlcnZpY2UnO1xuLy8gL3RzYy1saWJyYXJ5L1xuXG5AQ29tcG9uZW50KHtcbiAgICBzZWxlY3RvcjogJ2xpYi1zaWRlLW5hdicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL3NpZGUtbmF2LmNvbXBvbmVudC5odG1sJyxcbiAgICBzdHlsZVVybHM6IFsnLi9zaWRlLW5hdi5jb21wb25lbnQuc2NzcyddLFxuICAgIHByb3ZpZGVyczogW05nYkFjY29yZGlvbkNvbmZpZ10sXG59KVxuXG5leHBvcnQgY2xhc3MgU2lkZU5hdkNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG5cbiAgICBASW5wdXQoKVxuICAgIHNpZGViYXJUeXBlSW5wOiBzdHJpbmc7XG5cbiAgICBASW5wdXQoKVxuICAgIHNpZGViYXJBcnJheUlucDogYW55O1xuXG4gICAgQElucHV0KClcbiAgICBzaWRlYmFySGVhZGVyTGFiZWxJbnA6IHN0cmluZztcblxuICAgIEBJbnB1dCgpXG4gICAgaGVhZGVyTG9nbzogYm9vbGVhbjtcblxuICAgIEBJbnB1dCgpXG4gICAgZm9vdGVyTG9nbzogYm9vbGVhbjtcblxuICAgIEBJbnB1dCgpXG4gICAgdG9nZ2xlU2lkZWJhcjogYm9vbGVhbjtcblxuICAgIEBJbnB1dCgpXG4gICAgdG9nZ2xlU2V0dGluZ0RyYXdlcjogYm9vbGVhbjtcblxuICAgIEBPdXRwdXQoKVxuICAgIG1lbnVPdXRwdXQ6IEV2ZW50RW1pdHRlcjxhbnk+ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgICBAT3V0cHV0KClcbiAgICB0b2dnbGVTaWRlYmFyR2xvYmFsOiBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4gPSBuZXcgRXZlbnRFbWl0dGVyKHRydWUpO1xuXG4gICAgQE91dHB1dCgpXG4gICAgdG9nZ2xlU2V0dGluZ0RyYXdlckdsb2JhbDogRXZlbnRFbWl0dGVyPGJvb2xlYW4+ID0gbmV3IEV2ZW50RW1pdHRlcih0cnVlKTtcblxuICAgIHNpZGViYXJUeXBlOiBzdHJpbmc7XG4gICAgYXBwbGljYXRpb25LZXlJRDogc3RyaW5nO1xuICAgIHNpZGViYXJBcnJheTogYW55W10gPSBbXTtcbiAgICBhY3RpdmVJRDogc3RyaW5nW10gPSBbXTtcblxuICAgIEBzZWxlY3QoJ2NvbmZpZycpIHB1YmxpYyBjb25maWckOiBPYnNlcnZhYmxlPGFueT47XG5cbiAgICBAVmlld0NoaWxkKE5nYkFjY29yZGlvbikgYWNjb3JkaW9uOiBOZ2JBY2NvcmRpb247XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSByb3V0ZXI6IFJvdXRlcixcbiAgICAgICAgcHJpdmF0ZSBzdG9yYWdlU2VydmljZTogU3RvcmFnZVNlcnZpY2UsXG4gICAgICAgIHB1YmxpYyBhcHBsaWNhdGlvblNlcnZpY2U6IEFwcGxpY2F0aW9uU2VydmljZSxcbiAgICApIHsgfVxuXG4gICAgbmdPbkluaXQoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuYXBwbGljYXRpb25LZXlJRCA9IHRoaXMuc3RvcmFnZVNlcnZpY2UuZ2V0U3RvcmFnZShbJ2FwcGxpY2F0aW9uS2V5SUQnXSk7XG5cbiAgICAgICAgdGhpcy5zaWRlYmFyVHlwZSA9IHRoaXMuc2lkZWJhclR5cGVJbnA7XG4gICAgICAgIHRoaXMuc2lkZWJhckFycmF5ID0gdGhpcy5zaWRlYmFyQXJyYXlJbnA7XG5cbiAgICAgICAgdGhpcy5vcGVuQWNjb3JkaW9uKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlQWN0aXZlVGFiT25SZWZyZXNoKCk7ICAvKiBUT0RPOiBTT01ZQSBBR1JBV0FMLCBhZGRlZCB0byBoYW5kbGUgc2VsZWN0ZWQgdGFiIG9uIHJlZnJlc2gsIG5vdCB3b3JraW5nIHByb3Blcmx5ICovXG4gICAgfVxuXG4gICAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcyk6IHZvaWQge1xuICAgICAgICBpZiAoY2hhbmdlcy5zaWRlYmFyQXJyYXlJbnAgJiYgdGhpcy5zaWRlYmFyQXJyYXlJbnApIHtcbiAgICAgICAgICAgIHRoaXMub25NZW51Q2xpY2sodGhpcy5zaWRlYmFyQXJyYXlJbnApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgb25NZW51Q2xpY2sobWVudSkge1xuICAgICAgICBpZiAobWVudT8ucm91dGUpIHtcbiAgICAgICAgICAgIHRoaXMubmF2aWdhdGUobWVudSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobWVudS5kdWFsTWVudSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2lkZWJhclR5cGUgPT0gJ0xFRlQnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaWRlYmFyQXJyYXkgPSBtZW51LmR1YWxNZW51O1xuICAgICAgICAgICAgICAgIHRoaXMub3BlbkFjY29yZGlvbigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBkZWZhdWx0TWVudSA9IHRoaXMuZmluZERlZmF1bHRMYW5kaW5nUGFnZShtZW51LmR1YWxNZW51KTtcbiAgICAgICAgICAgIGlmIChkZWZhdWx0TWVudSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUoZGVmYXVsdE1lbnUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuc2lkZWJhclR5cGUgPT0gJ1JJR0hUJykge1xuICAgICAgICAgICAgY29uc3QgY2xvbmVkTWVudSA9IHsgLi4ubWVudSB9O1xuICAgICAgICAgICAgdGhpcy5tZW51T3V0cHV0LmVtaXQoY2xvbmVkTWVudSk7XG5cbiAgICAgICAgICAgIHRoaXMudG9nZ2xlU2V0dGluZ0RyYXdlckZ1bigpO1xuICAgICAgICB9XG5cbiAgICB9XG5cbiAgICBmaW5kRGVmYXVsdExhbmRpbmdQYWdlKG1lbnVBcnJheSkge1xuICAgICAgICBmb3IgKGNvbnN0IG1lbnUgb2YgbWVudUFycmF5KSB7XG4gICAgICAgICAgICBpZiAobWVudS5pc0RlZmF1bHRMYW5kaW5nUGFnZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBtZW51O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAobWVudS5jaGlsZHJlbikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZmluZERlZmF1bHRMYW5kaW5nUGFnZShtZW51LmNoaWxkcmVuKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgYmFja0Z1bmMobWVudSkge1xuICAgICAgICBpZiAobWVudT8uYmFja01lbnVJdGVtKSB7XG4gICAgICAgICAgICB0aGlzLnNpZGViYXJBcnJheSA9IG1lbnUuYmFja01lbnVJdGVtO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lbnU/Lm5hdmlnYXRlVG9MYW5kaW5nUGFnZSkge1xuICAgICAgICAgICAgY29uc3QgbGFuZGluZ1BhZ2VJdGVtID0gbWVudT8uYmFja01lbnVJdGVtLmZpbmQoaXRlbSA9PiBpdGVtLmlzTGFuZGluZ1BhZ2UpO1xuICAgICAgICAgICAgaWYgKGxhbmRpbmdQYWdlSXRlbSkge1xuICAgICAgICAgICAgICAgIHRoaXMubmF2aWdhdGUobGFuZGluZ1BhZ2VJdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLm9wZW5BY2NvcmRpb24oKTtcbiAgICB9XG5cbiAgICBvcGVuQWNjb3JkaW9uKCkge1xuICAgICAgICBjb25zdCBvcGVuQWNjb3JkaW9uSXRlbXMgPSB0aGlzLnNpZGViYXJBcnJheT8uZmlsdGVyKGl0ZW0gPT4gaXRlbT8udHlwZSA9PSAnQUNDT1JESU9OJyAmJiBpdGVtPy5kZWZhdWx0U3RhdGUgPT0gJ09QRU4nKTtcbiAgICAgICAgdGhpcy5hY3RpdmVJRCA9IG9wZW5BY2NvcmRpb25JdGVtcz8ubWFwKGl0ZW0gPT4gaXRlbT8ubGFiZWwpO1xuICAgIH1cblxuICAgIGNoYW5nZUFjY29yZGlvblN0YXRlKG1lbnUpIHtcbiAgICAgICAgdGhpcy5hY2NvcmRpb24uY29sbGFwc2VBbGwoKTtcbiAgICAgICAgdGhpcy5hY3RpdmVJRCA9IG1lbnUubGFiZWw7XG4gICAgICAgIHRoaXMuYWNjb3JkaW9uLmV4cGFuZChtZW51LmxhYmVsKTtcblxuICAgICAgICBpZiAobWVudS5jaGlsZHJlbikge1xuICAgICAgICAgICAgbWVudS5jaGlsZHJlbi5mb3JFYWNoKChjaGlsZCkgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuYWNjb3JkaW9uLmV4cGFuZChjaGlsZC5sYWJlbCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGhhbmRsZUFjdGl2ZVRhYk9uUmVmcmVzaCgpIHtcbiAgICAgICAgdGhpcy5zaWRlYmFyQXJyYXkuZm9yRWFjaChtZW51ID0+IHtcbiAgICAgICAgICAgIGlmIChtZW51LmR1YWxNZW51KSB7XG4gICAgICAgICAgICAgICAgbWVudS5kdWFsTWVudS5mb3JFYWNoKGR1YWxNZW51SXRlbSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkdWFsTWVudUl0ZW0uY2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGR1YWxNZW51SXRlbS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2hpbGQ/LnJvdXRlID09IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaGlsZC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlzQWN0aXZlUm91dGUobWVudSk6IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIW1lbnUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIFxuICAgICAgICBpZiAobWVudS5hY3RpdmVMaW5rKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmVudExpbmsgb2YgbWVudS5hY3RpdmVMaW5rKSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucm91dGVyLmlzQWN0aXZlKHBhcmVudExpbmssIGZhbHNlKSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICBcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBcbiAgICBuYXZpZ2F0ZShtZW51KSB7XG4gICAgICAgIHRoaXMucm91dGVyLm5hdmlnYXRlKFtcbiAgICAgICAgICAgIG1lbnU/LnJvdXRlLFxuICAgICAgICAgICAgeyBvdXRsZXRzOiB0aGlzLmdldE91dGxldHMobWVudSkgfV0sXG4gICAgICAgICAgICB7IHF1ZXJ5UGFyYW1zOiB0aGlzLmdldFF1ZXJ5UGFyYW1zKG1lbnUpIH1cbiAgICAgICAgKTtcbiAgICB9XG5cbiAgICBnZXRPdXRsZXRzKG1lbnUpIHtcbiAgICAgICAgbGV0IG91dGxldHM6IGFueSA9IHt9O1xuICAgICAgICBpZiAobWVudT8ub3V0bGV0KSB7XG4gICAgICAgICAgICBtZW51Py5vdXRsZXQuZm9yRWFjaChvdXRsZXQgPT4ge1xuICAgICAgICAgICAgICAgIG91dGxldHNbb3V0bGV0WydvdXRsZXQnXV0gPSBvdXRsZXRbJ3JvdXRlJ107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb3V0bGV0cztcbiAgICB9XG5cbiAgICBnZXRRdWVyeVBhcmFtcyhtZW51KSB7XG4gICAgICAgIGxldCBwYXJhbXM6IGFueSA9IHt9O1xuICAgICAgICBpZiAobWVudT8ucXVlcnlQYXJhbSkge1xuICAgICAgICAgICAgbWVudT8ucXVlcnlQYXJhbS5mb3JFYWNoKHBhcmFtID0+IHtcbiAgICAgICAgICAgICAgICBwYXJhbXNbcGFyYW1bJ2tleSddXSA9IHBhcmFtWydwYXJhbSddO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtcztcbiAgICB9XG5cbiAgICBuYXZpZ2F0ZVRvTGFuZGluZ1BhZ2UoKSB7XG4gICAgfVxuXG4gICAgdG9nZ2xlU2lkZWJhckZ1bigpIHtcbiAgICAgICAgdGhpcy50b2dnbGVTaWRlYmFyID0gIXRoaXMudG9nZ2xlU2lkZWJhcjtcbiAgICAgICAgdGhpcy50b2dnbGVTaWRlYmFyR2xvYmFsLmVtaXQodGhpcy50b2dnbGVTaWRlYmFyKTtcbiAgICB9XG5cbiAgICB0b2dnbGVTZXR0aW5nRHJhd2VyRnVuKCkge1xuICAgICAgICB0aGlzLnRvZ2dsZVNldHRpbmdEcmF3ZXIgPSAhdGhpcy50b2dnbGVTZXR0aW5nRHJhd2VyO1xuICAgICAgICB0aGlzLnRvZ2dsZVNldHRpbmdEcmF3ZXJHbG9iYWwuZW1pdCh0aGlzLnRvZ2dsZVNldHRpbmdEcmF3ZXIpO1xuICAgIH1cblxufSIsIjxkaXZcbiAgICBbbmdDbGFzc109XCJbc2lkZWJhclR5cGUgPT0gJ0xFRlQnID8gJ2FwcC1zaWRlYmFyIHNpZGViYXItc2hhZG93ICcgOiAnc2V0dGluZy1zaWRlYmFyIHNldHRpbmctZHJhd2VyLXdyYXBwZXInLCB0b2dnbGVTZXR0aW5nRHJhd2VyID8gJ3NldHRpbmctZHJhd2VyLW9wZW4nIDogJyddXCI+XG5cbiAgICA8ZGl2IGNsYXNzPVwiYXBwLWhlYWRlcl9fbG9nbyBzZXBhcmF0b3ItYm90dG9tXCIgKm5nSWY9XCJoZWFkZXJMb2dvXCI+XG4gICAgICAgIDxkaXYgKGNsaWNrKT1cIm5hdmlnYXRlVG9MYW5kaW5nUGFnZSgpXCIgY2xhc3M9XCJjdXJzb3JQb2ludGVyXCI+XG4gICAgICAgICAgICA8aW1nIGNsYXNzPVwiaGVhZGVyUHJvZHVjdExvZ28gbXMtMVwiXG4gICAgICAgICAgICAgICAgW3NyY109XCJhcHBsaWNhdGlvblNlcnZpY2UuZ2V0QXBwbGljYXRpb25Mb2dvV2l0aFNpZGVOYW1lKGFwcGxpY2F0aW9uS2V5SUQpXCIgYWx0PVwiQXBwbGljYXRpb24gbG9nb1wiIC8+XG4gICAgICAgIDwvZGl2PlxuICAgICAgICA8ZGl2IGNsYXNzPVwiaGVhZGVyX19wYW5lIG1zLWF1dG9cIj5cbiAgICAgICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiaGFtYnVyZ2VyIGhhbWJ1cmdlci0tZWxhc3RpY1wiIFtuZ0NsYXNzXT1cInsnaXMtYWN0aXZlJyA6ICF0b2dnbGVTaWRlYmFyfVwiXG4gICAgICAgICAgICAgICAgKGNsaWNrKT1cInRvZ2dsZVNpZGViYXJGdW4oKTtcIj5cbiAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImhhbWJ1cmdlci1ib3hcIj48c3BhbiBjbGFzcz1cImhhbWJ1cmdlci1pbm5lclwiPjwvc3Bhbj48L3NwYW4+XG4gICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiZHJhd2VyLW5hdi1idG5cIiAqbmdJZj1cIiFoZWFkZXJMb2dvXCI+XG4gICAgICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiaGFtYnVyZ2VyIGhhbWJ1cmdlci0tZWxhc3RpY1wiIFtuZ0NsYXNzXT1cInsnaXMtYWN0aXZlJyA6IHRvZ2dsZVNldHRpbmdEcmF3ZXJ9XCJcbiAgICAgICAgICAgIChjbGljayk9XCJ0b2dnbGVTZXR0aW5nRHJhd2VyRnVuKClcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiaGFtYnVyZ2VyLWJveFwiPjxzcGFuIGNsYXNzPVwiaGFtYnVyZ2VyLWlubmVyXCI+PC9zcGFuPjwvc3Bhbj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiYXBwLXNpZGViYXItY29udGVudCBwdC0zXCIgW25nQ2xhc3NdPVwieydkcmF3ZXItY29udGVudC13cmFwcGVyJzogc2lkZWJhclR5cGUgPT0gJ1JJR0hUJ31cIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImFwcC1zaWRlYmFyLXNjcm9sbFwiPlxuICAgICAgICAgICAgPHBlcmZlY3Qtc2Nyb2xsYmFyIFtjb25maWddPVwie3doZWVsUHJvcGFnYXRpb246IGZhbHNlfVwiIGNsYXNzPVwic2Nyb2xsLWZpeFwiIFtzY3JvbGxJbmRpY2F0b3JzXT1cInRydWVcIlxuICAgICAgICAgICAgICAgIHN0eWxlPVwibWF4LXdpZHRoOiA2MDBweDtcIj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidi1zaWRlYmFyLW1lbnVcIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInZzbS1saXN0XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwic2lkZWJhckhlYWRlckxhYmVsSW5wXCIgW25nQ2xhc3NdPVwieydib3R0b21NYXJnaW4nOiBzaWRlYmFySGVhZGVyTGFiZWxJbnB9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmdy1ib2xkIG1zLTIgZnMtNFwiPnt7IHNpZGViYXJIZWFkZXJMYWJlbElucCB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2ICpuZ0Zvcj1cImxldCBtZW51IG9mIHNpZGViYXJBcnJheVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhdG9nZ2xlU2lkZWJhcjsgZWxzZSBjbG9zZWRTaWRlYmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhbWVudS5jaGlsZHJlbiAmJiAhbWVudS5pc1NpZGViYXJIZWFkZXJMYWJlbDsgZWxzZSBjaGlsZHJlblZpZXdcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c20tbGluayBtYi0xXCIgW25nQ2xhc3NdPVwieydtYi0zJzogbWVudS5pc0JhY2tCdXR0b24sICdjdXN0b21QYWRkaW5nJzogIW1lbnU/Lmljb24sICdzZWxlY3RlZCc6IGlzQWN0aXZlUm91dGUobWVudSl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwibWVudS5pc0JhY2tCdXR0b24gPyBiYWNrRnVuYyhtZW51KSA6IG9uTWVudUNsaWNrKG1lbnUpXCIgcm91dGVyTGlua0FjdGl2ZT1cImFjdGl2ZS1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIHZzbS1pY29uIGljb24gbWUtM1wiPiB7eyBtZW51Py5pY29uIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gW25nQ2xhc3NdPVwieydmdy1ib2xkIGZzLTQnOiBtZW51LmlzU2lkZWJhckhlYWRlckxhYmVsLCAnZnctYm9sZCc6IGlzQWN0aXZlUm91dGUobWVudSl9XCI+e3sgbWVudT8ubGFiZWwgfX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBzaG93UmlnaHRBcnJvd09uSG92ZXJcIiAqbmdJZj1cIm1lbnU/LmR1YWxNZW51XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJvd19jaXJjbGVfcmlnaHRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjY2hpbGRyZW5WaWV3PlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwibWVudS50eXBlID09ICdBQ0NPUkRJT04nOyBlbHNlIG9wZW5NZW51Vmlld1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nVGVtcGxhdGVPdXRsZXQ9XCJhY2NvcmRpb25UZW1wbGF0ZTsgY29udGV4dDogeyBhY2NvcmRpb25Db250ZW50OiBtZW51IH1cIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctdGVtcGxhdGUgI29wZW5NZW51Vmlldz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwib3Blbk1lbnVIZWFkZXIgdnNtLXRpdGxlIG1iLTJcIiBbbmdDbGFzc109XCJ7J2Z3LWJvbGQgZnMtNCc6IG1lbnUuaXNTaWRlYmFySGVhZGVyTGFiZWx9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IG1lbnU/LmxhYmVsIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdGb3I9XCJsZXQgb3Blbk1lbnVDaGlsZHJlbiBvZiBtZW51LmNoaWxkcmVuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVwidnNtLWxpbmsgbWItMVwiIFtuZ0NsYXNzXT1cInsnc2VsZWN0ZWQnOiBpc0FjdGl2ZVJvdXRlKG9wZW5NZW51Q2hpbGRyZW4pfVwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZXJMaW5rQWN0aXZlPVwiYWN0aXZlLWl0ZW1cIiAoY2xpY2spPVwibmF2aWdhdGUob3Blbk1lbnVDaGlsZHJlbilcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIGljb24gbXMtM1wiPiB7e1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGVuTWVudUNoaWxkcmVuPy5pY29uIH19IDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIm1zLTNcIiBbbmdDbGFzc109XCJ7J2Z3LWJvbGQnOiBpc0FjdGl2ZVJvdXRlKG9wZW5NZW51Q2hpbGRyZW4pfVwiPiB7eyBvcGVuTWVudUNoaWxkcmVuPy5sYWJlbCB9fSA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSAjY2xvc2VkU2lkZWJhcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiAqbmdJZj1cIiFtZW51LmNoaWxkcmVuICYmICFtZW51LmlzU2lkZWJhckhlYWRlckxhYmVsXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiY2xvc2VkU2lkZWJhclRlbXBsYXRlOyBjb250ZXh0OiB7IG1lbnVJdGVtOiBtZW51IH1cIj48L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGNoaWxkIG9mIG1lbnUuY2hpbGRyZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhY2hpbGQuc3ViTGFiZWxcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1RlbXBsYXRlT3V0bGV0PVwiY2xvc2VkU2lkZWJhclRlbXBsYXRlOyBjb250ZXh0OiB7IG1lbnVJdGVtOiBjaGlsZCB9XCI+PC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9wZXJmZWN0LXNjcm9sbGJhcj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiYXBwLWhlYWRlcl9fbG9nbyBzZXBhcmF0b3ItdG9wXCIgKm5nSWY9XCJmb290ZXJMb2dvXCI+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJ0c2NMb2dvV2l0aE5hbWVcIiBbbmdDbGFzc109XCJ7J2Qtbm9uZSc6IHRvZ2dsZVNpZGViYXJ9XCJcbiAgICAgICAgICAgIHNyYz1cIi4uL2Fzc2V0cy9pbWFnZXMvYXBwbGljYXRpb24tbG9nby90c2Mtd2l0aC1uYW1lLnBuZ1wiIC8+XG4gICAgICAgIDxpbWcgY2xhc3M9XCJ0c2NMb2dvV2l0aG91dE5hbWVcIiBbbmdDbGFzc109XCJ7J2Qtbm9uZSc6ICF0b2dnbGVTaWRlYmFyfVwiXG4gICAgICAgICAgICBzcmM9XCIuLi9hc3NldHMvaW1hZ2VzL2FwcGxpY2F0aW9uLWxvZ28vdHNjLXdpdGhvdXQtbmFtZS5wbmdcIiAvPlxuICAgIDwvZGl2PlxuPC9kaXY+XG5cbjxkaXYgY2xhc3M9XCJzZXR0aW5nLWRyYXdlci1vdmVybGF5XCIgKGNsaWNrKT1cInRvZ2dsZVNldHRpbmdEcmF3ZXJGdW4oKVwiPjwvZGl2PlxuXG48bmctdGVtcGxhdGUgI2FjY29yZGlvblRlbXBsYXRlIGxldC1hY2NvcmRpb25Db250ZW50PVwiYWNjb3JkaW9uQ29udGVudFwiPlxuICAgIDxuZ2ItYWNjb3JkaW9uIFtkZXN0cm95T25IaWRlXT1cInRydWVcIiAjYWNjPVwibmdiQWNjb3JkaW9uXCIgW2FjdGl2ZUlkc109XCJhY3RpdmVJRFwiPlxuICAgICAgICA8bmdiLXBhbmVsIFtpZF09XCJhY2NvcmRpb25Db250ZW50LmxhYmVsXCI+XG5cbiAgICAgICAgICAgIDxuZy10ZW1wbGF0ZSBuZ2JQYW5lbEhlYWRlcj5cbiAgICAgICAgICAgICAgICA8YnV0dG9uIG5nYlBhbmVsVG9nZ2xlIHJvdXRlckxpbmtBY3RpdmU9XCJhY3RpdmUtaXRlbVwiIGNsYXNzPVwidnNtLWxpbmtcIlxuICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J2N1c3RvbVBhZGRpbmcnOiAhYWNjb3JkaW9uQ29udGVudD8uaWNvbn1cIj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBpY29uIG1lLTNcIj57eyBhY2NvcmRpb25Db250ZW50Py5pY29uIH19PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmdy1ub3JtYWxcIj57eyBhY2NvcmRpb25Db250ZW50Py5sYWJlbCB9fTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzPVwidnNtLWFycm93XCI+PC9pPlxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cblxuICAgICAgICAgICAgPG5nLXRlbXBsYXRlIG5nYlBhbmVsQ29udGVudD5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidnNtLWRyb3Bkb3duXCI+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJ2c20tbGlzdFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgc3VibWVudUl0ZW0gb2YgYWNjb3JkaW9uQ29udGVudD8uY2hpbGRyZW5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiIXN1Ym1lbnVJdGVtLnN1YkxhYmVsOyBlbHNlIHN1Yk1lbnVTdWJIZWFkZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgY2xhc3M9XCJ2c20tbGluayBtYi0xIG1zLTNcIiBbbmdDbGFzc109XCJ7J3NlbGVjdGVkJzogaXNBY3RpdmVSb3V0ZShzdWJtZW51SXRlbSl9XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlckxpbmtBY3RpdmU9XCJhY3RpdmUtaXRlbVwiIChjbGljayk9XCJjaGFuZ2VBY2NvcmRpb25TdGF0ZShhY2NvcmRpb25Db250ZW50KTsgbmF2aWdhdGUoc3VibWVudUl0ZW0pXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCBpY29uIG1lLTNcIj4ge3sgc3VibWVudUl0ZW0/Lmljb24gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gW25nQ2xhc3NdPVwieydmdy1ib2xkJzogaXNBY3RpdmVSb3V0ZShvcGVuTWVudUNoaWxkcmVuKX1cIj4ge3sgc3VibWVudUl0ZW0/LmxhYmVsIH19IDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2E+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5nLXRlbXBsYXRlICNzdWJNZW51U3ViSGVhZGVyPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibXMtNCB0ZXh0LXNlY29uZGFyeSBmdy1ib2xkIG1iLTJcIj4ge3sgc3VibWVudUl0ZW0uc3ViTGFiZWwgfX0gPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9uZy10ZW1wbGF0ZT5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvbmctdGVtcGxhdGU+XG4gICAgICAgIDwvbmdiLXBhbmVsPlxuICAgIDwvbmdiLWFjY29yZGlvbj5cbjwvbmctdGVtcGxhdGU+XG5cbjxuZy10ZW1wbGF0ZSAjY2xvc2VkU2lkZWJhclRlbXBsYXRlIGxldC1tZW51SXRlbT1cIm1lbnVJdGVtXCI+XG4gICAgPGEgY2xhc3M9XCJ2c20tbGluayBtYi0xIGNsb3NlZFNpZGVCYXJJY29uUGFkZGluZ1wiIFtuZ0NsYXNzXT1cInsnc2VsZWN0ZWQnOiBpc0FjdGl2ZVJvdXRlKG1lbnVJdGVtKX1cIiByb3V0ZXJMaW5rQWN0aXZlPVwiYWN0aXZlLWl0ZW1cIlxuICAgICAgICAoY2xpY2spPVwibWVudUl0ZW0uaXNCYWNrQnV0dG9uID8gYmFja0Z1bmMobWVudUl0ZW0pIDogb25NZW51Q2xpY2sobWVudUl0ZW0pOyBuYXZpZ2F0ZShtZW51SXRlbSlcIlxuICAgICAgICBbbWF0VG9vbHRpcF09XCJtZW51SXRlbT8ubGFiZWxcIiBtYXRUb29sdGlwUG9zaXRpb249XCJsZWZ0XCIgbWF0VG9vbHRpcENsYXNzPVwic2lkZUJhclRvb2x0aXBcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXJcIj5cbiAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwibWF0ZXJpYWwtc3ltYm9scy1vdXRsaW5lZCB2c20taWNvbiBpY29uIG1lLTNcIj4ge3sgbWVudUl0ZW0/Lmljb24gfX1cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9hPlxuPC9uZy10ZW1wbGF0ZT4iXX0=
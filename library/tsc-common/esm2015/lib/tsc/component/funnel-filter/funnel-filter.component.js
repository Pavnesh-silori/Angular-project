import { Component, EventEmitter, Input, Output } from '@angular/core';
import { FormControl } from '@angular/forms';
import { MATERIAL_CONSTANT } from '../../constant/material.constant';
import { MatSelectSearchService } from '../../service/mat-select-search.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/material/button";
import * as i2 from "@angular/material/form-field";
import * as i3 from "@angular/material/select";
import * as i4 from "@angular/material/core";
import * as i5 from "ngx-mat-select-search";
import * as i6 from "@angular/common";
import * as i7 from "@angular/forms";
export class FunnelFilterComponent {
    constructor() {
        this.MATERIAL_CONSTANT = MATERIAL_CONSTANT;
        this.header = 'Filter Key'; /* header value shown next to funnel icon */
        this.active = false; /* show filter icon with blue color or not */
        this.showSearchBar = true; /* show search bar or not */
        this.searchByPlaceholder = 'name'; /* search placehodler */
        this.searchBy = ['name']; /* in search bar which column used to search */
        this.selectAllLabel = 'All'; /* in dropdown first column for all */
        this.entityList = []; /* filter list */
        this.view = 'name'; /* values visible to user in dropdown */
        this.value = 'keyID'; /* value that gets passes to form control */
        this.resetFlag = false; /*reset all filter */
        this.mono = new EventEmitter(); /* emits selected value for single select */
        this.multi = new EventEmitter(); /* emits selected value for multiple select */
        this.selected = new EventEmitter(); /* output for selected object for chip creation */
        this.all_entities_length = 0;
        this.filterFC = new FormControl();
        this.init = true;
        this.all_entities_value = [];
        this.selected_entities = new Set();
        this.multiFilterApplied = false;
        this.searchUtil = new MatSelectSearchService(this.searchBy);
    }
    ;
    ngOnInit() { }
    ngOnChanges(changes) {
        if (changes.searchBy) {
            this.searchUtil.searchBy = this.searchBy;
        }
        if ((changes === null || changes === void 0 ? void 0 : changes.entityList) || ((changes === null || changes === void 0 ? void 0 : changes.resetFlag) && !changes.resetFlag.firstChange)) {
            this.addAllEntities();
        }
    }
    addAllEntities() {
        if (this.entityList != null && this.entityList != undefined && this.entityList.length > 0) {
            if (this.type == 'multi') {
                this.all_entities_length = this.entityList.length;
                this.all_entities_value = ['all'];
                this.entityList.forEach(entity => {
                    this.selected_entities.add(entity);
                    this.all_entities_value.push(entity[this.value]);
                });
                this.selectFC.patchValue(this.all_entities_value);
            }
            this.searchUtil.entityArr = this.entityList;
            this.searchUtil.createSubscription();
        }
    }
    selectionChange(value) { this.mono.emit(value); }
    selectedEntity(entity) { this.selected.next(entity); }
    resetOnNoChange(event) {
        if (event) {
            this.prev = this.selectFC.value;
            this.multiFilterApplied = false;
        }
        else {
            if (this.prev != this.selectFC.value && !this.multiFilterApplied) {
                this.selectFC.patchValue(this.prev, { onlySelf: true });
            }
        }
    }
    selectEntity(entity /* entity: json */) {
        if (!this.selected_entities.delete(entity)) {
            this.selected_entities.add(entity);
        }
        const k = this.selectFC.value.indexOf('all');
        if (k > -1) {
            if (this.selectFC.value.length > this.all_entities_length) {
                this.selectFC.patchValue([]);
            }
            else if (this.selectFC.value.length == this.all_entities_length) {
                this.selectFC.value.splice(k, 1);
                this.selectFC.patchValue(this.selectFC.value);
            }
            else {
                this.selectFC.patchValue(this.all_entities_value);
            }
        }
        else {
            if (this.selectFC.value.length == this.all_entities_length) {
                this.selectFC.patchValue(this.all_entities_value);
            }
        }
    }
    applyFilter() {
        if (this.selectFC.value.length == 0)
            return;
        this.multiFilterApplied = true;
        this.multi.emit(this.selectFC.value);
        this.selected.next(this.selected_entities);
    }
    selectAllEntities() {
        if (!this.selectFC.value.includes('all') && this.selectFC.value.length > 0) {
            this.selectFC.reset([]);
            this.selected_entities.clear();
            return;
        }
        this.selectFC.patchValue(this.all_entities_value);
        this.entityList.forEach(entity => this.selected_entities.add(entity));
    }
}
FunnelFilterComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: FunnelFilterComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
FunnelFilterComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "12.0.0", version: "12.2.17", type: FunnelFilterComponent, selector: "funnel-filter", inputs: { header: "header", active: "active", showSearchBar: "showSearchBar", searchByPlaceholder: "searchByPlaceholder", searchBy: "searchBy", selectAllLabel: "selectAllLabel", entityList: "entityList", view: "view", value: "value", type: "type", selectFC: "selectFC", resetFlag: "resetFlag" }, outputs: { mono: "mono", multi: "multi", selected: "selected" }, usesOnChanges: true, ngImport: i0, template: "<!-- for single select -->\n<ng-container *ngIf=\"type == 'mono'\">\n    <div class=\"row\">\n        <div class=\"col-sm-12 centerAlignVertical d-flex justify-content-start\">\n            {{ header }}\n            <div>\n                <button mat-icon-button (click)=\"select.open()\">\n                    <span class=\"fs-4 material-symbols-outlined funnel\" [ngClass]=\"{'text-primary': active}\">\n                        filter_alt\n                    </span>\n                    <div class=\"funnelFilterDD\">\n                        <mat-form-field>\n                            <mat-select #select [formControl]=\"selectFC\" (selectionChange)=\"selectionChange($event);\">\n                                <mat-select-trigger class=\"d-none\"></mat-select-trigger>\n                                <mat-option *ngIf=\"showSearchBar\">\n                                    <ngx-mat-select-search [formControl]=\"searchUtil.filterFC\"\n                                        [placeholderLabel]=\"'Search by '+ searchByPlaceholder\"\n                                        noEntriesFoundLabel=\"No match found.\">\n                                    </ngx-mat-select-search>\n                                </mat-option>\n\n                                <mat-option *ngFor=\"let entity of searchUtil.filteredEntities | async\"\n                                    [value]=\"entity?.[value]\" (click)=\"selectedEntity(entity)\">\n                                    <span class=\"d-flex justify-content-between\">\n                                        {{ entity?.[view] }}\n                                    </span>\n                                </mat-option>\n                            </mat-select>\n                        </mat-form-field>\n                    </div>\n                </button>\n            </div>\n        </div>\n    </div>\n</ng-container>\n\n\n<!-- for multiple select -->\n<ng-container *ngIf=\"type == 'multi'\">\n    <div class=\"row\">\n        <div class=\"col-sm-12 centerAlignVertical justify-content-start pe-0\">\n            {{ header }}\n            <div>\n                <button mat-icon-button (click)=\"multiSelect.open()\">\n                    <span class=\"material-symbols-outlined fs-4 funnel\" [ngClass]=\"{'text-primary': active}\">\n                        filter_alt\n                    </span>\n                    <div class=\"funnelFilterDD\">\n                        <mat-form-field>\n                            <mat-select #multiSelect [formControl]=\"selectFC\" (openedChange)=\"resetOnNoChange($event)\"\n                                multiple>\n                                <mat-option *ngIf=\"showSearchBar\">\n                                    <ngx-mat-select-search [formControl]=\"searchUtil.filterFC\"\n                                        [placeholderLabel]=\"'Search by '+ searchByPlaceholder\"\n                                        noEntriesFoundLabel=\"No match found.\">\n                                    </ngx-mat-select-search>\n                                </mat-option>\n                                <mat-select-trigger class=\"d-none\"></mat-select-trigger>\n                                <mat-option value=\"all\" (click)=\"selectAllEntities()\">\n                                    {{ selectAllLabel }}\n                                </mat-option>\n                                <mat-option *ngFor=\"let entity of searchUtil.filteredEntities | async\"\n                                    [value]=\"entity[value]\" (click)=\"selectEntity(entity)\">\n                                    {{ entity[view] }}\n                                </mat-option>\n                                <div class=\"row m-0 dropdownFooter\">\n                                    <div class=\"col-sm-12\">\n                                        <button class=\"button btn btn-primary float-end m-1\"\n                                            [ngClass]=\"{'disableBtn': selectFC.value.length == 0}\"\n                                            (click)=\"selectFC.value.length == 0 ? null : applyFilter();\"\n                                            (click)=\"selectFC.value.length == 0 ? null : multiSelect.close();\" matRipple\n                                            [matRippleCentered]=\"MATERIAL_CONSTANT.matRippleCentered\">\n                                            Apply\n                                        </button>\n                                    </div>\n                                </div>\n                            </mat-select>\n                        </mat-form-field>\n                    </div>\n                </button>\n            </div>\n        </div>\n    </div>\n</ng-container>", styles: [".funnelFilterDD{width:0;height:0;overflow:hidden}.dropdownFooter{position:sticky;bottom:0;background-color:#fff;padding:8px;z-index:1000}\n"], components: [{ type: i1.MatButton, selector: "button[mat-button], button[mat-raised-button], button[mat-icon-button],             button[mat-fab], button[mat-mini-fab], button[mat-stroked-button],             button[mat-flat-button]", inputs: ["disabled", "disableRipple", "color"], exportAs: ["matButton"] }, { type: i2.MatFormField, selector: "mat-form-field", inputs: ["color", "floatLabel", "appearance", "hideRequiredMarker", "hintLabel"], exportAs: ["matFormField"] }, { type: i3.MatSelect, selector: "mat-select", inputs: ["disabled", "disableRipple", "tabIndex"], exportAs: ["matSelect"] }, { type: i4.MatOption, selector: "mat-option", exportAs: ["matOption"] }, { type: i5.MatSelectSearchComponent, selector: "ngx-mat-select-search", inputs: ["placeholderLabel", "type", "closeIcon", "closeSvgIcon", "noEntriesFoundLabel", "indexAndLengthScreenReaderText", "clearSearchInput", "searching", "disableInitialFocus", "enableClearOnEscapePressed", "preventHomeEndKeyPropagation", "disableScrollToActiveOnOptionsChanged", "ariaLabel", "showToggleAllCheckbox", "toggleAllCheckboxChecked", "toggleAllCheckboxIndeterminate", "toggleAllCheckboxTooltipMessage", "toogleAllCheckboxTooltipPosition", "hideClearSearchButton", "alwaysRestoreSelectedOptionsMulti"], outputs: ["toggleAll"] }], directives: [{ type: i6.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { type: i6.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { type: i7.NgControlStatus, selector: "[formControlName],[ngModel],[formControl]" }, { type: i7.FormControlDirective, selector: "[formControl]", inputs: ["disabled", "formControl", "ngModel"], outputs: ["ngModelChange"], exportAs: ["ngForm"] }, { type: i3.MatSelectTrigger, selector: "mat-select-trigger" }, { type: i6.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { type: i4.MatRipple, selector: "[mat-ripple], [matRipple]", inputs: ["matRippleRadius", "matRippleDisabled", "matRippleTrigger", "matRippleColor", "matRippleUnbounded", "matRippleCentered", "matRippleAnimation"], exportAs: ["matRipple"] }], pipes: { "async": i6.AsyncPipe } });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.2.17", ngImport: i0, type: FunnelFilterComponent, decorators: [{
            type: Component,
            args: [{
                    selector: 'funnel-filter',
                    templateUrl: './funnel-filter.component.html',
                    styleUrls: ['./funnel-filter.component.scss']
                }]
        }], ctorParameters: function () { return []; }, propDecorators: { header: [{
                type: Input
            }], active: [{
                type: Input
            }], showSearchBar: [{
                type: Input
            }], searchByPlaceholder: [{
                type: Input
            }], searchBy: [{
                type: Input
            }], selectAllLabel: [{
                type: Input
            }], entityList: [{
                type: Input
            }], view: [{
                type: Input
            }], value: [{
                type: Input
            }], type: [{
                type: Input
            }], selectFC: [{
                type: Input
            }], resetFlag: [{
                type: Input
            }], mono: [{
                type: Output
            }], multi: [{
                type: Output
            }], selected: [{
                type: Output
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZnVubmVsLWZpbHRlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L3RzYy1jb21tb24vc3JjL2xpYi90c2MvY29tcG9uZW50L2Z1bm5lbC1maWx0ZXIvZnVubmVsLWZpbHRlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9saWJyYXJ5L3RzYy1jb21tb24vc3JjL2xpYi90c2MvY29tcG9uZW50L2Z1bm5lbC1maWx0ZXIvZnVubmVsLWZpbHRlci5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsU0FBUyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQVUsTUFBTSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUU5RixPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFFN0MsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sa0NBQWtDLENBQUM7QUFFckUsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0seUNBQXlDLENBQUM7Ozs7Ozs7OztBQU9qRixNQUFNLE9BQU8scUJBQXFCO0lBbUM5QjtRQWpDQSxzQkFBaUIsR0FBRyxpQkFBaUIsQ0FBQztRQUU3QixXQUFNLEdBQVcsWUFBWSxDQUFDLENBQUMsNENBQTRDO1FBQzNFLFdBQU0sR0FBWSxLQUFLLENBQUMsQ0FBQyw2Q0FBNkM7UUFDdEUsa0JBQWEsR0FBWSxJQUFJLENBQUMsQ0FBQyw0QkFBNEI7UUFDM0Qsd0JBQW1CLEdBQVcsTUFBTSxDQUFDLENBQUMsd0JBQXdCO1FBQzlELGFBQVEsR0FBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsK0NBQStDO1FBQzlFLG1CQUFjLEdBQVcsS0FBSyxDQUFDLENBQUMsc0NBQXNDO1FBQ3RFLGVBQVUsR0FBUSxFQUFFLENBQUMsQ0FBQyxpQkFBaUI7UUFDdkMsU0FBSSxHQUFXLE1B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RixxQkFBcUI7a0JBTGpDLFNBQVM7bUJBQUM7b0JBQ1AsUUFBUSxFQUFFLGVBQWU7b0JBQ3pCLFdBQVcsRUFBRSxnQ0FBZ0M7b0JBQzdDLFNBQVMsRUFBRSxDQUFDLGdDQUFnQyxDQUFDO2lCQUNoRDswRUFLWSxNQUFNO3NCQUFkLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csbUJBQW1CO3NCQUEzQixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csY0FBYztzQkFBdEIsS0FBSztnQkFDRyxVQUFVO3NCQUFsQixLQUFLO2dCQUNHLElBQUk7c0JBQVosS0FBSztnQkFDRyxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLFFBQVE7c0JBQWhCLEtBQUs7Z0JBQ0csU0FBUztzQkFBakIsS0FBSztnQkFFSSxJQUFJO3NCQUFiLE1BQU07Z0JBQ0csS0FBSztzQkFBZCxNQUFNO2dCQUNHLFFBQVE7c0JBQWpCLE1BQU0iLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDb21wb25lbnQsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE9uSW5pdCwgT3V0cHV0LCBTaW1wbGVDaGFuZ2VzIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbmltcG9ydCB7IEZvcm1Db250cm9sIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuXG5pbXBvcnQgeyBNQVRFUklBTF9DT05TVEFOVCB9IGZyb20gJy4uLy4uL2NvbnN0YW50L21hdGVyaWFsLmNvbnN0YW50JztcblxuaW1wb3J0IHsgTWF0U2VsZWN0U2VhcmNoU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2UvbWF0LXNlbGVjdC1zZWFyY2guc2VydmljZSc7XG5cbkBDb21wb25lbnQoe1xuICAgIHNlbGVjdG9yOiAnZnVubmVsLWZpbHRlcicsXG4gICAgdGVtcGxhdGVVcmw6ICcuL2Z1bm5lbC1maWx0ZXIuY29tcG9uZW50Lmh0bWwnLFxuICAgIHN0eWxlVXJsczogWycuL2Z1bm5lbC1maWx0ZXIuY29tcG9uZW50LnNjc3MnXVxufSlcbmV4cG9ydCBjbGFzcyBGdW5uZWxGaWx0ZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgTUFURVJJQUxfQ09OU1RBTlQgPSBNQVRFUklBTF9DT05TVEFOVDtcblxuICAgIEBJbnB1dCgpIGhlYWRlcjogc3RyaW5nID0gJ0ZpbHRlciBLZXknOyAvKiBoZWFkZXIgdmFsdWUgc2hvd24gbmV4dCB0byBmdW5uZWwgaWNvbiAqL1xuICAgIEBJbnB1dCgpIGFjdGl2ZTogYm9vbGVhbiA9IGZhbHNlOyAvKiBzaG93IGZpbHRlciBpY29uIHdpdGggYmx1ZSBjb2xvciBvciBub3QgKi9cbiAgICBASW5wdXQoKSBzaG93U2VhcmNoQmFyOiBib29sZWFuID0gdHJ1ZTsgLyogc2hvdyBzZWFyY2ggYmFyIG9yIG5vdCAqL1xuICAgIEBJbnB1dCgpIHNlYXJjaEJ5UGxhY2Vob2xkZXI6IHN0cmluZyA9ICduYW1lJzsgLyogc2VhcmNoIHBsYWNlaG9kbGVyICovXG4gICAgQElucHV0KCkgc2VhcmNoQnk6IHN0cmluZ1tdID0gWyduYW1lJ107IC8qIGluIHNlYXJjaCBiYXIgd2hpY2ggY29sdW1uIHVzZWQgdG8gc2VhcmNoICovXG4gICAgQElucHV0KCkgc2VsZWN0QWxsTGFiZWw6IHN0cmluZyA9ICdBbGwnOyAvKiBpbiBkcm9wZG93biBmaXJzdCBjb2x1bW4gZm9yIGFsbCAqL1xuICAgIEBJbnB1dCgpIGVudGl0eUxpc3Q6IGFueSA9IFtdOyAvKiBmaWx0ZXIgbGlzdCAqL1xuICAgIEBJbnB1dCgpIHZpZXc6IHN0cmluZyA9ICduYW1lJzsgLyogdmFsdWVzIHZpc2libGUgdG8gdXNlciBpbiBkcm9wZG93biAqL1xuICAgIEBJbnB1dCgpIHZhbHVlOiBzdHJpbmcgPSAna2V5SUQnOyAvKiB2YWx1ZSB0aGF0IGdldHMgcGFzc2VzIHRvIGZvcm0gY29udHJvbCAqL1xuICAgIEBJbnB1dCgpIHR5cGU6ICdtb25vJyB8ICdtdWx0aSc7IC8qIHR5cGUgb2Ygc2VsZWN0IGFjY2VwdHMgdmFsdWVzOiBtb25vL211bHRpICovXG4gICAgQElucHV0KCkgc2VsZWN0RkM6IEZvcm1Db250cm9sOyAvKiBmb3JtY29udHJvbCBmb3IgZmlsdGVyIHNlbGVjdCAqLyAgICAgICAgXG4gICAgQElucHV0KCkgcmVzZXRGbGFnOiBib29sZWFuID0gZmFsc2UgLypyZXNldCBhbGwgZmlsdGVyICovXG5cbiAgICBAT3V0cHV0KCkgbW9ubzogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8qIGVtaXRzIHNlbGVjdGVkIHZhbHVlIGZvciBzaW5nbGUgc2VsZWN0ICovXG4gICAgQE91dHB1dCgpIG11bHRpOiBFdmVudEVtaXR0ZXI8YW55PiA9IG5ldyBFdmVudEVtaXR0ZXIoKTsgLyogZW1pdHMgc2VsZWN0ZWQgdmFsdWUgZm9yIG11bHRpcGxlIHNlbGVjdCAqL1xuICAgIEBPdXRwdXQoKSBzZWxlY3RlZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyKCk7IC8qIG91dHB1dCBmb3Igc2VsZWN0ZWQgb2JqZWN0IGZvciBjaGlwIGNyZWF0aW9uICovXG5cblxuICAgIGFsbF9lbnRpdGllc19sZW5ndGg6IG51bWJlciA9IDA7XG5cbiAgICBmaWx0ZXJGQzogRm9ybUNvbnRyb2wgPSBuZXcgRm9ybUNvbnRyb2woKTtcblxuICAgIGluaXQ6IGJvb2xlYW4gPSB0cnVlO1xuICAgIGFsbF9lbnRpdGllc192YWx1ZTogYW55W10gPSBbXTtcbiAgICBzZWxlY3RlZF9lbnRpdGllczogU2V0PGFueT4gPSBuZXcgU2V0PGFueT4oKTtcblxuICAgIHByZXY7XG4gICAgbXVsdGlGaWx0ZXJBcHBsaWVkOiBib29sZWFuID0gZmFsc2U7XG5cbiAgICBzZWFyY2hVdGlsOiBNYXRTZWxlY3RTZWFyY2hTZXJ2aWNlID0gbmV3IE1hdFNlbGVjdFNlYXJjaFNlcnZpY2UodGhpcy5zZWFyY2hCeSk7O1xuXG4gICAgY29uc3RydWN0b3IoKSB7IH1cblxuICAgIG5nT25Jbml0KCk6IHZvaWQge31cblxuICAgIG5nT25DaGFuZ2VzKGNoYW5nZXM6IFNpbXBsZUNoYW5nZXMpIHtcbiAgICAgICAgaWYoY2hhbmdlcy5zZWFyY2hCeSkge1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hVdGlsLnNlYXJjaEJ5ID0gdGhpcy5zZWFyY2hCeTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoKGNoYW5nZXM/LmVudGl0eUxpc3QpIHx8IChjaGFuZ2VzPy5yZXNldEZsYWcgJiYgIWNoYW5nZXMucmVzZXRGbGFnLmZpcnN0Q2hhbmdlKSkge1xuICAgICAgICAgICAgdGhpcy5hZGRBbGxFbnRpdGllcygpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgYWRkQWxsRW50aXRpZXMoKSB7XG4gICAgICAgIGlmICh0aGlzLmVudGl0eUxpc3QgIT0gbnVsbCAmJiB0aGlzLmVudGl0eUxpc3QgIT0gdW5kZWZpbmVkICYmIHRoaXMuZW50aXR5TGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBpZiAodGhpcy50eXBlID09ICdtdWx0aScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFsbF9lbnRpdGllc19sZW5ndGggPSB0aGlzLmVudGl0eUxpc3QubGVuZ3RoO1xuICAgICAgICAgICAgICAgIHRoaXMuYWxsX2VudGl0aWVzX3ZhbHVlID0gWydhbGwnXTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZW50aXR5TGlzdC5mb3JFYWNoKGVudGl0eSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfZW50aXRpZXMuYWRkKGVudGl0eSlcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGxfZW50aXRpZXNfdmFsdWUucHVzaChlbnRpdHlbdGhpcy52YWx1ZV0pXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEZDLnBhdGNoVmFsdWUodGhpcy5hbGxfZW50aXRpZXNfdmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNlYXJjaFV0aWwuZW50aXR5QXJyID0gdGhpcy5lbnRpdHlMaXN0O1xuICAgICAgICAgICAgdGhpcy5zZWFyY2hVdGlsLmNyZWF0ZVN1YnNjcmlwdGlvbigpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgc2VsZWN0aW9uQ2hhbmdlKHZhbHVlKSB7IHRoaXMubW9uby5lbWl0KHZhbHVlKTsgfVxuICAgIHNlbGVjdGVkRW50aXR5KGVudGl0eSkgeyB0aGlzLnNlbGVjdGVkLm5leHQoZW50aXR5KTsgfVxuXG4gICAgcmVzZXRPbk5vQ2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIGlmIChldmVudCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2ID0gdGhpcy5zZWxlY3RGQy52YWx1ZTtcbiAgICAgICAgICAgIHRoaXMubXVsdGlGaWx0ZXJBcHBsaWVkID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5wcmV2ICE9IHRoaXMuc2VsZWN0RkMudmFsdWUgJiYgIXRoaXMubXVsdGlGaWx0ZXJBcHBsaWVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RGQy5wYXRjaFZhbHVlKHRoaXMucHJldiwgeyBvbmx5U2VsZjogdHJ1ZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNlbGVjdEVudGl0eShlbnRpdHkgLyogZW50aXR5OiBqc29uICovKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RlZF9lbnRpdGllcy5kZWxldGUoZW50aXR5KSkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZF9lbnRpdGllcy5hZGQoZW50aXR5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGsgPSB0aGlzLnNlbGVjdEZDLnZhbHVlLmluZGV4T2YoJ2FsbCcpO1xuICAgICAgICBpZiAoayA+IC0xKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RGQy52YWx1ZS5sZW5ndGggPiB0aGlzLmFsbF9lbnRpdGllc19sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEZDLnBhdGNoVmFsdWUoW10pO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNlbGVjdEZDLnZhbHVlLmxlbmd0aCA9PSB0aGlzLmFsbF9lbnRpdGllc19sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEZDLnZhbHVlLnNwbGljZShrLCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdEZDLnBhdGNoVmFsdWUodGhpcy5zZWxlY3RGQy52YWx1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0RkMucGF0Y2hWYWx1ZSh0aGlzLmFsbF9lbnRpdGllc192YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RGQy52YWx1ZS5sZW5ndGggPT0gdGhpcy5hbGxfZW50aXRpZXNfbGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RGQy5wYXRjaFZhbHVlKHRoaXMuYWxsX2VudGl0aWVzX3ZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGFwcGx5RmlsdGVyKCkge1xuICAgICAgICBpZiAodGhpcy5zZWxlY3RGQy52YWx1ZS5sZW5ndGggPT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMubXVsdGlGaWx0ZXJBcHBsaWVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5tdWx0aS5lbWl0KHRoaXMuc2VsZWN0RkMudmFsdWUpO1xuICAgICAgICB0aGlzLnNlbGVjdGVkLm5leHQodGhpcy5zZWxlY3RlZF9lbnRpdGllcyk7XG4gICAgfVxuXG4gICAgc2VsZWN0QWxsRW50aXRpZXMoKSB7XG4gICAgICAgIGlmICghdGhpcy5zZWxlY3RGQy52YWx1ZS5pbmNsdWRlcygnYWxsJykgJiYgdGhpcy5zZWxlY3RGQy52YWx1ZS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdEZDLnJlc2V0KFtdKTtcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRfZW50aXRpZXMuY2xlYXIoKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2VsZWN0RkMucGF0Y2hWYWx1ZSh0aGlzLmFsbF9lbnRpdGllc192YWx1ZSk7XG4gICAgICAgIHRoaXMuZW50aXR5TGlzdC5mb3JFYWNoKGVudGl0eSA9PiB0aGlzLnNlbGVjdGVkX2VudGl0aWVzLmFkZChlbnRpdHkpKTtcblxuICAgIH1cbn1cbiIsIjwhLS0gZm9yIHNpbmdsZSBzZWxlY3QgLS0+XG48bmctY29udGFpbmVyICpuZ0lmPVwidHlwZSA9PSAnbW9ubydcIj5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tMTIgY2VudGVyQWxpZ25WZXJ0aWNhbCBkLWZsZXgganVzdGlmeS1jb250ZW50LXN0YXJ0XCI+XG4gICAgICAgICAgICB7eyBoZWFkZXIgfX1cbiAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgPGJ1dHRvbiBtYXQtaWNvbi1idXR0b24gKGNsaWNrKT1cInNlbGVjdC5vcGVuKClcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJmcy00IG1hdGVyaWFsLXN5bWJvbHMtb3V0bGluZWQgZnVubmVsXCIgW25nQ2xhc3NdPVwieyd0ZXh0LXByaW1hcnknOiBhY3RpdmV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJfYWx0XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZ1bm5lbEZpbHRlckREXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWZvcm0tZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1zZWxlY3QgI3NlbGVjdCBbZm9ybUNvbnRyb2xdPVwic2VsZWN0RkNcIiAoc2VsZWN0aW9uQ2hhbmdlKT1cInNlbGVjdGlvbkNoYW5nZSgkZXZlbnQpO1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWF0LXNlbGVjdC10cmlnZ2VyIGNsYXNzPVwiZC1ub25lXCI+PC9tYXQtc2VsZWN0LXRyaWdnZXI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtb3B0aW9uICpuZ0lmPVwic2hvd1NlYXJjaEJhclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG5neC1tYXQtc2VsZWN0LXNlYXJjaCBbZm9ybUNvbnRyb2xdPVwic2VhcmNoVXRpbC5maWx0ZXJGQ1wiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3BsYWNlaG9sZGVyTGFiZWxdPVwiJ1NlYXJjaCBieSAnKyBzZWFyY2hCeVBsYWNlaG9sZGVyXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub0VudHJpZXNGb3VuZExhYmVsPVwiTm8gbWF0Y2ggZm91bmQuXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L25neC1tYXQtc2VsZWN0LXNlYXJjaD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtb3B0aW9uPlxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtb3B0aW9uICpuZ0Zvcj1cImxldCBlbnRpdHkgb2Ygc2VhcmNoVXRpbC5maWx0ZXJlZEVudGl0aWVzIHwgYXN5bmNcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW3ZhbHVlXT1cImVudGl0eT8uW3ZhbHVlXVwiIChjbGljayk9XCJzZWxlY3RlZEVudGl0eShlbnRpdHkpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlblwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt7IGVudGl0eT8uW3ZpZXddIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbWF0LW9wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21hdC1zZWxlY3Q+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L21hdC1mb3JtLWZpZWxkPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICA8L2Rpdj5cbjwvbmctY29udGFpbmVyPlxuXG5cbjwhLS0gZm9yIG11bHRpcGxlIHNlbGVjdCAtLT5cbjxuZy1jb250YWluZXIgKm5nSWY9XCJ0eXBlID09ICdtdWx0aSdcIj5cbiAgICA8ZGl2IGNsYXNzPVwicm93XCI+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJjb2wtc20tMTIgY2VudGVyQWxpZ25WZXJ0aWNhbCBqdXN0aWZ5LWNvbnRlbnQtc3RhcnQgcGUtMFwiPlxuICAgICAgICAgICAge3sgaGVhZGVyIH19XG4gICAgICAgICAgICA8ZGl2PlxuICAgICAgICAgICAgICAgIDxidXR0b24gbWF0LWljb24tYnV0dG9uIChjbGljayk9XCJtdWx0aVNlbGVjdC5vcGVuKClcIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJtYXRlcmlhbC1zeW1ib2xzLW91dGxpbmVkIGZzLTQgZnVubmVsXCIgW25nQ2xhc3NdPVwieyd0ZXh0LXByaW1hcnknOiBhY3RpdmV9XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXJfYWx0XG4gICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImZ1bm5lbEZpbHRlckREXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICA8bWF0LWZvcm0tZmllbGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1zZWxlY3QgI211bHRpU2VsZWN0IFtmb3JtQ29udHJvbF09XCJzZWxlY3RGQ1wiIChvcGVuZWRDaGFuZ2UpPVwicmVzZXRPbk5vQ2hhbmdlKCRldmVudClcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtdWx0aXBsZT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1vcHRpb24gKm5nSWY9XCJzaG93U2VhcmNoQmFyXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bmd4LW1hdC1zZWxlY3Qtc2VhcmNoIFtmb3JtQ29udHJvbF09XCJzZWFyY2hVdGlsLmZpbHRlckZDXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbcGxhY2Vob2xkZXJMYWJlbF09XCInU2VhcmNoIGJ5ICcrIHNlYXJjaEJ5UGxhY2Vob2xkZXJcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vRW50cmllc0ZvdW5kTGFiZWw9XCJObyBtYXRjaCBmb3VuZC5cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvbmd4LW1hdC1zZWxlY3Qtc2VhcmNoPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L21hdC1vcHRpb24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxtYXQtc2VsZWN0LXRyaWdnZXIgY2xhc3M9XCJkLW5vbmVcIj48L21hdC1zZWxlY3QtdHJpZ2dlcj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG1hdC1vcHRpb24gdmFsdWU9XCJhbGxcIiAoY2xpY2spPVwic2VsZWN0QWxsRW50aXRpZXMoKVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge3sgc2VsZWN0QWxsTGFiZWwgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8bWF0LW9wdGlvbiAqbmdGb3I9XCJsZXQgZW50aXR5IG9mIHNlYXJjaFV0aWwuZmlsdGVyZWRFbnRpdGllcyB8IGFzeW5jXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFt2YWx1ZV09XCJlbnRpdHlbdmFsdWVdXCIgKGNsaWNrKT1cInNlbGVjdEVudGl0eShlbnRpdHkpXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7eyBlbnRpdHlbdmlld10gfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicm93IG0tMCBkcm9wZG93bkZvb3RlclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC1zbS0xMlwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XCJidXR0b24gYnRuIGJ0bi1wcmltYXJ5IGZsb2F0LWVuZCBtLTFcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbbmdDbGFzc109XCJ7J2Rpc2FibGVCdG4nOiBzZWxlY3RGQy52YWx1ZS5sZW5ndGggPT0gMH1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0RkMudmFsdWUubGVuZ3RoID09IDAgPyBudWxsIDogYXBwbHlGaWx0ZXIoKTtcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoY2xpY2spPVwic2VsZWN0RkMudmFsdWUubGVuZ3RoID09IDAgPyBudWxsIDogbXVsdGlTZWxlY3QuY2xvc2UoKTtcIiBtYXRSaXBwbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW21hdFJpcHBsZUNlbnRlcmVkXT1cIk1BVEVSSUFMX0NPTlNUQU5ULm1hdFJpcHBsZUNlbnRlcmVkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFwcGx5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPC9tYXQtZm9ybS1maWVsZD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG48L25nLWNvbnRhaW5lcj4iXX0=
<div class="row">
    <div class="col-sm-6">
        <mat-card class="border cardOverwrite custom-mat-card" *ngIf="!hasFile()">
            <mat-card-content class="text-center p-3">
                <!-- <div class="col-sm-12">
                    <button mat-mini-fab class="text-white">
                        <input type="file" hidden (change)="onFileChange($event)" #fileInput>
                        <mat-icon (click)="fileInput.click()">upload</mat-icon>
                    </button>
                </div>

                <div class="col-sm-12 pt-2 fw-bold">
                    Drag and drop to import
                </div> -->

                <div class="col-sm-12 pt-3">
                    <button class="button btn btn-success" type="button">
                        <input type="file" accept=".xlsx,.xls" #fileInput class="file-input"
                            (change)="onFileChange($event)"> Choose file
                    </button>
                </div>

                <div class="col-sm-12 pt-1">
                    <span class="text-muted">
                        Maximum file size: 20MB
                    </span>
                </div>

                <div class="col-sm-12 pt-1">
                    <span class="text-muted">
                        Supported file types: .xlsx, .xls
                    </span>
                </div>
            </mat-card-content>
        </mat-card>

        <mat-card class="cardOverwrite">
            <div class="col-sm-12">
                <ng-container *ngIf="hasFile()">
                    <!-- <div class="row">
                        <div class="col-sm-12 fileInput">
                            <input type="file" accept=".xlsx,.xls" #fileInput class="form-control"
                                (change)="onFileChange($event)">
                        </div>
                    </div> -->

                    <div class="row pt-2 pb-2">
                        <div class="col-sm-12">
                            <div class="border rounded d-flex" [ngClass]="{'d-none': (isFileUpload == null)}">

                                <div class="p-1">
                                    <ng-container *ngTemplateOutlet="docImg"></ng-container>
                                </div>

                                <div class="p-1">
                                    <div class="centerAlignVertical p-1">
                                        {{ fileName }}<br>
                                        {{ fileSize }}
                                    </div>
                                </div>

                                <div class="ms-auto p-1">
                                    <button type="button" class="btn p-1" mat-icon-button (click)="resetFileInput()">
                                        <span class="material-symbols-outlined text-danger">
                                            delete
                                        </span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>

                <form [formGroup]="form">
                    <div class="row pt-2 pb-2">
                        <div class="col-sm-12">
                            <div class="radioBtnGroupLabel">
                                Map emission factor database fields while importing?
                            </div>
                            <mat-radio-group formControlName="isEmissionFactorMapped">
                                <div class="row my-2">
                                    <div class="col-sm-3">
                                        <mat-radio-button class="radioBtnLabel" [value]="true">
                                            Yes
                                        </mat-radio-button>
                                    </div>
                                    <div class="col-sm-3">
                                        <mat-radio-button class="radioBtnLabel" [value]="false">
                                            No
                                        </mat-radio-button>
                                    </div>
                                </div>
                            </mat-radio-group>
                        </div>
                    </div>

                    <div class="row pt-2 pb-2" *ngIf="getEmissionFactorMappedValue()">
                        <div class="col-sm-12">
                            <mat-form-field class="matFieldWidth100"
                                [appearance]="MaterialFormFieldAppearance.FORM_FIELD_APPEARANCE">
                                <mat-label class="formLabel">Emission Factor Database</mat-label>
                                <mat-select formControlName="emissionFactorSourceKeyID" multiple>
                                    <mat-option>
                                        <ngx-mat-select-search [formControl]="emfSearchUtil.filterFC"
                                            placeholderLabel="Search by emission factor database name"
                                            [noEntriesFoundLabel]="COMMON_CONSTANT.NO_MATCH_FOUND">
                                        </ngx-mat-select-search>
                                    </mat-option>
                                    <mat-option *ngFor="let item of emfSearchUtil.filteredEntities | async"
                                        [value]="item.emissionFactorSourceKeyID">
                                        <span class="d-flex justify-content-between">
                                            {{ item.emissionFactorSourceName }}
                                        </span>
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>
                    </div>
                </form>

                <div class="row pt-2 pb-2">
                    <div class="col-sm-12">
                        Download a <a class="text-primary cursorPointer" (click)="getTemplate()"> sample file</a> and compare it
                        to your import file to ensure
                        you
                        have the file perfect for import.
                    </div>
                </div>
            </div>
        </mat-card>

    </div>

    <div class="col-sm-6">
        <!-- <div class="col-sm-5"> -->
        <mat-card class="border cardOverwrite bg-light">
            <mat-card-content class="bg-grey">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="col-sm-12">
                            <span class="text-warning">
                                <mat-icon>lightbulb</mat-icon>
                            </span>
                            <span class="pageTitle">
                                Read me before importing
                            </span>
                        </div>

                        <div class="col-sm-12">
                            <ul class="pt-2 pe-4 ps-4">
                                <li class="p-1 lh-lg" *ngFor="let guideline of guidelines">
                                    {{ guideline?.title }}
                                    <ol *ngIf="guideline.details?.length">
                                        <li *ngFor="let detail of guideline.details">
                                            {{ detail?.database }}: {{ detail?.requirements }}
                                        </li>
                                    </ol>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>


            </mat-card-content>
        </mat-card>
        <!-- </div> -->
    </div>

    <div class="col-sm-12 mb-3 mt-3">
        <div class="float-end">
            <button type="button" class="button btn btn-sm btn-secondary me-2" (click)="cancelBtn()">
                {{ ButtonLabelEnum.CANCEL_BTN_LABEL }}
            </button>
            <button class="btn btn-success btn-sm me-2" type="button" [disabled]="!hasFile()" (click)="submit()">
               Next
            </button>
            <!-- <button *ngIf="type != null" class="btn btn-warning btn-sm" type="button" [disabled]="hasFile()"
                (click)="submit()">
                {{ 'Next' }}
            </button> -->
        </div>
    </div>
</div>

<ng-template #docImg>
    <div class="p-1 centerAlignVertical">
        <div class="docIcon p-1" matSuffix mat-icon-button mat-raised-button [matTooltip]="fileName"
            matTooltipPosition="below">
            <img height="40px" src="assets/images/default-doc.ico" alt="bill document preview">
        </div>
    </div>
</ng-template>
<div class="card cardOverwrite h100">
    <div class="headerContainer">
        <div class="headerLeftContainer">
            <div class="pageTitle">Consumer type</div>
            <div class="pageSubtitle"></div>
        </div>

        <div class="headerRightContainer">
            <div class="headerRightContainerInner">
                <lib-search-bar-one class="me-3" #searchBar [searchBy]="searchByPlaceHolder"
                    (emitSearch)="searchFn($event)"></lib-search-bar-one>

                <button class="btn btn-sm btn-light refreshBtn centerAlign me-3 py-1" #refreshBtn matRipple
                    [matRippleCentered]="MATERIAL_CONSTANT.MAT_RIPPLE_CENTER" matTooltipPosition="below"
                    [matTooltip]="ButtonTooltipEnum.REFRESH">
                    <span class="material-symbols-outlined text-secondary">
                        refresh
                    </span>
                </button>

                <button type="button" class="btn btn-sm btn-success" (click)="createConsumer(FormAction.CREATE)" matRipple
                    [matRippleCentered]="MATERIAL_CONSTANT.MAT_RIPPLE_CENTER" matTooltipPosition="below"
                    [matTooltip]="ButtonTooltipEnum.CREATE">
                    <fa-icon [icon]="faPlus" class="me-1"></fa-icon>Consumer type
                </button>
            </div>
        </div>
    </div>

    <table class="w-100" mat-table matSort #sort="matSort" matSortActive="name" matSortDirection="asc"
        matSortDisableClear [dataSource]="dataSource">

        <ng-container matColumnDef="id">
            <th mat-header-cell *matHeaderCellDef>ID</th>
            <td mat-cell *matCellDef="let row">{{ row.id }}</td>
        </ng-container>

        <ng-container matColumnDef="name">
            <th class="px-4" mat-header-cell *matHeaderCellDef mat-sort-header disableClear>Name</th>
            <td class="px-4" mat-cell *matCellDef="let row">
                {{ row.name ? row.name : COMMON_CONSTANT.HYPHEN }}
            </td>
        </ng-container>

        <ng-container matColumnDef="utilitySourceName">
            <th mat-header-cell *matHeaderCellDef>
                <funnel-filter #typeSelect header="Utility source" type="mono" value="keyID" [entityList]="utilitySourceI"
                    view="name" [selectFC]="utilitySourceFC" [active]="utilitySource" (mono)="utilitySource = true;">
                </funnel-filter>
            </th>
            <td mat-cell *matCellDef="let row">
                {{ row.utilitySourceName ? row.utilitySourceName : COMMON_CONSTANT.HYPHEN }}
            </td>
        </ng-container>

        <ng-container matColumnDef="type">
            <th mat-header-cell *matHeaderCellDef>Type</th>
            <td mat-cell *matCellDef="let row">
                {{ row.type ? row.type : COMMON_CONSTANT.HYPHEN }}
            </td>
        </ng-container>

        <ng-container matColumnDef="option">
            <th mat-header-cell *matHeaderCellDef></th>
            <td mat-cell *matCellDef="let row">
                <div class="centerAlignVertical">

                    <button type="button" class="iconBtn centerAlign text-primary updateIconHover"
                        (click)="updateConsumer(FormAction.UPDATE, row)" matRipple [matRippleCentered]="MATERIAL_CONSTANT.MAT_RIPPLE_CENTER"
                        matTooltipPosition="below" [matTooltip]="ButtonTooltipEnum.UPDATE">
                        <span class="material-symbols-outlined icon">
                            edit
                        </span>
                    </button>

                    <a class="iconBtn centerAlign text-danger deleteIconHover cursorPointer" matTooltipPosition="below"
                        [matTooltip]="ButtonTooltipEnum.DELETE" matRipple
                        [matRippleCentered]="MATERIAL_CONSTANT.MAT_RIPPLE_CENTER" (click)="openDeleteDialog(row)">
                        <span class="material-symbols-outlined icon">
                            delete
                        </span>
                    </a>
                </div>
            </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumn"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumn;" class="dataRow"></tr>

        <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell text-center" [attr.colspan]="displayedColumn.length">
                {{ TABLE_CONSTANT.TABLE_NO_DATA }}
            </td>
        </tr>
    </table>

    <mat-paginator class="roundedBorder" showFirstLastButtons #paginator [length]="dataSourceLength"
        [pageSize]="TABLE_CONSTANT.DEFAULT_PAGE_SIZE" [pageSizeOptions]="TABLE_CONSTANT.PAGE_SIZE_OPTION">
    </mat-paginator>
</div>
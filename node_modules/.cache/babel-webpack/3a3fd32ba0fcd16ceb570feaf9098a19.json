{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { SbtiCriteria } from '@carbon/model/sbti.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@carbon/controller/sbti.controller\";\nimport * as i2 from \"@library/storage-service\";\nimport * as i3 from \"@angular/material/card\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/common\";\nfunction CriteriaProgressBarComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵelementStart(2, \"div\", 16);\n    i0.ɵɵelementStart(3, \"div\", 17);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(4, \"svg\", 18);\n    i0.ɵɵelement(5, \"use\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"div\", 20);\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵelementStart(8, \"strong\");\n    i0.ɵɵtext(9, \" Near term scope 3 targets do not meet SBTi criteria \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 21);\n    i0.ɵɵtext(11, \" Scope 3 targets collectively should cover at least 67% of total scope 3 emissions while setting near term science based targets. Create another scope 3 target with a different target calculation method or edit existing target and add all Scope 3 activity types to stay aligned with SBTi. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function CriteriaProgressBarComponent_div_17_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return ctx_r2.showNearTermInfo = false;\n    });\n    i0.ɵɵelementStart(13, \"span\", 23);\n    i0.ɵɵtext(14, \" close \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CriteriaProgressBarComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵelementStart(1, \"div\", 15);\n    i0.ɵɵelementStart(2, \"div\", 16);\n    i0.ɵɵelementStart(3, \"div\", 17);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(4, \"svg\", 18);\n    i0.ɵɵelement(5, \"use\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"div\", 20);\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵelementStart(8, \"strong\");\n    i0.ɵɵtext(9, \" Long term scope 3 targets do not meet SBTi criteria \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 21);\n    i0.ɵɵtext(11, \" Scope 3 targets collectively should cover at least 100% of total scope 3 emissions while setting near term science based targets. Create another scope 3 target with a different target calculation method or edit existing target and add all Scope 3 activity types to stay aligned with SBTi. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function CriteriaProgressBarComponent_div_18_Template_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return ctx_r4.showLongTermInfo = false;\n    });\n    i0.ɵɵelementStart(13, \"span\", 23);\n    i0.ɵɵtext(14, \" close \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function () {\n  return [\"/target/criteria\"];\n};\n// /tsc-library\nexport let CriteriaProgressBarComponent = /*#__PURE__*/(() => {\n  class CriteriaProgressBarComponent {\n    constructor(sbtiController, storageService) {\n      this.sbtiController = sbtiController;\n      this.storageService = storageService;\n      this.sbtiCriteriaM = new SbtiCriteria();\n      this.value = 'linear-gradient(to right, rgb(223 70 70), rgb(230 93 66), rgb(219 84 37))';\n      this.stopperValue = 18; // because 7 questions are checked by default\n      this.totalCriteriaQuestions = 37; // total checklist conditions\n      this.totalCheckedQuestions = 7; // whose criteria was met already //C2,C23,C25,C27,C28,C29,C37\n      this.showNearTermInfo = false;\n      this.showLongTermInfo = false;\n    }\n    ngOnInit() {\n      this.rootOrgID = this.storageService.getStorage('rootOrgID');\n      this.getSbtiCriteriaCheckList();\n    }\n    getSbtiCriteriaCheckList() {\n      return __awaiter(this, void 0, void 0, function* () {\n        yield this.sbtiController.getSbtiCriteriaCheckList(this.rootOrgID).subscribe(response => {\n          this.sbtiCriteriaM = response;\n          if (this.sbtiCriteriaM['isSbtiBaseYear'] && this.sbtiCriteriaM['isSbtiSettings']) {\n            //C1,C3,C12,C35\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 4;\n          }\n          if (this.sbtiCriteriaM['isSbtiSettings']) {\n            //C11,C13,C14,C15,C16,C18,C30,C32,C33,C34,C36\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 11;\n          }\n          if (this.sbtiCriteriaM['isAnyTargetCreated']) {\n            // C10,C17\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 2;\n          }\n          if (this.sbtiCriteriaM['isAnyNearTermReductionTarget']) {\n            //C20\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          }\n          if (this.sbtiCriteriaM['isNearAndLongTermTargetForScope3']) {\n            //C24,C26\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 2;\n          }\n          if (this.sbtiCriteriaM['isNearAndLongTermTargetForScope1And2']) {\n            //C21,C22\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 2;\n          }\n          if (this.sbtiCriteriaM['isAnyNearAndLongTermTarget']) {\n            //C7,C19,C31\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 3;\n          }\n          if (this.sbtiCriteriaM['s3LongTermReductionTarget']) {\n            //C6\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          }\n          // C4 \n          if (this.sbtiCriteriaM['s3EmissionsPct'] < 40) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          } else if (this.sbtiCriteriaM['s3NearTermReductionTarget']) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          }\n          //C5\n          if (!this.sbtiCriteriaM['isUseOfSoldProducts']) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          } else if (this.sbtiCriteriaM['s3NearTermReductionTarget']) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          }\n          //C8\n          if (this.sbtiCriteriaM['s3NearTermTargetEmissionPct'] < 67) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n            this.showNearTermInfo = true;\n          } else if (this.sbtiCriteriaM['s3NearTermReductionTarget']) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          }\n          //C9\n          if (this.sbtiCriteriaM['s3LongTermTargetEmissionPct'] < 90) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          } else if (this.sbtiCriteriaM['s3LongTermReductionTarget']) {\n            this.totalCheckedQuestions = this.totalCheckedQuestions + 1;\n          }\n          this.setStopperValue(this.totalCheckedQuestions);\n          this.setProgressBarColors(this.totalCheckedQuestions);\n          if (this.sbtiCriteriaM['s3LongTermTargetEmissionPct'] < 100) {\n            this.showLongTermInfo = true;\n          }\n        }, error => {\n          console.error('error in getSbtiCriteriaCheckList', error);\n        });\n      });\n    }\n    setStopperValue(totalCheckedQuestions) {\n      this.stopperValue = Math.floor(totalCheckedQuestions / this.totalCriteriaQuestions * 100);\n    }\n    setProgressBarColors(totalCheckedQuestions) {\n      if (totalCheckedQuestions <= 11) {\n        this.value = 'linear-gradient(to right, rgb(223 70 70), rgb(230 93 66), rgb(219 84 37))';\n      } else if (totalCheckedQuestions <= 22) {\n        this.value = 'linear-gradient(to right, rgb(223 70 70), rgb(230 93 66),rgb(219 84 37), rgb(237, 128, 12), rgb(217 144 17), rgb(199 158 34))';\n      } else {\n        // this.value = 'linear-gradient(to right,rgb(136, 8, 8),rgb(230, 44, 74),rgb(238, 75, 43),rgb(230, 120, 56),rgb(255, 172, 28),rgb(255, 191, 0),rgb(178, 211, 118),rgb(73, 152, 73), rgb(34, 139, 34)) ';\n        this.value =\n        // 'linear-gradient(to right, rgb(219 84 37), rgb(223 70 70), rgb(230 93 66), rgb(212 114 57), rgb(217 144 17), rgb(199 158 34), rgb(139 168 86), rgb(73, 152, 73), rgb(34, 139, 34))';\n        'linear-gradient(to right,rgb(223 70 70),rgb(230 93 66) , rgb(219 84 37) , rgb(212 114 57), rgb(217 144 17), rgb(199 158 34), rgb(139 168 86), rgb(73, 152, 73), rgb(34, 139, 34))';\n      }\n      return this.value;\n    }\n  }\n  CriteriaProgressBarComponent.ɵfac = function CriteriaProgressBarComponent_Factory(t) {\n    return new (t || CriteriaProgressBarComponent)(i0.ɵɵdirectiveInject(i1.SbtiController), i0.ɵɵdirectiveInject(i2.StorageService));\n  };\n  CriteriaProgressBarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CriteriaProgressBarComponent,\n    selectors: [[\"app-criteria-progress-bar\"]],\n    decls: 19,\n    vars: 11,\n    consts: [[1, \"infoCardContainer\", \"ms-3\", \"me-3\"], [1, \"extraInfoCard\", \"criteriaCard\"], [1, \"alert\", \"justify-content-between\", \"roundedBorder\", 2, \"background-color\", \"whitesmoke\"], [1, \"row\", \"mt-2\", \"mb-2\"], [1, \"col-sm-3\", \"pt-4\"], [1, \"ms-4\", \"fw-bold\"], [1, \"col-sm-6\"], [1, \"progress-bar\", \"w-100\"], [1, \"progress\", \"roundedBorder\"], [1, \"labels\", \"pe-2\"], [1, \"col-sm-3\", \"pt-3\"], [1, \"float-end\"], [\"type\", \"button\", 1, \"button\", \"btn\", \"btn-primary\", \"me-4\", 3, \"routerLink\"], [\"class\", \"infoCardContainer\", 4, \"ngIf\"], [1, \"infoCardContainer\"], [1, \"extraInfoCard\", \"pt-4\", \"px-3\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\", \"m-0\", \"centerAlignVertical\", \"justify-content-between\", \"roundedBorder\"], [1, \"d-flex\", \"align-items-center\"], [1, \"bi\", \"flex-shrink-0\", \"me-3\", \"extraInfoCardHeaderIcon\"], [0, \"xlink\", \"href\", \"#exclamation-triangle-fill\"], [1, \"endAlignVertical\"], [1, \"mt-1\"], [\"type\", \"button\", 1, \"btn\", 3, \"click\"], [1, \"material-symbols-outlined\", \"fw-bold\"]],\n    template: function CriteriaProgressBarComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"mat-card-title\");\n        i0.ɵɵelementStart(6, \"div\", 5);\n        i0.ɵɵtext(7, \" SBTi readiness \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵelementStart(9, \"div\", 7);\n        i0.ɵɵelement(10, \"div\", 8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 9);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵelementStart(15, \"button\", 12);\n        i0.ɵɵtext(16, \" SBTi Criteria checklist \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(17, CriteriaProgressBarComponent_div_17_Template, 15, 0, \"div\", 13);\n        i0.ɵɵtemplate(18, CriteriaProgressBarComponent_div_18_Template, 15, 0, \"div\", 13);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(10);\n        i0.ɵɵstyleProp(\"background\", ctx.value)(\"width\", ctx.stopperValue, \"%\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵstyleProp(\"left\", ctx.stopperValue, \"%\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵtextInterpolate1(\"\", ctx.stopperValue, \"%\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(10, _c0));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.showNearTermInfo);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showLongTermInfo);\n      }\n    },\n    directives: [i3.MatCardTitle, i4.RouterLink, i5.NgIf],\n    styles: [\".progress-bar[_ngcontent-%COMP%]{width:75%;height:30px;margin:10 auto;position:relative;top:50%;transform:translateY(-50%);border-radius:50px;overflow:hidden;background-color:#fff;border:.5px solid grey}.progress[_ngcontent-%COMP%]{height:100%;display:flex}.labels[_ngcontent-%COMP%]{display:flex;width:-moz-fit-content;width:fit-content;position:relative;padding-top:25px;justify-content:space-between}\"]\n  });\n  return CriteriaProgressBarComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
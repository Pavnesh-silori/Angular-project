{"ast":null,"code":"import { STEPPER_GLOBAL_OPTIONS } from '@angular/cdk/stepper';\nimport { ReportConfigComponent } from '../report-config.component';\nimport { ReportPreference, ReportingPrefenceForReportDetail } from '@report-framework/model/reporting-preference.model';\nimport { MessageAlertIconEnum, MessageAlertTypeEnum } from '@library/tsc-common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@report-framework/controller/reporting-preference.controller\";\nimport * as i3 from \"@library/storage-service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@library/tsc-common\";\nimport * as i6 from \"@angular/material/stepper\";\nimport * as i7 from \"@angular/material/card\";\nimport * as i8 from \"../report-config.component\";\nimport * as i9 from \"../../assignment/assignment/assignment.component\";\nconst _c0 = [\"stepper\"];\nfunction StepperComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"lib-message-alert\", 4);\n    i0.ɵɵelementStart(2, \"div\", 5);\n    i0.ɵɵelement(3, \"img\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"messageAlertTypeInp\", ctx_r0.messageAlertTypeEnum.WARNING)(\"messageAlertIconInp\", ctx_r0.messageAlertIconEnum.INFO_ICON);\n  }\n}\nfunction StepperComponent_div_2_ng_template_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Details\");\n  }\n}\nfunction StepperComponent_div_2_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \"Assign Template (Optional)\");\n  }\n}\nfunction StepperComponent_div_2_mat_card_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-card\", 13);\n    i0.ɵɵelement(1, \"app-assignment\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"reportingFrameworkID\", ctx_r6.reportingFrameworkID)(\"configID\", ctx_r6.configID);\n  }\n}\nfunction StepperComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"div\", 7);\n    i0.ɵɵelementStart(2, \"div\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 9);\n    i0.ɵɵelementStart(5, \"mat-stepper\", 10, 11);\n    i0.ɵɵelementStart(7, \"mat-step\");\n    i0.ɵɵtemplate(8, StepperComponent_div_2_ng_template_8_Template, 1, 0, \"ng-template\", 12);\n    i0.ɵɵelementStart(9, \"mat-card\", 13);\n    i0.ɵɵelementStart(10, \"app-report-config\", 14, 15);\n    i0.ɵɵlistener(\"nextEmit\", function StepperComponent_div_2_Template_app_report_config_nextEmit_10_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return ctx_r7.nextStepper($event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"mat-step\");\n    i0.ɵɵtemplate(13, StepperComponent_div_2_ng_template_13_Template, 1, 0, \"ng-template\", 12);\n    i0.ɵɵtemplate(14, StepperComponent_div_2_mat_card_14_Template, 2, 2, \"mat-card\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const _r2 = i0.ɵɵreference(6);\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r1.stepperTitle(_r2.selectedIndex), \" \");\n    i0.ɵɵadvance(11);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.assignmentFlag);\n  }\n}\n// /tsc-library\nexport let StepperComponent = /*#__PURE__*/(() => {\n  class StepperComponent {\n    constructor(router, reportingPreferenceController, storageService) {\n      this.router = router;\n      this.reportingPreferenceController = reportingPreferenceController;\n      this.storageService = storageService;\n      this.messageAlertTypeEnum = MessageAlertTypeEnum;\n      this.messageAlertIconEnum = MessageAlertIconEnum;\n      this.reportingFrameworkID = null;\n      this.configID = null;\n      this.prefEnableReportingFrameworkList = [new ReportingPrefenceForReportDetail()];\n      this.preference = new ReportPreference();\n      this.assignmentFlag = false;\n    }\n    ngOnInit() {\n      this.rootOrgID = parseInt(this.storageService.getStorage('rootOrgID'));\n      this.getReportFrameworkPrefByOrgID();\n    }\n    stepperTitle(index) {\n      switch (index) {\n        case 0:\n          return 'New Report';\n        case 1:\n          return 'New Report: Assign';\n        default:\n          return 'Unknown';\n      }\n    }\n    nextStepper(event) {\n      if (event != null) {\n        this.reportingFrameworkID = event['reportingFrameworkID'];\n        this.configID = event['configID'];\n        this.assignmentFlag = true;\n        this.stepper.next();\n      }\n    }\n    reportingFrameworkEmit(event) {\n      this.reportingFrameworkID = event;\n    }\n    getReportFrameworkPrefByOrgID() {\n      this.reportingPreferenceController.getReportingPreferenceByOrgID(this.rootOrgID).subscribe(res => {\n        this.preference = res;\n        if (this.preference.reportingPreference.length > 0) {\n          this.getReportFrameworkPrefEnableFramewrok();\n        } else {\n          this.router.navigate([`/reporting-framework/tab/tracking`]);\n        }\n      }, error => {\n        console.log('error in getReportFrameworkPrefByOrgID report() -', error);\n      });\n    }\n    getReportFrameworkPrefEnableFramewrok() {\n      this.reportingPreferenceController.getReportingPreferencesByOrgID(this.rootOrgID).subscribe(res => {\n        this.prefEnableReportingFrameworkList = res;\n      }, error => {\n        console.log('error in getReportFrameworkPrefEnableFramewrok', error);\n      });\n    }\n  }\n  StepperComponent.ɵfac = function StepperComponent_Factory(t) {\n    return new (t || StepperComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ReportingPreferenceController), i0.ɵɵdirectiveInject(i3.StorageService));\n  };\n  StepperComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: StepperComponent,\n    selectors: [[\"app-stepper\"]],\n    viewQuery: function StepperComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(ReportConfigComponent, 5);\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.reportConfigComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.stepper = _t.first);\n      }\n    },\n    features: [i0.ɵɵProvidersFeature([{\n      provide: STEPPER_GLOBAL_OPTIONS,\n      useValue: {\n        displayDefaultIndicatorType: false\n      }\n    }])],\n    decls: 3,\n    vars: 2,\n    consts: [[1, \"card\", \"main-card\", \"cardOverwrite\", \"h100\"], [\"class\", \"m-3\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"m-3\"], [\"contentInp\", \"Your reporting preference framework is disabled. First you enable preference framework.\", 3, \"messageAlertTypeInp\", \"messageAlertIconInp\"], [1, \"col-sm-12\", \"p-5\", \"centerAlign\"], [\"src\", \"../assets/images/reporting-preference-not-found.jpg\", \"alt\", \"Reporting preference enable framework not found\", 1, \"img\"], [1, \"cardHeaderBlock\", \"d-flex\", \"align-items-center\"], [1, \"col-sm-6\", \"pageTitle\"], [1, \"card-body\", \"cardOverwrite\", \"pt-0\"], [\"linear\", \"\"], [\"stepper\", \"\"], [\"matStepLabel\", \"\"], [1, \"cardOverwrite\"], [\"type\", \"stepper\", 3, \"nextEmit\"], [\"reportConfigComponent\", \"\"], [\"class\", \"cardOverwrite\", 4, \"ngIf\"], [\"type\", \"stepper\", 3, \"reportingFrameworkID\", \"configID\"]],\n    template: function StepperComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, StepperComponent_div_1_Template, 4, 2, \"div\", 1);\n        i0.ɵɵtemplate(2, StepperComponent_div_2_Template, 15, 2, \"div\", 2);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.prefEnableReportingFrameworkList.length == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.prefEnableReportingFrameworkList.length > 0);\n      }\n    },\n    directives: [i4.NgIf, i5.MessageAlertComponent, i6.MatStepper, i6.MatStep, i6.MatStepLabel, i7.MatCard, i8.ReportConfigComponent, i9.AssignmentComponent],\n    styles: [\".img[_ngcontent-%COMP%]{max-height:350px}  .mat-horizontal-stepper-header{pointer-events:none!important}\"]\n  });\n  return StepperComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
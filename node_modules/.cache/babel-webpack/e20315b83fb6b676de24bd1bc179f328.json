{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from '@angular/core';\nimport { FormControl, Validators } from '@angular/forms';\nimport { isEqual } from 'lodash';\nimport * as moment from 'moment';\nimport { startWith } from 'rxjs/operators';\nimport { GhgBaseYearEmissionConfirmationDialog } from './_shared/ghg-base-year-emission-confirmation/ghg-base-year-emission-confirmation.dialog';\nimport { EmissionConfirmationDialog } from './_shared/emission-confirmation-dialog/emission-confirmation.dialog';\nimport { WarningDialog } from './_shared/warning/warning-dialog.component';\nimport { BaseYearEnum } from '@carbon/enum/base-year.enum';\nimport { EnterpriseEnum, OrgSizeEnum, SMEEnum, ScopeTwoMethodEnum } from '@carbon/enum/sbti.enum';\nimport { CARBON_CONSTANT } from '@carbon/constant/carbon.constant';\n// tsc-library\nimport { ToastrColor } from '@library/toastr-service';\nimport { ButtonLabelEnum, DialogEnum, InfoDialogComponent, InvalidForm, MaterialFormFieldAppearance } from '@library/tsc-common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@carbon/service/ghg.service\";\nimport * as i5 from \"@carbon/service/sbti.service\";\nimport * as i6 from \"@library/storage-service\";\nimport * as i7 from \"@carbon/service/emission.service\";\nimport * as i8 from \"@carbon/service/consolidation-approach.service\";\nimport * as i9 from \"@carbon/controller/base-year.controller\";\nimport * as i10 from \"@library/toastr-service\";\nimport * as i11 from \"@angular/common\";\nimport * as i12 from \"@angular/material/form-field\";\nimport * as i13 from \"@library/date\";\nimport * as i14 from \"@angular/material/input\";\nimport * as i15 from \"@angular/material/datepicker\";\nimport * as i16 from \"@angular/material/radio\";\nimport * as i17 from \"@angular/material/card\";\nimport * as i18 from \"@angular/material/tooltip\";\nfunction CreateComponent_mat_error_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Base year is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_24_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 34);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 35);\n    i0.ɵɵelement(2, \"use\", 36);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"div\", 37);\n    i0.ɵɵtext(4, \" No emissions are recorded for the provided base year. Add records for all relevant Scope 1, Scope 2 and Scope 3 activity types from the \");\n    i0.ɵɵelementStart(5, \"a\", 38);\n    i0.ɵɵtext(6, \"Carbon Ledger\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" for the base year to continue. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 13);\n    i0.ɵɵtemplate(2, CreateComponent_ng_container_24_div_2_Template, 8, 0, \"div\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.renderNoEmissionFoundView());\n  }\n}\nfunction CreateComponent_mat_hint_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\"Total number of character remaining: \", ctx_r3.baseYearFG.get(\"recalculationPolicy\").value.length, \" /\", ctx_r3.RECALCULATION_POLICY_CHAR_MAX_LENGTH, \" \");\n  }\n}\nfunction CreateComponent_mat_error_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Recalculation policy is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_mat_error_45_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Significance Threshold is required \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_mat_error_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Significance Threshold can not be negative \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_mat_error_47_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" Significance Threshold can not exceed \", ctx_r7.maxThreshold, \" % \");\n  }\n}\nfunction CreateComponent_ng_container_51_mat_error_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 48);\n    i0.ɵɵtext(1, \" Please select preferred method to report scope 2 emissions. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 39);\n    i0.ɵɵelementStart(2, \"div\", 40);\n    i0.ɵɵelementStart(3, \"div\", 41);\n    i0.ɵɵtext(4, \"Select preferred method to report scope 2 emissions \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 42);\n    i0.ɵɵtext(6, \"Note- Renewable energy instruments such as renewable energy certificates (RECs) can only be used to meet reductions of scope 2 emissions using the market based approach.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-radio-group\", 43);\n    i0.ɵɵelementStart(8, \"div\", 44);\n    i0.ɵɵelementStart(9, \"div\", 45);\n    i0.ɵɵelementStart(10, \"mat-radio-button\", 46);\n    i0.ɵɵtext(11, \" Location based \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 45);\n    i0.ɵɵelementStart(13, \"mat-radio-button\", 46);\n    i0.ɵɵtext(14, \" Market based \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, CreateComponent_ng_container_51_mat_error_15_Template, 2, 0, \"mat-error\", 47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"value\", ctx_r8.ScopeTwoMethod.LOCATION_BASED);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", ctx_r8.ScopeTwoMethod.MARKET_BASED);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.radioGroupHasError(\"calculationApproachKeyID\", \"required\"));\n  }\n}\nfunction CreateComponent_ng_container_52_mat_error_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 48);\n    i0.ɵɵtext(1, \" Select an option \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_52_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 12);\n    i0.ɵɵelementStart(2, \"div\", 49);\n    i0.ɵɵelementStart(3, \"div\", 41);\n    i0.ɵɵtext(4, \" How do you want to confirm base year emissions? \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-radio-group\", 50);\n    i0.ɵɵlistener(\"change\", function CreateComponent_ng_container_52_Template_mat_radio_group_change_5_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.getYearlyEmission();\n    });\n    i0.ɵɵelementStart(6, \"div\", 51);\n    i0.ɵɵelementStart(7, \"div\", 52);\n    i0.ɵɵelement(8, \"mat-radio-button\", 46);\n    i0.ɵɵelementStart(9, \"span\", 53);\n    i0.ɵɵtext(10, \" Use auto calculated emissions from The Sustainability Cloud \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"div\", 52);\n    i0.ɵɵelementStart(12, \"mat-radio-button\", 54);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_52_Template_mat_radio_button_click_12_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r20 = i0.ɵɵnextContext();\n      return ctx_r20.openWarningDialog();\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 53);\n    i0.ɵɵtext(14, \" Use custom emission values \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(15, CreateComponent_ng_container_52_mat_error_15_Template, 2, 0, \"mat-error\", 47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"value\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", false);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.radioGroupHasError(\"useTSCEmission\", \"required\"));\n  }\n}\nfunction CreateComponent_ng_container_53_div_2_div_5_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 67);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_53_div_2_div_5_ng_container_10_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const data_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r26 = i0.ɵɵnextContext(3);\n      return ctx_r26.isSBTiBaseYear ? ctx_r26.openEmissionConfirmationDialog(data_r23, \"CONFIRM\") : ctx_r26.openGHGEmissionConfirmationDialog(data_r23, \"CONFIRM\");\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r24.ButtonLabelEnum.CONFIRM_BTN_LABEL, \" \");\n  }\n}\nconst _c0 = function (a0) {\n  return [a0];\n};\nfunction CreateComponent_ng_container_53_div_2_div_5_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 68);\n    i0.ɵɵelement(2, \"path\", 69);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"a\", 70);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_53_div_2_div_5_ng_container_11_Template_a_click_3_listener() {\n      i0.ɵɵrestoreView(_r30);\n      const data_r23 = i0.ɵɵnextContext().$implicit;\n      const ctx_r29 = i0.ɵɵnextContext(3);\n      return ctx_r29.isSBTiBaseYear ? ctx_r29.openEmissionConfirmationDialog(data_r23, \"UPDATE\") : ctx_r29.openGHGEmissionConfirmationDialog(data_r23, \"UPDATE\");\n    });\n    i0.ɵɵelementStart(4, \"span\", 71);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"matTooltip\", i0.ɵɵpureFunction1(2, _c0, ctx_r25.isSBTiBaseYear && !ctx_r25.useTSCEmissionAC.value ? \"Update\" : \"View\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r25.isSBTiBaseYear && !ctx_r25.useTSCEmissionAC.value ? \"edit_square\" : \"visibility\", \" \");\n  }\n}\nfunction CreateComponent_ng_container_53_div_2_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 61);\n    i0.ɵɵelementStart(1, \"div\", 62);\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 55);\n    i0.ɵɵelementStart(5, \"div\", 63);\n    i0.ɵɵelement(6, \"div\", 64);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 65);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"div\", 66);\n    i0.ɵɵtemplate(10, CreateComponent_ng_container_53_div_2_div_5_ng_container_10_Template, 3, 1, \"ng-container\", 20);\n    i0.ɵɵtemplate(11, CreateComponent_ng_container_53_div_2_div_5_ng_container_11_Template, 6, 4, \"ng-container\", 20);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r23 = ctx.$implicit;\n    const ctx_r22 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", data_r23.scope.name, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵstyleProp(\"width\", ctx_r22.calculateProgress(data_r23), \"%\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", data_r23.confirmedActivities, \"/\", data_r23.totalActivities, \" activity types marked as confirmed \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", data_r23.confirmedActivities != data_r23.totalActivities);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", data_r23.confirmedActivities == data_r23.totalActivities);\n  }\n}\nfunction CreateComponent_ng_container_53_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 57);\n    i0.ɵɵelementStart(1, \"mat-card\", 58);\n    i0.ɵɵelementStart(2, \"div\", 9);\n    i0.ɵɵelementStart(3, \"div\", 59);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, CreateComponent_ng_container_53_div_2_div_5_Template, 12, 7, \"div\", 60);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate2(\" \", ctx_r21.baseYearType, \" base year emission confirmation- \", ctx_r21.baseYear, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r21.emissionData);\n  }\n}\nfunction CreateComponent_ng_container_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 55);\n    i0.ɵɵtemplate(2, CreateComponent_ng_container_53_div_2_Template, 6, 3, \"div\", 56);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.renderEmissionConfirmationView());\n  }\n}\nfunction CreateComponent_button_57_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 72);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r11.ButtonLabelEnum.CREATE_BTN_LABEL, \" \");\n  }\n}\nfunction CreateComponent_button_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"button\", 73);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r12.isEqual && !ctx_r12.emissionData.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.ButtonLabelEnum.SAVE_BTN_LABEL, \" \");\n  }\n}\nfunction CreateComponent_ng_template_59_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 74);\n    i0.ɵɵelement(1, \"path\", 75);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(2, \"a\", 76);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_template_59_Template_a_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r34);\n      const data_r32 = restoredCtx.data;\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.openEmissionConfirmationDialog(data_r32, \"UPDATE\");\n    });\n    i0.ɵɵelementStart(3, \"span\", 77);\n    i0.ɵɵtext(4, \" edit \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n// tsc-library\nexport let CreateComponent = /*#__PURE__*/(() => {\n  class CreateComponent {\n    constructor(formBuilder, router, activatedRoute, dialog, ghgBaseYearService, sbtiService, storageService, emissionService, consolidationApproachService, baseYearController, toastrService, location) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.activatedRoute = activatedRoute;\n      this.dialog = dialog;\n      this.ghgBaseYearService = ghgBaseYearService;\n      this.sbtiService = sbtiService;\n      this.storageService = storageService;\n      this.emissionService = emissionService;\n      this.consolidationApproachService = consolidationApproachService;\n      this.baseYearController = baseYearController;\n      this.toastrService = toastrService;\n      this.location = location;\n      this.ButtonLabelEnum = ButtonLabelEnum;\n      this.MaterialFormFieldAppearance = MaterialFormFieldAppearance;\n      this.BaseYear = BaseYearEnum;\n      this.ScopeTwoMethod = ScopeTwoMethodEnum;\n      this.RECALCULATION_POLICY_CHAR_MAX_LENGTH = 2000;\n      this.unit = CARBON_CONSTANT.DEFAULT_EMISSION_UNIT;\n      this.success = new EventEmitter();\n      this.emissionData = [];\n      this.action = 'update';\n      this.checkBaseYear = false;\n      this.checkBaseYearFalseMsg = true;\n      this.acknowledged = true;\n      this.isBaseYearSameAsGHG = false;\n      this.isEqual = false;\n      this.isSBTiBaseYear = false;\n      this.isUpdate = false;\n      this.minBaseYear = 1990;\n      this.maxBaseYear = moment().year() - 1;\n      this.isEmissionExist = true;\n      this.waitingForResponse = true;\n      this.getEmissionTriggered = false;\n      this.maxThreshold = 100;\n      this.min_base_year = new Date(this.minBaseYear, 0, 1);\n      this.today = new Date(this.maxBaseYear, 0, 1);\n      this.baseYearFC = new FormControl(null, [Validators.min(this.min_base_year)]);\n      this.RECALCULATION_POLICY_INFO = {\n        title: 'Recalculation policy',\n        body: [`Companies shall develop a base year emissions recalculation policy, \n                and clearly articulate the basis and context for any recalculations. \n                The policy shall state any “significance threshold” applied for \n                deciding on historic emissions recalculation.`]\n      };\n      this.SIGNIFICANCE_THRESHOLD_INFO = {\n        title: 'Significance threshold',\n        body: [`Significance threshold is a qualitative and/or quantitative criterion \n            used to define any significant change to the data, inventory boundary, methods, \n            or any other relevant factors. Companies have to select a threshold percentage \n            which when breached, will trigger a recalculation of base year emissions.`]\n      };\n      this.isValidGetEmissionFields = () => {\n        return !this.baseYearFG.get('baseYear').invalid && !this.baseYearFG.get('useTSCEmission').invalid;\n      };\n      this.errorHandling = (control, error) => {\n        return this.baseYearFG.controls[control].hasError(error);\n      };\n      this.radioGroupHasError = (control, error) => {\n        return this.baseYearFG.controls[control].hasError(error) && this.baseYearFG.controls[control].touched;\n      };\n    }\n    ngOnInit() {\n      this.rootOrgID = this.storageService.getStorage('rootOrgID');\n      this.activatedRoute.data.subscribe(data => {\n        this.isUpdate = data['type'] == 'UPDATE';\n        this.action = this.isUpdate ? 'update' : 'create';\n        this.isSBTiBaseYear = BaseYearEnum.SBTI_BASE_YEAR == data['base_year'];\n        this.baseYearKeyID = data['base_year'];\n        this.baseYearType = this.isSBTiBaseYear ? 'SBTi' : 'GHG';\n        this.baseYearRouteKey = this.isSBTiBaseYear ? 'sbti' : 'ghg';\n        if (this.isUpdate) {\n          this.getBaseYearByType();\n        }\n        if (this.isSBTiBaseYear) {\n          this.getSbtiSettingsByOrgID();\n        } else {\n          this.getConsolidationApproachByOrgID();\n        }\n      });\n      this.formInit();\n      this.getSBTiSettingByOrgID();\n    }\n    openDatepickerOnClick(datepicker) {\n      if (!datepicker.opened) {\n        datepicker.open();\n      }\n    }\n    yearSelectedHandler(normalizedYear, datepicker) {\n      datepicker.close();\n      let duration = moment(normalizedYear).format(\"YYYY\");\n      this.baseYearFC.patchValue(normalizedYear);\n      this.baseYearAC.patchValue(duration);\n      console.log(this.baseYearFC);\n      this.getYearlyEmission();\n    }\n    takeFocusAway(durationField) {\n      durationField = document.getElementById(durationField);\n      durationField.classList.remove('mat-focused', 'mat-form-field-should-float');\n    }\n    getSbtiSettingsByOrgID() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.sbtiSetting = yield this.sbtiService.getSbtiSettingsByOrgID(this.rootOrgID);\n        if (this.sbtiSetting.orgSizeKeyID) {\n          this.consolidationApproachName = this.sbtiSetting['consolidationApproachName'];\n        }\n      });\n    }\n    getConsolidationApproachByOrgID() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.consolidationApproach = yield this.consolidationApproachService.getAllConsolidationApproachByOrgID(this.rootOrgID);\n      });\n    }\n    formInit() {\n      this.maxThreshold = this.isSBTiBaseYear ? 5 : 100;\n      this.baseYearFG = this.formBuilder.group({\n        baseYear: [, [Validators.required, Validators.min(1990), Validators.max(this.maxBaseYear), this.ghgBaseYearService.fourDigitYearValidator()]],\n        recalculationPolicy: ['', Validators.required],\n        significanceThreshold: new FormControl('', [Validators.required, Validators.min(0), Validators.max(this.maxThreshold)]),\n        emissionData: [[]],\n        calculationApproachKeyID: [, !this.isSBTiBaseYear ? [Validators.required] : null],\n        useTSCEmission: [this.isSBTiBaseYear ? null : true, this.isSBTiBaseYear ? [Validators.required] : null],\n        type: [this.isSBTiBaseYear ? BaseYearEnum.SBTI_BASE_YEAR : BaseYearEnum.GHG_BASE_YEAR]\n      });\n    }\n    get baseYearAC() {\n      return this.baseYearFG.get('baseYear');\n    }\n    get useTSCEmissionAC() {\n      return this.baseYearFG.get('useTSCEmission');\n    }\n    getBaseYearByType() {\n      this.baseYearController.getBaseYearByType(this.rootOrgID, this.baseYearKeyID).subscribe(response => {\n        if (response) {\n          this.patchBaseYear(response);\n        } else {\n          this.router.navigate([`/carbon-setting/base-year/${this.baseYearRouteKey}/create`]);\n        }\n      });\n    }\n    getSBTiSettingByOrgID() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let settings = yield this.sbtiService.getSbtiSettingsByOrgID(this.rootOrgID);\n        if (settings === null || settings === void 0 ? void 0 : settings.orgSizeKeyID) {\n          this.isBaseYearSameAsGHG = settings.isBaseYearSameAsGHG;\n          if (this.isSBTiBaseYear) {\n            if (settings.orgSizeKeyID == OrgSizeEnum.SME) {\n              this.minBaseYear = SMEEnum.minBaseYear;\n              this.baseYearFG.get('baseYear').addValidators([Validators.min(SMEEnum.minBaseYear)]);\n            } else {\n              this.minBaseYear = EnterpriseEnum.MIN_BASE_YEAR;\n              this.baseYearFG.get('baseYear').addValidators([Validators.min(EnterpriseEnum.MIN_BASE_YEAR)]);\n            }\n            this.min_base_year = new Date(this.minBaseYear, 0, 1);\n          }\n          if (this.isBaseYearSameAsGHG) {\n            this.baseYearType = 'GHG and SBTi';\n          }\n        }\n      });\n    }\n    patchBaseYear(baseYear) {\n      this.baseYearFG.patchValue({\n        baseYear: baseYear.baseYear,\n        recalculationPolicy: baseYear.recalculationPolicy,\n        significanceThreshold: baseYear.significanceThreshold,\n        calculationApproachKeyID: baseYear.calculationApproachKeyID,\n        useTSCEmission: baseYear.useTSCEmission\n      });\n      this.initialObject = this.baseYearFG.value;\n      this.baseYearFG.valueChanges.pipe(startWith({})).subscribe(() => {\n        this.isEqual = isEqual(this.initialObject, this.baseYearFG.getRawValue());\n      });\n    }\n    getEmissionData() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let year = this.baseYearFG.value.baseYear;\n        const startOfYear = moment(new Date().setFullYear(year)).startOf('year').format('YYYY-MM-DD');\n        const endOfYear = moment(new Date().setFullYear(year)).endOf('year').format('YYYY-MM-DD');\n        if (this.isSBTiBaseYear) this.emissionRes = yield this.emissionService.getScopeActivityWiseYearlyEmission(this.rootOrgID, startOfYear, endOfYear);else this.emissionRes = yield this.emissionService.getConsolidationApproachBasedScopeActivityEmissionByOrgID(this.rootOrgID, startOfYear, endOfYear);\n        if (this.emissionRes) {\n          this.waitingForResponse = false;\n          this.getEmissionTriggered = true;\n          this.isEmissionExist = this.emissionRes['isEmissionExist'];\n          this.checkBaseYear = true;\n          this.emissionData = this.emissionRes['emissionData'];\n          this.biogenicEmissions = this.emissionRes['biogenic'];\n          this.checkIfAllEmissionsAreConfirmed();\n          this.checkBaseYearFalseMsg = this.emissionRes['emissionData'];\n          ;\n        } else {\n          this.checkBaseYear = false;\n          this.checkBaseYearFalseMsg = false;\n        }\n      });\n    }\n    renderNoEmissionFoundView() {\n      if (this.isSBTiBaseYear) {\n        if (this.isValidGetEmissionFields()) {\n          if (this.baseYearFG.get('useTSCEmission').value) return !this.isEmissionExist && this.getEmissionTriggered;else false;\n        } else false;\n      } else {\n        if (this.baseYearAC.invalid) return false;else return !this.isEmissionExist && this.getEmissionTriggered;\n      }\n    }\n    renderEmissionConfirmationView() {\n      if (this.isSBTiBaseYear) {\n        if (this.isValidGetEmissionFields()) if (this.baseYearFG.get('useTSCEmission').value) return this.checkBaseYear && this.isEmissionExist && this.acknowledged;else return this.acknowledged;\n      } else {\n        if (this.baseYearAC.invalid) return false;else return this.isEmissionExist && this.getEmissionTriggered;\n      }\n    }\n    calculateProgress(data) {\n      const progress = (data === null || data === void 0 ? void 0 : data.confirmedActivities) / (data === null || data === void 0 ? void 0 : data.totalActivities) * 100;\n      return progress;\n    }\n    openGHGEmissionConfirmationDialog(emissionData, action) {\n      let data = {\n        action: action,\n        emissionData: emissionData,\n        consolidationApproach: this.consolidationApproach,\n        unit: this.unit,\n        baseYear: this.baseYear,\n        baseYearType: this.baseYearType\n      };\n      let dialogRef = this.dialog.open(GhgBaseYearEmissionConfirmationDialog, {\n        disableClose: true,\n        data: data,\n        minWidth: '1000px',\n        maxWidth: '1000px'\n      });\n      let prevConfirmedActivities = emissionData.confirmedActivities;\n      dialogRef.afterClosed().subscribe(res => {\n        if (!res) {\n          emissionData.confirmedActivities = prevConfirmedActivities;\n        }\n      });\n    }\n    openEmissionConfirmationDialog(emissionData, action) {\n      let data = {\n        action: action,\n        emissionData: emissionData,\n        consolidationApproach: this.consolidationApproachName,\n        unit: this.unit,\n        baseYear: this.baseYear,\n        baseYearType: this.baseYearType\n      };\n      if (this.isSBTiBaseYear) data['useTSC'] = this.useTSCEmissionAC.value;else data['useTSC'] = true;\n      let dialogRef = this.dialog.open(EmissionConfirmationDialog, {\n        data: data,\n        minWidth: '1000px',\n        maxWidth: '1000px'\n      });\n      let prevConfirmedActivities = emissionData.confirmedActivities;\n      dialogRef.afterClosed().subscribe(res => {\n        var _a;\n        if (res === null || res === void 0 ? void 0 : res.value) {\n          const newEmission = (_a = res.value) === null || _a === void 0 ? void 0 : _a.emissions;\n          const prevEmission = this.baseYearFG.value.emissionData;\n          emissionData['scope']['activity'].forEach(activity => {\n            newEmission.forEach(emission => {\n              var _a;\n              if (prevEmission.indexOf(activity['id'])) {\n                if (activity['id'] == emission['activityID']) {\n                  activity['emission'] = emission['emission'];\n                  activity['biogenicEmission'] = emission['biogenicEmission'];\n                  activity['uomID'] = (_a = res.value) === null || _a === void 0 ? void 0 : _a.unitID;\n                }\n              }\n            });\n          });\n        } else {\n          emissionData.confirmedActivities = prevConfirmedActivities;\n        }\n      });\n    }\n    get emissionDataArr() {\n      let allActivityEmission = [];\n      this.emissionData.forEach(data => {\n        let activityEmission = data.scope.activity.map(({\n          id,\n          emission,\n          biogenicEmission,\n          uomID\n        }) => ({\n          activityID: id,\n          emission,\n          biogenicEmission,\n          unitID: uomID\n        }));\n        allActivityEmission.push(...activityEmission);\n      });\n      return allActivityEmission;\n    }\n    openWarningDialog() {\n      this.acknowledged = false;\n      const dialog = this.dialog.open(WarningDialog, {\n        data: {\n          title: 'Warning!',\n          body: `SBTi base year emission recalculation will not be done by <b>The Sustainability Cloud</b>. \n                    Recalculated emissions can still be updated in SBTi bse year to update your existing targets.`,\n          btnLabel: 'Acknowledge'\n        },\n        minWidth: '400px',\n        maxWidth: '600px'\n      });\n      dialog.afterClosed().subscribe(res => {\n        this.acknowledged = true;\n        if (res == DialogEnum.CLOSE_DR) this.useTSCEmissionAC.reset(true);\n      });\n    }\n    checkIfAllEmissionsAreConfirmed() {\n      var _a;\n      let checkAllScopeBoolean = true;\n      (_a = this.emissionData) === null || _a === void 0 ? void 0 : _a.forEach(element => {\n        if (checkAllScopeBoolean) checkAllScopeBoolean = element.confirmedActivities == element.totalActivities;\n      });\n      return checkAllScopeBoolean;\n    }\n    getYearlyEmission() {\n      this.baseYear = this.baseYearFG.get('baseYear').value;\n      this.waitingForResponse = true;\n      if (!this.baseYearFG.get('baseYear').invalid) if (this.isSBTiBaseYear) {\n        if (!this.baseYearFG.get('useTSCEmission').invalid) {\n          this.getEmissionData();\n        }\n      } else {\n        this.getEmissionData();\n      }\n    }\n    openInfoDialog(data) {\n      const dialog = this.dialog.open(InfoDialogComponent, {\n        data: data,\n        minWidth: '400px',\n        maxWidth: '500px'\n      });\n    }\n    onSubmit() {\n      if (this.baseYearFG.invalid) {\n        this.baseYearFG.markAllAsTouched();\n        console.log('invalid form - ', this.baseYearFG);\n        this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, InvalidForm.INVALID_FORM_MESSAGE, ToastrColor.ERROR);\n        return;\n        return;\n      }\n      if (this.checkIfAllEmissionsAreConfirmed()) {\n        this.baseYearFG.get('emissionData').patchValue(this.emissionDataArr);\n        if (!this.isUpdate) {\n          this.baseYearController.createBaseYear(this.rootOrgID, this.baseYearKeyID, this.baseYearFG.value).subscribe(res => {\n            this.actionSuccessful(res);\n          }, error => {\n            console.error('error in createBaseYear()', error);\n          });\n        } else {\n          this.baseYearController.updateBaseYear(this.rootOrgID, this.baseYearKeyID, this.baseYearFG.value).subscribe(res => {\n            this.actionSuccessful(res);\n          }, error => {\n            console.error('error in updateBaseYear()', error);\n          });\n        }\n      } else {\n        this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, 'Please confirm your all emissions', ToastrColor.ERROR);\n        return;\n      }\n    }\n    actionSuccessful(res) {\n      this.success.emit();\n    }\n  }\n  CreateComponent.ɵfac = function CreateComponent_Factory(t) {\n    return new (t || CreateComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.MatDialog), i0.ɵɵdirectiveInject(i4.GhgBaseYearService), i0.ɵɵdirectiveInject(i5.SbtiService), i0.ɵɵdirectiveInject(i6.StorageService), i0.ɵɵdirectiveInject(i7.EmissionService), i0.ɵɵdirectiveInject(i8.ConsolidationApproachService), i0.ɵɵdirectiveInject(i9.BaseYearController), i0.ɵɵdirectiveInject(i10.ToastrService), i0.ɵɵdirectiveInject(i11.Location));\n  };\n  CreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateComponent,\n    selectors: [[\"app-create\"]],\n    outputs: {\n      success: \"success\"\n    },\n    decls: 61,\n    vars: 26,\n    consts: [[\"xmlns\", \"http://www.w3.org/2000/svg\", 2, \"display\", \"none\"], [\"id\", \"exclamation-triangle-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"], [\"id\", \"check-circle-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"], [1, \"card\", \"main-card\", \"cardOverwrite\"], [1, \"headerContainer\"], [1, \"pageTitle\"], [1, \"card-body\"], [1, \"row\"], [1, \"col-sm-12\", \"ms-2\"], [3, \"formGroup\", \"ngSubmit\"], [1, \"row\", \"ms-2\"], [1, \"col-sm-5\"], [\"id\", \"yearlyField\", \"appYearFormat\", \"\", 1, \"matFieldWidth100\", 3, \"appearance\", \"click\", \"keydown.arrowdown\", \"keydown.enter\"], [1, \"formLabel\"], [\"matInput\", \"\", \"readonly\", \"\", 1, \"noFocus\", 3, \"matDatepicker\", \"formControl\", \"min\", \"max\"], [\"matSuffix\", \"\", 1, \"fs-5\", 3, \"for\"], [\"panelClass\", \"yearPicker\", \"startView\", \"multi-year\", 3, \"yearSelected\", \"closed\"], [\"yearly\", \"\"], [4, \"ngIf\"], [1, \"row\", \"ms-2\", \"mt-2\"], [1, \"matFieldWidth100\", 3, \"appearance\"], [\"matInput\", \"\", \"placeholder\", \"Write your company policy here\", \"type\", \"text\", \"formControlName\", \"recalculationPolicy\", \"matTextareaAutosize\", \"\", \"matAutosizeMinRows\", \"1\", \"matAutosizeMaxRows\", \"10\", 3, \"maxLength\"], [1, \"col-sm-1\", \"centerAlignVertical\"], [1, \"material-symbols-outlined\", \"fs-4\", \"cursorPointer\", 3, \"click\"], [\"matInput\", \"\", \"type\", \"number\", \"formControlName\", \"significanceThreshold\"], [\"matSuffix\", \"\", 1, \"m-3\"], [\"align\", \"end\", 1, \"mt-3\", \"pe-3\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", \"me-2\", 3, \"click\"], [\"class\", \"btn btn-success\", 4, \"ngIf\"], [\"class\", \"btn btn-success\", 3, \"disabled\", 4, \"ngIf\"], [\"allActivitiesConfirmed\", \"\"], [\"class\", \"alert alert-warning centerAlignVertical roundedBorder\", \"role\", \"alert\", 4, \"ngIf\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\", \"centerAlignVertical\", \"roundedBorder\"], [1, \"bi\", \"flex-shrink-0\", \"me-2\", \"extraInfoCardHeaderIcon\"], [0, \"xlink\", \"href\", \"#exclamation-triangle-fill\"], [1, \"extraInfoCardText\"], [\"routerLink\", \"/sustainability-accounting/carbon\", \"target\", \"_blank\"], [1, \"row\", \"ms-2\", \"mt-1\"], [1, \"col-sm-10\", \"mt-2\", \"ms-1\"], [1, \"radioBtnGroupLabel\"], [1, \"infoText\"], [\"formControlName\", \"calculationApproachKeyID\"], [1, \"row\", \"mt-3\"], [1, \"col-sm-6\"], [1, \"radioBtnLabel\", 3, \"value\"], [\"class\", \"radioBtnGroupError ms-1 mt-1\", 4, \"ngIf\"], [1, \"radioBtnGroupError\", \"ms-1\", \"mt-1\"], [1, \"col-sm-10\"], [\"formControlName\", \"useTSCEmission\", 3, \"change\"], [1, \"row\", \"my-2\"], [1, \"centerAlignVertical\"], [1, \"pt-1\"], [1, \"radioBtnLabel\", 3, \"value\", \"click\"], [1, \"col-sm-8\"], [\"class\", \"card-body pt-4\", 4, \"ngIf\"], [1, \"card-body\", \"pt-4\"], [1, \"cardOverwrite\", 2, \"background-color\", \"whitesmoke\"], [1, \"card-title\", \"cardTitle\"], [\"class\", \"row mt-4\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\", \"mt-4\"], [1, \"col-sm-2\"], [1, \"progress\", \"cardOverwrite\", 2, \"background-color\", \"white\"], [\"role\", \"progressbar\", 1, \"progress-bar\", \"cardOverwrite\"], [1, \"mt-3\", \"text-secondary\"], [1, \"col-sm-2\", \"d-flex\", \"justify-content-center\", \"align-items-start\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", \"btn-sm\", 3, \"click\"], [\"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"check-circle-fill\", \"flex-shrink-0\", \"dialogHeaderIcon\", \"verifiedIcon\", \"me-2\"], [\"d\", \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 \\n                                                        7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"], [\"matTooltipPosition\", \"above\", 1, \"text-secondary\", \"cursorPointer\", 3, \"matTooltip\", \"click\"], [1, \"material-symbols-outlined\", \"fs-3\"], [1, \"btn\", \"btn-success\"], [1, \"btn\", \"btn-success\", 3, \"disabled\"], [\"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"check-circle-fill\", \"flex-shrink-0\", \"dialogHeaderIcon\", \"verifiedIcon\"], [\"d\", \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 \\n                                                    7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"], [\"matTooltip\", \"Update\", \"matTooltipPosition\", \"above\", 1, \"text-secondary\", \"mt-2\", \"cursorPointer\", 3, \"click\"], [1, \"material-symbols-outlined\", \"fs-3\", \"updateIconHover\"]],\n    template: function CreateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        const _r35 = i0.ɵɵgetCurrentView();\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(0, \"svg\", 0);\n        i0.ɵɵelementStart(1, \"symbol\", 1);\n        i0.ɵɵelement(2, \"path\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"symbol\", 3);\n        i0.ɵɵelement(4, \"path\", 4);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 8);\n        i0.ɵɵelementStart(10, \"div\", 9);\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵelementStart(12, \"form\", 11);\n        i0.ɵɵlistener(\"ngSubmit\", function CreateComponent_Template_form_ngSubmit_12_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵelementStart(13, \"div\", 12);\n        i0.ɵɵelementStart(14, \"div\", 13);\n        i0.ɵɵelementStart(15, \"mat-form-field\", 14);\n        i0.ɵɵlistener(\"click\", function CreateComponent_Template_mat_form_field_click_15_listener() {\n          i0.ɵɵrestoreView(_r35);\n          const _r0 = i0.ɵɵreference(21);\n          return ctx.openDatepickerOnClick(_r0);\n        })(\"keydown.arrowdown\", function CreateComponent_Template_mat_form_field_keydown_arrowdown_15_listener() {\n          i0.ɵɵrestoreView(_r35);\n          const _r0 = i0.ɵɵreference(21);\n          return ctx.openDatepickerOnClick(_r0);\n        })(\"keydown.enter\", function CreateComponent_Template_mat_form_field_keydown_enter_15_listener() {\n          i0.ɵɵrestoreView(_r35);\n          const _r0 = i0.ɵɵreference(21);\n          return ctx.openDatepickerOnClick(_r0);\n        });\n        i0.ɵɵelementStart(16, \"mat-label\", 15);\n        i0.ɵɵtext(17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(18, \"input\", 16);\n        i0.ɵɵelement(19, \"mat-datepicker-toggle\", 17);\n        i0.ɵɵelementStart(20, \"mat-datepicker\", 18, 19);\n        i0.ɵɵlistener(\"yearSelected\", function CreateComponent_Template_mat_datepicker_yearSelected_20_listener($event) {\n          i0.ɵɵrestoreView(_r35);\n          const _r0 = i0.ɵɵreference(21);\n          return ctx.yearSelectedHandler($event, _r0);\n        })(\"closed\", function CreateComponent_Template_mat_datepicker_closed_20_listener() {\n          return ctx.takeFocusAway(\"yearlyField\");\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(22, CreateComponent_mat_error_22_Template, 2, 0, \"mat-error\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"div\", 12);\n        i0.ɵɵtemplate(24, CreateComponent_ng_container_24_Template, 3, 1, \"ng-container\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 21);\n        i0.ɵɵelementStart(26, \"div\", 13);\n        i0.ɵɵelementStart(27, \"mat-form-field\", 22);\n        i0.ɵɵelementStart(28, \"mat-label\", 15);\n        i0.ɵɵtext(29, \"Recalculation Policy\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"textarea\", 23);\n        i0.ɵɵtext(31, \"                                \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(32, CreateComponent_mat_hint_32_Template, 2, 2, \"mat-hint\", 20);\n        i0.ɵɵtemplate(33, CreateComponent_mat_error_33_Template, 2, 0, \"mat-error\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(34, \"div\", 24);\n        i0.ɵɵelementStart(35, \"span\", 25);\n        i0.ɵɵlistener(\"click\", function CreateComponent_Template_span_click_35_listener() {\n          return ctx.openInfoDialog(ctx.RECALCULATION_POLICY_INFO);\n        });\n        i0.ɵɵtext(36, \" info \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 21);\n        i0.ɵɵelementStart(38, \"div\", 13);\n        i0.ɵɵelementStart(39, \"mat-form-field\", 22);\n        i0.ɵɵelementStart(40, \"mat-label\", 15);\n        i0.ɵɵtext(41, \"Significance Threshold\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(42, \"input\", 26);\n        i0.ɵɵelementStart(43, \"span\", 27);\n        i0.ɵɵtext(44, \"%\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(45, CreateComponent_mat_error_45_Template, 2, 0, \"mat-error\", 20);\n        i0.ɵɵtemplate(46, CreateComponent_mat_error_46_Template, 2, 0, \"mat-error\", 20);\n        i0.ɵɵtemplate(47, CreateComponent_mat_error_47_Template, 2, 1, \"mat-error\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(48, \"div\", 24);\n        i0.ɵɵelementStart(49, \"span\", 25);\n        i0.ɵɵlistener(\"click\", function CreateComponent_Template_span_click_49_listener() {\n          return ctx.openInfoDialog(ctx.SIGNIFICANCE_THRESHOLD_INFO);\n        });\n        i0.ɵɵtext(50, \" info \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(51, CreateComponent_ng_container_51_Template, 16, 3, \"ng-container\", 20);\n        i0.ɵɵtemplate(52, CreateComponent_ng_container_52_Template, 16, 3, \"ng-container\", 20);\n        i0.ɵɵtemplate(53, CreateComponent_ng_container_53_Template, 3, 1, \"ng-container\", 20);\n        i0.ɵɵelementStart(54, \"div\", 28);\n        i0.ɵɵelementStart(55, \"button\", 29);\n        i0.ɵɵlistener(\"click\", function CreateComponent_Template_button_click_55_listener() {\n          return ctx.location.back();\n        });\n        i0.ɵɵtext(56);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(57, CreateComponent_button_57_Template, 2, 1, \"button\", 30);\n        i0.ɵɵtemplate(58, CreateComponent_button_58_Template, 2, 2, \"button\", 31);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(59, CreateComponent_ng_template_59_Template, 5, 0, \"ng-template\", null, 32, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        const _r0 = i0.ɵɵreference(21);\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate2(\" \", ctx.isUpdate ? \"Update\" : \"Create\", \" \", ctx.baseYearType, \" base year \");\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"formGroup\", ctx.baseYearFG);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"appearance\", ctx.MaterialFormFieldAppearance.FORM_FIELD_APPEARANCE);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\"\", ctx.baseYearType, \" Base Year\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matDatepicker\", _r0)(\"formControl\", ctx.baseYearFC)(\"min\", ctx.min_base_year)(\"max\", ctx.today);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"for\", _r0);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.baseYearFC.hasError(\"required\"));\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", !ctx.waitingForResponse);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"appearance\", ctx.MaterialFormFieldAppearance.FORM_FIELD_APPEARANCE);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"maxLength\", ctx.RECALCULATION_POLICY_CHAR_MAX_LENGTH);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.baseYearFG.get(\"recalculationPolicy\").value == null ? null : ctx.baseYearFG.get(\"recalculationPolicy\").value.length);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorHandling(\"recalculationPolicy\", \"required\"));\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"appearance\", ctx.MaterialFormFieldAppearance.FORM_FIELD_APPEARANCE);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorHandling(\"significanceThreshold\", \"required\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorHandling(\"significanceThreshold\", \"min\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.errorHandling(\"significanceThreshold\", \"max\"));\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isSBTiBaseYear);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isSBTiBaseYear);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.waitingForResponse);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.ButtonLabelEnum.CANCEL_BTN_LABEL, \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.isUpdate);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.isUpdate);\n      }\n    },\n    directives: [i1.ɵNgNoValidate, i1.NgControlStatusGroup, i1.FormGroupDirective, i12.MatFormField, i13.YearFormatDirective, i12.MatLabel, i14.MatInput, i15.MatDatepickerInput, i1.DefaultValueAccessor, i1.NgControlStatus, i1.FormControlDirective, i15.MatDatepickerToggle, i12.MatSuffix, i15.MatDatepicker, i11.NgIf, i14.MatTextareaAutosize, i1.FormControlName, i1.NumberValueAccessor, i12.MatError, i2.RouterLinkWithHref, i12.MatHint, i16.MatRadioGroup, i16.MatRadioButton, i17.MatCard, i11.NgForOf, i18.MatTooltip],\n    styles: [\"\"]\n  });\n  return CreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { FormControl } from '@angular/forms';\nimport { faPlus, faSearch, faEllipsisH } from '@fortawesome/free-solid-svg-icons';\nimport { merge, fromEvent, of as observableOf } from 'rxjs';\nimport { map, startWith, switchMap, catchError } from 'rxjs/operators';\nimport { SourceTypeKeyIDEnum } from '@netzero/enum/source.enum';\nimport { BulkUploadDialog } from '../../shared/bulk-upload/bulk-upload-dialog.component';\nimport { CreateUpdateComponent } from '../create-update/create-update.component';\nimport { AssignComponent } from '../assignee/assign.component';\n// tsc-library\nimport { ButtonTooltipEnum, COMMON_CONSTANT, MATERIAL_CONSTANT, TABLE_CONSTANT } from '@library/tsc-common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@netzero/controller/supplier.controller\";\nimport * as i4 from \"@library/storage-service\";\nimport * as i5 from \"@angular/material/core\";\nimport * as i6 from \"@angular/material/tooltip\";\nimport * as i7 from \"@fortawesome/angular-fontawesome\";\nimport * as i8 from \"@ng-bootstrap/ng-bootstrap\";\nimport * as i9 from \"@angular/material/form-field\";\nimport * as i10 from \"@angular/common\";\nimport * as i11 from \"@angular/material/select\";\nimport * as i12 from \"@angular/material/input\";\nimport * as i13 from \"@angular/material/table\";\nimport * as i14 from \"@angular/material/sort\";\nimport * as i15 from \"@angular/material/paginator\";\nimport * as i16 from \"@angular/material/button\";\nimport * as i17 from \"ngx-smart-popover\";\nimport * as i18 from \"@angular/cdk/clipboard\";\nimport * as i19 from \"@angular/material/checkbox\";\nconst _c0 = [\"sort\"];\nconst _c1 = [\"paginator\"];\nconst _c2 = [\"searchBtn\"];\nconst _c3 = [\"refreshBtn\"];\nconst _c4 = [\"filterBtn\"];\nconst _c5 = [\"AllSourceBtn\"];\nfunction SupplierComponent_span_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" (+\", ((ctx_r2.typeControl.value == null ? null : ctx_r2.typeControl.value.length) || 0) - 1, \") \");\n  }\n}\nfunction SupplierComponent_mat_option_30_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r28 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"mat-option\", 57);\n    i0.ɵɵlistener(\"click\", function SupplierComponent_mat_option_30_Template_mat_option_click_0_listener() {\n      i0.ɵɵrestoreView(_r28);\n      const ctx_r27 = i0.ɵɵnextContext();\n      return ctx_r27.selectType();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const type_r26 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", type_r26.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", type_r26.name, \" \");\n  }\n}\nfunction SupplierComponent_mat_option_38_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 58);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const orgFilter_r29 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", orgFilter_r29.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", orgFilter_r29.view, \" \");\n  }\n}\nfunction SupplierComponent_button_45_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 59);\n    i0.ɵɵlistener(\"click\", function SupplierComponent_button_45_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext();\n      ctx_r30.supplierSearchFC.patchValue(\"\");\n      ctx_r30.searchFlagValue = false;\n      return ctx_r30.supplierSearchFlag();\n    });\n    i0.ɵɵelementStart(1, \"span\", 60);\n    i0.ɵɵtext(2, \" close \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SupplierComponent_button_46_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 61, 62);\n    i0.ɵɵlistener(\"click\", function SupplierComponent_button_46_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext();\n      return ctx_r33.supplierSearchFlag();\n    });\n    i0.ɵɵelement(2, \"fa-icon\", 63);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"icon\", ctx_r6.faSearch);\n  }\n}\nfunction SupplierComponent_th_52_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 64);\n    i0.ɵɵtext(1, \" Supplier Code \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SupplierComponent_td_53_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 65);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const supplierRow_r35 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", supplierRow_r35.supplierCode == null ? \"--\" : supplierRow_r35.supplierCode, \" \");\n  }\n}\nfunction SupplierComponent_th_55_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 66);\n    i0.ɵɵtext(1, \" Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SupplierComponent_td_56_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 65);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const supplierRow_r36 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", supplierRow_r36.supplierName, \" \");\n  }\n}\nfunction SupplierComponent_th_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 64);\n    i0.ɵɵtext(1, \"Type\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SupplierComponent_td_59_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 70);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const supplierType_r40 = ctx.$implicit;\n    const ctx_r39 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r39.supplierTypeDisplay(supplierType_r40), \"\");\n  }\n}\nfunction SupplierComponent_td_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 67, 68);\n    i0.ɵɵtemplate(2, SupplierComponent_td_59_div_2_Template, 2, 1, \"div\", 69);\n    i0.ɵɵpipe(3, \"slice\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const supplierRow_r37 = ctx.$implicit;\n    const ctx_r13 = i0.ɵɵnextContext();\n    i0.ɵɵpropertyInterpolate(\"matTooltip\", ctx_r13.supplierTypeToolTip(supplierRow_r37.supplierType));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind3(3, 2, supplierRow_r37.supplierType, 0, 2));\n  }\n}\nfunction SupplierComponent_th_61_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 64);\n    i0.ɵɵtext(1, \" API Key ID \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SupplierComponent_td_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 65);\n    i0.ɵɵelementStart(1, \"button\", 71, 68);\n    i0.ɵɵelementStart(3, \"span\", 72);\n    i0.ɵɵtext(4, \" visibility \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"popover-content\", 73, 74);\n    i0.ɵɵelementStart(7, \"span\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 75);\n    i0.ɵɵelementStart(10, \"span\", 76, 68);\n    i0.ɵɵtext(12, \" content_copy \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const supplierRow_r42 = ctx.$implicit;\n    const _r44 = i0.ɵɵreference(6);\n    const ctx_r15 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matTooltip\", ctx_r15.COMMON_CONSTANT.VIEW_API_KEY_ID)(\"popover\", _r44)(\"popoverOnHover\", false)(\"popoverAnimation\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"animation\", true)(\"closeOnClickOutside\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(supplierRow_r42.supplierKeyID);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"cdkCopyToClipboard\", supplierRow_r42.supplierKeyID);\n  }\n}\nfunction SupplierComponent_th_64_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 64);\n    i0.ɵɵtext(1, \" Assign Supplier \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction SupplierComponent_td_65_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"td\", 77);\n    i0.ɵɵelementStart(1, \"mat-checkbox\", 78);\n    i0.ɵɵlistener(\"click\", function SupplierComponent_td_65_Template_mat_checkbox_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r48);\n      const supplierRow_r46 = restoredCtx.$implicit;\n      const ctx_r47 = i0.ɵɵnextContext();\n      return ctx_r47.assign(supplierRow_r46.supplierID, supplierRow_r46.assigneFlag);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const supplierRow_r46 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", supplierRow_r46.assigneFlag == \"YES\");\n  }\n}\nfunction SupplierComponent_th_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"th\", 64);\n  }\n}\nfunction SupplierComponent_td_68_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c6 = function (a1) {\n  return [\"update\", a1];\n};\nconst _c7 = function (a1, a3, a4) {\n  return {\n    icon: \"edit\",\n    tooltip: a1,\n    class: \"text-primary\",\n    function: a3,\n    functionParameter: a4\n  };\n};\nfunction SupplierComponent_td_68_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 65);\n    i0.ɵɵelementStart(1, \"div\", 79);\n    i0.ɵɵtemplate(2, SupplierComponent_td_68_ng_container_2_Template, 1, 0, \"ng-container\", 80);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r49 = ctx.$implicit;\n    const ctx_r19 = i0.ɵɵnextContext();\n    const _r24 = i0.ɵɵreference(75);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r24)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction3(4, _c7, ctx_r19.ButtonTooltipEnum.UPDATE, ctx_r19.createUpdateSupplier, i0.ɵɵpureFunction1(2, _c6, row_r49)));\n  }\n}\nfunction SupplierComponent_tr_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 81);\n  }\n}\nfunction SupplierComponent_tr_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 82);\n  }\n}\nfunction SupplierComponent_tr_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 83);\n    i0.ɵɵelementStart(1, \"td\", 84);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", ctx_r22.displayedColumns.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r22.TABLE_CONSTANT.TABLE_NO_DATA, \" \");\n  }\n}\nfunction SupplierComponent_ng_template_74_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r58 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 85);\n    i0.ɵɵlistener(\"click\", function SupplierComponent_ng_template_74_Template_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r58);\n      const function_r55 = restoredCtx.function;\n      const functionParameter_r56 = restoredCtx.functionParameter;\n      const ctx_r57 = i0.ɵɵnextContext();\n      return ctx_r57.handleClick(function_r55, functionParameter_r56);\n    });\n    i0.ɵɵelementStart(1, \"span\", 86);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const icon_r52 = ctx.icon;\n    const tooltip_r53 = ctx.tooltip;\n    const class_r54 = ctx.class;\n    const ctx_r25 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(class_r54);\n    i0.ɵɵproperty(\"matTooltip\", tooltip_r53)(\"matRippleCentered\", ctx_r25.MATERIAL_CONSTANT.MAT_RIPPLE_CENTER);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", icon_r52, \" \");\n  }\n}\nconst _c8 = function (a0) {\n  return {\n    \"filter\": a0\n  };\n};\nconst _c9 = function (a0) {\n  return {\n    \"dropDown\": a0\n  };\n};\n// /tsc-library/\nexport let SupplierComponent = /*#__PURE__*/(() => {\n  class SupplierComponent {\n    constructor(builder, dialog, supplierController,\n    // tsc-library\n    storageService\n    // /tsc-library/\n    ) {\n      this.builder = builder;\n      this.dialog = dialog;\n      this.supplierController = supplierController;\n      this.storageService = storageService;\n      this.COMMON_CONSTANT = COMMON_CONSTANT;\n      this.MATERIAL_CONSTANT = MATERIAL_CONSTANT;\n      this.TABLE_CONSTANT = TABLE_CONSTANT;\n      this.ButtonTooltipEnum = ButtonTooltipEnum;\n      this.faPlus = faPlus;\n      this.faSearch = faSearch;\n      this.faEllipsisH = faEllipsisH;\n      this.displayedColumns = ['supplierCode', 'supplierName', 'type', 'keyID', 'assign', 'option'];\n      this.supplierSearchFC = new FormControl('');\n      this.searchValue = null;\n      this.searchValueLength = 0;\n      this.searchFlagValue = false;\n      this.refreshValue = false;\n      this.filterValue = 'orgID';\n      this.searchFilterValue = 'all';\n      this.typeControl = new FormControl(['All types']);\n      this.filter = '';\n      this.filters = [];\n      this.supplierTypes = [];\n      this.chips = [];\n      this.orgFilterDropDown = [{\n        value: 'all',\n        view: 'All suppliers'\n      }];\n      this.createUpdateSupplier = (operation, data) => {\n        let dialogRef;\n        if (operation == 'create') {\n          dialogRef = this.dialog.open(CreateUpdateComponent, {\n            data: {\n              action: operation,\n              currentOrgID: this.currentOrgID\n            },\n            minWidth: '600px',\n            maxWidth: '600px',\n            height: '100%',\n            position: {\n              right: '-2px',\n              top: '0px'\n            }\n          });\n        } else {\n          dialogRef = this.dialog.open(CreateUpdateComponent, {\n            data: {\n              action: operation,\n              supplier: data,\n              currentOrgID: this.currentOrgID\n            },\n            minWidth: '600px',\n            maxWidth: '600px',\n            height: '100%',\n            position: {\n              right: '-2px',\n              top: '0px'\n            }\n          });\n        }\n        dialogRef.afterClosed().subscribe(result => {\n          if (result === 'opSuccess') {\n            this.refreshFn();\n          }\n        });\n      };\n      this.searchErrorHandling = error => {\n        return this.supplierSearchFC.hasError(error);\n      };\n    }\n    ngOnInit() {\n      this.currentOrgID = this.storageService.getStorage('currentOrgID');\n      this.getSupplierAllType();\n      this.filterFG = this.builder.group({\n        types: null,\n        orgID: null,\n        supplierName: null\n      });\n    }\n    supplierFGInit() {\n      this.supplierFG = this.builder.group({\n        name: []\n      });\n    }\n    supplierSearchFlag() {\n      this.searchValue = this.supplierSearchFC.value;\n      this.searchValueLength = this.searchValue.length;\n      if (this.searchValueLength > 0) {\n        this.paginator.pageIndex = 0;\n      }\n      this.searchFlagValue = true;\n      this.refreshBtn.nativeElement.click();\n    }\n    refreshFn() {\n      this.refreshValue = true;\n      this.refreshBtn.nativeElement.click();\n    }\n    ngAfterViewInit() {\n      this.sort.sortChange.subscribe(() => this.paginator.pageIndex = 0);\n      let filtersUpdated = true;\n      this.paginator.page.subscribe(() => filtersUpdated = false);\n      this.sort.sortChange.subscribe(() => {\n        filtersUpdated = false;\n        this.paginator.pageIndex = 0;\n      });\n      merge(this.paginator.page, this.sort.sortChange,\n      // fromEvent(this.searchBtn.nativeElement, 'click'),\n      fromEvent(this.refreshBtn.nativeElement, 'click'), fromEvent(this.filterBtn.nativeElement, 'click')).pipe(startWith({}), switchMap(() => {\n        if (filtersUpdated) {\n          if (this.typeControl.value[0] == 'All types' || this.typeControl.value.length == 0) {\n            this.filterFG.controls['types'].patchValue(null);\n            this.filterFG.controls['orgID'].patchValue(null);\n          } else {\n            this.filterFG.controls['types'].patchValue(this.typeControl.value);\n          }\n          if (this.filterValue == 'orgID') {\n            this.filterFG.controls['orgID'].patchValue(this.currentOrgID);\n          } else {\n            this.filterFG.controls['orgID'].patchValue(null);\n          }\n          if (this.searchFlagValue) {\n            if (this.searchValueLength < 1) {\n              this.searchFlagValue = false;\n              // return [];\n            }\n\n            if (this.searchValue == '') {\n              this.searchValue = null;\n            }\n            this.filterFG.controls['supplierName'].patchValue(this.searchValue);\n          }\n        } else {\n          filtersUpdated = true;\n        }\n        return this.supplierController.getSupplier(this.paginator.pageIndex, this.paginator.pageSize, this.sort.active, this.sort.direction, this.currentOrgID, this.filterFG.value).pipe(catchError(() => observableOf(null)));\n      }), map(dataSource => {\n        if (dataSource === null) {\n          return [];\n        }\n        this.resultLength = dataSource.totalCount;\n        return dataSource.supplier;\n      })).subscribe(dataSource => {\n        this.dataSource = dataSource;\n      });\n    }\n    getSupplierAllType() {\n      this.supplierController.getSupplierType().subscribe(typeRes => {\n        if (typeRes.length != 0) {\n          for (let i = 0; i < typeRes.length; i++) {\n            this.supplierTypes.push(typeRes[i]);\n          }\n          this.allType();\n        }\n      }, error => {\n        console.log('error in getSupplierType -', error);\n      });\n    }\n    selectType() {\n      if (this.typeControl.value.indexOf('All types') != -1) {\n        let currentTypes = this.typeControl.value;\n        currentTypes.shift();\n        this.typeControl.patchValue(currentTypes);\n      } else if (this.typeControl.value.length == this.supplierTypes.length) {\n        this.allSupplierTypesFilter();\n      }\n      this.filterBtn.nativeElement.click();\n    }\n    // fix all types checkbox according to selected checkbox\n    allType() {\n      if (this.typeControl.value.indexOf('All types') == -1) {\n        this.typeControl.patchValue([]);\n      } else {\n        this.allSupplierTypesFilter();\n      }\n      this.filterBtn.nativeElement.click();\n    }\n    // set all supplier type in types typeControl also add All types \n    allSupplierTypesFilter() {\n      let allTypes = ['All types'];\n      this.supplierTypes.map(supplierTypes => {\n        allTypes.push(supplierTypes['name']);\n      });\n      this.typeControl.patchValue(allTypes);\n    }\n    // reset all filter while reset button click\n    resetAllFilter() {\n      this.allSupplierTypesFilter();\n      this.filterValue = 'orgID';\n      this.searchFlagValue = false;\n      this.supplierSearchFC.reset('');\n      this.supplierSearchFlag();\n    }\n    // set filter value for My Supplier or Organization Supplier\n    filterChange(value) {\n      if (value == 'all') {\n        this.filterValue = 'all';\n      } else {\n        this.filterValue = 'orgID';\n      }\n      this.filterBtn.nativeElement.click();\n    }\n    // for supplier type list \n    supplierTypeToolTip(types) {\n      let tooltip = '';\n      for (let i = 0; i < types.length; i++) {\n        tooltip = tooltip + (types[i] + '\\n');\n      }\n      return tooltip;\n    }\n    supplierTypeDisplay(type) {\n      return type.length > 12 ? type.substring(0, 12) + '..' : type + '..';\n    }\n    // update assigned and unassigned supplier\n    assign(supplierID, assign) {\n      let assigned = null;\n      if (assign == 'YES') {\n        assigned = 'unassign';\n      } else if (assign == 'NO') {\n        assigned = 'assign';\n      }\n      this.supplierController.getSupplierActivityForm(supplierID, this.currentOrgID).subscribe(supplierRes => {\n        const dialogRef = this.dialog.open(AssignComponent, {\n          data: {\n            action: '',\n            currentOrgID: this.currentOrgID,\n            activityForm: supplierRes,\n            assigned: assigned,\n            supplierID: supplierID\n          },\n          minWidth: '600px',\n          maxWidth: '600px'\n        });\n        dialogRef.afterClosed().subscribe(result => {\n          console.log('result - ', result);\n          if (result === 'success') {\n            this.refreshFn();\n          }\n        });\n      }, error => {\n        console.log('error in deleteScopeThreeSupplier -', error);\n      });\n    }\n    bulkUpload() {\n      const dialogRef = this.dialog.open(BulkUploadDialog, {\n        data: {\n          source: SourceTypeKeyIDEnum.SUPPLIER\n        },\n        minWidth: '600px',\n        maxWidth: '600px'\n      });\n      dialogRef.afterClosed().subscribe(result => {\n        if (result === 'blukUploadSuccessfully') {\n          this.refreshFn();\n        }\n      });\n    }\n    handleClick(func, params) {\n      func(...params);\n    }\n  }\n  SupplierComponent.ɵfac = function SupplierComponent_Factory(t) {\n    return new (t || SupplierComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.SupplierController), i0.ɵɵdirectiveInject(i4.StorageService));\n  };\n  SupplierComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: SupplierComponent,\n    selectors: [[\"app-page\"]],\n    viewQuery: function SupplierComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 7);\n        i0.ɵɵviewQuery(_c1, 7);\n        i0.ɵɵviewQuery(_c2, 7);\n        i0.ɵɵviewQuery(_c3, 7);\n        i0.ɵɵviewQuery(_c4, 7);\n        i0.ɵɵviewQuery(_c5, 7);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.searchBtn = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.refreshBtn = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.filterBtn = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.AllSourceBtn = _t.first);\n      }\n    },\n    decls: 76,\n    vars: 29,\n    consts: [[1, \"card\", \"cardOverwrite\", \"h100\"], [1, \"headerContainer\"], [1, \"headerLeftContainer\"], [1, \"pageTitle\"], [1, \"pageSubtitle\"], [1, \"headerRightContainer\"], [1, \"headerRightContainerInner\"], [\"type\", \"button\", \"matRipple\", \"\", \"matTooltipPosition\", \"below\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"btnRightRadiusZero\", 3, \"matRippleCentered\", \"matTooltip\", \"click\"], [1, \"me-1\", 3, \"icon\"], [\"ngbDropdown\", \"\", \"placement\", \"bottom-right\", \"matTooltipPosition\", \"below\", 1, \"btn-group\", 3, \"matTooltip\"], [\"type\", \"button\", \"ngbDropdownToggle\", \"\", 1, \"btn\", \"btn-sm\", \"btn-success\", \"btnLeftRadiusZero\"], [\"ngbDropdownMenu\", \"\"], [\"matRipple\", \"\", 1, \"dropdown-item\", 3, \"matRippleCentered\", \"click\"], [\"type\", \"button\", 1, \"d-none\"], [\"refreshBtn\", \"\"], [\"filterBtn\", \"\"], [1, \"card-header\", \"bottomBorderNone\", \"mt-3\"], [1, \"col-sm-3\", \"filterFontSize\"], [\"appearance\", \"none\", 1, \"matFieldWidth100\", \"filterHeader\", 3, \"ngClass\"], [\"multiple\", \"\", \"placeholder\", \"Filter by types\", 1, \"selectValue\", 3, \"formControl\"], [\"class\", \"example-additional-selection\", 4, \"ngIf\"], [\"value\", \"All types\", 1, \"multiSelect\", 3, \"click\"], [\"class\", \"multiSelect\", 3, \"value\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-2\", \"ms-2\", \"filterFontSize\", \"filterHeader\", 3, \"ngClass\"], [\"appearance\", \"none\", 1, \"matFieldWidth100\", 3, \"ngClass\"], [1, \"selectValue\", 3, \"value\", \"selectionChange\"], [\"value\", \"\", \"disabled\", \"\"], [\"value\", \"orgID\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-7\"], [1, \"float-end\"], [1, \"me-1\"], [1, \"formLabelSearch\"], [\"matInput\", \"\", \"type\", \"text\", \"placeholder\", \"Eg. Aditya Birla\", 1, \"formPlaceholder\", 3, \"formControl\", \"keydown.enter\"], [\"type\", \"button\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"button btn btn-light searchBtn\", \"type\", \"submit\", \"matSuffix\", \"\", 3, \"click\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"button\", \"btn\", \"resetBtn\", \"me-3\", 3, \"click\"], [\"mat-table\", \"\", \"matSort\", \"\", \"matSortActive\", \"supplierName\", \"matSortDisableClear\", \"\", \"matSortDirection\", \"desc\", 3, \"dataSource\"], [\"sort\", \"matSort\"], [\"matColumnDef\", \"supplierCode\"], [\"mat-header-cell\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", 4, \"matCellDef\"], [\"matColumnDef\", \"supplierName\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"disableClear\", \"\", 4, \"matHeaderCellDef\"], [\"matColumnDef\", \"type\"], [\"class\", \"cursorPointer\", \"mat-cell\", \"\", \"matTooltipPosition\", \"left\", \"matTooltipHideDelay\", \"0\", \"matTooltipClass\", \"nameTooltip\", 3, \"matTooltip\", 4, \"matCellDef\"], [\"matColumnDef\", \"keyID\"], [\"matColumnDef\", \"assign\"], [\"mat-cell\", \"\", \"class\", \"checkbox\", 4, \"matCellDef\"], [\"matColumnDef\", \"option\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", \"class\", \"dataRow\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"class\", \"mat-row\", 4, \"matNoDataRow\"], [\"showFirstLastButtons\", \"\", 1, \"roundedBorder\", 3, \"length\", \"pageSizeOptions\", \"pageSize\"], [\"paginator\", \"\"], [\"icon\", \"\"], [1, \"example-additional-selection\"], [1, \"multiSelect\", 3, \"value\", \"click\"], [3, \"value\"], [\"type\", \"button\", \"matSuffix\", \"\", \"mat-icon-button\", \"\", 3, \"click\"], [1, \"material-symbols-outlined\", \"fs-5\"], [\"type\", \"submit\", \"matSuffix\", \"\", 1, \"button\", \"btn\", \"btn-light\", \"searchBtn\", 3, \"click\"], [\"searchBtn\", \"\"], [3, \"icon\"], [\"mat-header-cell\", \"\"], [\"mat-cell\", \"\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"disableClear\", \"\"], [\"mat-cell\", \"\", \"matTooltipPosition\", \"left\", \"matTooltipHideDelay\", \"0\", \"matTooltipClass\", \"nameTooltip\", 1, \"cursorPointer\", 3, \"matTooltip\"], [\"tooltip\", \"matTooltip\"], [\"class\", \"my-1\", 4, \"ngFor\", \"ngForOf\"], [1, \"my-1\"], [\"mat-icon-button\", \"\", \"type\", \"button\", \"matTooltipPosition\", \"above\", \"matTooltipHideDelay\", \"0\", \"popoverPlacement\", \"top\", 1, \"mx-auto\", 3, \"matTooltip\", \"popover\", \"popoverOnHover\", \"popoverAnimation\"], [\"type\", \"button\", 1, \"material-symbols-outlined\", \"fs-5\"], [3, \"animation\", \"closeOnClickOutside\"], [\"myPopover\", \"\"], [\"mat-icon-button\", \"\", \"type\", \"button\", 1, \"float-end\", 3, \"cdkCopyToClipboard\"], [\"matTooltipPosition\", \"above\", \"matTooltipHideDelay\", \"0\", \"matTooltipClass\", \"nameTooltip\", \"matTooltip\", \"Copy\", 1, \"material-symbols-outlined\", \"fs-5\"], [\"mat-cell\", \"\", 1, \"checkbox\"], [1, \"ms-4\", 3, \"checked\", \"click\"], [1, \"centerAlignVertical\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\", 1, \"dataRow\"], [1, \"mat-row\"], [1, \"mat-cell\", \"text-center\"], [\"matTooltipPosition\", \"below\", \"matRipple\", \"\", 1, \"iconBtn\", \"centerAlign\", 3, \"matTooltip\", \"matRippleCentered\", \"click\"], [1, \"material-symbols-outlined\", \"icon\"]],\n    template: function SupplierComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtext(4, \"Suppliers\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵtext(6, \" Create suppliers for supplier-level accounting and collaboration for scope 3 emissions. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"div\", 6);\n        i0.ɵɵelementStart(9, \"button\", 7);\n        i0.ɵɵlistener(\"click\", function SupplierComponent_Template_button_click_9_listener() {\n          return ctx.createUpdateSupplier(\"create\", \"\");\n        });\n        i0.ɵɵelement(10, \"fa-icon\", 8);\n        i0.ɵɵtext(11, \"Supplier \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵelement(13, \"button\", 10);\n        i0.ɵɵelementStart(14, \"div\", 11);\n        i0.ɵɵelementStart(15, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function SupplierComponent_Template_button_click_15_listener() {\n          return ctx.bulkUpload();\n        });\n        i0.ɵɵtext(16, \" Import \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(17, \"button\", 13, 14);\n        i0.ɵɵelement(19, \"button\", 13, 15);\n        i0.ɵɵelementStart(21, \"div\", 16);\n        i0.ɵɵelementStart(22, \"div\", 17);\n        i0.ɵɵelementStart(23, \"mat-form-field\", 18);\n        i0.ɵɵelementStart(24, \"mat-select\", 19);\n        i0.ɵɵelementStart(25, \"mat-select-trigger\");\n        i0.ɵɵtext(26);\n        i0.ɵɵtemplate(27, SupplierComponent_span_27_Template, 2, 1, \"span\", 20);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"mat-option\", 21);\n        i0.ɵɵlistener(\"click\", function SupplierComponent_Template_mat_option_click_28_listener() {\n          return ctx.allType();\n        });\n        i0.ɵɵtext(29, \"All types\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(30, SupplierComponent_mat_option_30_Template, 2, 2, \"mat-option\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"div\", 23);\n        i0.ɵɵelementStart(32, \"mat-form-field\", 24);\n        i0.ɵɵelementStart(33, \"mat-select\", 25);\n        i0.ɵɵlistener(\"selectionChange\", function SupplierComponent_Template_mat_select_selectionChange_33_listener($event) {\n          return ctx.filterChange($event.value);\n        });\n        i0.ɵɵelementStart(34, \"mat-option\", 26);\n        i0.ɵɵtext(35, \"Select\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(36, \"mat-option\", 27);\n        i0.ɵɵtext(37, \"Assigned suppliers\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(38, SupplierComponent_mat_option_38_Template, 2, 2, \"mat-option\", 28);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 29);\n        i0.ɵɵelementStart(40, \"div\", 30);\n        i0.ɵɵelementStart(41, \"mat-form-field\", 31);\n        i0.ɵɵelementStart(42, \"mat-label\", 32);\n        i0.ɵɵtext(43, \"Search by supplier name\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"input\", 33);\n        i0.ɵɵlistener(\"keydown.enter\", function SupplierComponent_Template_input_keydown_enter_44_listener() {\n          return ctx.supplierSearchFlag();\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(45, SupplierComponent_button_45_Template, 3, 0, \"button\", 34);\n        i0.ɵɵtemplate(46, SupplierComponent_button_46_Template, 3, 1, \"button\", 35);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"button\", 36);\n        i0.ɵɵlistener(\"click\", function SupplierComponent_Template_button_click_47_listener() {\n          return ctx.resetAllFilter();\n        });\n        i0.ɵɵtext(48, \" Reset \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"table\", 37, 38);\n        i0.ɵɵelementContainerStart(51, 39);\n        i0.ɵɵtemplate(52, SupplierComponent_th_52_Template, 2, 0, \"th\", 40);\n        i0.ɵɵtemplate(53, SupplierComponent_td_53_Template, 2, 1, \"td\", 41);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(54, 42);\n        i0.ɵɵtemplate(55, SupplierComponent_th_55_Template, 2, 0, \"th\", 43);\n        i0.ɵɵtemplate(56, SupplierComponent_td_56_Template, 2, 1, \"td\", 41);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(57, 44);\n        i0.ɵɵtemplate(58, SupplierComponent_th_58_Template, 2, 0, \"th\", 40);\n        i0.ɵɵtemplate(59, SupplierComponent_td_59_Template, 4, 6, \"td\", 45);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(60, 46);\n        i0.ɵɵtemplate(61, SupplierComponent_th_61_Template, 2, 0, \"th\", 40);\n        i0.ɵɵtemplate(62, SupplierComponent_td_62_Template, 13, 8, \"td\", 41);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(63, 47);\n        i0.ɵɵtemplate(64, SupplierComponent_th_64_Template, 2, 0, \"th\", 40);\n        i0.ɵɵtemplate(65, SupplierComponent_td_65_Template, 2, 1, \"td\", 48);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(66, 49);\n        i0.ɵɵtemplate(67, SupplierComponent_th_67_Template, 1, 0, \"th\", 40);\n        i0.ɵɵtemplate(68, SupplierComponent_td_68_Template, 3, 8, \"td\", 41);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(69, SupplierComponent_tr_69_Template, 1, 0, \"tr\", 50);\n        i0.ɵɵtemplate(70, SupplierComponent_tr_70_Template, 1, 0, \"tr\", 51);\n        i0.ɵɵtemplate(71, SupplierComponent_tr_71_Template, 3, 2, \"tr\", 52);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(72, \"mat-paginator\", 53, 54);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(74, SupplierComponent_ng_template_74_Template, 3, 5, \"ng-template\", null, 55, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(9);\n        i0.ɵɵproperty(\"matRippleCentered\", ctx.MATERIAL_CONSTANT.MAT_RIPPLE_CENTER)(\"matTooltip\", ctx.ButtonTooltipEnum.CREATE);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"icon\", ctx.faPlus);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"matTooltip\", ctx.ButtonTooltipEnum.MORE);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"matRippleCentered\", ctx.MATERIAL_CONSTANT.MAT_RIPPLE_CENTER);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(23, _c8, ctx.typeControl.value[0] != \"All types\" && ctx.typeControl.value.length != 0));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formControl\", ctx.typeControl);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", (ctx.typeControl.value == null ? null : ctx.typeControl.value[0]) || \"\", \" \");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ((ctx.typeControl.value == null ? null : ctx.typeControl.value.length) || 0) > 1 && ctx.typeControl.value[0] != \"All types\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngForOf\", ctx.supplierTypes);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(25, _c9, ctx.filterValue == \"all\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(27, _c8, ctx.filterValue == \"all\"));\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"value\", ctx.filterValue);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.orgFilterDropDown);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formControl\", ctx.supplierSearchFC);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.supplierSearchFC.value);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.supplierSearchFC.value == \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"length\", ctx.resultLength)(\"pageSizeOptions\", ctx.TABLE_CONSTANT.PAGE_SIZE_OPTION)(\"pageSize\", ctx.TABLE_CONSTANT.DEFAULT_PAGE_SIZE);\n      }\n    },\n    directives: [i5.MatRipple, i6.MatTooltip, i7.FaIconComponent, i8.NgbDropdown, i8.NgbDropdownToggle, i8.NgbDropdownMenu, i9.MatFormField, i10.NgClass, i11.MatSelect, i1.NgControlStatus, i1.FormControlDirective, i11.MatSelectTrigger, i10.NgIf, i5.MatOption, i10.NgForOf, i9.MatLabel, i12.MatInput, i1.DefaultValueAccessor, i13.MatTable, i14.MatSort, i13.MatColumnDef, i13.MatHeaderCellDef, i13.MatCellDef, i13.MatHeaderRowDef, i13.MatRowDef, i13.MatNoDataRow, i15.MatPaginator, i16.MatButton, i9.MatSuffix, i13.MatHeaderCell, i13.MatCell, i14.MatSortHeader, i17.PopoverDirective, i17.PopoverContentComponent, i18.CdkCopyToClipboard, i19.MatCheckbox, i10.NgTemplateOutlet, i13.MatHeaderRow, i13.MatRow],\n    pipes: [i10.SlicePipe],\n    encapsulation: 2\n  });\n  return SupplierComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
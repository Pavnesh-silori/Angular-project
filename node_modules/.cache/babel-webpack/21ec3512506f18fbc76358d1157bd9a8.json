{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { isEqual } from 'lodash';\nimport { startWith } from 'rxjs/operators';\nimport { DeleteDialog } from '../_shared/delete/delete-dialog.component';\nimport { EmissionDifferenceViewComponent } from '../emission-difference-view/emission-difference-view.component';\nimport { SettingChangeDialog } from '../_shared/setting-change-dialog/setting-change-dialog.component';\nimport { OrgSizeEnum, ScopeTwoMethodEnum } from '@carbon/enum/sbti.enum';\nimport { BaseYearEnum } from '@carbon/enum/base-year.enum';\nimport { SbtiSector, SbtiSetting, SbtiSettingDifference } from '@carbon/model/sbti.model';\nimport { ToastrColor } from '@library/toastr-service';\nimport { ButtonLabelEnum, DialogEnum, DialogResponseEnum, FormAction, InvalidForm, MATERIAL_CONSTANT, MatSelectSearchService, MaterialFormFieldAppearance } from '@library/tsc-common';\nimport { Organization } from '@library/organization-service';\nimport { InfoDialogComponent } from '@library/tsc-common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/material/dialog\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@library/organization-service\";\nimport * as i5 from \"@library/storage-service\";\nimport * as i6 from \"@library/toastr-service\";\nimport * as i7 from \"@carbon/controller/ghg-base-year.controller\";\nimport * as i8 from \"@carbon/controller/sbti.controller\";\nimport * as i9 from \"@carbon/service/preference.service\";\nimport * as i10 from \"@carbon/service/consolidation-approach.service\";\nimport * as i11 from \"@carbon/service/sbti.service\";\nimport * as i12 from \"@library/date\";\nimport * as i13 from \"@angular/common\";\nimport * as i14 from \"@angular/material/radio\";\nimport * as i15 from \"@angular/material/form-field\";\nimport * as i16 from \"@angular/material/select\";\nimport * as i17 from \"@angular/material/core\";\nimport * as i18 from \"ngx-mat-select-search\";\nimport * as i19 from \"@angular/material/checkbox\";\nfunction CreateComponent_ng_container_12_mat_error_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 53);\n    i0.ɵɵtext(1, \" Please select organization size. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_ng_container_35_mat_error_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 53);\n    i0.ɵɵtext(1, \" Select an option \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_ng_container_35_ng_container_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    message: a0\n  };\n};\nfunction CreateComponent_ng_container_12_ng_container_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 18);\n    i0.ɵɵelementStart(2, \"div\", 19);\n    i0.ɵɵelementStart(3, \"div\", 20);\n    i0.ɵɵtext(4, \" Is your organization involved in the sale, transmission, distribution of oil, natural gas, coal as well as other fossil fuels? \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"mat-radio-group\", 54);\n    i0.ɵɵelementStart(6, \"div\", 38);\n    i0.ɵɵelementStart(7, \"div\", 23);\n    i0.ɵɵelementStart(8, \"mat-radio-button\", 24);\n    i0.ɵɵtext(9, \" Yes \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 23);\n    i0.ɵɵelementStart(11, \"mat-radio-button\", 24);\n    i0.ɵɵtext(12, \" No \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, CreateComponent_ng_container_12_ng_container_35_mat_error_13_Template, 2, 0, \"mat-error\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, CreateComponent_ng_container_12_ng_container_35_ng_container_14_Template, 1, 0, \"ng-container\", 55);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    const _r1 = i0.ɵɵreference(14);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"value\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.radioGroupHasError(\"isUseOfSoldProducts\", \"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(5, _c0, ctx_r6.isUseOfSoldProductsInfo));\n  }\n}\nfunction CreateComponent_ng_container_12_mat_option_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-option\", 56);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const sbtiSectors_r23 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", sbtiSectors_r23.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", sbtiSectors_r23.name, \" \");\n  }\n}\nfunction CreateComponent_ng_container_12_mat_error_46_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" SBTi sector is required. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_ng_container_62_mat_error_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 58);\n    i0.ɵɵtext(1, \" Select an option \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_ng_container_62_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CreateComponent_ng_container_12_ng_container_62_mat_error_1_Template, 2, 0, \"mat-error\", 57);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.radioGroupHasError(\"isBaseYearSameAsGHG\", \"required\"));\n  }\n}\nfunction CreateComponent_ng_container_12_ng_template_63_ng_container_0_mat_hint_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-hint\", 60);\n    i0.ɵɵtext(1, \" Please select organization size. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_ng_template_63_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CreateComponent_ng_container_12_ng_template_63_ng_container_0_mat_hint_1_Template, 2, 0, \"mat-hint\", 59);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r25.orgSizeKeyIDAC.value);\n  }\n}\nfunction CreateComponent_ng_container_12_ng_template_63_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CreateComponent_ng_container_12_ng_template_63_ng_container_0_Template, 2, 1, \"ng-container\", 29);\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.ghgBaseYearExist);\n  }\n}\nconst _c1 = function () {\n  return [\"/carbon-setting/base-year\"];\n};\nfunction CreateComponent_ng_container_12_ng_container_65_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 61);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 62);\n    i0.ɵɵelement(3, \"use\", 63);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\", 64);\n    i0.ɵɵtext(5, \" Your GHG base year is not setup right now. To use GHG base year as the SBTi year, you can setup your GHG base year \");\n    i0.ɵɵelementStart(6, \"a\", 65);\n    i0.ɵɵtext(7, \"here\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \". \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nfunction CreateComponent_ng_container_12_ng_container_66_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 61);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 62);\n    i0.ɵɵelement(3, \"use\", 63);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\", 64);\n    i0.ɵɵtext(5, \" GHG base year and recalculation policy does not fit SBTi criteria and therefore cannot be used as SBTi base year. You can setup a new SBTi base year \");\n    i0.ɵɵelementStart(6, \"a\", 65);\n    i0.ɵɵtext(7, \"here\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \" or edit GHG base year. Make sure to save Science based target settings first. \");\n    i0.ɵɵelementStart(9, \"ol\", 66);\n    i0.ɵɵelementStart(10, \"strong\");\n    i0.ɵɵtext(11, \"SBTi base year criteria:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"li\", 67);\n    i0.ɵɵtext(13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"li\", 67);\n    i0.ɵɵtext(15, \" Significance threshold for recalculation policy cannot be greater than 5% \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(2, _c1));\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" Base year cannot be before \", ctx_r13.isSME == \"YES\" ? 2018 : 2015, \" \");\n  }\n}\nfunction CreateComponent_ng_container_12_ng_container_67_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 61);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 62);\n    i0.ɵɵelement(3, \"use\", 63);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\", 64);\n    i0.ɵɵtext(5, \" SBTi base year and recalculation policy will be synced with your GHG base year setup. Recalculations for both can be managed from \");\n    i0.ɵɵelementStart(6, \"a\", 65);\n    i0.ɵɵtext(7, \"Base year\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(8, \" settings. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\nfunction CreateComponent_ng_container_12_mat_error_81_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 53);\n    i0.ɵɵtext(1, \" Please select preferred method to report scope 2 emissions. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_ng_container_87_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 68);\n    i0.ɵɵelementStart(2, \"mat-radio-button\", 24);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ca_r27 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"value\", ca_r27[\"keyID\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ca_r27[\"name\"], \" \");\n  }\n}\nfunction CreateComponent_ng_container_12_mat_error_88_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\", 53);\n    i0.ɵɵtext(1, \" Select an option \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_div_89_div_3_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"span\", 27);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_12_div_89_div_3_span_3_Template_span_click_0_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext(4);\n      return ctx_r33.openInfoDialog(ctx_r33.agreementInfo);\n    });\n    i0.ɵɵtext(1, \" info \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_div_89_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelementStart(1, \"mat-checkbox\", 70);\n    i0.ɵɵlistener(\"change\", function CreateComponent_ng_container_12_div_89_div_3_Template_mat_checkbox_change_1_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r36);\n      const questions_r30 = restoredCtx.$implicit;\n      return questions_r30[\"checked\"] = $event.checked;\n    })(\"click\", function CreateComponent_ng_container_12_div_89_div_3_Template_mat_checkbox_click_1_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r37 = i0.ɵɵnextContext(3);\n      return ctx_r37.checkValidation();\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, CreateComponent_ng_container_12_div_89_div_3_span_3_Template, 2, 0, \"span\", 71);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const questions_r30 = ctx.$implicit;\n    const i_r31 = ctx.index;\n    const ctx_r28 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"checked\", questions_r30[\"checked\"])(\"disabled\", ctx_r28.action == \"update\" && ctx_r28.orgSize == ctx_r28.OrgSize[\"NON_SME\"]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", questions_r30.question, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r31 == 5);\n  }\n}\nfunction CreateComponent_ng_container_12_div_89_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 72);\n    i0.ɵɵtext(1, \" Please check all agreement questions. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CreateComponent_ng_container_12_div_89_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 45);\n    i0.ɵɵelementStart(1, \"div\", 20);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, CreateComponent_ng_container_12_div_89_div_3_Template, 4, 4, \"div\", 47);\n    i0.ɵɵtemplate(4, CreateComponent_ng_container_12_div_89_div_4_Template, 2, 0, \"div\", 69);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", ctx_r18.organizationM.name, \" agrees to\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r18.agreementQuestions);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.showAgreementError);\n  }\n}\nfunction CreateComponent_ng_container_12_button_93_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 73);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_12_button_93_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const ctx_r38 = i0.ɵɵnextContext(2);\n      return ctx_r38.submitSbtiSetting();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"matRippleCentered\", ctx_r19.MATERIAL_CONSTANT.MAT_RIPPLE_CENTER);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r19.ButtonLabelEnum.SUBMIT_BTN_LABEL, \" \");\n  }\n}\nfunction CreateComponent_ng_container_12_button_94_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r41 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 74);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_12_button_94_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r41);\n      const ctx_r40 = i0.ɵɵnextContext(2);\n      return ctx_r40.getSettingEmissionDifference();\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"matRippleCentered\", ctx_r20.MATERIAL_CONSTANT.MAT_RIPPLE_CENTER)(\"disabled\", ctx_r20.isEqual);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r20.ButtonLabelEnum.SAVE_BTN_LABEL, \" \");\n  }\n}\nfunction CreateComponent_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r43 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 16);\n    i0.ɵɵelementStart(2, \"form\", 17);\n    i0.ɵɵelementStart(3, \"div\", 18);\n    i0.ɵɵelementStart(4, \"div\", 19);\n    i0.ɵɵelementStart(5, \"div\", 20);\n    i0.ɵɵtext(6, \"Select organization size *\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"mat-radio-group\", 21);\n    i0.ɵɵlistener(\"change\", function CreateComponent_ng_container_12_Template_mat_radio_group_change_7_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r42 = i0.ɵɵnextContext();\n      return ctx_r42.confimationOrgSizeChange();\n    });\n    i0.ɵɵelementStart(8, \"div\", 22);\n    i0.ɵɵelementStart(9, \"div\", 23);\n    i0.ɵɵelementStart(10, \"mat-radio-button\", 24);\n    i0.ɵɵtext(11, \" SME \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 25);\n    i0.ɵɵtext(13, \"Select if: \");\n    i0.ɵɵelement(14, \"br\");\n    i0.ɵɵtext(15, \" You are an independent, non-subsidiary \");\n    i0.ɵɵelement(16, \"br\");\n    i0.ɵɵtext(17, \" organization with fewer than 500 employees \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 23);\n    i0.ɵɵelementStart(19, \"mat-radio-button\", 24);\n    i0.ɵɵtext(20, \" Enterprise \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"div\", 25);\n    i0.ɵɵelementStart(22, \"ul\", 26);\n    i0.ɵɵtext(23, \" Select if: \");\n    i0.ɵɵelementStart(24, \"li\");\n    i0.ɵɵtext(25, \" You do not meet SME qualifications or \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"li\");\n    i0.ɵɵtext(27, \" You are a Financial Institution or \");\n    i0.ɵɵelementStart(28, \"span\", 27);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_12_Template_span_click_28_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r44 = i0.ɵɵnextContext();\n      return ctx_r44.openInfoDialog(ctx_r44.financialInstitutionInfo);\n    });\n    i0.ɵɵtext(29, \" info \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"li\");\n    i0.ɵɵtext(31, \" You are a Fossil Fuel company U+F431 \");\n    i0.ɵɵelementStart(32, \"span\", 27);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_12_Template_span_click_32_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r45 = i0.ɵɵnextContext();\n      return ctx_r45.openInfoDialog(ctx_r45.fossilFuelCompanyInfo);\n    });\n    i0.ɵɵtext(33, \" info \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(34, CreateComponent_ng_container_12_mat_error_34_Template, 2, 0, \"mat-error\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(35, CreateComponent_ng_container_12_ng_container_35_Template, 15, 7, \"ng-container\", 29);\n    i0.ɵɵelementStart(36, \"div\", 22);\n    i0.ɵɵelementStart(37, \"div\", 30);\n    i0.ɵɵelementStart(38, \"mat-form-field\", 31);\n    i0.ɵɵelementStart(39, \"mat-label\");\n    i0.ɵɵtext(40, \"Select SBTi sector\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(41, \"mat-select\", 32);\n    i0.ɵɵelementStart(42, \"mat-option\");\n    i0.ɵɵelement(43, \"ngx-mat-select-search\", 33);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(44, CreateComponent_ng_container_12_mat_option_44_Template, 2, 2, \"mat-option\", 34);\n    i0.ɵɵpipe(45, \"async\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(46, CreateComponent_ng_container_12_mat_error_46_Template, 2, 0, \"mat-error\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(47, \"div\", 35);\n    i0.ɵɵelementStart(48, \"a\", 36);\n    i0.ɵɵtext(49, \"See sector classification guidance\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(50, \"div\", 18);\n    i0.ɵɵelementStart(51, \"div\", 19);\n    i0.ɵɵelementStart(52, \"div\", 20);\n    i0.ɵɵtext(53);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(54, \"mat-radio-group\", 37);\n    i0.ɵɵlistener(\"change\", function CreateComponent_ng_container_12_Template_mat_radio_group_change_54_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r46 = i0.ɵɵnextContext();\n      return ctx_r46.confirmBaseYearTypeChange();\n    });\n    i0.ɵɵelementStart(55, \"div\", 38);\n    i0.ɵɵelementStart(56, \"div\", 23);\n    i0.ɵɵelementStart(57, \"mat-radio-button\", 39);\n    i0.ɵɵtext(58, \" Yes \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(59, \"div\", 23);\n    i0.ɵɵelementStart(60, \"mat-radio-button\", 24);\n    i0.ɵɵtext(61, \" No \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(62, CreateComponent_ng_container_12_ng_container_62_Template, 2, 1, \"ng-container\", 10);\n    i0.ɵɵtemplate(63, CreateComponent_ng_container_12_ng_template_63_Template, 1, 1, \"ng-template\", null, 40, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(65, CreateComponent_ng_container_12_ng_container_65_Template, 9, 2, \"ng-container\", 29);\n    i0.ɵɵtemplate(66, CreateComponent_ng_container_12_ng_container_66_Template, 16, 3, \"ng-container\", 29);\n    i0.ɵɵtemplate(67, CreateComponent_ng_container_12_ng_container_67_Template, 9, 2, \"ng-container\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(68, \"div\", 41);\n    i0.ɵɵelementStart(69, \"div\", 20);\n    i0.ɵɵtext(70, \"Select preferred method to report scope 2 emissions\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(71, \"div\", 42);\n    i0.ɵɵtext(72, \"Note- Renewable energy instruments such as renewable energy certificates (RECs) can only be used to meet reductions of scope 2 emissions using the market based approach.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(73, \"mat-radio-group\", 43);\n    i0.ɵɵelementStart(74, \"div\", 44);\n    i0.ɵɵelementStart(75, \"div\", 23);\n    i0.ɵɵelementStart(76, \"mat-radio-button\", 24);\n    i0.ɵɵtext(77, \" Location based \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(78, \"div\", 23);\n    i0.ɵɵelementStart(79, \"mat-radio-button\", 24);\n    i0.ɵɵtext(80, \" Market based \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(81, CreateComponent_ng_container_12_mat_error_81_Template, 2, 0, \"mat-error\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(82, \"div\", 45);\n    i0.ɵɵelementStart(83, \"div\", 20);\n    i0.ɵɵtext(84, \" Select preferred consolidation approach for target boundary \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(85, \"mat-radio-group\", 46);\n    i0.ɵɵelementStart(86, \"div\", 22);\n    i0.ɵɵtemplate(87, CreateComponent_ng_container_12_ng_container_87_Template, 4, 2, \"ng-container\", 47);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(88, CreateComponent_ng_container_12_mat_error_88_Template, 2, 0, \"mat-error\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(89, CreateComponent_ng_container_12_div_89_Template, 5, 3, \"div\", 48);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(90, \"div\", 49);\n    i0.ɵɵelementStart(91, \"a\", 50);\n    i0.ɵɵlistener(\"click\", function CreateComponent_ng_container_12_Template_a_click_91_listener() {\n      i0.ɵɵrestoreView(_r43);\n      const ctx_r47 = i0.ɵɵnextContext();\n      return ctx_r47.backBtnClick();\n    });\n    i0.ɵɵtext(92, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(93, CreateComponent_ng_container_12_button_93_Template, 2, 2, \"button\", 51);\n    i0.ɵɵtemplate(94, CreateComponent_ng_container_12_button_94_Template, 2, 3, \"button\", 52);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r10 = i0.ɵɵreference(64);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.sbtiSettingFG);\n    i0.ɵɵadvance(8);\n    i0.ɵɵproperty(\"value\", ctx_r0.OrgSize.SME);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"value\", ctx_r0.OrgSize.NON_SME);\n    i0.ɵɵadvance(15);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.radioGroupHasError(\"orgSizeKeyID\", \"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.orgSizeKeyIDAC.value == ctx_r0.OrgSize.NON_SME);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"appearance\", ctx_r0.FormFieldAppearance.FORM_FIELD_APPEARANCE);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"formControl\", ctx_r0.sectorSearchUtility.filterFC);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpipeBind1(45, 27, ctx_r0.sectorSearchUtility.filteredEntities));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.radioGroupHasError(\"sbtiSectorID\", \"required\"));\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate1(\" Is your SBTi base year and recalculation policy the same as GHG base year \", ctx_r0.ghgBaseYear ? ctx_r0.ghgBaseYear : null, \"? \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"value\", true)(\"disabled\", !ctx_r0.meetsSBTiCriteria || !ctx_r0.ghgBaseYearExist);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.radioGroupHasError(\"isBaseYearSameAsGHG\", \"required\"))(\"ngIfElse\", _r10);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.ghgBaseYearExist);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.meetsSBTiCriteria);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isBaseYearSameAsGHGAC.value);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"value\", ctx_r0.ScopeTwoMethod.LOCATION_BASED);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"value\", ctx_r0.ScopeTwoMethod.MARKET_BASED);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.radioGroupHasError(\"calculationApproachKeyID\", \"required\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.consolidationApproach);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.radioGroupHasError(\"consolidationApproachKeyID\", \"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.orgSizeKeyIDAC.value == ctx_r0.OrgSize.NON_SME);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"matRippleCentered\", ctx_r0.MATERIAL_CONSTANT.MAT_RIPPLE_CENTER);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.action == ctx_r0.FormAction.CREATE);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.action == ctx_r0.FormAction.UPDATE);\n  }\n}\nfunction CreateComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 61);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(1, \"svg\", 62);\n    i0.ɵɵelement(2, \"use\", 63);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(3, \"div\", 64);\n    i0.ɵɵelement(4, \"div\", 75);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const message_r48 = ctx.message;\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"innerHTML\", message_r48, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CreateComponent_ng_template_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 76);\n    i0.ɵɵelementStart(1, \"div\", 77);\n    i0.ɵɵelementStart(2, \"div\", 78);\n    i0.ɵɵelementStart(3, \"div\", 79);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(4, \"svg\", 80);\n    i0.ɵɵelement(5, \"use\", 81);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(6, \"div\", 82);\n    i0.ɵɵelementStart(7, \"div\");\n    i0.ɵɵelementStart(8, \"strong\");\n    i0.ɵɵtext(9, \"Calculation preferences have not been configured on the system yet.\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 83);\n    i0.ɵɵtext(11, \" Configuring calculation preferences are necessary to create SBTi settings. To configure preferences, follow this link: \");\n    i0.ɵɵelementStart(12, \"a\", 84);\n    i0.ɵɵtext(13, \"Calculation Preference\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(14, \". \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"div\", 18);\n    i0.ɵɵelementStart(16, \"div\", 85);\n    i0.ɵɵelement(17, \"img\", 86);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n// /tsc-library\nexport let CreateComponent = /*#__PURE__*/(() => {\n  class CreateComponent {\n    constructor(activatedRoute, router, matDialog, fb, organizationService, storageService, toastrService, ghgBaseYearController, sbtiController, preferenceService, consolidationApproachService, sbtiService, dateService, location) {\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.matDialog = matDialog;\n      this.fb = fb;\n      this.organizationService = organizationService;\n      this.storageService = storageService;\n      this.toastrService = toastrService;\n      this.ghgBaseYearController = ghgBaseYearController;\n      this.sbtiController = sbtiController;\n      this.preferenceService = preferenceService;\n      this.consolidationApproachService = consolidationApproachService;\n      this.sbtiService = sbtiService;\n      this.dateService = dateService;\n      this.location = location;\n      this.FormFieldAppearance = MaterialFormFieldAppearance;\n      this.MATERIAL_CONSTANT = MATERIAL_CONSTANT;\n      this.FormAction = FormAction;\n      this.ButtonLabelEnum = ButtonLabelEnum;\n      this.OrgSize = OrgSizeEnum;\n      this.ScopeTwoMethod = ScopeTwoMethodEnum;\n      this.sbtiSector = [new SbtiSector()];\n      this.currentYear = this.dateService.getCurrentYear();\n      this.minYear = 2018;\n      this.maxYear = this.currentYear - 1;\n      this.currentValueYear = this.currentYear - 1;\n      this.year = [];\n      this.created = new EventEmitter(false);\n      this.sbtiSetting = new SbtiSetting();\n      this.sectorSearchUtility = new MatSelectSearchService(['name']);\n      this.financialInstitutionInfo = {\n        title: 'Financial institution',\n        body: `<ul class=\"ps-3\">\n        <li>Asset management/asset owners.</li>\n        <li>Retail and commercial banking activities.</li>\n        <li>Insurance companies (when functioning asset managers).</li>\n        <li>Mortgage real estate investment trusts (REITs).</li>\n        <li>In addition, if at least 5% of a company’s revenue comes from activities such as those described above, they would be considered a financial institution.</li>\n        </ul>`\n      };\n      this.fossilFuelCompanyInfo = {\n        title: 'Fossil fuel company',\n        body: `<ul class=\"ps-3\">\n        <li>Companies involved in exploration, extraction, mining and/or production of oil, natural gas, coal or other fossil fuels, irrespective of percentage revenue generated by these activities.</li>\n        <li>Companies within the oil and gas sector, including, but not limited to, integrated oil and gas companies, integrated gas companies, exploration and production pure players, refining and marketing pure players, oil products distributors, gas distributors and retailers, and traditional oil and gas service companies.</li>\n        <li>Companies that derive 50% or more of revenue from fossil fuels sale, transmission and distribution, services and any other activity along the value chain with dedicated infrastructure.</li>\n        <li>Companies with more than 5% revenue from dormant or active fossil fuel assets (e.g. coal mine, lignite mine, etc.) for extraction activities with commercial purposes (excluding electric utilities that mine coal for their own power generation).</li>\n        </ul>`\n      };\n      this.baseYearInfo = {\n        title: 'Base year',\n        body: ` Base year is the year for which your organization has verifiable data on scope 1, 2, and 3 emissions. SBTi recommended that companies choose the most recent year for which data is available as the base year. The base year should be representative of a company’s typical GHG profile. `\n      };\n      this.isUseOfSoldProductsInfo = `Companies that sell, transmit, or distribute natural gas – or other fossil fuel products – \n                            shall set emission reduction scope 3 targets for the “use of sold products” category, irrespective \n                            of the share of these emissions compared to the total scope 1, 2, and 3 emissions of the company.`;\n      this.agreementInfo = {\n        title: '',\n        body: `Companies shall remove carbon from the atmosphere and permanently store it to counterbalance the impact of any unabated emissions that remain once companies have achieved their long-term science-based target, and for subsequent years thereafter.\n                     The neutralization of unabated emissions applies to both the emissions reduction target(s) boundary and to any unabated emissions that have been excluded from the GHG inventory.`\n      };\n      this.isSME = 'DEFAULT';\n      this.meetsSBTiCriteria = true;\n      this.ghgBaseYearExist = false;\n      this.isPreferenceSet = false;\n      this.ghgBaseYear = null;\n      this.consolidationApproach = [];\n      this.agreementQuestions = [{\n        question: `publicly report its company-wide GHG emissions inventory and progress against published target on an annual basis.`,\n        checked: false\n      }, {\n        question: `not use carbon credits to show emission reductions toward the progress of companies’ near-term or long-term science-based targets.`,\n        checked: false\n      }, {\n        question: `not count avoided emissions toward near-term or long-term science-based emission reduction targets`,\n        checked: false\n      }, {\n        question: `get its targets reviewed, and if necessary, recalculated and revalidated, at a minimum every 5 years`,\n        checked: false\n      }, {\n        question: `announce their target publicly on the SBTi website within 6 months of the approval date.`,\n        checked: false\n      }, {\n        question: `neutralize any unabated emissions once it achieves its long term targets`,\n        checked: false\n      }];\n      this.orgSize = null;\n      this.showAgreementError = false;\n      this.organizationM = new Organization();\n      this.isEqual = false;\n      this.initialObject = null;\n      this.sbtiSettingDifference = [new SbtiSettingDifference()];\n      this.errorHandling = (control, error) => {\n        return this.sbtiSettingFG.controls[control].hasError(error) && this.sbtiSettingFG.controls[control].touched;\n      };\n      this.radioGroupHasError = (control, error) => {\n        return this.sbtiSettingFG.controls[control].hasError(error) && this.sbtiSettingFG.controls[control].touched;\n      };\n    }\n    ngOnInit() {\n      this.activatedRoute.data.subscribe(data => {\n        this.action = data['action'];\n        if (this.action != FormAction.UPDATE && this.action != FormAction.CREATE) {\n          this.router.navigate(['/page-not-found']);\n        }\n      });\n      this.rootOrgID = this.storageService.getStorage('rootOrgID');\n      this.createSbtiSettingInit();\n      this.getOrgPreference();\n    }\n    getOrgPreference() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let preference = yield this.preferenceService.getOrgPreference(this.rootOrgID);\n        if (preference.preferenceID != null) {\n          this.isPreferenceSet = true;\n          this.getAllSbtiSector();\n          this.getOrgByID(this.rootOrgID);\n          this.getSBTiSettingsByOrgID();\n          this.getGHGBaseYear();\n          this.getConsolidationApproachList();\n        }\n      });\n    }\n    getConsolidationApproachList() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.consolidationApproach = yield this.consolidationApproachService.getAllConsolidationApproachByOrgID(this.rootOrgID);\n        if (this.consolidationApproach.length == 1) {\n          this.sbtiSettingFG.get('consolidationApproachKeyID').disable();\n          let approach = this.consolidationApproach[0]['keyID'];\n          this.sbtiSettingFG.get('consolidationApproachKeyID').patchValue(approach);\n        }\n      });\n    }\n    createSbtiSettingInit() {\n      this.sbtiSettingFG = this.fb.group({\n        orgSizeKeyID: [, Validators.required],\n        isUseOfSoldProducts: [],\n        sbtiSectorID: [, Validators.required],\n        isBaseYearSameAsGHG: [, Validators.required],\n        calculationApproachKeyID: [, Validators.required],\n        consolidationApproachKeyID: [, Validators.required]\n      });\n    }\n    get orgSizeKeyIDAC() {\n      return this.sbtiSettingFG.get('orgSizeKeyID');\n    }\n    get isUseOfSoldProductsAC() {\n      return this.sbtiSettingFG.get('isUseOfSoldProducts');\n    }\n    get isBaseYearSameAsGHGAC() {\n      return this.sbtiSettingFG.get('isBaseYearSameAsGHG');\n    }\n    getGHGBaseYear() {\n      this.ghgBaseYearController.getBaseYearByOrgIDAndType(this.rootOrgID, BaseYearEnum.GHG_BASE_YEAR).subscribe(ghg => {\n        if (ghg['baseYear'] != null) {\n          this.ghgSetup = ghg;\n          this.ghgBaseYearExist = true;\n          this.ghgBaseYear = ghg['baseYear'];\n        } else {\n          this.isBaseYearSameAsGHGAC.patchValue(false);\n        }\n        this.orgSizeKeyIDAC.valueChanges.pipe(startWith({})).subscribe(orgSize => this.orgSizeChange(orgSize));\n      });\n    }\n    orgSizeChange(orgSize) {\n      this.meetsSBTiCriteria = true;\n      this.isUseOfSoldProductsAC.clearValidators();\n      if (this.ghgBaseYearExist) {\n        this.isBaseYearSameAsGHGAC.reset();\n        if (this.ghgSetup.significanceThreshold > 5) {\n          this.meetsSBTiCriteria = false;\n          this.isBaseYearSameAsGHGAC.patchValue(false);\n        }\n        if (orgSize == OrgSizeEnum.NON_SME) {\n          this.isUseOfSoldProductsAC.setValidators([Validators.required]);\n          if (this.ghgBaseYear < 2015) {\n            this.meetsSBTiCriteria = false;\n            this.isSME = 'NO';\n            this.isBaseYearSameAsGHGAC.patchValue(false);\n          }\n        } else if (orgSize == OrgSizeEnum.SME && this.ghgBaseYear < 2018) {\n          this.meetsSBTiCriteria = false;\n          this.isBaseYearSameAsGHGAC.patchValue(false);\n          this.isSME = 'YES';\n        }\n      }\n      this.isUseOfSoldProductsAC.updateValueAndValidity();\n    }\n    getSBTiSettingsByOrgID() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.sbtiSetting = yield this.sbtiService.getSbtiSettingsByOrgID(this.rootOrgID);\n        if (this.action == FormAction.UPDATE) {\n          this.patchSbtiSettingForm(this.sbtiSetting);\n        }\n      });\n    }\n    patchSbtiSettingForm(settings) {\n      this.sbtiSettingFG.patchValue(settings, {\n        emitEvent: false\n      });\n      this.initialObject = this.sbtiSettingFG.getRawValue();\n      this.sbtiSettingFG.valueChanges.pipe(startWith({})).subscribe(() => {\n        this.isEqual = isEqual(this.initialObject, this.sbtiSettingFG.getRawValue());\n      });\n      this.sbtiSettingID = settings.id;\n      this.orgSize = settings.orgSizeKeyID;\n      if (this.orgSize == OrgSizeEnum.NON_SME) {\n        this.agreementQuestions.forEach(q => q['checked'] = true);\n      }\n    }\n    getAllSbtiSector() {\n      return __awaiter(this, void 0, void 0, function* () {\n        let sbtiSector = yield this.sbtiService.getAllSbtiSector();\n        this.sectorSearchUtility.entityArr = sbtiSector;\n        this.sectorSearchUtility.createSubscription();\n      });\n    }\n    validationCheck() {\n      if (this.orgSizeKeyIDAC.value == OrgSizeEnum.NON_SME) {\n        const isAllChecked = this.agreementQuestions.every(question => question.checked);\n        this.showAgreementError = !isAllChecked;\n        if (!isAllChecked) {\n          this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, InvalidForm.INVALID_FORM_MESSAGE, ToastrColor.ERROR);\n          return;\n        }\n      }\n      if (this.sbtiSettingFG.invalid) {\n        this.sbtiSettingFG.markAllAsTouched();\n        this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, InvalidForm.INVALID_FORM_MESSAGE, ToastrColor.ERROR);\n        return;\n      }\n    }\n    checkValidation() {\n      const isAllChecked = this.agreementQuestions.every(question => question.checked);\n      this.showAgreementError = isAllChecked;\n    }\n    getSettingEmissionDifference() {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.sbtiSettingFG.invalid) {\n          this.sbtiSettingFG.markAllAsTouched();\n          this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, InvalidForm.INVALID_FORM_MESSAGE, ToastrColor.ERROR);\n          return;\n        }\n        if (this.orgSizeKeyIDAC.value == OrgSizeEnum.NON_SME) {\n          const isAllChecked = this.agreementQuestions.every(question => question.checked);\n          this.showAgreementError = !isAllChecked;\n          if (!isAllChecked) {\n            this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, InvalidForm.INVALID_FORM_MESSAGE, ToastrColor.ERROR);\n            return;\n          }\n        }\n        if (this.sbtiSettingFG.value['orgSizeKeyID'] == this.sbtiSetting['orgSizeKeyID'] && (this.sbtiSettingFG.value['isBaseYearSameAsGHG'] != this.sbtiSetting['isBaseYearSameAsGHG'] || this.sbtiSettingFG.value['calculationApproachKeyID'] != this.sbtiSetting['calculationApproachKeyID'] || this.sbtiSettingFG.value['consolidationApproachKeyID'] != this.sbtiSetting['consolidationApproachKeyID'])) {\n          this.sbtiSettingDifference = yield this.sbtiService.getSettingEmissionDifference(this.rootOrgID, this.sbtiSettingFG.value);\n          if (this.sbtiSettingDifference.length > 0) {\n            this.openSettingEmissionDifferencDialog(this.sbtiSettingDifference);\n          } else {\n            this.submitSbtiSetting();\n          }\n        } else {\n          this.submitSbtiSetting();\n        }\n      });\n    }\n    openSettingEmissionDifferencDialog(sbtiSettingDifference) {\n      let dialogRef;\n      dialogRef = this.matDialog.open(EmissionDifferenceViewComponent, {\n        data: {\n          sbtiSettingDifference: sbtiSettingDifference\n        },\n        minWidth: '55vw',\n        maxWidth: '55vw',\n        height: '100%',\n        position: {\n          right: '-2px',\n          top: '0px'\n        }\n      });\n      dialogRef.afterClosed().subscribe(res => {\n        if (res == DialogResponseEnum.YES) {\n          this.submitSbtiSetting();\n        }\n      });\n    }\n    confimationOrgSizeChange() {\n      if (this.sbtiSettingFG.value['orgSizeKeyID'] == OrgSizeEnum.NON_SME) {\n        this.isUseOfSoldProductsAC.setValidators([Validators.required]);\n      }\n      if (this.action == FormAction.UPDATE && this.sbtiSettingFG.value['orgSizeKeyID'] != this.sbtiSetting['orgSizeKeyID']) {\n        let dialogRef;\n        dialogRef = this.matDialog.open(SettingChangeDialog, {\n          maxWidth: '600px'\n        });\n        dialogRef.afterClosed().subscribe(res => {\n          if (res == DialogEnum.SUCCESS_DR) {\n            this.sbtiSettingFG.controls['orgSizeKeyID'].setValue(this.sbtiSetting['orgSizeKeyID']);\n          }\n        });\n      }\n    }\n    submitSbtiSetting() {\n      if (this.sbtiSettingFG.invalid) {\n        this.sbtiSettingFG.markAllAsTouched();\n        this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, InvalidForm.INVALID_FORM_MESSAGE, ToastrColor.ERROR);\n        return;\n      }\n      if (this.orgSizeKeyIDAC.value == OrgSizeEnum.NON_SME) {\n        const isAllChecked = this.agreementQuestions.every(question => question.checked);\n        this.showAgreementError = !isAllChecked;\n        if (!isAllChecked) {\n          this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, InvalidForm.INVALID_FORM_MESSAGE, ToastrColor.ERROR);\n          return;\n        }\n      }\n      if (this.action == FormAction.UPDATE) {\n        this.updateSbtiSetting();\n      } else if (this.action == FormAction.CREATE) {\n        this.createSbtiSetting();\n      }\n    }\n    createSbtiSetting() {\n      this.sbtiController.createSbtiSetting(this.rootOrgID, this.sbtiSettingFG.getRawValue()).subscribe(submitSbtiSettingRes => {\n        this.created.emit();\n      }, error => {\n        console.error('error in submitSBTISetting', error);\n      });\n    }\n    updateSbtiSetting() {\n      this.sbtiController.updateSbtiSetting(this.rootOrgID, this.sbtiSettingFG.getRawValue(), this.sbtiSettingID).subscribe(submitSbtiSettingRes => {\n        this.router.navigate(['/target-setting/sbti']);\n      }, error => {\n        console.error('error in updateSbtiSetting', error);\n      });\n    }\n    getOrgByID(orgID) {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.organizationM = yield this.organizationService.getOrganizationByID(orgID);\n      });\n    }\n    openInfoDialog(data) {\n      const dialog = this.matDialog.open(InfoDialogComponent, {\n        data: data,\n        minWidth: '400px',\n        maxWidth: '500px'\n      });\n    }\n    confirmBaseYearTypeChange() {\n      if (this.action == FormAction.UPDATE && this.sbtiSettingFG.value['isBaseYearSameAsGHG'] ^ this.sbtiSetting['isBaseYearSameAsGHG']) {\n        const title = \"Inactive existing SBTi Base year?\";\n        let message = \"All targets for this SBTi base year will be inactive permanently. GHG base year will remain unaffected and you can create a new SBTi base year from \";\n        let btnLabel = 'Inactive and Save';\n        if (this.sbtiSettingFG.value['isBaseYearSameAsGHG']) {\n          message = \"All targets for this SBTi base year will be deleted permanently. GHG base year will remain unaffected and new SBTi base year will be synced with GHG base year\";\n          btnLabel = 'Inactive targets and Save';\n        }\n        const confirmationMsg = \"Are you sure you want inactive all existing targets?\";\n        const dialogRef = this.matDialog.open(DeleteDialog, {\n          data: {\n            isBaseYearSameAsGHG: this.sbtiSettingFG.value['isBaseYearSameAsGHG'],\n            title: title,\n            message: message,\n            confirmationMsg: confirmationMsg,\n            btnLabel: btnLabel,\n            page: 'SBTI'\n          },\n          minWidth: '500px',\n          maxWidth: '600px'\n        });\n        dialogRef.afterClosed().subscribe(res => {\n          if (res != DialogEnum.DELETE_DR) this.sbtiSettingFG.controls['isBaseYearSameAsGHG'].setValue(this.sbtiSetting['isBaseYearSameAsGHG']);\n        });\n      }\n    }\n    backBtnClick() {\n      this.location.back();\n    }\n    populateYear() {\n      for (let year = this.minYear; year <= this.maxYear; year++) {\n        this.year.push(year);\n      }\n    }\n  }\n  CreateComponent.ɵfac = function CreateComponent_Factory(t) {\n    return new (t || CreateComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.MatDialog), i0.ɵɵdirectiveInject(i3.FormBuilder), i0.ɵɵdirectiveInject(i4.OrganizationService), i0.ɵɵdirectiveInject(i5.StorageService), i0.ɵɵdirectiveInject(i6.ToastrService), i0.ɵɵdirectiveInject(i7.GhgBaseYearController), i0.ɵɵdirectiveInject(i8.SbtiController), i0.ɵɵdirectiveInject(i9.PreferenceService), i0.ɵɵdirectiveInject(i10.ConsolidationApproachService), i0.ɵɵdirectiveInject(i11.SbtiService), i0.ɵɵdirectiveInject(i12.DateService), i0.ɵɵdirectiveInject(i13.Location));\n  };\n  CreateComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateComponent,\n    selectors: [[\"sbti-setting-create\"]],\n    outputs: {\n      created: \"created\"\n    },\n    decls: 20,\n    vars: 2,\n    consts: [[\"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"d-none\"], [\"id\", \"info-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"], [1, \"card\", \"main-card\", \"cardOverwrite\", \"h100\"], [1, \"headerContainer\"], [1, \"headerLeftContainer\"], [1, \"pageTitle\"], [1, \"pageSubtitle\"], [1, \"headerRightContainer\"], [1, \"headerRightContainerInner\"], [4, \"ngIf\", \"ngIfElse\"], [\"alert\", \"\"], [\"noPreference\", \"\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", 2, \"display\", \"none\"], [\"id\", \"exclamation-triangle-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z\"], [1, \"card-body\", \"pt-0\", \"ms-2\"], [3, \"formGroup\"], [1, \"row\"], [1, \"col-sm-10\"], [1, \"radioBtnGroupLabel\"], [\"formControlName\", \"orgSizeKeyID\", 3, \"change\"], [1, \"row\", \"mt-2\"], [1, \"col-sm-6\"], [1, \"radioBtnLabel\", 3, \"value\"], [1, \"text-secondary\", \"ps-4\", \"pt-2\"], [2, \"padding\", \"0%\", \"list-style-type\", \"none\"], [1, \"material-symbols-outlined\", \"fs-4\", \"cursorPointer\", 3, \"click\"], [\"class\", \"radioBtnGroupError ms-1 mt-1\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"col-sm-4\"], [1, \"mat-field-width-100\", 3, \"appearance\"], [\"formControlName\", \"sbtiSectorID\", \"required\", \"\"], [\"placeholderLabel\", \"Search by sector name\", \"noEntriesFoundLabel\", \"No matching sector found.\", 3, \"formControl\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-8\", \"pt-3\"], [\"href\", \"https://sciencebasedtargets.org/resources/files/SBTi-Sector-Classification-Document.pdf\", \"target\", \"_blank\", 1, \"btn-link\"], [\"formControlName\", \"isBaseYearSameAsGHG\", 3, \"change\"], [1, \"row\", \"my-2\"], [1, \"radioBtnLabel\", 3, \"value\", \"disabled\"], [\"hint\", \"\"], [1, \"col-sm-10\", \"mt-2\"], [1, \"infoText\"], [\"formControlName\", \"calculationApproachKeyID\"], [1, \"row\", \"mt-1\"], [1, \"col-sm-10\", \"mt-3\"], [\"formControlName\", \"consolidationApproachKeyID\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"col-sm-10 mt-3\", 4, \"ngIf\"], [1, \"float-end\", \"my-2\"], [\"type\", \"button\", \"matRipple\", \"\", 1, \"button\", \"btn\", \"btn-secondary\", \"mx-1\", 3, \"matRippleCentered\", \"click\"], [\"class\", \"button btn btn-success ms-1\", \"type\", \"submit\", \"matRipple\", \"\", 3, \"matRippleCentered\", \"click\", 4, \"ngIf\"], [\"class\", \"button btn btn-success ms-1\", \"type\", \"submit\", \"matRipple\", \"\", 3, \"matRippleCentered\", \"disabled\", \"click\", 4, \"ngIf\"], [1, \"radioBtnGroupError\", \"ms-1\", \"mt-1\"], [\"formControlName\", \"isUseOfSoldProducts\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [3, \"value\"], [\"class\", \"radioBtnGroupError ms-1\", 4, \"ngIf\"], [1, \"radioBtnGroupError\", \"ms-1\"], [\"class\", \"radioBtnGroupInfo ms-1 mt-1\", 4, \"ngIf\"], [1, \"radioBtnGroupInfo\", \"ms-1\", \"mt-1\"], [1, \"alert\", \"alert-primary\", \"centerAlignVertical\", \"roundedBorder\"], [1, \"bi\", \"flex-shrink-0\", \"me-3\", \"extraInfoCardIcon\"], [0, \"xlink\", \"href\", \"#info-fill\"], [1, \"extraInfoCardText\"], [\"target\", \"_blank\", 3, \"routerLink\"], [1, \"my-1\", 2, \"padding\", \"0\"], [1, \"ms-3\"], [1, \"col-sm-12\", \"mb-1\"], [\"class\", \"textMatError\", 4, \"ngIf\"], [1, \"mt-1\", 3, \"checked\", \"disabled\", \"change\", \"click\"], [\"class\", \"material-symbols-outlined fs-4 cursorPointer\", 3, \"click\", 4, \"ngIf\"], [1, \"textMatError\"], [\"type\", \"submit\", \"matRipple\", \"\", 1, \"button\", \"btn\", \"btn-success\", \"ms-1\", 3, \"matRippleCentered\", \"click\"], [\"type\", \"submit\", \"matRipple\", \"\", 1, \"button\", \"btn\", \"btn-success\", \"ms-1\", 3, \"matRippleCentered\", \"disabled\", \"click\"], [3, \"innerHTML\"], [1, \"infoCardContainer\"], [1, \"extraInfoCard\", \"px-3\"], [\"role\", \"alert\", 1, \"alert\", \"alert-warning\", \"m-0\", \"centerAlignVertical\", \"justify-content-between\", \"roundedBorder\"], [1, \"d-flex\", \"align-items-center\"], [1, \"bi\", \"flex-shrink-0\", \"me-3\", \"extraInfoCardHeaderIcon\"], [0, \"xlink\", \"href\", \"#exclamation-triangle-fill\"], [1, \"endAlignVertical\"], [1, \"mt-2\"], [\"routerLink\", \"/carbon-setting/preference/calculation\"], [1, \"centerAlign\"], [\"src\", \"/assets/images/preference3.jpg\", \"alt\", \"\", 1, \"noPreference\"]],\n    template: function CreateComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(0, \"svg\", 0);\n        i0.ɵɵelementStart(1, \"symbol\", 1);\n        i0.ɵɵelement(2, \"path\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵtext(7, \"Science based targets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵtext(9, \"Setup your organizations Science based targets\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵelement(11, \"div\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(12, CreateComponent_ng_container_12_Template, 95, 29, \"ng-container\", 10);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(13, CreateComponent_ng_template_13_Template, 5, 1, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵtemplate(15, CreateComponent_ng_template_15_Template, 18, 0, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(17, \"svg\", 13);\n        i0.ɵɵelementStart(18, \"symbol\", 14);\n        i0.ɵɵelement(19, \"path\", 15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        const _r3 = i0.ɵɵreference(16);\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"ngIf\", ctx.isPreferenceSet)(\"ngIfElse\", _r3);\n      }\n    },\n    directives: [i13.NgIf, i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i14.MatRadioGroup, i3.NgControlStatus, i3.FormControlName, i14.MatRadioButton, i15.MatFormField, i15.MatLabel, i16.MatSelect, i3.RequiredValidator, i17.MatOption, i18.MatSelectSearchComponent, i3.FormControlDirective, i13.NgForOf, i17.MatRipple, i15.MatError, i13.NgTemplateOutlet, i15.MatHint, i1.RouterLinkWithHref, i19.MatCheckbox],\n    pipes: [i13.AsyncPipe],\n    styles: [\".syncBaseYear[_ngcontent-%COMP%]{padding-bottom:1rem}.noPreference[_ngcontent-%COMP%]{width:30vw}\"]\n  });\n  return CreateComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
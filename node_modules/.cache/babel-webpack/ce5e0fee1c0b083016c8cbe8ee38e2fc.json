{"ast":null,"code":"import { MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport * as moment from 'moment-timezone';\nimport { AuditTrail } from '@report-framework/model/reporting-framework-data.model';\n// tsc-library\nimport { ProfileImg } from '@library/user-service';\nimport { COMMON_CONSTANT, MessageAlertTypeEnum } from '@library/tsc-common';\nimport { MessageAlertIconEnum } from '@library/tsc-common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@report-framework/controller/reporting-framework-data.controller\";\nimport * as i3 from \"@library/storage-service\";\nimport * as i4 from \"@library/user-service\";\nimport * as i5 from \"@library/date\";\nimport * as i6 from \"@angular/material/button\";\nimport * as i7 from \"@angular/material/tooltip\";\nimport * as i8 from \"@angular/common\";\nimport * as i9 from \"@library/tsc-common\";\nfunction AuditTrailComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"lib-message-alert\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"messageAlertTypeInp\", ctx_r0.messageAlertTypeEnum.INFO)(\"messageAlertIconInp\", ctx_r0.messageAlertIconEnum.INFO_ICON);\n  }\n}\nfunction AuditTrailComponent_div_17_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵelementStart(1, \"div\", 14);\n    i0.ɵɵelementStart(2, \"div\", 15);\n    i0.ɵɵelement(3, \"img\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 17);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", item_r3.profileImgUrl || ctx_r2.defaultImage(item_r3), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate4(\" \", item_r3.firstName, \" \", item_r3.lastName != null ? item_r3.lastName : \"\", \" \", item_r3.message, \" \", ctx_r2.getDateTime(item_r3.messageDate), \" \");\n  }\n}\nfunction AuditTrailComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AuditTrailComponent_div_17_div_1_Template, 6, 5, \"div\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.auditT.msgTrail);\n  }\n}\n// /tsc-library/\nexport let AuditTrailComponent = /*#__PURE__*/(() => {\n  class AuditTrailComponent {\n    constructor(dialogRef, data, reportingFrameworkDataController, storageService, userService, dateService) {\n      this.dialogRef = dialogRef;\n      this.data = data;\n      this.reportingFrameworkDataController = reportingFrameworkDataController;\n      this.storageService = storageService;\n      this.userService = userService;\n      this.dateService = dateService;\n      this.auditT = new AuditTrail();\n      this.configIntervalID = null;\n      this.msgTrail = [];\n      this.messageAlertTypeEnum = MessageAlertTypeEnum;\n      this.messageAlertIconEnum = MessageAlertIconEnum;\n      this.dialogRef.disableClose = true;\n      this.sectionID = data.sectionID;\n      this.groupID = data.groupID;\n      this.configIntervalID = data.configIntervalID;\n    }\n    ngOnInit() {\n      this.rootOrgID = this.storageService.getStorage('rootOrgID');\n      this.getAuditTrailDetails();\n    }\n    getAuditTrailDetails() {\n      this.reportingFrameworkDataController.getAuditTrailDetails(this.rootOrgID, this.sectionID, this.groupID, this.configIntervalID).subscribe(response => {\n        this.auditT = response;\n        this.msgTrail = response.msgTrail;\n      }, error => {\n        console.log('error in getAuditTrailDetails() -', error);\n      });\n    }\n    defaultImage(user) {\n      return this.userService.defaultImage((user.firstName ? user.firstName + ' ' : '') + (user.lastName ? user.lastName : ''), ProfileImg.PROFILE_IMAGE_DROPDOWN_NAME_VIEW);\n    }\n    getDateTime(dateTime) {\n      const utcDateTime = moment.utc(dateTime).format();\n      return ' ' + this.dateService.convertUtcToTimeZone(utcDateTime, COMMON_CONSTANT.ASIAN_KOLKATA, 'YYYY-MMM-DD h:mm a');\n    }\n  }\n  AuditTrailComponent.ɵfac = function AuditTrailComponent_Factory(t) {\n    return new (t || AuditTrailComponent)(i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(MAT_DIALOG_DATA), i0.ɵɵdirectiveInject(i2.ReportingFrameworkDataController), i0.ɵɵdirectiveInject(i3.StorageService), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.DateService));\n  };\n  AuditTrailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AuditTrailComponent,\n    selectors: [[\"app-audit-trail\"]],\n    decls: 18,\n    vars: 4,\n    consts: [[\"mat-dialog-header\", \"\"], [1, \"row\"], [1, \"col-sm-11\", \"centerAlignVertical\"], [1, \"pageTitle\"], [1, \"col-sm-1\"], [\"mat-icon-button\", \"\", \"mat-dialog-close\", \"\", \"cdkFocusInitial\", \"\", \"matTooltip\", \"Close\", \"matTooltipPosition\", \"before\", 1, \"float-end\", \"matDialogClose\"], [1, \"material-symbols-outlined\"], [\"mat-dialog-content\", \"\", 1, \"mt-3\"], [1, \"dialogTitle\", \"fs-5\"], [1, \"pageSubtitle\", \"mb-4\"], [4, \"ngIf\"], [\"contentInp\", \"No audit trail has been found for this question\", 3, \"messageAlertTypeInp\", \"messageAlertIconInp\"], [\"class\", \"line-container\", 4, \"ngFor\", \"ngForOf\"], [1, \"line-container\"], [1, \"container-item\", \"mt-2\"], [1, \"col-sm-1\", \"container-item-image\"], [\"alt\", \"Profile image\", 1, \"rounded-circle\", \"border\", \"profileImageHeaderView\", 3, \"src\"], [1, \"col-sm-11\"]],\n    template: function AuditTrailComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵtext(4, \"Audit Trail\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"button\", 5);\n        i0.ɵɵelementStart(7, \"span\", 6);\n        i0.ɵɵtext(8, \" close \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 7);\n        i0.ɵɵelementStart(10, \"div\", 1);\n        i0.ɵɵelementStart(11, \"span\", 8);\n        i0.ɵɵtext(12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"div\", 1);\n        i0.ɵɵelementStart(14, \"span\", 9);\n        i0.ɵɵtext(15);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(16, AuditTrailComponent_div_16_Template, 2, 2, \"div\", 10);\n        i0.ɵɵtemplate(17, AuditTrailComponent_div_17_Template, 2, 1, \"div\", 10);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵtextInterpolate1(\"Section - \", ctx.auditT.sectionName, \"\");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\"Group - \", ctx.auditT.groupName, \"\");\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.msgTrail.length == 0);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.msgTrail.length > 0);\n      }\n    },\n    directives: [i6.MatButton, i1.MatDialogClose, i7.MatTooltip, i1.MatDialogContent, i8.NgIf, i9.MessageAlertComponent, i8.NgForOf],\n    styles: [\".line-container[_ngcontent-%COMP%]{margin-left:50px;display:flex;flex-direction:column;padding:10px 0 20px 32px;border-left:2px solid #e3e3e3}.container-item[_ngcontent-%COMP%]{display:flex;align-items:center}.container-item-image[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;margin-left:-52px}\"]\n  });\n  return AuditTrailComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import { MatPaginator } from '@angular/material/paginator';\nimport { MatSort } from '@angular/material/sort';\nimport { FormControl } from '@angular/forms';\nimport { catchError, map, startWith, switchMap } from 'rxjs/operators';\nimport { merge, fromEvent, of as observableOf } from 'rxjs';\nimport { CARBON_CONSTANT } from '@carbon/constant/carbon.constant';\nimport { COMMON_CONSTANT, TABLE_CONSTANT, MATERIAL_CONSTANT } from '@library/tsc-common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@carbon/controller/employee-survey.controller\";\nimport * as i2 from \"@library/storage-service\";\nimport * as i3 from \"@library/tsc-common\";\nimport * as i4 from \"@angular/material/table\";\nimport * as i5 from \"@angular/material/sort\";\nimport * as i6 from \"@angular/material/paginator\";\nimport * as i7 from \"@angular/common\";\nconst _c0 = [\"refreshBtn\"];\nconst _c1 = [\"status\"];\nfunction ListComponent_th_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 28);\n    i0.ɵɵtext(1, \" Employee ID \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_td_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r14 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r14.employeeCode ? row_r14.employeeCode : ctx_r3.COMMON_CONSTANT.HYPHEN, \" \");\n  }\n}\nfunction ListComponent_th_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 30);\n    i0.ɵɵtext(1, \" Name \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_td_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r15 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", row_r15.firstName, \" \", row_r15.lastName, \" \");\n  }\n}\nfunction ListComponent_th_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\", 32);\n    i0.ɵɵtext(1, \" Submitted on \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ListComponent_td_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 33);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r16 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r16.submittedOn ? i0.ɵɵpipeBind2(2, 1, row_r16.submittedOn, \"dd-MMM-yyyy\") : ctx_r7.COMMON_CONSTANT.HYPHEN, \" \");\n  }\n}\nfunction ListComponent_th_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"th\", 34);\n    i0.ɵɵelementStart(1, \"funnel-filter\", 35, 36);\n    i0.ɵɵlistener(\"mono\", function ListComponent_th_24_Template_funnel_filter_mono_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return ctx_r18.statusFlag = true;\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"entityList\", ctx_r8.statusList)(\"selectFC\", ctx_r8.statusFC)(\"active\", ctx_r8.statusFlag);\n  }\n}\nfunction ListComponent_td_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const row_r20 = ctx.$implicit;\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", row_r20.status ? ctx_r9.getStatus(row_r20.status) : ctx_r9.COMMON_CONSTANT.HYPHEN, \" \");\n  }\n}\nfunction ListComponent_tr_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 38);\n  }\n}\nfunction ListComponent_tr_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"tr\", 39);\n  }\n}\nfunction ListComponent_tr_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 40);\n    i0.ɵɵelementStart(1, \"td\", 41);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"colspan\", ctx_r12.displayedColumns.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r12.TABLE_CONSTANT.NO_DATA, \" \");\n  }\n}\n// /tsc-library/\nexport let ListComponent = /*#__PURE__*/(() => {\n  class ListComponent {\n    constructor(employeeSurveyController, storageService) {\n      this.employeeSurveyController = employeeSurveyController;\n      this.storageService = storageService;\n      this.COMMON_CONSTANT = COMMON_CONSTANT;\n      this.TABLE_CONSTANT = TABLE_CONSTANT;\n      this.MATERIAL_CONSTANT = MATERIAL_CONSTANT;\n      this.CARBON_CONSTANT = CARBON_CONSTANT;\n      this.searchFlag = false;\n      this.searchValue = '';\n      this.refreshFlag = false;\n      this.resultLength = '';\n      this.statusFC = new FormControl('all');\n      this.statusFlag = false;\n      this.statusList = [{\n        \"name\": \"All\",\n        \"keyID\": \"all\"\n      }, {\n        \"name\": \"Pending\",\n        \"keyID\": \"PENDING\"\n      }, {\n        \"name\": \"Filled\",\n        \"keyID\": \"FILLED\"\n      }];\n      this.filter = '';\n      this.filterArr = [];\n      this.filterValue = 'all';\n      this.displayedColumns = ['employeeCode', 'employeeName', 'submittedOn', 'status'];\n    }\n    ngOnInit() {\n      this.currentOrgID = this.storageService.getStorage('currentOrgID');\n    }\n    getStatus(keyID) {\n      const status = this.statusList.find(status => status.keyID === keyID);\n      return status ? status.name : keyID;\n    }\n    ngAfterViewInit() {\n      this.sort.sortChange.subscribe(() => this.paginator.pageIndex = 0);\n      merge(this.paginator.page, this.sort.sortChange, this.status.mono, fromEvent(this.refreshBtn.nativeElement, \"click\")).pipe(startWith({}), switchMap(() => {\n        this.filterArr = [];\n        if (this.searchFlag) {\n          console.log(this.searchValue, \"Value\");\n          this.searchValue = 'firstName:' + this.searchValue;\n        }\n        if (this.statusFlag) {\n          if (this.statusFC.value == 'all') {\n            this.statusFlag = false;\n          } else {\n            this.filterArr.push('status:' + this.statusFC.value);\n          }\n        }\n        return this.employeeSurveyController.getSurveyDataByPage(this.currentOrgID, this.surveyID, this.paginator.pageIndex, this.paginator.pageSize, this.sort.active, this.sort.direction, this.filterArr, this.searchFlag, this.searchValue).pipe(catchError(() => observableOf(null)));\n      }), map(dataSource => {\n        if (dataSource == null) {\n          return [];\n        }\n        this.resultLength = dataSource[\"totalCount\"];\n        return dataSource['record'];\n      })).subscribe(dataSource => {\n        this.dataSource = dataSource;\n      });\n    }\n    searchFn($event) {\n      if ($event.length != 0) {\n        this.searchValue = $event;\n        this.searchFlag = true;\n      } else {\n        this.searchFlag = false;\n      }\n      this.refreshBtn.nativeElement.click();\n      this.paginator.pageIndex = 0;\n    }\n  }\n  ListComponent.ɵfac = function ListComponent_Factory(t) {\n    return new (t || ListComponent)(i0.ɵɵdirectiveInject(i1.EmployeeSurveyController), i0.ɵɵdirectiveInject(i2.StorageService));\n  };\n  ListComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ListComponent,\n    selectors: [[\"app-list\"]],\n    viewQuery: function ListComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(MatSort, 5);\n        i0.ɵɵviewQuery(MatPaginator, 5);\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sort = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.paginator = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.refreshBtn = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.status = _t.first);\n      }\n    },\n    inputs: {\n      surveyID: \"surveyID\"\n    },\n    decls: 31,\n    vars: 7,\n    consts: [[1, \"card\", \"cardOverwrite\", \"overflowX\"], [1, \"ps-4\", \"pt-3\", \"headerLeftContainer\"], [1, \"pageTitle\"], [1, \"pageSubtitle\"], [1, \"headerRightContainer\"], [1, \"headerRightContainerInner\", \"me-4\"], [3, \"searchBy\", \"emitSearch\"], [\"searchBar\", \"\"], [\"type\", \"button\", 1, \"d-none\"], [\"refreshBtn\", \"\"], [\"mat-table\", \"\", \"matSort\", \"\", \"matSortDirection\", \"asc\", \"matSortActive\", \"employeeCode\", 3, \"dataSource\"], [\"matColumnDef\", \"employeeCode\"], [\"mat-header-cell\", \"\", \"class\", \"employeeCode\", \"mat-sort-header\", \"\", \"disableClear\", \"\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"employeeCode\", 4, \"matCellDef\"], [\"matColumnDef\", \"employeeName\"], [\"mat-header-cell\", \"\", \"class\", \"employeeName\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"employeeName\", 4, \"matCellDef\"], [\"matColumnDef\", \"submittedOn\"], [\"mat-header-cell\", \"\", \"clas\", \"submittedOn\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"clas\", \"submittedOn\", 4, \"matCellDef\"], [\"matColumnDef\", \"status\"], [\"mat-header-cell\", \"\", \"class\", \"status\", 4, \"matHeaderCellDef\"], [\"mat-cell\", \"\", \"class\", \"status\", 4, \"matCellDef\"], [\"mat-header-row\", \"\", 4, \"matHeaderRowDef\"], [\"mat-row\", \"\", 4, \"matRowDef\", \"matRowDefColumns\"], [\"class\", \"mat-row\", 4, \"matNoDataRow\"], [\"showFirstLastButtons\", \"\", 1, \"roundedBorder\", 3, \"length\", \"pageSizeOptions\", \"pageSize\"], [\"paginator\", \"\"], [\"mat-header-cell\", \"\", \"mat-sort-header\", \"\", \"disableClear\", \"\", 1, \"employeeCode\"], [\"mat-cell\", \"\", 1, \"employeeCode\"], [\"mat-header-cell\", \"\", 1, \"employeeName\"], [\"mat-cell\", \"\", 1, \"employeeName\"], [\"mat-header-cell\", \"\", \"clas\", \"submittedOn\"], [\"mat-cell\", \"\", \"clas\", \"submittedOn\"], [\"mat-header-cell\", \"\", 1, \"status\"], [\"header\", \"Status\", \"type\", \"mono\", \"value\", \"keyID\", \"view\", \"name\", 3, \"entityList\", \"selectFC\", \"active\", \"mono\"], [\"status\", \"\"], [\"mat-cell\", \"\", 1, \"status\"], [\"mat-header-row\", \"\"], [\"mat-row\", \"\"], [1, \"mat-row\"], [1, \"mat-cell\", \"text-center\"]],\n    template: function ListComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵtext(3, \"Survey Responses\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵtext(5, \"Analyse the received responses of survey\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelementStart(7, \"div\", 5);\n        i0.ɵɵelementStart(8, \"lib-search-bar-one\", 6, 7);\n        i0.ɵɵlistener(\"emitSearch\", function ListComponent_Template_lib_search_bar_one_emitSearch_8_listener($event) {\n          return ctx.searchFn($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 8, 9);\n        i0.ɵɵtext(12, \"refresh\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(13, \"table\", 10);\n        i0.ɵɵelementContainerStart(14, 11);\n        i0.ɵɵtemplate(15, ListComponent_th_15_Template, 2, 0, \"th\", 12);\n        i0.ɵɵtemplate(16, ListComponent_td_16_Template, 2, 1, \"td\", 13);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(17, 14);\n        i0.ɵɵtemplate(18, ListComponent_th_18_Template, 2, 0, \"th\", 15);\n        i0.ɵɵtemplate(19, ListComponent_td_19_Template, 2, 2, \"td\", 16);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(20, 17);\n        i0.ɵɵtemplate(21, ListComponent_th_21_Template, 2, 0, \"th\", 18);\n        i0.ɵɵtemplate(22, ListComponent_td_22_Template, 3, 4, \"td\", 19);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵelementContainerStart(23, 20);\n        i0.ɵɵtemplate(24, ListComponent_th_24_Template, 3, 3, \"th\", 21);\n        i0.ɵɵtemplate(25, ListComponent_td_25_Template, 2, 1, \"td\", 22);\n        i0.ɵɵelementContainerEnd();\n        i0.ɵɵtemplate(26, ListComponent_tr_26_Template, 1, 0, \"tr\", 23);\n        i0.ɵɵtemplate(27, ListComponent_tr_27_Template, 1, 0, \"tr\", 24);\n        i0.ɵɵtemplate(28, ListComponent_tr_28_Template, 3, 2, \"tr\", 25);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(29, \"mat-paginator\", 26, 27);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"searchBy\", \"Employee first name\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"dataSource\", ctx.dataSource);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"matHeaderRowDef\", ctx.displayedColumns);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"matRowDefColumns\", ctx.displayedColumns);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"length\", ctx.resultLength)(\"pageSizeOptions\", ctx.TABLE_CONSTANT[\"pageSizeOption\"])(\"pageSize\", ctx.TABLE_CONSTANT[\"pageSize\"]);\n      }\n    },\n    directives: [i3.SearchBarOneComponent, i4.MatTable, i5.MatSort, i4.MatColumnDef, i4.MatHeaderCellDef, i4.MatCellDef, i4.MatHeaderRowDef, i4.MatRowDef, i4.MatNoDataRow, i6.MatPaginator, i4.MatHeaderCell, i5.MatSortHeader, i4.MatCell, i3.FunnelFilterComponent, i4.MatHeaderRow, i4.MatRow],\n    pipes: [i7.DatePipe],\n    styles: [\".employeeCode[_ngcontent-%COMP%]{width:380px}.employeeName[_ngcontent-%COMP%]{width:380px}.submittedOn[_ngcontent-%COMP%]{width:380px}.status[_ngcontent-%COMP%]{width:120px;text-align:center;padding-right:12px}.width[_ngcontent-%COMP%]{width:120px}\"]\n  });\n  return ListComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
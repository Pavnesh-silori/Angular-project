{"ast":null,"code":"import { forkJoin } from 'rxjs';\nimport { AccountingPreference } from '@carbon/model/accounting-preference.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@netzero/controller/production-route.controller\";\nimport * as i3 from \"@carbon/controller/ongoing-run.controller\";\nimport * as i4 from \"@netzero/service/product-and-service.service\";\nimport * as i5 from \"@carbon/service/process.service\";\nimport * as i6 from \"@carbon/service/accounting-preference.service\";\nimport * as i7 from \"@library/storage-service\";\nimport * as i8 from \"@angular/common\";\nfunction LandingPageComponent_ng_container_1_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \" CBAM has been enabled. \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_template_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Enable CBAM accounting in \");\n    i0.ɵɵelementStart(1, \"a\", 16);\n    i0.ɵɵtext(2, \" Carbon Preferences. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \" CBAM product is created. \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"disabled-link\": a0\n  };\n};\nfunction LandingPageComponent_ng_container_1_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \"Create CBAM products that you export and all related raw materials, precursors, by-products and intermediate products that are used or released in the process in \");\n    i0.ɵɵelementStart(2, \"a\", 17);\n    i0.ɵɵtext(3, \" Products and Services. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", ctx_r10.cbamEnabled ? \"/source/product-service/product/page\" : null)(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, !ctx_r10.cbamEnabled));\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \" CBAM process is created. \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_template_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Create CBAM process \");\n    i0.ɵɵelementStart(1, \"a\", 17);\n    i0.ɵɵtext(2, \" by clicking here. \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r14.createProduct ? \"/source/process/page\" : null)(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, !ctx_r14.createProduct));\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \" Production route is created. \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_template_26_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Create production route \");\n    i0.ɵɵelementStart(1, \"a\", 17);\n    i0.ɵɵtext(2, \" by clicking here. \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r18.createProcess ? \"/source/production-route/page\" : null)(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, !ctx_r18.createProcess));\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_container_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \" CBAM run is created. \");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction LandingPageComponent_ng_container_1_ng_template_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtext(0, \" Create CBAM run \");\n    i0.ɵɵelementStart(1, \"a\", 17);\n    i0.ɵɵtext(2, \" by clicking here. \");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", ctx_r22.createProductionRoute ? \"/cbam/run/page\" : null)(\"ngClass\", i0.ɵɵpureFunction1(2, _c0, !ctx_r22.createProductionRoute));\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    class: a0\n  };\n};\nfunction LandingPageComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 3);\n    i0.ɵɵelementStart(2, \"div\", 4);\n    i0.ɵɵelement(3, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 4);\n    i0.ɵɵelementStart(5, \"div\", 6);\n    i0.ɵɵelementStart(6, \"div\", 7);\n    i0.ɵɵtext(7, \"Get started with EU CBAM compliance:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 8);\n    i0.ɵɵtemplate(9, LandingPageComponent_ng_container_1_ng_container_9_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵtemplate(10, LandingPageComponent_ng_container_1_ng_container_10_Template, 2, 0, \"ng-container\", 10);\n    i0.ɵɵtemplate(11, LandingPageComponent_ng_container_1_ng_template_11_Template, 3, 0, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"div\", 8);\n    i0.ɵɵtemplate(14, LandingPageComponent_ng_container_1_ng_container_14_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵtemplate(15, LandingPageComponent_ng_container_1_ng_container_15_Template, 2, 0, \"ng-container\", 10);\n    i0.ɵɵtemplate(16, LandingPageComponent_ng_container_1_ng_template_16_Template, 4, 4, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(18, \"div\", 8);\n    i0.ɵɵtemplate(19, LandingPageComponent_ng_container_1_ng_container_19_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵtemplate(20, LandingPageComponent_ng_container_1_ng_container_20_Template, 2, 0, \"ng-container\", 10);\n    i0.ɵɵtemplate(21, LandingPageComponent_ng_container_1_ng_template_21_Template, 3, 4, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(23, \"div\", 8);\n    i0.ɵɵtemplate(24, LandingPageComponent_ng_container_1_ng_container_24_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵtemplate(25, LandingPageComponent_ng_container_1_ng_container_25_Template, 2, 0, \"ng-container\", 10);\n    i0.ɵɵtemplate(26, LandingPageComponent_ng_container_1_ng_template_26_Template, 3, 4, \"ng-template\", null, 14, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(28, \"div\");\n    i0.ɵɵtemplate(29, LandingPageComponent_ng_container_1_ng_container_29_Template, 1, 0, \"ng-container\", 9);\n    i0.ɵɵtemplate(30, LandingPageComponent_ng_container_1_ng_container_30_Template, 2, 0, \"ng-container\", 10);\n    i0.ɵɵtemplate(31, LandingPageComponent_ng_container_1_ng_template_31_Template, 3, 4, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r5 = i0.ɵɵreference(12);\n    const _r9 = i0.ɵɵreference(17);\n    const _r13 = i0.ɵɵreference(22);\n    const _r17 = i0.ɵɵreference(27);\n    const _r21 = i0.ɵɵreference(32);\n    const ctx_r0 = i0.ɵɵnextContext();\n    const _r1 = i0.ɵɵreference(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"src\", ctx_r0.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(21, _c1, ctx_r0.cbamEnabled ? \"verifiedIcon\" : \"text-secondary\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.cbamEnabled)(\"ngIfElse\", _r5);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(23, _c1, ctx_r0.createProduct ? \"verifiedIcon\" : \"text-secondary\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.createProduct)(\"ngIfElse\", _r9);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(25, _c1, ctx_r0.createProcess ? \"verifiedIcon\" : \"text-secondary\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.createProcess)(\"ngIfElse\", _r13);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(27, _c1, ctx_r0.createProductionRoute ? \"verifiedIcon\" : \"text-secondary\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.createProductionRoute)(\"ngIfElse\", _r17);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r1)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(29, _c1, ctx_r0.createRun ? \"verifiedIcon\" : \"text-secondary\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.createRun)(\"ngIfElse\", _r21);\n  }\n}\nfunction LandingPageComponent_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(0, \"svg\", 18);\n    i0.ɵɵelement(1, \"path\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const class_r23 = ctx.class;\n    i0.ɵɵproperty(\"ngClass\", class_r23);\n  }\n}\n// /tsc-library\nexport let LandingPageComponent = /*#__PURE__*/(() => {\n  class LandingPageComponent {\n    constructor(router, productionRouteController, runController, productService, processService, accountingPreferenceService, storageService) {\n      this.router = router;\n      this.productionRouteController = productionRouteController;\n      this.runController = runController;\n      this.productService = productService;\n      this.processService = processService;\n      this.accountingPreferenceService = accountingPreferenceService;\n      this.storageService = storageService;\n      this.accountingPrefrenceType = new AccountingPreference();\n      this.cbamEnabled = false;\n      this.createProduct = false;\n      this.createProcess = false;\n      this.createProductionRoute = false;\n      this.createRun = false;\n      this.showLandingPage = false;\n    }\n    ngOnInit() {\n      this.currentOrgID = this.storageService.getStorage('currentOrgID');\n      this.showlink();\n    }\n    showlink() {\n      let requestedRunBody = {\n        search: '',\n        pageNo: 0,\n        pageSize: 50,\n        sortBy: 'id',\n        orderBy: 'desc',\n        filter: []\n      };\n      let requestedLedgerBody = {\n        pageNo: 0,\n        pageSize: 50,\n        sortBy: 'id',\n        orderBy: 'desc'\n      };\n      forkJoin([this.accountingPreferenceService.getAccountingPreferenceByOrgID(this.currentOrgID), this.productService.getProductList(this.currentOrgID), this.processService.getProcessList(this.currentOrgID), this.productionRouteController.getProductionRoutePage(this.currentOrgID, 0, 50, 'name', 'desc', null), this.runController.getByPage(this.currentOrgID, requestedRunBody), this.runController.getLedgerByPage(this.currentOrgID, requestedLedgerBody)]).subscribe(([prefResponse, productResponse, processResponse, routeResponse, runResponse, ledgerResponse]) => {\n        this.accountingPrefrenceType = prefResponse;\n        if (this.accountingPrefrenceType && this.accountingPrefrenceType.isProductEmbeddedEmission == true) {\n          this.cbamEnabled = true;\n        }\n        this.allProducts = productResponse.filter(product => product.isCbamCompliant);\n        if (this.allProducts.length > 0 && this.cbamEnabled == true) {\n          this.createProduct = true;\n        }\n        this.allProcess = processResponse.filter(process => process.isCBAMProcess);\n        if (this.allProcess.length > 0 && this.createProduct == true) {\n          this.createProcess = true;\n        }\n        this.allProductionRoute = routeResponse['totalCount'];\n        if (this.allProductionRoute > 0 && this.createProcess == true) {\n          this.createProductionRoute = true;\n        }\n        this.ongoingRunPageRecordCount = runResponse.totalCount;\n        this.ledgerPagePageRecordCount = ledgerResponse.totalCount;\n        if ((this.ongoingRunPageRecordCount || this.ledgerPagePageRecordCount) > 0) {\n          this.createRun = true;\n        }\n        this.redirectTo();\n        this.updateImage();\n      });\n    }\n    updateImage() {\n      if (this.createProductionRoute) {\n        this.image = '/assets/images/cbam-run.jpg';\n      } else if (this.createProcess) {\n        this.image = '/assets/images/create-production-route.jpg';\n      } else if (this.createProduct) {\n        this.image = '/assets/images/create-process.jpg';\n      } else if (this.cbamEnabled) {\n        this.image = '/assets/images/create-product.jpg';\n      } else {\n        this.image = '/assets/images/preference3.jpg';\n      }\n    }\n    redirectTo() {\n      if (this.cbamEnabled && this.createRun) {\n        this.router.navigate(['/cbam/run/page']);\n      } else {\n        this.showLandingPage = true;\n      }\n    }\n  }\n  LandingPageComponent.ɵfac = function LandingPageComponent_Factory(t) {\n    return new (t || LandingPageComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.ProductionRouteController), i0.ɵɵdirectiveInject(i3.OnGoingRunController), i0.ɵɵdirectiveInject(i4.ProductAndServiceService), i0.ɵɵdirectiveInject(i5.ProcessService), i0.ɵɵdirectiveInject(i6.AccountingPreferenceService), i0.ɵɵdirectiveInject(i7.StorageService));\n  };\n  LandingPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LandingPageComponent,\n    selectors: [[\"app-landing-page\"]],\n    decls: 4,\n    vars: 1,\n    consts: [[1, \"card\", \"main-card\", \"centerAlignHorizontal\", \"cardOverwrite\", \"h100\"], [4, \"ngIf\"], [\"check\", \"\"], [1, \"row\"], [1, \"col-sm-6\", \"p-5\", \"centerAlign\"], [\"alt\", \"Selected image\", 1, \"pageOneDefaultImage\", \"img-width\", 3, \"src\"], [1, \"card-body\"], [1, \"fs-4\", \"fw-bold\", \"mb-2\"], [1, \"mb-2\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [4, \"ngIf\", \"ngIfElse\"], [\"cbamEnabledSetup\", \"\"], [\"createProductSetup\", \"\"], [\"createProcessSetup\", \"\"], [\"createProductionRouteSetup\", \"\"], [\"createRunSetup\", \"\"], [\"routerLink\", \"/carbon-setting/preference/accounting\"], [3, \"routerLink\", \"ngClass\"], [\"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\", 1, \"check-circle-fill\", \"flex-shrink-0\", \"iconSize\", \"me-2\", 3, \"ngClass\"], [\"d\", \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 \\n                                7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"]],\n    template: function LandingPageComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵtemplate(1, LandingPageComponent_ng_container_1_Template, 33, 31, \"ng-container\", 1);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(2, LandingPageComponent_ng_template_2_Template, 2, 1, \"ng-template\", null, 2, i0.ɵɵtemplateRefExtractor);\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.showLandingPage);\n      }\n    },\n    directives: [i8.NgIf, i8.NgTemplateOutlet, i1.RouterLinkWithHref, i8.NgClass],\n    styles: [\".iconSize[_ngcontent-%COMP%]{width:20px;height:20px}.disabled-link[_ngcontent-%COMP%]{color:gray;pointer-events:none;text-decoration:none}.verifiedIcon[_ngcontent-%COMP%]{color:#4fc84f}.img-width[_ngcontent-%COMP%]{max-width:400px}\"]\n  });\n  return LandingPageComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
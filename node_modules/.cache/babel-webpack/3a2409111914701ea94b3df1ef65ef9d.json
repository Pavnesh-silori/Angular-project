{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { FormControl } from '@angular/forms';\nimport { FUGITIVE_EMISSION } from '@carbon/constant/fugitive-emission.constant';\nimport { ButtonLabelEnum, InvalidForm } from '@library/tsc-common';\nimport { ToastrColor } from '@library/toastr-service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@carbon/controller/fugitive-activity-configurator.controller\";\nimport * as i4 from \"@carbon/service/fugitive.configurator.service\";\nimport * as i5 from \"@library/toastr-service\";\nimport * as i6 from \"@library/storage-service\";\nimport * as i7 from \"@angular/material/checkbox\";\nimport * as i8 from \"@angular/material/radio\";\nimport * as i9 from \"@angular/common\";\nfunction FugitiveEmissionConfiguratorComponent_div_24_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵelementStart(1, \"mat-radio-button\", 27);\n    i0.ɵɵelementStart(2, \"div\", 12);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 28);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const approach_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", approach_r1.keyID);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", approach_r1.label, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", approach_r1.name, \" \");\n  }\n}\nfunction FugitiveEmissionConfiguratorComponent_div_24_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 26);\n    i0.ɵɵelementStart(1, \"mat-radio-button\", 27);\n    i0.ɵɵelementStart(2, \"div\", 15);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const approach_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", approach_r1.keyID);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", approach_r1.name, \" \");\n  }\n}\nfunction FugitiveEmissionConfiguratorComponent_div_24_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 29);\n    i0.ɵɵelementStart(1, \"div\", 30);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 31);\n    i0.ɵɵelement(3, \"use\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\", 33);\n    i0.ɵɵtext(5, \" To account for fugitive emissions from refrigeration,ac and fire suppression,creating \");\n    i0.ɵɵelementStart(6, \"a\", 34);\n    i0.ɵɵelementStart(7, \"u\");\n    i0.ɵɵtext(8, \" equipment groups\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(9, \" is mandatory. \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FugitiveEmissionConfiguratorComponent_div_24_div_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 35);\n    i0.ɵɵelementStart(1, \"div\", 30);\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(2, \"svg\", 31);\n    i0.ɵɵelement(3, \"use\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(4, \"div\", 33);\n    i0.ɵɵtext(5, \" It looks like your organization is a refrigerant/ ac equipment manufacturer & user both. \");\n    i0.ɵɵelement(6, \"br\");\n    i0.ɵɵtext(7, \" Please note that separate physical gas inventories and gas transactions have to be maintained both for equipment manufacturer and equipment used. You can account for emissions from manufactured equipments from \");\n    i0.ɵɵelementStart(8, \"a\", 36);\n    i0.ɵɵelementStart(9, \"u\");\n    i0.ɵɵtext(10, \" product manufacture \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(11, \" \\u00A0 and from use of equipments from \\u00A0\");\n    i0.ɵɵelementStart(12, \"a\", 37);\n    i0.ɵɵelementStart(13, \"u\");\n    i0.ɵɵtext(14, \" service-myself\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(15, \" . \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nfunction FugitiveEmissionConfiguratorComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 22);\n    i0.ɵɵtemplate(1, FugitiveEmissionConfiguratorComponent_div_24_div_1_Template, 6, 3, \"div\", 23);\n    i0.ɵɵtemplate(2, FugitiveEmissionConfiguratorComponent_div_24_div_2_Template, 4, 2, \"div\", 23);\n    i0.ɵɵtemplate(3, FugitiveEmissionConfiguratorComponent_div_24_div_3_Template, 10, 0, \"div\", 24);\n    i0.ɵɵtemplate(4, FugitiveEmissionConfiguratorComponent_div_24_div_4_Template, 16, 0, \"div\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const approach_r1 = ctx.$implicit;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", approach_r1.label != \"All\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", approach_r1.label == \"All\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.approachFC.value == \"screeningApproach\" && approach_r1.keyID == \"screeningApproach\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.purchaseManufacturer && (ctx_r0.approachFC.value == \"all\" && approach_r1.keyID == \"all\" || ctx_r0.approachFC.value == \"serviceMyselfApproach\" && approach_r1.keyID == \"serviceMyselfApproach\"));\n  }\n}\n// /tsc-library\nexport let FugitiveEmissionConfiguratorComponent = /*#__PURE__*/(() => {\n  class FugitiveEmissionConfiguratorComponent {\n    constructor(formBuilder, router, fugitiveActivityConfiguratorController, fugitiveConfiguratorService, toastrService, storageService) {\n      this.formBuilder = formBuilder;\n      this.router = router;\n      this.fugitiveActivityConfiguratorController = fugitiveActivityConfiguratorController;\n      this.fugitiveConfiguratorService = fugitiveConfiguratorService;\n      this.toastrService = toastrService;\n      this.storageService = storageService;\n      this.ButtonLabelEnum = ButtonLabelEnum;\n      this.FUGITIVE_EMISSION = FUGITIVE_EMISSION;\n      this.approachFC = new FormControl();\n      this.purchaseManufacturer = false;\n      this.selectedApproach = 'screeningApproach';\n      this.isConfigured = false;\n      this.isOtherThanManufacturer = true;\n      this.fugitiveApproaches = [{\n        keyID: 'screeningApproach',\n        label: ' Screening (Screening Method)',\n        name: ' know total gas capacity, date of purchase/ sale and type of equipments available (Eg.commercial air conditioners, vehicle refrigeration etc.).'\n      }, {\n        keyID: 'serviceByContractorApproach',\n        label: 'Lifecycle stage approach (Service by contractor Method)',\n        name: 'service the equipment through a contractor/ third party AND maintain purchase/ acquisitions, sales/ disbursements, servicing and retrofitting records of gas transactions.'\n      }, {\n        keyID: 'serviceMyselfApproach',\n        label: 'Sales based approach (Service myself Method)',\n        name: 'service the equipment myself AND maintain inventory, purchase, sale and retrofitting records of gas transactions.'\n      }, {\n        keyID: 'all',\n        label: 'All',\n        name: 'use a combination of above methods for different equipments'\n      }];\n    }\n    ngOnInit() {\n      this.currentOrgID = this.storageService.getStorage('currentOrgID');\n      this.isActivityConfiguratorConfigured();\n      this.approachFGInit();\n      this.getActivityConfiguration();\n    }\n    approachFGInit() {\n      this.approachFG = this.formBuilder.group({\n        screeningApproach: [false],\n        serviceByContractorApproach: [false],\n        serviceMyselfApproach: [false],\n        purchaseManufacturerApproach: []\n      });\n    }\n    ngAfterViewInit() {\n      this.approachFC.valueChanges.subscribe(value => {\n        this.isOtherThanManufacturer = value != null ? true : false;\n      });\n    }\n    onSubmit() {\n      if (this.approachFC.value == 'all') {\n        this.approachFG.patchValue({\n          screeningApproach: true,\n          serviceByContractorApproach: true,\n          serviceMyselfApproach: true\n        });\n      } else if (this.approachFC.value != null) {\n        this.approachFG.get(this.approachFC.value).patchValue(true);\n      }\n      if (!this.isFormValid()) {\n        return;\n      }\n      if (!this.isConfigured) {\n        this.createActivityConfigurator();\n      } else {\n        this.updateActivityConfigurator();\n      }\n    }\n    createActivityConfigurator() {\n      this.fugitiveActivityConfiguratorController.createActivityConfigurator(this.currentOrgID, this.approachFG.value).subscribe(createRes => {\n        let toast = this.toastrService.getToastStatus(createRes['status']);\n        this.toastrService.openToast(toast['title'], createRes['message'], toast['color']);\n        this.navigateTo();\n      }, error => {\n        console.log('error in createActivityConfigurator() -', error);\n      });\n    }\n    updateActivityConfigurator() {\n      this.fugitiveActivityConfiguratorController.updateActivityConfigurator(this.currentOrgID, this.approachFG.value).subscribe(createRes => {\n        let toast = this.toastrService.getToastStatus(createRes['status']);\n        this.toastrService.openToast(toast['title'], createRes['message'], toast['color']);\n        this.navigateTo();\n      }, error => {\n        console.log('error in updateActivityConfigurator() -', error);\n      });\n    }\n    changeFugitiveApproach() {\n      this.isOtherThanManufacturer = !this.isOtherThanManufacturer;\n      if (this.isOtherThanManufacturer) {\n        this.selectedApproach = this.preSelectedApproach;\n      } else {\n        this.selectedApproach = null;\n      }\n    }\n    getActivityConfiguration() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.fugitiveApproachM = yield this.fugitiveConfiguratorService.getActiveActivityConfiguration(this.currentOrgID);\n        this.getSelectedApproach();\n        this.purchaseManufacturer = this.fugitiveApproachM['createPurchaseManufacturerApproach'];\n        this.purchaseManufacturerApproachAC.patchValue(this.fugitiveApproachM.createPurchaseManufacturerApproach);\n      });\n    }\n    isActivityConfiguratorConfigured() {\n      this.fugitiveActivityConfiguratorController.isActivityConfiguratorConfigured(this.currentOrgID).subscribe(response => {\n        this.isConfigured = response['isConfigured'];\n      }, error => {\n        console.log('error in isActivityConfiguratorConfigured() -', error);\n      });\n    }\n    getSelectedApproach() {\n      let createScreeningApproach = this.fugitiveApproachM['createScreeningApproach'];\n      let createServiceByContractorApproach = this.fugitiveApproachM['createServiceByContractorApproach'];\n      let createServiceMyselfApproach = this.fugitiveApproachM['createServiceMyselfApproach'];\n      if (createScreeningApproach && createServiceByContractorApproach && createServiceMyselfApproach) {\n        this.selectedApproach = 'all';\n      } else if (createScreeningApproach) {\n        this.selectedApproach = 'screeningApproach';\n      } else if (createServiceByContractorApproach) {\n        this.selectedApproach = 'serviceByContractorApproach';\n      } else if (createServiceMyselfApproach) {\n        this.selectedApproach = 'serviceMyselfApproach';\n      } else {\n        this.selectedApproach = null;\n      }\n      this.preSelectedApproach = this.selectedApproach;\n    }\n    get screeningApproachAC() {\n      return this.approachFG.get('screeningApproach');\n    }\n    get serviceByContractorApproachAC() {\n      return this.approachFG.get('serviceByContractorApproach');\n    }\n    get serviceMyselfApproachAC() {\n      return this.approachFG.get('serviceMyselfApproach');\n    }\n    get purchaseManufacturerApproachAC() {\n      return this.approachFG.get('purchaseManufacturerApproach');\n    }\n    isFormValid() {\n      if (!this.screeningApproachAC.value && !this.serviceByContractorApproachAC.value && !this.serviceMyselfApproachAC.value && !this.purchaseManufacturerApproachAC.value) {\n        console.log('invalid form -', this.approachFG.value);\n        this.toastrService.openToast(InvalidForm.INVALID_FORM_TITLE, \"Please select at least one approach\", ToastrColor.ERROR);\n        return false;\n      }\n      return true;\n    }\n    navigateTo() {\n      this.router.navigate(['/carbon-setting/activity-configurator']);\n    }\n  }\n  FugitiveEmissionConfiguratorComponent.ɵfac = function FugitiveEmissionConfiguratorComponent_Factory(t) {\n    return new (t || FugitiveEmissionConfiguratorComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.FugitiveActivityConfiguratorController), i0.ɵɵdirectiveInject(i4.FugitiveConfiguratorService), i0.ɵɵdirectiveInject(i5.ToastrService), i0.ɵɵdirectiveInject(i6.StorageService));\n  };\n  FugitiveEmissionConfiguratorComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: FugitiveEmissionConfiguratorComponent,\n    selectors: [[\"app-fugitive-emission-configurator\"]],\n    decls: 31,\n    vars: 7,\n    consts: [[\"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"d-none\"], [\"id\", \"info-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"], [1, \"card\", \"cardOverwrite\", \"h100\"], [1, \"headerContainer\"], [1, \"headerLeftContainer\"], [1, \"pageTitle\"], [1, \"pageSubtitle\"], [1, \"cardSubtitle\", \"fw-bold\", \"fs-6\", \"ms-4\", \"mt-3\"], [1, \"ms-3\", \"mt-1\", 3, \"formGroup\"], [1, \"fs-5\", \"ms-3\", \"mt-2\"], [\"formControlName\", \"purchaseManufacturerApproach\", 1, \"matCheckboxLayout\", \"ms-3\", \"mt-3\"], [1, \"cardTitle\", \"ms-2\"], [1, \"ps-5\", \"mt-2\"], [1, \"matCheckboxLayout\", \"mt-3\", \"mb-2\", \"ps-3\", 3, \"checked\", \"change\"], [1, \"ms-2\"], [3, \"formControl\", \"ngModel\", \"ngModelChange\"], [\"class\", \"radio-button matRadioButtonLayout\", 4, \"ngFor\", \"ngForOf\"], [\"align\", \"end\", 1, \"me-3\", \"mb-3\"], [\"type\", \"button\", 1, \"button\", \"btn\", \"btn-secondary\", \"me-2\", 3, \"click\"], [1, \"d-inline\"], [\"type\", \"submit\", 1, \"button\", \"btn\", \"btn-success\", 3, \"click\"], [1, \"radio-button\", \"matRadioButtonLayout\"], [\"class\", \"mt-3\", 4, \"ngIf\"], [\"class\", \"col-sm-8 info\", 4, \"ngIf\"], [\"class\", \"info\", 4, \"ngIf\"], [1, \"mt-3\"], [1, \"ms-2\", 3, \"value\"], [1, \"ps-5\"], [1, \"col-sm-8\", \"info\"], [1, \"alert\", \"alert-primary\", \"centerAlignVertical\", \"roundedBorder\"], [1, \"extraInfoCardIcon\"], [0, \"xlink\", \"href\", \"#info-fill\"], [1, \"extraInfoCardText\", \"ps-3\", \"fs-6\"], [\"href\", \"/source/refrigeration-fire-suppressiong-equipments\", \"target\", \"_blank\"], [1, \"info\"], [\"href\", \"/product-manufacturer/inventory\", \"target\", \"_blank\"], [\"href\", \"/fugitive-emission-racfs/service-myself/inventory\", \"target\", \"_blank\"]],\n    template: function FugitiveEmissionConfiguratorComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(0, \"svg\", 0);\n        i0.ɵɵelementStart(1, \"symbol\", 1);\n        i0.ɵɵelement(2, \"path\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵtext(7, \" Fugitive - Refrigeration Configurator \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 7);\n        i0.ɵɵtext(9, \"Select between three calculation approaches used to calculate these emissions based on whether transactions are available at gas or equipment level. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 8);\n        i0.ɵɵtext(11, \" Select one or more \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 9);\n        i0.ɵɵelementStart(13, \"div\", 10);\n        i0.ɵɵelementStart(14, \"mat-checkbox\", 11);\n        i0.ɵɵelementStart(15, \"div\", 12);\n        i0.ɵɵtext(16, \" Sales based approach (Product Manufacture) \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 13);\n        i0.ɵɵtext(18, \" I am a manufacturer of refrigeration, air conditioning or fire suppression equipment and I maintain inventory, purchase and sales records of gas transactions. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 10);\n        i0.ɵɵelementStart(20, \"mat-checkbox\", 14);\n        i0.ɵɵlistener(\"change\", function FugitiveEmissionConfiguratorComponent_Template_mat_checkbox_change_20_listener() {\n          return ctx.changeFugitiveApproach();\n        });\n        i0.ɵɵelementStart(21, \"div\", 15);\n        i0.ɵɵtext(22, \" I am a user of refrigeration, air conditioning or fire suppression equipment and I, \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"mat-radio-group\", 16);\n        i0.ɵɵlistener(\"ngModelChange\", function FugitiveEmissionConfiguratorComponent_Template_mat_radio_group_ngModelChange_23_listener($event) {\n          return ctx.selectedApproach = $event;\n        });\n        i0.ɵɵtemplate(24, FugitiveEmissionConfiguratorComponent_div_24_Template, 5, 4, \"div\", 17);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"div\", 18);\n        i0.ɵɵelementStart(26, \"button\", 19);\n        i0.ɵɵlistener(\"click\", function FugitiveEmissionConfiguratorComponent_Template_button_click_26_listener() {\n          return ctx.navigateTo();\n        });\n        i0.ɵɵtext(27);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(28, \"div\", 20);\n        i0.ɵɵelementStart(29, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function FugitiveEmissionConfiguratorComponent_Template_button_click_29_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(30);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(12);\n        i0.ɵɵproperty(\"formGroup\", ctx.approachFG);\n        i0.ɵɵadvance(8);\n        i0.ɵɵproperty(\"checked\", ctx.isOtherThanManufacturer);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"formControl\", ctx.approachFC)(\"ngModel\", ctx.selectedApproach);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.fugitiveApproaches);\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.ButtonLabelEnum.CANCEL_BTN_LABEL, \" \");\n        i0.ɵɵadvance(3);\n        i0.ɵɵtextInterpolate1(\" \", ctx.FUGITIVE_EMISSION.CONFIGURE_BTN_LABEL, \" \");\n      }\n    },\n    directives: [i1.NgControlStatusGroup, i1.FormGroupDirective, i7.MatCheckbox, i1.NgControlStatus, i1.FormControlName, i8.MatRadioGroup, i1.FormControlDirective, i9.NgForOf, i9.NgIf, i8.MatRadioButton],\n    styles: [\".radio-button[_ngcontent-%COMP%]{margin:10px 10px 10px 30px}  .matCheckboxLayout .mat-checkbox-layout{white-space:normal!important;font-family:var(--bs-font-sans-serif)}  .matRadioButtonLayout .mat-radio-label{white-space:normal!important}.info[_ngcontent-%COMP%]{margin:25px 25px 25px 60px;min-height:45px}\"]\n  });\n  return FugitiveEmissionConfiguratorComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
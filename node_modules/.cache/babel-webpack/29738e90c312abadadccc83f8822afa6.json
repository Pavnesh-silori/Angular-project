{"ast":null,"code":"import { __awaiter } from \"tslib\";\nimport { MaintenanceComponent } from '../near-term/maintenance/maintenance.component';\nimport { ReductionComponent as NearTermReductionComponent } from '../near-term/reduction/reduction.component';\nimport { ReductionComponent as LongTermReducitonComponent } from '../long-term/reduction/reduction.component';\nimport { LongTermEnum, NearTermEnum } from '@carbon/enum/sbti.enum';\nimport { BaseYearEnum } from '@carbon/enum/base-year.enum';\nimport { SbtiBaseYearEmission } from '@carbon/model/sbti.model';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@library/storage-service\";\nimport * as i3 from \"@carbon/controller/sbti.controller\";\nimport * as i4 from \"@carbon/controller/base-year.controller\";\nimport * as i5 from \"@angular/material/button\";\nimport * as i6 from \"@angular/material/tooltip\";\nimport * as i7 from \"@angular/common\";\nconst _c0 = [\"myTooltip\"];\nconst _c1 = [\"myTooltip1\"];\n// /tsc-library\nexport let DialogComponent = /*#__PURE__*/(() => {\n  class DialogComponent {\n    constructor(dialog, selfDialogRef, storageService, sbtiController, baseYearController) {\n      this.dialog = dialog;\n      this.selfDialogRef = selfDialogRef;\n      this.storageService = storageService;\n      this.sbtiController = sbtiController;\n      this.baseYearController = baseYearController;\n      this.NearTerm = NearTermEnum;\n      this.LongTerm = LongTermEnum;\n      this.isReductionTargetSet = false;\n      this.isMaintenanceTargetSet = false;\n      this.isNetzeroTargetSet = false;\n      this.baseYearEmission = new SbtiBaseYearEmission();\n      this.scope1Valid = false;\n      this.scope2Valid = false;\n      this.scope3Valid = false;\n      this.isEmissionConfirmed = false;\n    }\n    ngOnInit() {\n      return __awaiter(this, void 0, void 0, function* () {\n        this.currentOrgID = this.storageService.getStorage('currentOrgID');\n        this.getScienceBasedTarget();\n        this.getBaseYearByType();\n      });\n    }\n    getBaseYearByType() {\n      this.baseYearController.getBaseYearByType(this.currentOrgID, BaseYearEnum.SBTI_BASE_YEAR).subscribe(baseYear => {\n        if (baseYear) {\n          this.isEmissionConfirmed = true;\n        }\n      });\n    }\n    canCreateTarget(targetType) {\n      switch (targetType) {\n        case NearTermEnum.NEAR_TERM_REDUCTION:\n          return this.isReductionTargetSet;\n        case NearTermEnum.NEAR_TERM_MAINTENANCE:\n          return this.isMaintenanceTargetSet;\n        case LongTermEnum.LONG_TERM_NETZERO:\n          return this.isNetzeroTargetSet;\n        default:\n          return false;\n      }\n    }\n    getScienceBasedTarget() {\n      this.sbtiController.isSBTITargetSet(this.currentOrgID).subscribe(response => {\n        this.isReductionTargetSet = response.reductionTarget.flag;\n        this.isMaintenanceTargetSet = response.maintenanceTarget.flag;\n        this.isNetzeroTargetSet = response.netzeroTarget.flag;\n        this.reductionTargetYearMsg = response.reductionTarget.message;\n        this.maintenanceTargetYearMsg = response.maintenanceTarget.message;\n        this.netZeroTargetYearMsg = response.netzeroTarget.message;\n      }, error => {\n        console.log(\"error--\", error);\n      });\n    }\n    setNearTermTarget(targetType) {\n      this.dialog.open(NearTermReductionComponent, {\n        data: {\n          targetType: targetType\n        },\n        minWidth: '40vw',\n        maxWidth: '40vw',\n        height: '100%',\n        position: {\n          right: '-2px',\n          top: '0px'\n        }\n      });\n      this.selfDialogRef.close();\n    }\n    setMaintenanceTarget() {\n      this.dialog.open(MaintenanceComponent, {\n        minWidth: '40vw',\n        maxWidth: '40vw',\n        height: '100%',\n        position: {\n          right: '-2px',\n          top: '0px'\n        }\n      });\n      this.selfDialogRef.close();\n    }\n    setLongTermTarget() {\n      this.dialog.open(LongTermReducitonComponent, {\n        minWidth: '40vw',\n        maxWidth: '40vw',\n        height: '100%',\n        position: {\n          right: '-2px',\n          top: '0px'\n        }\n      });\n      this.selfDialogRef.close();\n    }\n  }\n  DialogComponent.ɵfac = function DialogComponent_Factory(t) {\n    return new (t || DialogComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i1.MatDialogRef), i0.ɵɵdirectiveInject(i2.StorageService), i0.ɵɵdirectiveInject(i3.SbtiController), i0.ɵɵdirectiveInject(i4.BaseYearController));\n  };\n  DialogComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DialogComponent,\n    selectors: [[\"app-dialog\"]],\n    viewQuery: function DialogComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n      if (rf & 2) {\n        let _t;\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myTooltip = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.myTooltip1 = _t.first);\n      }\n    },\n    decls: 71,\n    vars: 12,\n    consts: [[\"xmlns\", \"http://www.w3.org/2000/svg\", 2, \"display\", \"none\"], [\"id\", \"check-circle-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", 1, \"d-none\"], [\"id\", \"info-fill\", \"fill\", \"currentColor\", \"viewBox\", \"0 0 16 16\"], [\"d\", \"M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm.93-9.412-1 4.705c-.07.34.029.533.304.533.194 0 .487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703 0-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381 2.29-.287zM8 5.5a1 1 0 1 1 0-2 1 1 0 0 1 0 2z\"], [\"mat-dialog-title\", \"\"], [1, \"dialogTitle\"], [\"mat-icon-button\", \"\", \"mat-dialog-close\", \"\", \"cdkFocusInitial\", \"\", \"matTooltip\", \"Close\", \"matTooltipPosition\", \"before\", 1, \"float-end\", \"matDialogClose\"], [1, \"material-symbols-outlined\"], [\"mat-dialog-content\", \"\", 1, \"matDialogContent\"], [1, \"cardTitle\"], [1, \"cardSubtitle\", \"pt-1\"], [1, \"row\", \"pt-4\"], [1, \"col-sm-5\"], [1, \"cardOverwrite\", \"cardHeight\", \"bg-light\", \"border\"], [1, \"card-body\"], [1, \"cardSubtitle\", \"pt-2\"], [1, \"fw-bold\"], [1, \"pt-2\", \"d-flex\", \"flex-wrap\"], [\"type\", \"button\", \"matTooltipPosition\", \"above\", \"matTooltipClass\", \"infoTooltip\", 1, \"btn\", \"centerAlign\", \"me-2\", \"mt-1\", 3, \"ngClass\", \"matTooltip\", \"click\"], [\"type\", \"button\", \"matTooltipPosition\", \"above\", \"matTooltipClass\", \"infoTooltip\", 1, \"btn\", \"centerAlign\", \"mt-1\", 3, \"ngClass\", \"matTooltip\", \"click\"], [1, \"col-sm-5\", \"ms-3\"], [1, \"iconStyle\"], [\"matTooltipPosition\", \"above\", \"matTooltipClass\", \"infoTooltip\", 1, \"material-symbols-outlined\", \"cursorPointer\", 3, \"matTooltip\", \"matTooltipHideDelay\"], [\"myTooltip\", \"matTooltip\"], [1, \"cardTitle\", \"row\", \"ps-3\"], [1, \"cardSubtitle\", \"pt-2\", 2, \"margin-left\", \"3px\"], [1, \"pt-4\"], [1, \"pt-3\"], [1, \"cardTitle\", \"pt-3\"], [1, \"col-sm-6\", \"pt-4\"], [\"myTooltip1\", \"matTooltip\"]],\n    template: function DialogComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(0, \"svg\", 0);\n        i0.ɵɵelementStart(1, \"symbol\", 1);\n        i0.ɵɵelement(2, \"path\", 2);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"svg\", 3);\n        i0.ɵɵelementStart(4, \"symbol\", 4);\n        i0.ɵɵelement(5, \"path\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"strong\", 7);\n        i0.ɵɵtext(8, \" New science based target \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 8);\n        i0.ɵɵelementStart(10, \"span\", 9);\n        i0.ɵɵtext(11, \" close \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"div\", 10);\n        i0.ɵɵelementStart(13, \"div\", 11);\n        i0.ɵɵtext(14, \"Set a near term target\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 12);\n        i0.ɵɵtext(16, \" Near-term science-based targets are absolute scope 1 and 2 GHG emissions reduction or maintenance targets that should be achieved by 2030, from a predefined base year. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"div\", 13);\n        i0.ɵɵelementStart(18, \"div\", 14);\n        i0.ɵɵelementStart(19, \"div\", 15);\n        i0.ɵɵelementStart(20, \"div\", 16);\n        i0.ɵɵelementStart(21, \"div\", 11);\n        i0.ɵɵtext(22, \"Reduction target\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(23, \"p\", 17);\n        i0.ɵɵtext(24, \"Set a more ambitious custom reduction target for scope 1 & 2 emissions based on your base year emissions.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(25, \"p\", 18);\n        i0.ɵɵtext(26, \"Minimum Ambition- 1.5C\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(27, \"div\", 19);\n        i0.ɵɵelementStart(28, \"button\", 20);\n        i0.ɵɵlistener(\"click\", function DialogComponent_Template_button_click_28_listener() {\n          return ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_REDUCTION) ? ctx.setNearTermTarget(ctx.NearTerm.AUTO_CALCULATED) : null;\n        });\n        i0.ɵɵtext(29, \" Set auto-calculated target \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(30, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function DialogComponent_Template_button_click_30_listener() {\n          return ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_REDUCTION) ? ctx.setNearTermTarget(ctx.NearTerm.CUSTOM_RANGE) : null;\n        });\n        i0.ɵɵtext(31, \" Set custom target \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(32, \"div\", 22);\n        i0.ɵɵelementStart(33, \"div\", 15);\n        i0.ɵɵelementStart(34, \"div\", 16);\n        i0.ɵɵelementStart(35, \"div\", 23);\n        i0.ɵɵelementStart(36, \"span\", 24, 25);\n        i0.ɵɵtext(38, \"info\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\");\n        i0.ɵɵelementStart(40, \"div\", 26);\n        i0.ɵɵtext(41, \"Maintenance target\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(42, \"p\", 27);\n        i0.ɵɵtext(43, \"Set a maintenance target for scope 1 & 2 emissions based on your base year emissions.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"p\", 18);\n        i0.ɵɵtext(45, \"Minimum Ambition- 1.5C\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(46, \"div\", 28);\n        i0.ɵɵelementStart(47, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function DialogComponent_Template_button_click_47_listener() {\n          return ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_MAINTENANCE) ? ctx.setMaintenanceTarget() : null;\n        });\n        i0.ɵɵtext(48, \" Set target \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(49, \"div\", 29);\n        i0.ɵɵelementStart(50, \"div\", 30);\n        i0.ɵɵtext(51, \"Set a long term target\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(52, \"div\", 12);\n        i0.ɵɵtext(53, \" Long-term science-based targets are absolute scope 1, 2 and 3 GHG emissions reduction targets that should be achieved by 2050 at the latest, from a predefined base year. They also include a commitment to neutralize any unabated emissions when the long-term science-based target is achieved. \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(54, \"div\", 31);\n        i0.ɵɵelementStart(55, \"div\", 15);\n        i0.ɵɵelementStart(56, \"div\", 16);\n        i0.ɵɵelementStart(57, \"div\", 23);\n        i0.ɵɵelementStart(58, \"span\", 24, 32);\n        i0.ɵɵtext(60, \"info \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(61, \"div\");\n        i0.ɵɵelementStart(62, \"div\", 11);\n        i0.ɵɵtext(63, \"Netzero target\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(64, \"p\", 12);\n        i0.ɵɵtext(65, \"Set a netzero target for scope 1, 2 and 3 based on your base year emissions.\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(66, \"p\", 18);\n        i0.ɵɵtext(67, \"Minimum Ambition- 1.5C\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(68, \"div\", 28);\n        i0.ɵɵelementStart(69, \"button\", 21);\n        i0.ɵɵlistener(\"click\", function DialogComponent_Template_button_click_69_listener() {\n          return ctx.canCreateTarget(ctx.LongTerm.LONG_TERM_NETZERO) ? ctx.setLongTermTarget() : null;\n        });\n        i0.ɵɵtext(70, \" Set target \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(28);\n        i0.ɵɵproperty(\"ngClass\", ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_REDUCTION) ? \"btn-success\" : \"btn-secondary disableButton\")(\"matTooltip\", ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_REDUCTION) ? \"\" : ctx.reductionTargetYearMsg);\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngClass\", ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_REDUCTION) ? \"btn-success\" : \"btn-secondary disableButton\")(\"matTooltip\", ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_REDUCTION) ? \"\" : ctx.reductionTargetYearMsg);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"matTooltip\", \"Organizations whose scope 1 or 2 emissions are deemed immaterial are eligible to set a maintenance target. This means either your Scope 1 or Scope 2 emissions should be 0 in your base year or current year.\")(\"matTooltipHideDelay\", 1000);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngClass\", ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_MAINTENANCE) ? \"btn-success\" : \"btn-secondary disableButton\")(\"matTooltip\", ctx.canCreateTarget(ctx.NearTerm.NEAR_TERM_MAINTENANCE) ? \"\" : ctx.maintenanceTargetYearMsg);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"matTooltip\", \"In order to commit to a netzero target, your organization must also set a 1.5\\u00B0C aligned near-term target. Alternatively, a netzero target can be set without a near term target if the target year is within a 5-10 year timeframe from the current year.\")(\"matTooltipHideDelay\", 1000);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngClass\", ctx.canCreateTarget(ctx.LongTerm.LONG_TERM_NETZERO) ? \"btn-success\" : \"btn-secondary disableButton\")(\"matTooltip\", ctx.canCreateTarget(ctx.LongTerm.LONG_TERM_NETZERO) ? \"\" : ctx.netZeroTargetYearMsg);\n      }\n    },\n    directives: [i1.MatDialogTitle, i5.MatButton, i1.MatDialogClose, i6.MatTooltip, i1.MatDialogContent, i7.NgClass],\n    styles: [\".cardOverwrite[_ngcontent-%COMP%]{position:relative}.disabledCard[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;cursor:none}.iconStyle[_ngcontent-%COMP%]{position:absolute;top:16px;right:10px;z-index:1;color:#fff}.cardHeight[_ngcontent-%COMP%]{height:230px;width:363px}.material-symbols-outlined[_ngcontent-%COMP%]{color:#6c757d}.disableButton[_ngcontent-%COMP%]{cursor:not-allowed;background-color:#b5b2b2;border-color:#b5b2b2;color:#fff}\"]\n  });\n  return DialogComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
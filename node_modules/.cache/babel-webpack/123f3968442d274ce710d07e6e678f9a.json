{"ast":null,"code":"import { ActivityChangeDialog } from '../changes/activity-change/activity-change.component';\nimport { GroupLevelChangeComponent } from '../changes/group-level/group-level.component';\nimport { CARBON_CONSTANT } from '@carbon/constant/carbon.constant';\n// tsc-library\nimport { ProfileImg } from '@library/user-service';\nimport { ButtonLabelEnum } from '@library/tsc-common';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/material/dialog\";\nimport * as i2 from \"@library/user-service\";\nimport * as i3 from \"@angular/common\";\nfunction TimelineComponent_ng_container_1_ng_container_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"number\");\n    i0.ɵɵelementStart(4, \"span\", 14);\n    i0.ɵɵtext(5, \" trending_down \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const timeline_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(3, 1, timeline_r1.emissionDiffPct, \"1.0-2\"), \"% \");\n  }\n}\nfunction TimelineComponent_ng_container_1_ng_template_18_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"span\", 16);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"number\");\n    i0.ɵɵelementStart(4, \"span\", 17);\n    i0.ɵɵtext(5, \" trending_up \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const timeline_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" +\", i0.ɵɵpipeBind2(3, 1, timeline_r1.emissionDiffPct, \"1.0-2\"), \"% \");\n  }\n}\nfunction TimelineComponent_ng_container_1_ng_template_18_ng_template_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const timeline_r1 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, timeline_r1.emissionDiffPct, \"1.0-2\"), \"% \");\n  }\n}\nfunction TimelineComponent_ng_container_1_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, TimelineComponent_ng_container_1_ng_template_18_ng_container_0_Template, 6, 4, \"ng-container\", 10);\n    i0.ɵɵtemplate(1, TimelineComponent_ng_container_1_ng_template_18_ng_template_1_Template, 3, 4, \"ng-template\", null, 15, i0.ɵɵtemplateRefExtractor);\n  }\n  if (rf & 2) {\n    const _r9 = i0.ɵɵreference(2);\n    const timeline_r1 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"ngIf\", timeline_r1.emissionDiffPct > 0)(\"ngIfElse\", _r9);\n  }\n}\nfunction TimelineComponent_ng_container_1_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function TimelineComponent_ng_container_1_ng_container_20_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const timeline_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r14 = i0.ɵɵnextContext();\n      return ctx_r14.viewChange(timeline_r1);\n    });\n    i0.ɵɵtext(2, \" View changes \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction TimelineComponent_ng_container_1_ng_container_21_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function TimelineComponent_ng_container_1_ng_container_21_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const timeline_r1 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext();\n      return ctx_r17.viewChange(timeline_r1);\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r6.ButtonLabelEnum.VIEW_BTN_LABEL, \" \");\n  }\n}\nfunction TimelineComponent_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"li\", 2);\n    i0.ɵɵelementStart(2, \"span\", 3);\n    i0.ɵɵelementStart(3, \"span\", 4);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 5);\n    i0.ɵɵelement(6, \"img\", 6);\n    i0.ɵɵelementStart(7, \"span\", 7);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 8);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"span\", 7);\n    i0.ɵɵtext(12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"span\", 8);\n    i0.ɵɵtext(14, \" on \");\n    i0.ɵɵelementStart(15, \"time\", 9);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, TimelineComponent_ng_container_1_ng_container_17_Template, 6, 4, \"ng-container\", 10);\n    i0.ɵɵtemplate(18, TimelineComponent_ng_container_1_ng_template_18_Template, 3, 2, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(20, TimelineComponent_ng_container_1_ng_container_20_Template, 3, 0, \"ng-container\", 12);\n    i0.ɵɵtemplate(21, TimelineComponent_ng_container_1_ng_container_21_Template, 3, 1, \"ng-container\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const timeline_r1 = ctx.$implicit;\n    const _r3 = i0.ɵɵreference(19);\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.icon(timeline_r1.trigger), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", (timeline_r1 == null ? null : timeline_r1[\"profileImgUrl\"]) || ctx_r0.defaultImage(timeline_r1 == null ? null : timeline_r1[\"userName\"]), i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", timeline_r1 == null ? null : timeline_r1[\"userName\"], \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"has \", ctx_r0.action(timeline_r1.trigger), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.entity(timeline_r1));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(timeline_r1.date);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", timeline_r1.emissionDiffPct < 0)(\"ngIfElse\", _r3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", timeline_r1.dataType != \"STRUCTURAL_CHANGE_EMISSION\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", false && timeline_r1.dataType != \"STRUCTURAL_CHANGE_EMISSION\" && (timeline_r1 == null ? null : timeline_r1.activityStdKeyID) != \"other-fugitive-emission\");\n  }\n}\n// tsc-library\nexport let TimelineComponent = /*#__PURE__*/(() => {\n  class TimelineComponent {\n    constructor(dialog, userService) {\n      this.dialog = dialog;\n      this.userService = userService;\n      this.ButtonLabelEnum = ButtonLabelEnum;\n      this.timeline = [];\n      this.icon = action => {\n        switch (action) {\n          case CARBON_CONSTANT.ACTIVITY_DATA_UPDATE:\n            return 'edit';\n          case 'DELETE':\n            return 'delete';\n          case CARBON_CONSTANT.ACTIVITY_DATA_CREATE:\n            return 'add';\n          case CARBON_CONSTANT.SETTING_CHANGE:\n            return 'tune';\n          default:\n            return 'display_settings';\n        }\n      };\n      this.action = action => {\n        switch (action) {\n          case CARBON_CONSTANT.ACTIVITY_DATA_UPDATE:\n            return 'edited';\n          case 'DELETE':\n            return 'deleted';\n          case CARBON_CONSTANT.ACTIVITY_DATA_CREATE:\n            return 'created';\n          case CARBON_CONSTANT.SETTING_CHANGE:\n            return 'edited';\n          default:\n            return action;\n        }\n      };\n      this.entity = timeline => {\n        let activityName = timeline['activityStdName'];\n        activityName = activityName.toLowerCase();\n        let _case = timeline['trigger'] + '&' + timeline['dataType'];\n        switch (_case) {\n          case 'SETTING_CHANGE&ACTIVITY_DATA':\n            return `calculation preferences`;\n          case 'ACTIVITY_DATA_UPDATE&ACTIVITY_DATA':\n            return `a ${activityName} record`;\n          case 'ACTIVITY_DATA_CREATE&ACTIVITY_DATA':\n            return `a new ${activityName} record`;\n          default:\n            return timeline;\n        }\n      };\n    }\n    ngOnInit() {}\n    viewActivityChange(entity, isUpdate) {\n      let config = CARBON_CONSTANT.RIGHT_DIALOG_CONFIG;\n      config['minWidth'] = isUpdate ? '60vw' : '40vw';\n      config['data'] = {\n        isUpdate: isUpdate,\n        rootOrgID: this.rootOrgID,\n        baseYearKeyID: this.baseYearKeyID,\n        cedID: entity['cedID'],\n        activityDataID: entity['dataID'],\n        activityKeyID: entity['activityStdKeyID'],\n        showRedirectToView: false\n      };\n      this.dialog.open(ActivityChangeDialog, config);\n    }\n    viewGroupLevelChange(entity, isUpdate) {\n      let config = CARBON_CONSTANT.RIGHT_DIALOG_CONFIG;\n      config['minWidth'] = isUpdate ? '60vw' : '40vw';\n      config['data'] = {\n        rootOrgID: this.rootOrgID,\n        baseYearKeyID: this.baseYearKeyID,\n        recalculationID: this.recalculationID,\n        recalculationTrigger: entity['trigger'],\n        recalculationRequestID: entity['recalculationRequestID']\n      };\n      this.dialog.open(GroupLevelChangeComponent, config);\n    }\n    viewChange(entity) {\n      switch (entity['trigger']) {\n        case CARBON_CONSTANT.ACTIVITY_DATA_CREATE:\n          this.viewActivityChange(entity, false);\n          break;\n        case CARBON_CONSTANT.ACTIVITY_DATA_UPDATE:\n          this.viewActivityChange(entity, true);\n          break;\n        case CARBON_CONSTANT.SETTING_CHANGE:\n          this.viewGroupLevelChange(entity, true);\n          break;\n        case CARBON_CONSTANT.CUSTOM_EMISSION_FACTOR_CHANGE:\n          this.viewGroupLevelChange(entity, true);\n          break;\n        case CARBON_CONSTANT.CUSTOM_ESTIMATION_FACTOR_CHANGE:\n          this.viewGroupLevelChange(entity, true);\n          break;\n        default:\n          console.log('view change default');\n      }\n    }\n    defaultImage(user) {\n      user = user.split(' ');\n      let firstName = user[0];\n      let lastName = user[1];\n      return this.userService.defaultImage((firstName ? firstName + ' ' : '') + (lastName ? lastName : ''), ProfileImg.PROFILE_IMAGE_DROPDOWN_NAME_VIEW);\n    }\n  }\n  TimelineComponent.ɵfac = function TimelineComponent_Factory(t) {\n    return new (t || TimelineComponent)(i0.ɵɵdirectiveInject(i1.MatDialog), i0.ɵɵdirectiveInject(i2.UserService));\n  };\n  TimelineComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TimelineComponent,\n    selectors: [[\"app-timeline\"]],\n    inputs: {\n      rootOrgID: \"rootOrgID\",\n      baseYearKeyID: \"baseYearKeyID\",\n      recalculationID: \"recalculationID\",\n      timeline: \"timeline\"\n    },\n    decls: 2,\n    vars: 1,\n    consts: [[1, \"timeline\"], [4, \"ngFor\", \"ngForOf\"], [1, \"timeline-item\"], [1, \"timeline-item-icon\", \"faded-icon\"], [1, \"material-icons\"], [1, \"timeline-item-description\", \"centerAlign\"], [\"alt\", \"profile-image\", 1, \"avatar\", \"small\", \"border\", \"d-block\", \"profileImageHeaderView\", 3, \"src\"], [1, \"focus\"], [1, \"lowFocus\"], [\"datetime\", \"timeline.date\"], [4, \"ngIf\", \"ngIfElse\"], [\"increasedPct\", \"\"], [4, \"ngIf\"], [1, \"text-success\", \"fs-6\"], [1, \"material-symbols-outlined\", \"fs-6\"], [\"noChangePct\", \"\"], [1, \"text-danger\", \"fs-6\"], [1, \"material-symbols-outlined\", \"fw-bold\", \"fs-6\"], [1, \"text-primary\", \"fs-6\"], [1, \"btn\", \"btn-link\", \"ms-auto\", \"viewBtn\", 3, \"click\"], [1, \"btn\", \"btn-link\", \"btn-sm\", \"viewBtn\", 3, \"click\"]],\n    template: function TimelineComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"ol\", 0);\n        i0.ɵɵtemplate(1, TimelineComponent_ng_container_1_Template, 22, 10, \"ng-container\", 1);\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngForOf\", ctx.timeline);\n      }\n    },\n    directives: [i3.NgForOf, i3.NgIf],\n    pipes: [i3.DecimalPipe],\n    styles: [\"@import\\\"https://fonts.googleapis.com/css2?family=Outfit:wght@100;200;300;400;500;600;700;800;900&display=swap\\\";*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}[_ngcontent-%COMP%]:root{--c-grey-100: #f4f6f8;--c-grey-200: #e3e3e3;--c-grey-300: #b2b2b2;--c-grey-400: #7b7b7b;--c-grey-500: #3d3d3d;--c-blue-500: #688afd}body[_ngcontent-%COMP%]{line-height:1.5;min-height:100vh;font-family:\\\"Outfit\\\",sans-serif;padding-top:20vh;padding-bottom:20vh}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{font:inherit}img[_ngcontent-%COMP%]{display:block;max-width:100%}.timeline[_ngcontent-%COMP%]{width:100%;max-width:max-content;margin-left:50px;margin-right:auto;display:flex;flex-direction:column;padding:32px 0 32px 32px;border-left:2px solid #e3e3e3;font-size:1.05rem;font-family:Roboto,\\\"Helvetica Neue\\\",sans-serif}.timeline-item[_ngcontent-%COMP%]{display:flex;grid-gap:24px;gap:24px}.timeline-item[_ngcontent-%COMP%] + *[_ngcontent-%COMP%]{margin-top:24px}.timeline-item[_ngcontent-%COMP%] + .extra-space[_ngcontent-%COMP%]{margin-top:48px}.timeline-item-description[_ngcontent-%COMP%]{display:flex;grid-gap:8px;gap:8px;color:#7b7b7b}.timeline-item-description[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{flex-shrink:0}.timeline-item-description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3d3d3d;font-weight:500;text-decoration:none}.timeline-item-description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .timeline-item-description[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:focus{outline:0!important;color:var(--c-blue-500)}.avatar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-radius:50%;overflow:hidden;aspect-ratio:1/1;flex-shrink:0;width:40px;height:40px}.avatar.small[_ngcontent-%COMP%]{width:28px;height:28px}.avatar[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{object-fit:cover}.timeline-item-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:50%;margin-left:-52px;flex-shrink:0;overflow:hidden;box-shadow:0 0 0 6px #fff}.timeline-item-icon[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{width:20px;height:20px}.timeline-item-icon.recalculate-icon[_ngcontent-%COMP%]{background-color:#f3ca20;color:#000000d9}.timeline-item-icon.faded-icon[_ngcontent-%COMP%]{background-color:#e3e3e3;color:#7b7b7b}.lowFocus[_ngcontent-%COMP%]{opacity:.7}.focus[_ngcontent-%COMP%]{color:#3d3d3d;font-family:sans-serif}.recalculate[_ngcontent-%COMP%]{background-image:linear-gradient(to right,green,yellow,red)}.noBaseYear[_ngcontent-%COMP%]{width:30vw}.viewBtn[_ngcontent-%COMP%]{margin:auto 0 auto auto;height:30px}.maxFooterHeight[_ngcontent-%COMP%]{max-height:10px!important}\"]\n  });\n  return TimelineComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
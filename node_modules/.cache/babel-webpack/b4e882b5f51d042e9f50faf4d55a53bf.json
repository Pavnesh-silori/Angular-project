{"ast":null,"code":"import { PROCESS_INPUT_ENUM } from '@netzero/enum/process.enum';\nimport { ActivityConfigEnum } from '@carbon/enum/activity-config.enum';\nimport { ACTIVITY_FORM_TYPE_KEYID_ENUM } from '@carbon/enum/activity-form-enum';\nimport { ACTIVITY_CONFIG_VIEW_PAGE_CONSTANT } from '@carbon/constant/activity.constant';\nimport { faPlus } from '@fortawesome/free-solid-svg-icons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@library/storage-service\";\nimport * as i2 from \"@carbon/controller/installation-detail.controller\";\nimport * as i3 from \"@carbon/controller/process-map.controller\";\nimport * as i4 from \"@angular/router\";\nimport * as i5 from \"@angular/material/card\";\nimport * as i6 from \"@angular/material/expansion\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"@fortawesome/angular-fontawesome\";\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(source_r6.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", source_r6.linkedRecords, \" records collected \");\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_thead_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"thead\");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"th\");\n    i0.ɵɵtext(3, \"Form Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\");\n    i0.ɵɵtext(5, \"Activity Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Form Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Linked Records\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"cursorPointer\": a0\n  };\n};\nconst _c1 = function (a0) {\n  return {\n    \"text-primary\": a0\n  };\n};\nconst _c2 = function (a0, a1) {\n  return {\n    \"cbamBadge\": a0,\n    \"ghgBadge\": a1\n  };\n};\nconst _c3 = function (a0) {\n  return {\n    \"link-primary cursorPointer\": a0\n  };\n};\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_tr_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 27);\n    i0.ɵɵlistener(\"click\", function TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_tr_4_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const config_r15 = restoredCtx.$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(6);\n      return ctx_r16.viewActivityConfig(config_r15);\n    });\n    i0.ɵɵelementStart(2, \"a\", 28);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 29);\n    i0.ɵɵelementStart(7, \"span\", 30);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 31);\n    i0.ɵɵlistener(\"click\", function TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_tr_4_Template_td_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const config_r15 = restoredCtx.$implicit;\n      const activity_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(4);\n      return ctx_r18.linkedRecordsActivity(config_r15, activity_r10);\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 29);\n    i0.ɵɵelementStart(12, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_tr_4_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r17);\n      const config_r15 = restoredCtx.$implicit;\n      const activity_r10 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(4);\n      return ctx_r20.routeToPFF(config_r15, activity_r10.id);\n    });\n    i0.ɵɵelement(13, \"fa-icon\", 33);\n    i0.ɵɵtext(14, \"Record \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const config_r15 = ctx.$implicit;\n    const activity_r10 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c0, ctx_r14.showCursorPointer(config_r15)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c1, ctx_r14.showCursorPointer(config_r15)))(\"matTooltip\", config_r15.name.length > 25 ? config_r15.name : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(config_r15.name ? config_r15.name.length > 25 ? config_r15.name.substring(0, 25) + \"...\" : config_r15.name : ctx_r14.COMMON_CONSTANT.HYPHEN);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(activity_r10.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c2, activity_r10.type[0].keyID == ctx_r14.ACTIVITY_FORM_TYPE_KEYID_ENUM.CBAM_FORM, activity_r10.type[0].keyID == ctx_r14.ACTIVITY_FORM_TYPE_KEYID_ENUM.GHG_FORM));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", activity_r10.type[0].name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c3, config_r15.linkedRecords > 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", config_r15.linkedRecords, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"icon\", ctx_r14.faPlus);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"table\", 25);\n    i0.ɵɵlistener(\"onchange\", function TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_Template_table_onchange_1_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const activity_r10 = i0.ɵɵnextContext().$implicit;\n      const ctx_r23 = i0.ɵɵnextContext(4);\n      return ctx_r23.check(activity_r10);\n    });\n    i0.ɵɵtemplate(2, TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_thead_2_Template, 10, 0, \"thead\", 26);\n    i0.ɵɵelementStart(3, \"tbody\");\n    i0.ɵɵtemplate(4, TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_tr_4_Template, 15, 19, \"tr\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext();\n    const i_r11 = ctx_r26.index;\n    const activity_r10 = ctx_r26.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i_r11 == 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", activity_r10.config);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_ng_container_1_Template, 5, 2, \"ng-container\", 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const activity_r10 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", activity_r10.config.length > 0)(\"ngIfElse\", ctx_r8.noFormsMapped);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_div_1_Template, 4, 2, \"div\", 22);\n    i0.ɵɵtemplate(2, TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_ng_container_2_Template, 2, 2, \"ng-container\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const source_r6 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", source_r6.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", source_r6.activity);\n  }\n}\nconst _c4 = function (a0) {\n  return {\n    \"cursorDefault\": a0\n  };\n};\nconst _c5 = function (a0) {\n  return {\n    \"text-secondary\": a0\n  };\n};\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-expansion-panel\", 19);\n    i0.ɵɵelementStart(2, \"mat-expansion-panel-header\");\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵelementStart(4, \"div\", 20);\n    i0.ɵɵelementStart(5, \"mat-panel-title\");\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 21);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, TrackProgressComponent_mat_expansion_panel_18_ng_container_15_ng_container_10_Template, 3, 2, \"ng-container\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const input_r4 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r2.canAddRecord(\"INPUT\", input_r4.keyID));\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassMap(i0.ɵɵpureFunction1(8, _c4, !ctx_r2.canAddRecord(\"INPUT\", input_r4.keyID)));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassMap(i0.ɵɵpureFunction1(10, _c5, !ctx_r2.canAddRecord(\"INPUT\", input_r4.keyID)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", input_r4.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.canAddRecord(\"INPUT\", input_r4.keyID) ? ctx_r2.getTotalRecords(input_r4) + \" records collected\" : \"No action required\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", input_r4.source);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵelementStart(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const source_r29 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(source_r29.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", source_r29.linkedRecords, \" records collected \");\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_thead_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"thead\");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"th\");\n    i0.ɵɵtext(3, \"Form Name\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"th\");\n    i0.ɵɵtext(5, \"Activity Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"th\");\n    i0.ɵɵtext(7, \"Form Type\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"th\");\n    i0.ɵɵtext(9, \"Linked Records\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_tr_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r40 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"tr\");\n    i0.ɵɵelementStart(1, \"td\", 27);\n    i0.ɵɵlistener(\"click\", function TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_tr_4_Template_td_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const config_r38 = restoredCtx.$implicit;\n      const ctx_r39 = i0.ɵɵnextContext(6);\n      return ctx_r39.viewActivityConfig(config_r38);\n    });\n    i0.ɵɵelementStart(2, \"a\", 28);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 29);\n    i0.ɵɵelementStart(7, \"span\", 30);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\", 31);\n    i0.ɵɵlistener(\"click\", function TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_tr_4_Template_td_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const config_r38 = restoredCtx.$implicit;\n      const activity_r33 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r41 = i0.ɵɵnextContext(4);\n      return ctx_r41.linkedRecordsActivity(config_r38, activity_r33);\n    });\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"td\", 29);\n    i0.ɵɵelementStart(12, \"button\", 32);\n    i0.ɵɵlistener(\"click\", function TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_tr_4_Template_button_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r40);\n      const config_r38 = restoredCtx.$implicit;\n      const activity_r33 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r43 = i0.ɵɵnextContext(4);\n      return ctx_r43.routeToPFF(config_r38, activity_r33.id);\n    });\n    i0.ɵɵelement(13, \"fa-icon\", 33);\n    i0.ɵɵtext(14, \"Record \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const config_r38 = ctx.$implicit;\n    const activity_r33 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r37 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c0, ctx_r37.showCursorPointer(config_r38)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(12, _c1, ctx_r37.showCursorPointer(config_r38)))(\"matTooltip\", config_r38.name.length > 25 ? config_r38.name : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(config_r38.name ? config_r38.name.length > 25 ? config_r38.name.substring(0, 25) + \"...\" : config_r38.name : ctx_r37.COMMON_CONSTANT.HYPHEN);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(activity_r33.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(14, _c2, activity_r33.type[0].keyID == ctx_r37.ACTIVITY_FORM_TYPE_KEYID_ENUM.CBAM_FORM, activity_r33.type[0].keyID == ctx_r37.ACTIVITY_FORM_TYPE_KEYID_ENUM.GHG_FORM));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", activity_r33.type[0].name, \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(17, _c3, config_r38.linkedRecords > 0));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", config_r38.linkedRecords, \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"icon\", ctx_r37.faPlus);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"table\", 34);\n    i0.ɵɵtemplate(2, TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_thead_2_Template, 10, 0, \"thead\", 26);\n    i0.ɵɵelementStart(3, \"tbody\");\n    i0.ɵɵtemplate(4, TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_tr_4_Template, 15, 19, \"tr\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r46 = i0.ɵɵnextContext();\n    const i_r34 = ctx_r46.index;\n    const activity_r33 = ctx_r46.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i_r34 == 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", activity_r33.config);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_ng_container_1_Template, 5, 2, \"ng-container\", 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const activity_r33 = ctx.$implicit;\n    const ctx_r31 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", activity_r33.config.length > 0)(\"ngIfElse\", ctx_r31.noFormsMapped);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_div_1_Template, 4, 2, \"div\", 22);\n    i0.ɵɵtemplate(2, TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_ng_container_2_Template, 2, 2, \"ng-container\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const source_r29 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", source_r29.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", source_r29.activity);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"mat-expansion-panel\", 19);\n    i0.ɵɵelementStart(2, \"mat-expansion-panel-header\");\n    i0.ɵɵelementStart(3, \"div\", 12);\n    i0.ɵɵelementStart(4, \"div\", 20);\n    i0.ɵɵelementStart(5, \"mat-panel-title\");\n    i0.ɵɵelementStart(6, \"span\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 21);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(10, TrackProgressComponent_mat_expansion_panel_18_ng_container_20_ng_container_10_Template, 3, 2, \"ng-container\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const output_r27 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"disabled\", !ctx_r3.canAddRecord(\"OUTPUT\", output_r27.keyID));\n    i0.ɵɵadvance(5);\n    i0.ɵɵclassMap(i0.ɵɵpureFunction1(6, _c5, !ctx_r3.canAddRecord(\"OUTPUT\", output_r27.keyID)));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", output_r27.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.canAddRecord(\"OUTPUT\", output_r27.keyID) ? ctx_r3.getTotalRecords(output_r27) + \" records collected\" : \"No action required\", \" \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", output_r27.source);\n  }\n}\nfunction TrackProgressComponent_mat_expansion_panel_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-expansion-panel\", 10);\n    i0.ɵɵelementStart(1, \"mat-expansion-panel-header\", 11);\n    i0.ɵɵelementStart(2, \"div\", 12);\n    i0.ɵɵelementStart(3, \"div\", 13);\n    i0.ɵɵelementStart(4, \"strong\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 14);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 14);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"div\", 15);\n    i0.ɵɵelementStart(11, \"div\", 16);\n    i0.ɵɵelementStart(12, \"strong\");\n    i0.ɵɵtext(13, \"Input\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"mat-accordion\", 8);\n    i0.ɵɵtemplate(15, TrackProgressComponent_mat_expansion_panel_18_ng_container_15_Template, 11, 12, \"ng-container\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"div\", 18);\n    i0.ɵɵelementStart(17, \"strong\");\n    i0.ɵɵtext(18, \"Output\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"mat-accordion\", 8);\n    i0.ɵɵtemplate(20, TrackProgressComponent_mat_expansion_panel_18_ng_container_20_Template, 11, 8, \"ng-container\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const process_r1 = ctx.$implicit;\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\"Process Name - \", process_r1.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", process_r1.activityCount, \" Activity forms\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", process_r1.linkedRecords, \" records collected\");\n    i0.ɵɵadvance(6);\n    i0.ɵɵproperty(\"ngForOf\", process_r1.input);\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngForOf\", process_r1.output);\n  }\n}\nexport let TrackProgressComponent = /*#__PURE__*/(() => {\n  class TrackProgressComponent {\n    constructor(stroageService, installationDetailController, processMapController, activatedRoute, router) {\n      this.stroageService = stroageService;\n      this.installationDetailController = installationDetailController;\n      this.processMapController = processMapController;\n      this.activatedRoute = activatedRoute;\n      this.router = router;\n      this.ACTIVITY_FORM_TYPE_KEYID_ENUM = ACTIVITY_FORM_TYPE_KEYID_ENUM;\n      this.totalActivites = 0;\n      this.linkedRecords = 0;\n      this.faPlus = faPlus;\n      this.entityTypeWithoutRecord = [PROCESS_INPUT_ENUM.RAW_MATERIAL, PROCESS_INPUT_ENUM.INTERMEDIATE_PRODUCT];\n    }\n    ngOnInit() {\n      this.currentOrgID = this.stroageService.getStorage('currentOrgID');\n      this.activatedRoute.queryParams.subscribe(queryParams => {\n        if (queryParams.runID) {\n          this.runID = queryParams.runID;\n        }\n        if (this.runID) {\n          this.getByRunID();\n        }\n      });\n    }\n    getByRunID() {\n      this.installationDetailController.getInstallationByRunID(this.currentOrgID, this.runID).subscribe(response => {\n        this.startDate = response.productRunConfig.periodStartDate;\n        this.endDate = response.productRunConfig.periodEndDate;\n      });\n    }\n    ngOnChanges() {\n      if (this.isDataCollection || this.stepperIndex == 3) {\n        this.getTrackActivity(this.runID);\n      }\n    }\n    refreshData() {\n      this.getTrackActivity(this.runID);\n    }\n    getTrackActivity(runID) {\n      this.processMapController.getTrackingRecord(this.currentOrgID, runID).subscribe(res => {\n        this.process = res;\n        this.changeActivityJson();\n        this.totalActivity();\n      });\n    }\n    changeActivityJson() {\n      this.process.forEach(process => {\n        process.input.forEach(input => {\n          input.source.forEach(source => {\n            // Initialize configData to false for each source\n            source.configData = false;\n            for (let i = 0; i < source.activity.length; i++) {\n              const activity = source.activity[i];\n              if (activity.id != null) {\n                // Move the activity with non-null id to the first position\n                source.activity.splice(i, 1); // Remove the activity from its current position\n                source.activity.unshift(activity); // Insert the activity at the beginning\n                break; // Break out of the loop as we have found and moved the activity\n              }\n            }\n            // After ensuring the first activity has a non-null id (if present), update configData\n            source.activity.forEach(activity => {\n              activity.config.forEach(config => {\n                if (config.id != null) {\n                  source.configData = true;\n                } else {\n                  source.configData = false;\n                }\n              });\n            });\n          });\n        });\n      });\n    }\n    totalActivity() {\n      this.totalActivites = 0;\n      this.linkedRecords = 0;\n      this.process.forEach(res => {\n        this.totalActivites += res.activityCount;\n        this.linkedRecords += res.linkedRecords;\n      });\n    }\n    routeToPFF(activityConfigData, activityID) {\n      this.router.navigate([`/activity-data/activity/${activityConfigData.activityKeyID}`, {\n        outlets: {\n          activityData: ['create'],\n          activityConfig: ['update']\n        }\n      }], {\n        queryParams: {\n          activityID: activityID,\n          origin: ActivityConfigEnum.AD_HOC,\n          action: 'create',\n          tabView: 'YES',\n          usePFF: 'YES',\n          activityConfigID: activityConfigData.id\n        }\n      });\n    }\n    viewActivityConfig(row) {\n      if (ACTIVITY_CONFIG_VIEW_PAGE_CONSTANT.includes(row.activityKeyID)) {\n        this.router.navigate(['/carbon-setting/activity-config', row.id, 'activity', row.activityKeyID, {\n          outlets: {\n            activityConfig: ['view']\n          }\n        }], {\n          queryParams: {\n            origin: ActivityConfigEnum.PFF,\n            activityKeyID: row.activityKeyID\n          }\n        });\n      } else {\n        return;\n      }\n    }\n    showCursorPointer(row) {\n      let isCursorPointer = false;\n      if (ACTIVITY_CONFIG_VIEW_PAGE_CONSTANT.includes(row.activityKeyID)) {\n        isCursorPointer = true;\n      } else {\n        isCursorPointer = false;\n      }\n      return isCursorPointer;\n    }\n    linkedRecordsActivity(linkedRecord, activity) {\n      if (linkedRecord.linkedRecords == 0) {\n        return;\n      }\n      if (linkedRecord.linkedRecordsCount != 0) {\n        if (activity.type[0].keyID == ACTIVITY_FORM_TYPE_KEYID_ENUM.GHG_FORM) {\n          this.router.navigate([`/activity-data/${linkedRecord.activityKeyID}/page`], {\n            queryParams: {\n              activityConfigID: linkedRecord.id,\n              dateFlag: false,\n              startDate: this.startDate,\n              endDate: this.endDate\n            }\n          });\n        } else {\n          this.router.navigate([`/cbam/activity-data/activity/${linkedRecord.activityKeyID}/page`], {\n            queryParams: {\n              activityConfigID: linkedRecord.id,\n              dateFlag: false,\n              startDate: this.startDate,\n              endDate: this.endDate\n            }\n          });\n        }\n      }\n    }\n    canAddRecord(type, typeKeyID) {\n      if (type == 'INPUT') {\n        return !this.entityTypeWithoutRecord.includes(typeKeyID);\n      } else {\n        return true;\n      }\n    }\n    getTotalRecords(entity) {\n      let totalRecords = 0;\n      let source = entity.source;\n      source.forEach(sourceType => {\n        totalRecords += sourceType.linkedRecords;\n      });\n      return totalRecords;\n    }\n  }\n  TrackProgressComponent.ɵfac = function TrackProgressComponent_Factory(t) {\n    return new (t || TrackProgressComponent)(i0.ɵɵdirectiveInject(i1.StorageService), i0.ɵɵdirectiveInject(i2.InstallationDetailController), i0.ɵɵdirectiveInject(i3.ProcessMappingController), i0.ɵɵdirectiveInject(i4.ActivatedRoute), i0.ɵɵdirectiveInject(i4.Router));\n  };\n  TrackProgressComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: TrackProgressComponent,\n    selectors: [[\"app-track-progress\"]],\n    inputs: {\n      isDataCollection: \"isDataCollection\",\n      stepperIndex: \"stepperIndex\"\n    },\n    features: [i0.ɵɵNgOnChangesFeature],\n    decls: 19,\n    vars: 3,\n    consts: [[1, \"border\", \"cardOverwrite\"], [1, \"cardTitle\", \"pb-3\"], [1, \"row\", \"pb-3\"], [1, \"col-sm-3\"], [1, \"border\", \"p-3\", \"curved-box\"], [1, \"m-0\"], [1, \"col-sm-3\", \"pt-2\"], [1, \"material-symbols-outlined\", \"text-primary\", \"cursorPointer\", \"fontRefresh\", 3, \"click\"], [\"multi\", \"true\"], [\"class\", \"cardOverwrite matAccordion mb-2\", \"expanded\", \"false\", 4, \"ngFor\", \"ngForOf\"], [\"expanded\", \"false\", 1, \"cardOverwrite\", \"matAccordion\", \"mb-2\"], [1, \"centerAlignVertical\", \"panelHeader\"], [1, \"row\", \"w-100\"], [1, \"col-sm-8\", \"centerAlignVertical\"], [1, \"col-sm-2\"], [1, \"cardOverwrite\", \"border\", \"card-body\", \"bg-light\"], [1, \"text-secondary\", \"fs-5\", \"pb-3\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-secondary\", \"fs-5\", \"pb-3\", \"pt-3\"], [\"expanded\", \"false\", 1, \"cardOverwrite\", \"mb-2\", 3, \"disabled\"], [1, \"col-sm-8\"], [1, \"col-sm-4\", \"text-end\"], [\"class\", \"text-secondary bg-light px-3 py-2 cardOverwrite d-flex justify-content-between\", 4, \"ngIf\"], [1, \"text-secondary\", \"bg-light\", \"px-3\", \"py-2\", \"cardOverwrite\", \"d-flex\", \"justify-content-between\"], [4, \"ngIf\", \"ngIfElse\"], [1, \"table\", \"pt-3\", 3, \"onchange\"], [4, \"ngIf\"], [\"mat-cell\", \"\", 1, \"fixWidth\", 3, \"ngClass\", \"click\"], [3, \"ngClass\", \"matTooltip\"], [1, \"pt-3\", \"fixWidth\"], [1, \"badge\", \"rounded-pill\", \"activityFormTypeLabel\", \"cbamBadge\", 3, \"ngClass\"], [1, \"pt-3\", \"fixWidth\", 3, \"ngClass\", \"click\"], [1, \"btn\", \"btn-success\", 3, \"click\"], [1, \"me-1\", 3, \"icon\"], [1, \"table\", \"pt-3\"]],\n    template: function TrackProgressComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"mat-card\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵtext(2, \" 4. Track progress \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2);\n        i0.ɵɵelementStart(4, \"div\", 3);\n        i0.ɵɵelementStart(5, \"div\", 4);\n        i0.ɵɵelementStart(6, \"p\", 5);\n        i0.ɵɵelementStart(7, \"strong\");\n        i0.ɵɵtext(8);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"div\", 3);\n        i0.ɵɵelementStart(10, \"div\", 4);\n        i0.ɵɵelementStart(11, \"p\", 5);\n        i0.ɵɵelementStart(12, \"strong\");\n        i0.ɵɵtext(13);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(14, \"div\", 6);\n        i0.ɵɵelementStart(15, \"span\", 7);\n        i0.ɵɵlistener(\"click\", function TrackProgressComponent_Template_span_click_15_listener() {\n          return ctx.refreshData();\n        });\n        i0.ɵɵtext(16, \" refresh \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(17, \"mat-accordion\", 8);\n        i0.ɵɵtemplate(18, TrackProgressComponent_mat_expansion_panel_18_Template, 21, 5, \"mat-expansion-panel\", 9);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(8);\n        i0.ɵɵtextInterpolate1(\"\", ctx.totalActivites, \" Total activity forms mapped\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"\", ctx.linkedRecords, \" Total records collected\");\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"ngForOf\", ctx.process);\n      }\n    },\n    directives: [i5.MatCard, i6.MatAccordion, i7.NgForOf, i6.MatExpansionPanel, i6.MatExpansionPanelHeader, i6.MatExpansionPanelTitle, i7.NgIf, i7.NgClass, i8.FaIconComponent],\n    styles: [\".activityContainer[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:20px;display:flex;align-items:center}.activityContainerLeft[_ngcontent-%COMP%]{flex:1}.activityContainerRight[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:flex-end}.activityContainerRightInner[_ngcontent-%COMP%]{display:flex;align-items:center}.activityTitle[_ngcontent-%COMP%]{color:gray;text-transform:capitalize;font-size:14px;font-weight:700}.activitySubtitle[_ngcontent-%COMP%]{color:gray;font-size:12px;font-weight:200;text-transform:none}.matAccordion[_ngcontent-%COMP%]{box-shadow:none!important;background:whitesmoke;border-radius:16px!important}.subType[_ngcontent-%COMP%]{margin:5px}.custom-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start}.table[_ngcontent-%COMP%]{width:100%}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:8px;text-align:left}th[_ngcontent-%COMP%]{border:none}.fontRefresh[_ngcontent-%COMP%]{font-size:xx-large}.fixWidth[_ngcontent-%COMP%]{width:150px!important;max-width:150px!important;min-width:150px!important}.panelHeader[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-top:50px}.box[_ngcontent-%COMP%]{width:200px;height:100px;border:1px solid #ccc;border-radius:10px;padding:20px;text-align:center;box-shadow:0 4px 8px #0000001a;background-color:#f9f9f9}.highlight[_ngcontent-%COMP%]{font-size:24px;font-weight:bold;color:#333}.fade[_ngcontent-%COMP%]{color:#888}.refresh-button[_ngcontent-%COMP%]{margin-top:20px;padding:10px 20px;border:none;border-radius:5px;background-color:#4caf50;color:#fff;font-size:16px;cursor:pointer}.curved-box[_ngcontent-%COMP%]{border-radius:15px!important;background-color:#f8f9fa}.centerAlignVertical[_ngcontent-%COMP%]{display:flex;align-items:center}\"]\n  });\n  return TrackProgressComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}
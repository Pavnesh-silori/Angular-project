import { Injectable, Inject, Optional } from '@angular/core';
import { DOCUMENT } from '@angular/common';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as ɵngcc0 from '@angular/core';
const DEGREE_IN_RADIANS = Math.PI / 180;
export class RoundProgressService {
    constructor(document) {
        this.supportsSvg = !!(document &&
            document.createElementNS &&
            document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect);
        this.base = document && document.head.querySelector('base');
        this.hasPerf =
            typeof window !== 'undefined' &&
                window.performance &&
                window.performance.now &&
                typeof window.performance.now() === 'number';
    }
    /**
     * Resolves a SVG color against the page's `base` tag.
     */
    resolveColor(color) {
        if (this.base && this.base.href) {
            const hashIndex = color.indexOf('#');
            if (hashIndex > -1 && color.indexOf('url') > -1) {
                return color.slice(0, hashIndex) + location.href + color.slice(hashIndex);
            }
        }
        return color;
    }
    /**
     * Generates a timestamp.
     */
    getTimestamp() {
        return this.hasPerf ? window.performance.now() : Date.now();
    }
    /**
     * Generates the value for an SVG arc.
     * @param current       Current value.
     * @param total         Maximum value.
     * @param pathRadius    Radius of the SVG path.
     * @param elementRadius Radius of the SVG container.
     * @param isSemicircle  Whether the element should be a semicircle.
     */
    getArc(current, total, pathRadius, elementRadius, isSemicircle = false) {
        const value = Math.max(0, Math.min(current || 0, total));
        const maxAngle = isSemicircle ? 180 : 359.9999;
        const percentage = total === 0 ? maxAngle : (value / total) * maxAngle;
        const start = this._polarToCartesian(elementRadius, pathRadius, percentage);
        const end = this._polarToCartesian(elementRadius, pathRadius, 0);
        const arcSweep = percentage <= 180 ? 0 : 1;
        return `M ${start} A ${pathRadius} ${pathRadius} 0 ${arcSweep} 0 ${end}`;
    }
    /**
     * Converts polar cooradinates to Cartesian.
     * @param elementRadius  Radius of the wrapper element.
     * @param pathRadius     Radius of the path being described.
     * @param angleInDegrees Degree to be converted.
     */
    _polarToCartesian(elementRadius, pathRadius, angleInDegrees) {
        const angleInRadians = (angleInDegrees - 90) * DEGREE_IN_RADIANS;
        const x = elementRadius + pathRadius * Math.cos(angleInRadians);
        const y = elementRadius + pathRadius * Math.sin(angleInRadians);
        return x + ' ' + y;
    }
}
RoundProgressService.ɵfac = function RoundProgressService_Factory(t) { return new (t || RoundProgressService)(ɵngcc0.ɵɵinject(DOCUMENT, 8)); };
RoundProgressService.ɵprov = i0.ɵɵdefineInjectable({ factory: function RoundProgressService_Factory() { return new RoundProgressService(i0.ɵɵinject(i1.DOCUMENT, 8)); }, token: RoundProgressService, providedIn: "root" });
RoundProgressService.ctorParameters = () => [
    { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [DOCUMENT,] }] }
];
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(RoundProgressService, [{
        type: Injectable,
        args: [{ providedIn: 'root' }]
    }], function () { return [{ type: undefined, decorators: [{
                type: Optional
            }, {
                type: Inject,
                args: [DOCUMENT]
            }] }]; }, null); })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicm91bmQtcHJvZ3Jlc3Muc2VydmljZS5qcyIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2xpYi9yb3VuZC1wcm9ncmVzcy9yb3VuZC1wcm9ncmVzcy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBQyxVQUFVLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUMzRCxPQUFPLEVBQUMsUUFBUSxFQUFDLE1BQU0saUJBQWlCLENBQUM7QUFFekM7QUFBc0M7O0FBQXRDLE1BQU0saUJBQWlCLEdBQVcsSUFBSSxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUM7QUFHaEQsTUFBTSxPQUFPLG9CQUFvQjtBQUNoQyxJQUlDLFlBQTBDLFFBQWE7QUFDeEQsUUFBRyxJQUFJLENBQUMsV0FBVyxHQUFHLENBQUMsQ0FBQyxDQUNuQixRQUFRO0FBQ2IsWUFBSyxRQUFRLENBQUMsZUFBZTtBQUM3QixZQUFLLFFBQVEsQ0FBQyxlQUFlLENBQUMsNEJBQTRCLEVBQUUsS0FBSyxDQUFDLENBQUMsYUFBYSxDQUM1RSxDQUFDO0FBRU4sUUFBSSxJQUFJLENBQUMsSUFBSSxHQUFHLFFBQVEsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUMvRCxRQUFHLElBQUksQ0FBQyxPQUFPO0FBQ2YsWUFBSyxPQUFPLE1BQU0sS0FBSyxXQUFXO0FBQ2xDLGdCQUFLLE1BQU0sQ0FBQyxXQUFXO0FBQ3ZCLGdCQUFLLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRztBQUMzQixnQkFBSyxPQUFPLE1BQU0sQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLEtBQUssUUFBUSxDQUFDO0FBQ2xELElBQUMsQ0FBQztBQUVILElBQUU7QUFDRDtBQUNHLE9BQUM7QUFDSixJQUFDLFlBQVksQ0FBQyxLQUFhO0FBQUssUUFDN0IsSUFBSSxJQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMs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QUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUdBLEFBQUEsQUFBQSxBQUFBLEFBS0EsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBRUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUNBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFDQSxBQUFBLEFBRUEsQUFFQSxBQUNBLEFBQUEsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFFQSxBQU9BLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFFQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUVBLEFBS0EsQUFDQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQ0EsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUNBLEFBQUEsQUExRUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSxBQU1BLEFBQUEsQUFBQSxBQUFBLEFBQUEsQUFBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0YWJsZSwgSW5qZWN0LCBPcHRpb25hbH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0RPQ1VNRU5UfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuXG5jb25zdCBERUdSRUVfSU5fUkFESUFOUzogbnVtYmVyID0gTWF0aC5QSSAvIDE4MDtcblxuQEluamVjdGFibGUoe3Byb3ZpZGVkSW46ICdyb290J30pXG5leHBvcnQgY2xhc3MgUm91bmRQcm9ncmVzc1NlcnZpY2Uge1xuICBwcml2YXRlIGJhc2U6IEhUTUxCYXNlRWxlbWVudDtcbiAgcHJpdmF0ZSBoYXNQZXJmOiBib29sZWFuO1xuICBwdWJsaWMgc3VwcG9ydHNTdmc6IGJvb2xlYW47XG5cbiAgY29uc3RydWN0b3IoQE9wdGlvbmFsKCkgQEluamVjdChET0NVTUVOVCkgZG9jdW1lbnQ6IGFueSkge1xuICAgIHRoaXMuc3VwcG9ydHNTdmcgPSAhIShcbiAgICAgIGRvY3VtZW50ICYmXG4gICAgICBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMgJiZcbiAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnc3ZnJykuY3JlYXRlU1ZHUmVjdFxuICAgICk7XG5cbiAgICB0aGlzLmJhc2UgPSBkb2N1bWVudCAmJiBkb2N1bWVudC5oZWFkLnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcbiAgICB0aGlzLmhhc1BlcmYgPVxuICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHdpbmRvdy5wZXJmb3JtYW5jZSAmJlxuICAgICAgd2luZG93LnBlcmZvcm1hbmNlLm5vdyAmJlxuICAgICAgdHlwZW9mIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKSA9PT0gJ251bWJlcic7XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZXMgYSBTVkcgY29sb3IgYWdhaW5zdCB0aGUgcGFnZSdzIGBiYXNlYCB0YWcuXG4gICAqL1xuICByZXNvbHZlQ29sb3IoY29sb3I6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuYmFzZSAmJiB0aGlzLmJhc2UuaHJlZikge1xuICAgICAgY29uc3QgaGFzaEluZGV4ID0gY29sb3IuaW5kZXhPZignIycpO1xuXG4gICAgICBpZiAoaGFzaEluZGV4ID4gLTEgJiYgY29sb3IuaW5kZXhPZigndXJsJykgPiAtMSkge1xuICAgICAgICByZXR1cm4gY29sb3Iuc2xpY2UoMCwgaGFzaEluZGV4KSArIGxvY2F0aW9uLmhyZWYgKyBjb2xvci5zbGljZShoYXNoSW5kZXgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBjb2xvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSB0aW1lc3RhbXAuXG4gICAqL1xuICBnZXRUaW1lc3RhbXAoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5oYXNQZXJmID8gd2luZG93LnBlcmZvcm1hbmNlLm5vdygpIDogRGF0ZS5ub3coKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgdGhlIHZhbHVlIGZvciBhbiBTVkcgYXJjLlxuICAgKiBAcGFyYW0gY3VycmVudCAgICAgICBDdXJyZW50IHZhbHVlLlxuICAgKiBAcGFyYW0gdG90YWwgICAgICAgICBNYXhpbXVtIHZhbHVlLlxuICAgKiBAcGFyYW0gcGF0aFJhZGl1cyAgICBSYWRpdXMgb2YgdGhlIFNWRyBwYXRoLlxuICAgKiBAcGFyYW0gZWxlbWVudFJhZGl1cyBSYWRpdXMgb2YgdGhlIFNWRyBjb250YWluZXIuXG4gICAqIEBwYXJhbSBpc1NlbWljaXJjbGUgIFdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGJlIGEgc2VtaWNpcmNsZS5cbiAgICovXG4gIGdldEFyYyhjdXJyZW50OiBudW1iZXIsIHRvdGFsOiBudW1iZXIsIHBhdGhSYWRpdXM6IG51bWJlciwgZWxlbWVudFJhZGl1czogbnVtYmVyLCBpc1NlbWljaXJjbGUgPSBmYWxzZSk6IHN0cmluZyB7XG4gICAgY29uc3QgdmFsdWUgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihjdXJyZW50IHx8IDAsIHRvdGFsKSk7XG4gICAgY29uc3QgbWF4QW5nbGUgPSBpc1NlbWljaXJjbGUgPyAxODAgOiAzNTkuOTk5OTtcbiAgICBjb25zdCBwZXJjZW50YWdlID0gdG90YWwgPT09IDAgPyBtYXhBbmdsZSA6ICh2YWx1ZSAvIHRvdGFsKSAqIG1heEFuZ2xlO1xuICAgIGNvbnN0IHN0YXJ0ID0gdGhpcy5fcG9sYXJUb0NhcnRlc2lhbihlbGVtZW50UmFkaXVzLCBwYXRoUmFkaXVzLCBwZXJjZW50YWdlKTtcbiAgICBjb25zdCBlbmQgPSB0aGlzLl9wb2xhclRvQ2FydGVzaWFuKGVsZW1lbnRSYWRpdXMsIHBhdGhSYWRpdXMsIDApO1xuICAgIGNvbnN0IGFyY1N3ZWVwID0gcGVyY2VudGFnZSA8PSAxODAgPyAwIDogMTtcblxuICAgIHJldHVybiBgTSAke3N0YXJ0fSBBICR7cGF0aFJhZGl1c30gJHtwYXRoUmFkaXVzfSAwICR7YXJjU3dlZXB9IDAgJHtlbmR9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBwb2xhciBjb29yYWRpbmF0ZXMgdG8gQ2FydGVzaWFuLlxuICAgKiBAcGFyYW0gZWxlbWVudFJhZGl1cyAgUmFkaXVzIG9mIHRoZSB3cmFwcGVyIGVsZW1lbnQuXG4gICAqIEBwYXJhbSBwYXRoUmFkaXVzICAgICBSYWRpdXMgb2YgdGhlIHBhdGggYmVpbmcgZGVzY3JpYmVkLlxuICAgKiBAcGFyYW0gYW5nbGVJbkRlZ3JlZXMgRGVncmVlIHRvIGJlIGNvbnZlcnRlZC5cbiAgICovXG4gIHByaXZhdGUgX3BvbGFyVG9DYXJ0ZXNpYW4oZWxlbWVudFJhZGl1czogbnVtYmVyLCBwYXRoUmFkaXVzOiBudW1iZXIsIGFuZ2xlSW5EZWdyZWVzOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IGFuZ2xlSW5SYWRpYW5zID0gKGFuZ2xlSW5EZWdyZWVzIC0gOTApICogREVHUkVFX0lOX1JBRElBTlM7XG4gICAgY29uc3QgeCA9IGVsZW1lbnRSYWRpdXMgKyBwYXRoUmFkaXVzICogTWF0aC5jb3MoYW5nbGVJblJhZGlhbnMpO1xuICAgIGNvbnN0IHkgPSBlbGVtZW50UmFkaXVzICsgcGF0aFJhZGl1cyAqIE1hdGguc2luKGFuZ2xlSW5SYWRpYW5zKTtcblxuICAgIHJldHVybiB4ICsgJyAnICsgeTtcbiAgfVxufVxuIl19